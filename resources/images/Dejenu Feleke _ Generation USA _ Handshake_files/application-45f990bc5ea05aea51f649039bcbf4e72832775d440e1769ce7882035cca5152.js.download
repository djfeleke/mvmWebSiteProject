function initializeToastr(){if("undefined"==typeof toastr)return null;toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,showDuration:300,hideDuration:300,timeOut:8e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"slideDown",hideMethod:"fadeOut",closeOnHover:!1},window.Handshake.Helpers.notifySuccess=function(e,t){toastr.success(window.Handshake.Helpers.escapeString(e)),_.isFunction(t)&&setTimeout(t,1500)},window.Handshake.Helpers.notifyError=function(e){toastr.error(window.Handshake.Helpers.escapeString(e))},window.Handshake.Helpers.notifyInfo=function(e){toastr.info(window.Handshake.Helpers.escapeString(e))}}function fullscreenCapable(){return element=document.documentElement,!!(element.requestFullscreen||element.mozRequestFullScreen||element.webkitRequestFullscreen||element.msRequestFullscreen)}function launchIntoFullscreen(){element=document.body,element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen():element.msRequestFullscreen&&(document.documentElement.style.width="100%",document.documentElement.style.height="100%",document.documentElement.msRequestFullscreen()),element.addEventListener("contextmenu",function(e){return e.preventDefault(),!1},!1)}function $buo_f(){if(!window.Handshake.in_production)return!0;var e=document.createElement("script");e.src="https://browser-update.org/update.min.js",e.async=!0,e.defer=!0,document.body.appendChild(e)}function UNSAFE__HandshakeI18n(e,t){return this.loadDictionary(e,t),this}if("function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),s=1;s<arguments.length;s++){var i=arguments[s];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),Handshake={},window.Handshake=Handshake,"undefined"==typeof console&&(console={log:function(){}}),Handshake.Helpers={},"undefined"==typeof window.Turbolinks?window.PAGE_CHANGE_EVENT="ready":window.PAGE_CHANGE_EVENT="page:change",Handshake.Helpers.escapeString=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},Handshake.Helpers.htmlTextIsPresent=function(e){var t=jQuery.parseHTML(e);return!!t&&$(t).text().trim().length>0},window.Handshake.Helpers.truncateString=function(e,t){var s="";return unwrapped=ko.utils.unwrapObservable(e),unwrapped&&(s=unwrapped.length>t?unwrapped.slice(0,t).trim()+"...":unwrapped),s},window.Handshake.Helpers.numberWithCommas=function(e){if(e||0===e)return e=String(e).replace(/[^0-9.]/g,""),parts=e.split("."),result=parts[0].toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,","),parts.length>1&&(result+="."+parts[1]),result},window.Handshake.Helpers.ordinalize=function(e){return e=Number(e).toFixed(0),s=["th","st","nd","rd"],v=e%100,e+(s[(v-20)%10]||s[v]||s[0])},window.Handshake.Helpers.pluralizeString=function(e,t,s){return 1==t?e:e+s},window.Handshake.Helpers.truncateStringIfNeeded=function(e,t){var s="";return e&&(s=e.length>t?Handshake.Helpers.truncateString(e,t):e),s},window.Handshake.Helpers.getInitialPageFromStorage=function(){try{rv=parseInt(localStorage.getItem(window.location.pathname+"_page"),10),isNaN(rv)&&(rv=0)}catch(e){rv=0}return rv},window.Handshake.Helpers.setInitialPageInStorage=function(e){if(localStorage)try{localStorage.setItem(window.location.pathname+"_page",e)}catch(t){console.log(t)}},window.Handshake.Helpers.scrollToBottom=function(e){$(e).scrollTop($(e).height())},puts=function(e){console.log(e)},getUrlVar=function(e,t){var s;return(s=new RegExp(e+"=([^&]*)","i").exec(t))&&unescape(s[1].replace(/\+/g," "))||""},getUrlParams=function(){var e=location.search.substring(1).replace("?is_ios_request=true",""),t={};if(e.length>0)for(var s,i=/([^&=]+)=?([^&]*)/g,n=/\+/g,o=function(e){return decodeURIComponent(e.replace(n," "))};s=i.exec(e);){var r=o(s[1]),a=o(s[2]);"[]"===r.substring(r.length-2)?(t[r=r.substring(0,r.length-2)]||(t[r]=[])).push(a):t[r]=a}return t},urlsafeEncode64=function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_")},urlsafeDecode64=function(e){return atob(e.replace(/-/g,"+").replace(/_/g,"/"))},removeFromArray=function(e,t){var s,i;if((s=e.indexOf(t))>-1)return[].splice.apply(e,[s,s-s+1].concat(i=[])),i},capitalizeString=function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)},endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},getPathName=function(){return window.location.pathname},getPath=function(){return window.location.pathname.split("/")},stickyElementOnScroll=function(e,t){$(window).scroll(function(){e&&($(window).scrollTop()>e.offset().top-(t||40)?$(".fixed-at-top").addClass("fixit"):$(".fixed-at-top").removeClass("fixit"))})},stickyRow=function(){function e(){var e=$(window).scrollTop(),t=$(window).height(),s=document.body.offsetHeight,i=$(".sticky-row"),n=i.parent().width(),o=$(".sticky-row-background");e+t>s+20?(i.removeClass("stuck").width(n),o.hide()):e+t<s-20&&(i.addClass("stuck").width(n),o.show())}-1==window.location.pathname.search(/\/new$/)&&0!=$(".sticky-row").length&&(e(),$(window).scroll(e),$(window).resize(e))},$(window).on(window.PAGE_CHANGE_EVENT,stickyRow),$(document).on(window.PAGE_CHANGE_EVENT,initializeToastr),$(window).on(window.PAGE_CHANGE_EVENT,function(){$("body").on("click","#nav-pills-container a",function(e){$(e.target).on("click",function(e){e.preventDefault()})})}),$(window).on("shown.bs.modal",function(){$(document.body).hasClass("modal-open")||$(document.body).addClass("modal-open")}),$(window).on("hidden.bs.modal",function(){$(".modal").filter(":visible").length>0&&!$(document.body).hasClass("modal-open")&&$(document.body).addClass("modal-open")}),window.Handshake.Helpers.scrollBarSize=function(){var e=window.Handshake.Helpers.scrollBarSize.dim;if(e===undefined){var t=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");e=window.Handshake.Helpers.scrollBarSize.dim={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight},t.remove()}return e},window.Handshake.Helpers.showSidebar=function(){$(".fb-nav").show(),$(".navbar-toggle").show(),$(".fb-nav-wrapper.fb-nav-animatable.sidebar-expanded").removeClass("without-sidebar")},window.Handshake.Helpers.hideSidebar=function(){$(".fb-nav").hide(),$(".navbar-toggle").hide(),$(".fb-nav-wrapper.fb-nav-animatable.sidebar-expanded").addClass("without-sidebar")},function(e){jQuery.fn.extend({donetyping:function(t,s){s=s||1e3;var i,n=function(e){i&&(i=null,t(e))};return this.each(function(t,o){var r=e(o);r.is(":input")&&r.on("keyup keypress",function(e){"keyup"==e.type&&8!=e.keyCode||(i&&clearTimeout(i),i=setTimeout(function(){n(o)},s))}).on("blur",function(){n(o)})})}})}(jQuery),Number.prototype.formatMoney=function(e,t,s){var i=Handshake.passed.currency_symbol||"$",n=this,o=(e=isNaN(e=Math.abs(e))?2:e,t=t==undefined?".":t,s=s==undefined?",":s,n<0?"-":""),r=parseInt(n=Math.abs(+n||0).toFixed(e))+"",a=(a=r.length)>3?a%3:0;return o+i+(a?r.substr(0,a)+s:"")+r.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+s)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")},Array.prototype.chunk=function(e){var t=this;return[].concat.apply([],t.map(function(s,i){return i%e?[]:[t.slice(i,i+e)]}))},window.Handshake.Helpers.iframe_onload=function(e){element=e.target,element.style.height=element.contentWindow.document.documentElement.scrollHeight+Handshake.Helpers.scrollBarSize().height+3+"px"},$(document).on("page:before-unload",function(){$(".js-auto-resize-iframe").off("load")}),window.Handshake.Helpers.on_sm_screen=function(){return document.documentElement.clientWidth<=768},window.Handshake.Helpers.on_xs_screen=function(){return document.documentElement.clientWidth<=480},window.Handshake.Helpers.color_for_string=function(e){if(e){for(var t=0,s=["#4a95d0","#47bce8","#0f6bb4","#221f57","#ff974c","#ffc06e","#ffd66e","#fa785a","#f74c60","#e34959","#b11e59","#6b2755","#1ab7ab","#1a9589","#49626e"],i=0;i<e.length;i++)t+=e[i].charCodeAt();return s[t%s.length]}},window.Handshake.Helpers.isValidUrl=function(e){return/^https?:\/\/([\w-]+\.)+[a-z]{2,64}((\/|\?)(.*))?$/.test(e)},window.Handshake.Helpers.logoFormatSelection=function(e){return'<img src="'+e.logo_url+'" class="logo-result"/> '+Handshake.Helpers.escapeString(e.name)},window.Handshake.Helpers.wysihtml5CustomTemplates={text_align_buttons:function(){return"<li><div class='btn-group'><a class='btn btn-default' data-wysihtml5-command='justifyLeft' title='Left-Align' tabindex='-1' href='javascript:;' unselectable='on'><span class='fa fa-align-left'></span></a><a class='btn btn-default' data-wysihtml5-command='justifyRight' title='Right-Align' tabindex='-1' href='javascript:;' unselectable='on'><span class='fa fa-align-right'></span></a><a class='btn btn-default' data-wysihtml5-command='justifyCenter' title='Center' tabindex='-1' href='javascript:;' unselectable='on'><span class='fa fa-align-center'></span></a><a class='btn btn-default' data-wysihtml5-command='justifyFull' title='Justify' tabindex='-1' href='javascript:;' unselectable='on'><span class='fa fa-align-justify'></span></a></div></li>"},image:function(e){var t=e.locale,s=e.options,i=s&&s.size?" btn-"+s.size:"",n=s&&s.hideImageUpload?"":"<a class='btn btn-success open-image-modal pull-left' data-dismiss='modal' data-target='#upload-image-modal' data-toggle='modal'>Upload Image</a>";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade' data-wysihtml5-dialog='insertImage'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.image.insert+"</h3></div><div class='modal-body'><div class='form-group'><input value='http://' class='bootstrap-wysihtml5-insert-image-url form-control' data-wysihtml5-dialog-field='src'></div></div><div class='modal-footer'>"+n+"<a class='btn btn-default' data-dismiss='modal' data-wysihtml5-dialog-action='cancel' href='#'>"+t.image.cancel+"</a><a class='btn btn-primary insert-image' data-dismiss='modal' data-wysihtml5-dialog-action='save' href='#'>"+t.image.insert+"</a></div></div></div></div><a class='btn "+i+" btn-default' data-wysihtml5-command='insertImage' title='"+t.image.insert+"' tabindex='-1' href='javascript:;'><span class='fa fa-picture-o' /></a></li>"},insert_variable_dropdown:function(e){var t={variables:{calculated_first_name:"Preferred Name",institution_name:"Your School"}},s=(e.locale,e.options.toolbar.insert_variable_dropdown||t.variables),i="<li class='dropdown'><a class='btn btn-default dropdown-toggle' data-wysihtml5-command='openInsertVariable' data-toggle='dropdown' href='#'><span class='bold'>Insert Variable </span><span class='caret'></span></a><ul class='dropdown-menu'><li>";for(var n in s)s.hasOwnProperty(n)&&(i+="<a data-wysihtml5-command='insertVariable' data-wysihtml5-command-value='"+n+"'>"+s[n]+"</a>");return i+="</li></ul></li>"}},$.fn.wysihtml5.defaultOptions={customTemplates:window.Handshake.Helpers.wysihtml5CustomTemplates},Handshake.Validations={application:{applicable:{presence:{}},user:{presence:{}}},appointment:{school:{presence:{}},student:{presence:{}},staff_member:{presence:{}},appointment_medium:{presence:{}},start_date:{presence:{}},end_date:{presence:{}},description:{presence:{unless:{},on:"create"}}},appointment_type:{student_screen:{presence:{}},name:{presence:{},length:{maximum:255}},length:{presence:{},numericality:{greater_than_or_equal_to:1,less_than_or_equal_to:3600}}},article:{student_screen:{presence:{}},title:{presence:{},length:{maximum:255}},school:{presence:{}},pinned_order:{presence:{},numericality:{}}},attendee:{attendable_id:{presence:{}},attendable_type:{presence:{}},user:{presence:{}}},booth:{career_fair:{presence:{}},career_fair_session:{presence:{}},booth_option:{presence:{}}},campaign:{institution:{presence:{}},status:{presence:{}},name:{length:{maximum:255},presence:{}},campaign_object_type:{presence:{"if":{}}},campaign_object_id:{presence:{"if":{}}},engagement_option:{presence:{allow_blank:!0,"in":["employer_all_views","peers_all_views"]}},engagement_window:{presence:{allow_blank:!0,"in":["6mo"]}}},career_fair:{student_screen:{presence:{}},name:{presence:{},length:{maximum:255}},survey_title:{length:{allow_blank:!0,maximum:255}},institution:{presence:{}},refund_policy:{presence:{}},maximum_company_description_length:{presence:{},numericality:{greater_than:20,less_than:1e4}},career_fair_sessions:{presence:{}},student_registration_start:{presence:{}},student_registration_end:{presence:{}},employer_registration_start:{presence:{}},employer_registration_end:{presence:{}},student_limit:{numericality:{allow_nil:!0,greater_than_or_equal_to:0}},shareable_token:{presence:{}},nametag_label_xml:{presence:{"if":"nametags_enabled",message:"can't be blank if name tag printing is enabled"}},career_center:{presence:{}}},community_question:{text:{presence:{}},source:{presence:{}},privacy_status:{presence:{}}},contact:{institution:{presence:{}},first_name:{presence:{},length:{maximum:255}},last_name:{length:{allow_blank:!0,maximum:255}},title:{length:{allow_blank:!0,maximum:255}},phone:{length:{allow_blank:!0,maximum:255}},cell_phone:{length:{allow_blank:!0,maximum:255}},fax:{length:{allow_blank:!0,maximum:255}},employer_name:{length:{allow_blank:!0,maximum:255}},email_address:{presence:{},length:{maximum:255}},alum_year:{numericality:{allow_blank:!0,greater_than_or_equal_to:1900,less_than_or_equal_to:2050}}},distributed_employer:{status:{presence:{}},allowed_employers_count:{numericality:{greater_than:0}},email_domains:{presence:{}},name:{length:{allow_blank:!0,maximum:255}},description:{length:{allow_blank:!0,maximum:255}}},drop_in:{user:{presence:{}},school:{presence:{}}},employer:{name:{presence:{},length:{maximum:255}},industry_id:{presence:{on:"create"}},institution_size_id:{presence:{on:"create"}},website:{presence:{on:["create"]},length:{allow_blank:!0,maximum:255}},phone:{length:{maximum:255}},private_phone:{length:{maximum:255}},description:{presence:{on:["create"]}},duns_number:{length:{allow_nil:!0,is:9},numericality:{allow_nil:!0,only_integer:!0}},pitch:{length:{allow_blank:!0,maximum:255}},trust_score:{numericality:{allow_blank:!0,greater_than_or_equal_to:0,less_than_or_equal_to:100}},admin_employer_setting:{presence:{}}},employer_approval:{school:{presence:{}},employer:{presence:{}}},event:{student_screen:{presence:{}},career_center:{presence:{"if":"school_hosted?"}},owner:{presence:{}},host:{presence:{}},name:{presence:{},length:{maximum:255}},event_type:{presence:{}},start_date:{presence:{}},end_date:{presence:{}},attendee_limit:{numericality:{greater_than_or_equal_to:0,less_than_or_equal_to:1e4,allow_nil:!0}},nametag_label_xml:{presence:{"if":"nametags_enabled",message:"can't be blank if name tag printing is enabled"}},other_event_type_name:{length:{maximum:255}}},experience:{status:{presence:{}},student:{presence:{}},school:{presence:{}},assigned_to:{presence:{"if":"being_approved?",message:"can't be blank when an approval process is running"}},salary:{numericality:{allow_nil:!0,greater_than_or_equal_to:0,less_than:1e8}},token:{presence:{}},supervisor_name:{length:{allow_blank:!0,maximum:255}},supervisor_phone:{length:{allow_blank:!0,maximum:255}},supervisor_title:{length:{allow_blank:!0,maximum:255}},job_title:{length:{allow_blank:!0,maximum:255}},department:{length:{allow_blank:!0,maximum:255}},pay_period:{length:{allow_blank:!0,maximum:255}},employer_name:{length:{allow_blank:!0,maximum:255}},employer_phone:{length:{allow_blank:!0,maximum:255}}},first_destination_recipient:{first_destination_survey:{presence:{}},user:{presence:{}}},institution_label:{name:{presence:{},length:{minimum:1,maximum:255}},institution:{presence:{}},permitted_user_types:{presence:{}}},interview_review:{user:{presence:{message:"required"}},privacy_status:{presence:{}},source:{presence:{}},employer_name:{length:{allow_blank:!0,maximum:255}},job_position_name:{length:{maximum:255},presence:{}}},interview_schedule:{payment_status:{presence:{}},student_screen:{presence:{}},career_center:{presence:{}},identifier:{length:{maximum:255}},interview_schedule_type:{presence:{}},school:{presence:{}},employer:{presence:{}},interview_schedule_dates:{presence:{}},apply_start:{presence:{}},apply_end:{presence:{}},primary_signup_start:{presence:{"if":{}}},alternate_signup_start:{presence:{"if":{}}},signup_end:{presence:{"if":{}}},timeline_status:{presence:{}},application_mode:{presence:{}},daily_room_cost:{numericality:{allow_blank:!0,greater_than_or_equal_to:0,less_than_or_equal_to:1e4}}},job:{student_screen:{presence:{}},employer:{presence:{}},job_type:{presence:{}},title:{presence:{},length:{maximum:255}},legacy_employer_name:{length:{allow_blank:!0,maximum:255}},pay_rate:{length:{allow_blank:!0,maximum:255}},duration:{length:{allow_blank:!0,maximum:255}},monthly_housing_stipend:{numericality:{allow_nil:!0,greater_than_or_equal_to:0,less_than:1e4}},employment_type:{presence:{"if":"should_validate_employment_type?"}},hiring_volume:{numericality:{allow_nil:!0,greater_than:0,less_than_or_equal_to:1e4}},salary:{numericality:{allow_nil:!0,less_than:1e8,message:"must be less than $1,000,000"}},external_apply_link:{presence:{"if":"use_external_apply_link"}},document_notes:{presence:{"if":"should_validate_document_notes?"}},job_functions:{presence:{on:"create"}},locations:{presence:{"if":"specific_locations_option?",on:"create"}},job_apply_setting:{presence:{}},document_types:{presence:{"if":"handshake_and_external_url_apply?"}}},job_review:{privacy_status:{presence:{}},job_type:{presence:{}},source:{presence:{}},user:{presence:{}},employer:{presence:{"if":{}}},employer_name:{presence:{},length:{maximum:255}},job_position_name:{presence:{},length:{maximum:255}},location:{presence:{}},start_date:{presence:{}},overall_rating:{numericality:{allow_blank:!0,greater_than:0,less_than_or_equal_to:5}},salary:{numericality:{allow_blank:!0,greater_than:0,less_than_or_equal_to:1e7}},pay_schedule:{presence:{"if":{},message:"cannot be unpaid if Salary exists"}},learning_and_development_rating:{numericality:{allow_blank:!0,greater_than:0,less_than_or_equal_to:5}},culture_rating:{numericality:{allow_blank:!0,greater_than:0,less_than_or_equal_to:5}},mentorship_and_support_rating:{numericality:{allow_blank:!0,greater_than:0,less_than_or_equal_to:5}},interview_rating:{numericality:{allow_blank:!0,greater_than:0,less_than_or_equal_to:5}}},journal:{},mass_email:{attempts:{presence:{}},user:{presence:{}},institution:{presence:{}},saved_search:{presence:{}},subject:{presence:{"if":"finalized?",message:"must be set before sending email"},length:{allow_blank:!0,maximum:255}},body:{presence:{allow_blank:!0}},category:{presence:{"if":"finalized?",unless:"targeted_email?",message:"must be set before sending email"}},name:{length:{allow_blank:!0,maximum:255}},reply_to:{length:{maximum:255}},from_name:{length:{allow_blank:!0,maximum:255}}},mentorship:{school:{presence:{}},student:{presence:{}},mentor:{presence:{}}},organization:{name:{presence:{},length:{maximum:255}}},pin:{student_screen:{presence:{}},institution:{presence:{}},pinnable:{presence:{}}},posting:{employer:{presence:{}},school:{presence:{}},job:{presence:{}},expiration_date:{presence:{}}},registration:{payment_status:{presence:{}},representatives_count:{presence:{},numericality:{greater_than_or_equal_to:0,less_than:1e3}},career_fair:{presence:{}},employer:{presence:{}},booth_options:{presence:{"if":{}}},booth_options_registrations:{presence:{"if":{}}},refund_policy_agreement:{presence:{}},job_titles:{presence:{"if":"job_titles_updated_by_employer?"}},payment_method:{presence:{}},billing_address:{length:{allow_blank:!0,maximum:255}}},room:{name:{presence:{},length:{maximum:255}},school:{presence:{}},building:{presence:{}},capacity:{presence:{},numericality:{greater_than_or_equal_to:1,less_than_or_equal_to:1e4}}},school:{name:{presence:{},length:{maximum:255}},short_name:{length:{allow_blank:!0,maximum:40},presence:{on:"create"}},nickname:{length:{allow_blank:!0,maximum:255}},motto:{length:{allow_blank:!0,maximum:255}},website:{length:{allow_blank:!0,maximum:255}},year_established:{numericality:{allow_nil:!0,greater_than_or_equal_to:1,less_than_or_equal_to:2147483647}},email_domain:{presence:{}},appointment_cancellation_period:{presence:{},numericality:{greater_than_or_equal_to:0}},primary_color:{presence:{}},institution_size:{presence:{}},enrollment:{presence:{on:"create"}},tagline:{presence:{on:"create"},length:{on:"create",maximum:255}},continuing_education_school:{presence:{on:"create"}}},survey:{institution:{presence:{}},title:{presence:{},length:{maximum:255}}},target_segment:{employer:{presence:{}},name:{presence:{},length:{minimum:5,maximum:255}},version:{presence:{},numericality:{equal_to:1}},filters:{presence:{}},students_count:{presence:{},numericality:{greater_than_or_equal_to:0}}},user:{password:{length:{"if":"password",minimum:12},presence:{"if":"password"}},email_address:{presence:{}},username:{presence:{}},card_id:{length:{allow_blank:!1,allow_nil:!0,maximum:255,minimum:1}},user_type:{presence:{}},progress:{presence:{},numericality:{}},title:{length:{allow_blank:!0,maximum:255}},office_phone_number:{length:{allow_blank:!0,maximum:255}},first_name:{presence:{},length:{maximum:255}},preferred_name:{length:{allow_blank:!0,maximum:255}},middle_name:{length:{allow_blank:!0,maximum:255}},last_name:{length:{allow_blank:!0,maximum:255}},institution_id:{presence:{"if":{}}},institution_type:{presence:{"if":{}}}},education:{user:{presence:{}},school_name:{presence:{},length:{maximum:255}},college_name:{length:{allow_blank:!0,maximum:255}},cumulative_gpa:{numericality:{allow_nil:!0,greater_than_or_equal_to:0,less_than_or_equal_to:5}},department_gpa:{numericality:{allow_nil:!0,greater_than_or_equal_to:0,less_than_or_equal_to:5}}},extra_curricular:{user:{presence:{}},position_name:{presence:{},length:{maximum:255}},activity_name:{presence:{},length:{maximum:255}},start_date:{presence:{}}},work_experience:{user:{presence:{}},job_function:{presence:{"if":{}}},employer_name:{length:{allow_blank:!0,maximum:255}},job_position_name:{length:{allow_blank:!0,maximum:255}}}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Application={},Handshake.Application.DateSelectMonth=function(){function e(e){var t,s,i,n,o,r,a,c;(this.props=e,this.props.date)?(i=this.props.date()?moment(this.props.date()):moment(),n=ko.observable(i.month()),r=ko.observable(i.year()),a=this.props.years?this.props.years:(t=moment().year(),_.range(t+5,t-5,-1)),o=_.map(moment.months(),function(e,t){return{id:t,name:e}}),s=ko.pureComputed((c=this,function(){if(_.isNumber(n())&&_.isNumber(r()))return moment({year:r(),month:n(),day:1}).format(c.props.format)})),this.vm={month:n,year:r,months:o,years:a},s.subscribe(this.props.date),this.props.date(s())):console.error("date-select-month component being used without a date property",this)}return e}(),Handshake.Application.Loader=function(){function e(){}return e}(),Handshake.Application.Thumbnail=function(){function e(e){this.vm={image_url:ko.unwrap(e.image_url)}}return e}(),Handshake.Application.Avatar=function(){function e(e){var t,s,i,n,o,r;this.props=e,s=ko.pureComputed((n=this,function(){var e;if(e=ko.unwrap(n.props.name))return e.charAt(0)})),i=ko.pureComputed((o=this,function(){return Handshake.Helpers.color_for_string(ko.unwrap(o.props.name))})),t=ko.pureComputed((r=this,function(){var e;return e=[],ko.unwrap(r.props.image_url)&&e.push("has-image"),r.props.variant&&e.push(r.props.variant),e.join(" ")})),this.vm={avatar_classes:t,image_url:this.props.image_url,letter:s,letter_bg:i}}return e}(),Handshake.Application.RadioButton=function(){function t(t){var s,i;this.props=t,this.click_handler=e(this.click_handler,this),this.is_checked=ko.computed((s=this,function(){return ko.unwrap(s.props.checked)===ko.unwrap(s.props.checked_value)})),this.is_unchecked=ko.computed((i=this,function(){if(ko.unwrap(i.props.checked))return ko.unwrap(i.props.checked)!==ko.unwrap(i.props.checked_value)})),this.vm={is_checked:this.is_checked,is_unchecked:this.is_unchecked,click_handler:this.click_handler,label:ko.unwrap(this.props.label),icon_url:ko.unwrap(this.props.icon_url),input_value:this.props.input_value}}return t.prototype.click_handler=function(){return this.props.checked(this.props.checked_value)},t}(),Handshake.Application.UnsavedChangesWarning=function(){function t(t){var s;this.props=t,this.unmount=e(this.unmount,this),this.mount=e(this.mount,this),this.before_page_change=e(this.before_page_change,this),this.set_up_change_listeners=e(this.set_up_change_listeners,this),this.listening_for_input_changes=!1,this.changed=!1,this.selector="#main",$(this.selector).on("click focus",":input",this.set_up_change_listeners),$(this.selector).on("click",":submit",(s=this,function(){return s.changed=!1,!0})),this.mount()}return t.prototype.set_up_change_listeners=function(){var e;if(!this.listening_for_input_changes)return $(this.selector).on("change",":input",(e=this,function(){return e.changed=!0})),this.listening_for_input_changes=!0},t.prototype.before_page_change=function(e){var t,s;if(t="There are unsaved changes. Are you sure you want to leave this page?",s=document.activeElement,this.changed&&!$(s).is(this.selector+" :submit")&&!s.dataset.noUnsavedChangesWarning)return"beforeunload"===e.type?t:confirm(t)?void 0:e.preventDefault()},t.prototype.mount=function(){return $(window).on("beforeunload",this.before_page_change),$(window).on("page:before-change",this.before_page_change)},t.prototype.unmount=function(){return $(window).off("beforeunload",this.before_page_change),$(window).off("page:before-change",this.before_page_change),$(this.selector).off("click focus",":input",this.set_up_change_listeners)},t}(),Handshake.Application.DateIcon=function(){function e(e){this.props=e,this.vm={date:moment(this.props.date),type:this.props.type},this.vm.month=this.vm.date.format("MMM"),this.vm.day=this.vm.date.format("D")}return e}(),Handshake.Application.ProfilePreview=function(){function e(e){this.props=e,this.vm={image_url:this.props.image_url,name:this.props.name,avatar_params:{image_url:this.props.image_url,name:this.props.name,variant:"large"}}}return e}(),Handshake.Application.ConfirmationModal=function(){function t(t){this.props=t,this.show_modal=e(this.show_modal,this),this.close_modal=e(this.close_modal,this),this.confirm=e(this.confirm,this),this.cancel=e(this.cancel,this),this.title=this.props.title||"Confirm",this.body=this.props.body||"",this.safe_body_html=this.props.safe_body_html||"",this.confirm_button_text=this.props.confirm_button_text||"Confirm",this.confirm_button_css=this.props.confirm_button_css||"btn-success",this.cancel_button_text=this.props.cancel_button_text||"Cancel"}return t.prototype.cancel=function(){return this.close_modal(this.cancel_callback)},t.prototype.confirm=function(){return this.close_modal(this.confirm_callback)},t.prototype.close_modal=function(e){if($(".confirmation-modal").modal("hide"),_.isFunction(e))return e()},t.prototype.show_modal=function(e,t){return this.confirm_callback=e,this.cancel_callback=t,$(".confirmation-modal").modal("show")},t}()}.call(this),function(){Handshake.audio={"drop_in_chime.mp3":"/assets/drop_in_chime-a76f28ca2c2c84c679206c9fdbe6c9c5ea3918ef09c48ff473d7a040b993465d.mp3","harp.mp3":"/assets/harp-20bf577846217a896441be39ff6d9955b8e34945cbe58935ae54a89a7cf71fd9.mp3"}}.call(this),function(){$(document).on("page:receive",function(e){var t,s,i,n;if(n=e.originalEvent.data.url,Handshake.passed.app_url)return t=URI(Handshake.passed.app_url).hostname(),s=URI(Handshake.passed.app_url).port(),i=URI(n).protocol("https").hostname(t).port(s).search("").toString(),$("link[rel='canonical']").first().attr("href",i)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SPA={},Handshake.Ability=function(){function t(){this.ingest=e(this.ingest,this),this.can=e(this.can,this),this.hash={}}return t.prototype.can=function(e,t,s){var i,n;return null==s&&(s=null),n=e+":"+t,s&&(n+=":"+s),(i=this.hash)[n]||(i[n]=ko.observable(!1))},t.prototype.ingest=function(e,t){var s,i;if(e&&_.each(e,(s=this,function(e){var t;return(t=s.hash)[e]||(t[e]=ko.observable()),s.hash[e](!0)})),t)return _.each(t,(i=this,function(e){var t;return(t=i.hash)[e]||(t[e]=ko.observable()),i.hash[e](!1)}))},t}(),Handshake.ability=new Handshake.Ability,Handshake.SPA.componentNamesToPaths={},Handshake.SPA.componentNamesToViewModels={},Handshake.registerAllComponents=function(){var e;if(!window.componentsRegistered)return window.componentsRegistered=!0,(e=function(e,t,s){return Handshake.SPA.componentNamesToPaths[e]=t,Handshake.SPA.componentNamesToViewModels[e]=s,ko.components.register(e,{})})("article-card","articles/components/card",Handshake.Articles.Card),e("article-list","articles/components/list",Handshake.Articles.List),e("article-preview","articles/components/preview",Handshake.Articles.Preview),e("avatar","application/components/avatar",Handshake.Application.Avatar),e("card","cards/components/card",Handshake.Cards.Card),e("card-actions","cards/components/card-actions",Handshake.Cards.CardActions),e("card-alerts","cards/components/card-alerts",Handshake.Cards.CardAlerts),e("card-content","cards/components/card-content",Handshake.Cards.CardContent),e("card-heading","cards/components/card-heading",Handshake.Cards.CardHeading),e("career-fair-card","career_fairs/components/card",Handshake.CareerFairs.Card),e("date-select-month","application/components/date_select_month",Handshake.Application.DateSelectMonth),e("date-icon","application/components/date_icon",Handshake.Application.DateIcon),e("employer-approval-tile","employer_approvals/components/tile",Handshake.EmployerApprovals.EmployerApprovalFormView),e("employer-card","employers/components/card",Handshake.Employers.Card),e("email-template-preview","email_templates/components/email_template_preview",Handshake.EmailTemplatePreview),e("event-card","events/components/card",Handshake.Events.Card),e("event-list","events/components/list",Handshake.Events.List),e("event-days-preview","events/components/days-preview",Handshake.Events.DaysPreview),e("event-slots-remaining","events/components/slots-remaining",Handshake.Events.SlotsRemaining),e("first-destination-response-answer","first_destination_responses/components/answer",Handshake.FirstDestinationResponses.Answer),e("first-destination-response-continuing-education","first_destination_responses/components/continuing_education",Handshake.FirstDestinationSurveyPages.ContinuingEducation),e("first-destination-response-continuing-education-level","first_destination_responses/components/continuing_education_level",Handshake.FirstDestinationSurveyPages.ContinuingEducationLevel),e("first-destination-response-compensation","first_destination_responses/components/compensation",Handshake.FirstDestinationSurveyPages.Compensation),e("first-destination-response-employer","first_destination_responses/components/employer",Handshake.FirstDestinationSurveyPages.Employer),e("first-destination-response-employment-type","first_destination_responses/components/employment_type",Handshake.FirstDestinationSurveyPages.EmploymentType),e("first-destination-response-employment-category","first_destination_responses/components/employment_category",Handshake.FirstDestinationSurveyPages.EmploymentCategory),e("first-destination-response-fellowship-name","first_destination_responses/components/fellowship_name",Handshake.FirstDestinationSurveyPages.FellowshipName),e("first-destination-response-fellowship-type","first_destination_responses/components/fellowship_type",Handshake.FirstDestinationSurveyPages.FellowshipType),e("first-destination-response-graph-placeholder","first_destination_responses/components/graph_placeholder",Handshake.FirstDestinationSurveyContent.GraphPlaceholder),e("first-destination-response-job-found-through-handshake","first_destination_responses/components/job_found_through_handshake",Handshake.FirstDestinationSurveyPages.JobFoundThroughHandshake),e("first-destination-response-job-dates","first_destination_responses/components/job_dates",Handshake.FirstDestinationSurveyPages.JobDate),e("first-destination-response-job-information","first_destination_responses/components/job_information",Handshake.FirstDestinationSurveyPages.JobInformation),
e("first-destination-response-job-offer-compensation","first_destination_responses/components/job_offer_compensation",Handshake.FirstDestinationSurveyPages.JobOfferCompensation),e("first-destination-response-job-offer-employer","first_destination_responses/components/job_offer_employer",Handshake.FirstDestinationSurveyPages.JobOfferEmployer),e("first-destination-response-job-offer-employment-type","first_destination_responses/components/job_offer_employment_type",Handshake.FirstDestinationSurveyPages.JobOfferEmploymentType),e("first-destination-response-job-offer-facilitation-type","first_destination_responses/components/job_offer_facilitation_type",Handshake.FirstDestinationSurveyPages.JobOfferFacilitationType),e("first-destination-response-job-offer-information","first_destination_responses/components/job_offer_information",Handshake.FirstDestinationSurveyPages.JobOfferInformation),e("first-destination-response-job-offer-list","first_destination_responses/components/job_offer_list",Handshake.FirstDestinationSurveyPages.JobOfferList),e("first-destination-response-job-offer-status","first_destination_responses/components/job_offer_status",Handshake.FirstDestinationSurveyPages.JobOfferStatus),e("first-destination-response-location","first_destination_responses/components/location",Handshake.FirstDestinationSurveyPages.Location),e("first-destination-response-continuing-education-major","first_destination_responses/components/continuing_education_major",Handshake.FirstDestinationSurveyPages.ContinuingEducationMajor),e("first-destination-response-military-branch","first_destination_responses/components/military_branch",Handshake.FirstDestinationSurveyPages.MilitaryBranch),e("first-destination-response-military-information","first_destination_responses/components/military_information",Handshake.FirstDestinationSurveyPages.MilitaryInformation),e("first-destination-response-military-rank","first_destination_responses/components/military_rank",Handshake.FirstDestinationSurveyPages.MilitaryRank),e("first-destination-response-not-seeking","first_destination_responses/components/not_seeking",Handshake.FirstDestinationSurveyPages.NotSeeking),e("first-destination-response-postings","first_destination_responses/components/postings",Handshake.FirstDestinationSurveyPages.Postings),e("first-destination-response-posting-results","first_destination_responses/components/posting_results",Handshake.FirstDestinationSurveyContent.PostingResults),e("first-destination-response-still-looking","first_destination_responses/components/still_looking",Handshake.FirstDestinationSurveyPages.StillLooking),e("first-destination-response-status-at-graduation","first_destination_responses/components/status_at_graduation",Handshake.FirstDestinationSurveyPages.StatusAtGraduation),e("first-destination-response-type","first_destination_responses/components/first_destination_response_type",Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType),e("first-destination-response-volunteer-employer","first_destination_responses/components/volunteer_employer",Handshake.FirstDestinationSurveyPages.VolunteerEmployer),e("first-destination-survey-pre-survey","first_destination_responses/components/pre_survey",Handshake.FirstDestinationSurveyPreSurvey),e("first-destination-survey-graduate-pre-survey","first_destination_responses/components/graduate_pre_survey",Handshake.FirstDestinationSurveyGraduatePreSurvey),e("first-destination-response-take-survey","first_destination_responses/components/take_survey",Handshake.FirstDestinationSurveyPages.TakeSurvey),e("first-destination-response-bar-graph","first_destination_responses/components/bar_graph",Handshake.FirstDestinationSurveyContent.BarGraph),e("first-destination-response-rotated-bar-graph","first_destination_responses/components/rotated_bar_graph",Handshake.FirstDestinationSurveyContent.RotatedBarGraph),e("first-destination-response-donut-graph","first_destination_responses/components/donut_graph",Handshake.FirstDestinationSurveyContent.DonutGraph),e("first-destination-response-compensation-graph","first_destination_responses/components/compensation_graph",Handshake.FirstDestinationSurveyContent.CompensationGraph),e("first-destination-response-donut-bar-graph","first_destination_responses/components/donut_bar_graph",Handshake.FirstDestinationSurveyContent.DonutBarGraph),e("first-destination-response-staff-only","first_destination_responses/components/staff_only",Handshake.FirstDestinationSurveyPages.StaffOnly),e("first-destination-response-results","first_destination_responses/components/results",Handshake.FirstDestinationSurveyPages.Results),e("first-destination-response-already-employed","first_destination_responses/components/already_employed",Handshake.FirstDestinationSurveyPages.AlreadyEmployed),e("first-destination-response-facilitation-type","first_destination_responses/components/facilitation_type",Handshake.FirstDestinationSurveyPages.FacilitationType),e("first-destination-response-changed-job-aspects","first_destination_responses/components/changed_job_aspects",Handshake.FirstDestinationSurveyPages.ChangedJobAspects),e("follow-button","favorites/components/button",Handshake.FollowButtonComponent),e("infinite-scroll-feedback","application/components/infinite-scroll-feedback",Handshake.Searchable.InfiniteScrollFeedback),e("loader","application/components/loader",Handshake.Application.Loader),e("interview-card","interview_slots/components/card",Handshake.InterviewSlots.Card),e("interview-schedule-card","interview_schedules/components/card",Handshake.InterviewSchedules.Card),e("mass-email-body","mass_emails/components/mass_email_body.html.haml",Handshake.MassEmailBody),e("notes-modal","notes/components/notes_modal",Handshake.Notes.NotesModalComponent),e("pin-modal","pins/components/pin_modal",Handshake.Pins.PinModalComponent),e("profile-preview","application/components/profile-preview",Handshake.Application.ProfilePreview),e("posting-card","postings/components/card",Handshake.Postings.Card),e("harassment-report-modal","harassment_reports/components/harassment_report_modal",Handshake.HarassmentReportsModal),e("radio-button","application/components/radio-button",Handshake.Application.RadioButton),e("rsvp-button","events/components/rsvp-button",Handshake.Events.RsvpButton),e("student-screen","student_screens/components/form",Handshake.StudentScreens.ComponentForm),e("thumbnail","application/components/thumbnail",Handshake.Application.Thumbnail)},$(function(){return Handshake.registerAllComponents()}),Handshake.copmonentConfiguration={getConfig:function(e,t){var s,i;return window.componentsRegistered||Handshake.registerAllComponents(),i=Handshake.SPA.componentNamesToViewModels[e],s=Handshake.SPA.componentNamesToPaths[e].replace(/\//g,"-"),t({template:$("#knockout-template-"+s)[0]?{element:"knockout-template-"+s}:{fromAjax:"/components.html?name="+Handshake.SPA.componentNamesToPaths[e]},viewModel:i})}},Handshake.templateFromAjaxLoader={loadTemplate:function(e,t,s){if(!t.fromAjax)return s(null);$.ajax({type:"GET",url:t.fromAjax,dataType:"text",success:function(t){return ko.components.defaultLoader.loadTemplate(e,t,s)}})}},ko.components.loaders.unshift(Handshake.templateFromAjaxLoader),ko.components.loaders.unshift(Handshake.copmonentConfiguration),Handshake.SPA.navigate=function(e){return window.is_ie9?window.location.href=e:"undefined"!=typeof Turbolinks&&null!==Turbolinks?Turbolinks.visit(e):void 0},Handshake.SPA.reload=function(){return Handshake.SPA.navigate(window.location)}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Cookies=function(){function t(){this.internal_name=e(this.internal_name,this),this.write=e(this.write,this),this.read=e(this.read,this)}return t.prototype.read=function(e,t){var s,i,n,o,r,a,c;for(e=this.internal_name(e,t),s=0,o=(r=document.cookie.split(";")).length;s<o;s++)if(n=r[s],i=(a=_(n.split("=")).map($.trim))[0],c=a[1],i===e)return JSON.parse(decodeURIComponent(c))},t.prototype.write=function(e,t,s){var i,n;return s.permanent?(n=new Date).setFullYear(n.getFullYear()+20):s.expires&&(n=s.expires),i=this.internal_name(e,s)+"="+encodeURIComponent(JSON.stringify(t))+";path=/",n&&(i+=";expires="+n.toUTCString()),document.cookie=i},t.prototype.internal_name=function(e,t){return t.user_scoped?Handshake.passed.environment_name+"_"+Handshake.passed.current_user_id+"_"+e:Handshake.passed.environment_name+"_"+e},t}(),Handshake.cookies=new Handshake.Cookies}.call(this),function(){window.Handshake.Helpers.cssForTooltip=function(e){switch(!1){case"info"!==e:return"fa-status-info";default:return""}}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.DockedPanel=function(){function t(t){this.toggle_minimized=e(this.toggle_minimized,this),this.hide_panel=e(this.hide_panel,this),this.show_panel=e(this.show_panel,this),this.panel_element=$(t),this.minimized=ko.observable(!1)}return t.prototype.show_panel=function(){return this.minimized(!1),this.panel_element.show()},t.prototype.hide_panel=function(){return this.panel_element.hide()},t.prototype.toggle_minimized=function(){return this.minimized(!this.minimized())},t}()}.call(this),function(){var e;window.Handshake.Helpers.initPieChart=function(e,t,s){var i,n;return(i=t.map(function(e){return{count:e.count,data:e.data,id:DOMPurify.sanitize(e.id),name:DOMPurify.sanitize(e.name),label:DOMPurify.sanitize(e.label)}}))&&i.length>0||(i=[{data:1,label:"No Data Available"}]),n=e.height(),s=s||{series:{pie:{show:!0,offset:{top:0,left:n/4*-1}}}},$.plot(e,i,s)},window.Handshake.Helpers.initLineGraph=function(t,s,i,n,o,r){return null==n&&(n=0),null==o&&(o=0),null==r&&(r="day"),s=e(s,6,r),t.height(),i=i||{xaxis:{mode:"time",timeformat:"%Y-%m-%d",min:n,max:o,ticks:6},selection:{mode:"x"},yaxis:{tickDecimals:0}},s=s||[0,0],$.plot(t,s,i)},e=function(e,t,s){var i;return null==s&&(s="day"),i=[],_.each(e,function(e){var n,o;return o=[],_.each(function(){n=[];for(var e=t;t<=0?e<=0:e>=0;t<=0?e++:e--)n.push(e);return n}.apply(this),function(t){var i,n;return(i=moment().startOf(s).utc()).subtract(t,s+"s"),n=0,_.each(e,function(e){if(moment(e[0]).startOf(s).utc().isSame(i,s))return n=e[1]}),o.push([i.valueOf(),n])}),i.push(o)}),i}}.call(this),function(){Handshake.images={"survey_complete.png":"/assets/survey_complete-c9736a49ccf3e36b2df1872a01bb08f269b1b182804adebc2bfbdf6fdf5ab3ea.png","fully_qualified_step_1.png":"/assets/fully_qualified_step_1-e771edbd35c8ab23f78f19feee83befd5591d91a3ee216d77e1749fb2341d7d2.png","employer-product-announcement/candidate-hub-name-change-announcement.svg":"/assets/employer-product-announcement/candidate-hub-name-change-announcement-c45b11b8818080fc93bbb91be7526c56553d3de8ae8652113385bd3c04d069e9.svg","employer-product-announcement/virtual-fair-video-screenshot.png":"/assets/employer-product-announcement/virtual-fair-video-screenshot-d445dd2778bd3691c777037f0f900a092181f1f6fd7850f67f41f370be9fa590.png","employer-product-announcement/eval-form-screenshot.png":"/assets/employer-product-announcement/eval-form-screenshot-60bbbcb663544129439961bb7d9d534813da7f5f3a37216009d8bae2449ed880.png","students-compact-card/organization-icon.svg":"/assets/students-compact-card/organization-icon-ca6d1ea84527c1aff238c47c1494c2d4977e651bc20bd4fd83d81d74dc14570f.svg","official-logo-inline.svg":"/assets/official-logo-inline-24614b15cf674a34cc1dd40383fd2c257b7e8b862b07af4285c44ced6b11fe79.svg","checkcircle.png":"/assets/checkcircle-bfec0bf81cfa5241aa2ba6501bd6f0214e2ce316d96a5d9330430662d43a587f.png","fully_qualified_step_3.png":"/assets/fully_qualified_step_3-6d39dde040961edbb85908ae82a82a38505d02e3941b1377b76bd1565d150535.png","events-dashboard-flags.png":"/assets/events-dashboard-flags-4ddabee01d16dd8266c51a0269d1e8050ed8c0da02035de8fc26751a37035d97.png","Third-Party-Recuiter-Icon.svg":"/assets/Third-Party-Recuiter-Icon-5be528ea2661177809daa6ec8e13a4092190e1e45f7ae9d3e45134309980d674.svg","events/search-empty-state-favorites.png":"/assets/events/search-empty-state-favorites-565d319cc53b835cc52c6844e96bd8b0a1e2d3679ea8ddc608a7ac2ad45100e1.png","events/search-empty-state.png":"/assets/events/search-empty-state-d60ce2f372551e8e1b430a9a2b0a7243d2f8c3d9dd4643c91290eded5d910e86.png","trophy.png":"/assets/trophy-7d329f5a0f8a41376adb6b517bf3346250878be4f3827b85038fba25796277d9.png","prospects/email-confirmation.svg":"/assets/prospects/email-confirmation-66bb4874f7bfb366fd3b8dfba0bd3f78566e5c64f316ab6c03019bff3b302296.svg","campaigns/clipboard.png":"/assets/campaigns/clipboard-4989480430232834c32eec5dd889e70a2041de6b9d8702c3bd7f734fa0cd66d1.png","campaigns/clipboard-bw.png":"/assets/campaigns/clipboard-bw-b252287bd161052ef22b190750da58c7c863cb9d0825a4cc9db1226150369a7c.png","campaigns/clipboard@2x.png":"/assets/campaigns/clipboard@2x-4425ef7d4040ab9bdca52af2c90e95877c0646aeaee2867da3b62efc61eeb016.png","applications/book-filled.png":"/assets/applications/book-filled-71f267180e54584753f0af89555bfd8ffef1d426fcc8a427b94afa62a154dc6e.png","applications/calendar-filled.png":"/assets/applications/calendar-filled-c882dcc441c01fd244aee7ed0a96508b9f6304c75d46fad48a1050925c2e517b.png","applications/id-card-outline.png":"/assets/applications/id-card-outline-62af579e8ddc1bf4a5f81e0dc79e0dd8a1b35135a36ef7f9fa2e9d079ff4d665.png","applications/arrow-circle-up-outline.png":"/assets/applications/arrow-circle-up-outline-2cfcf6465c3102e413fad151073db6206e1db659a662f66294700eaef71f3213.png","applications/calendar-outline.png":"/assets/applications/calendar-outline-6875cbe0d722aeaa4e4eb63d965e245f8a9f9c20432792647e5e1c563fc39af8.png","applications/graduation-cap-outline.png":"/assets/applications/graduation-cap-outline-31f2214f1b279f6531ac3ff6133471ff2e4c683e6e8c3a499922a7589ca4a5a9.png","applications/graduation-cap-filled.png":"/assets/applications/graduation-cap-filled-24e8353ec94e43ac6a42961d0861547c2e96e4234d9a3ec584d273f2d6e6e5df.png","applications/arrow-circle-up-filled.png":"/assets/applications/arrow-circle-up-filled-d83ddf9ef58ef9ea2732f377cf55fcb72eee7d15fd2cecc93ac45b8847df7e7f.png","applications/book-outline.png":"/assets/applications/book-outline-150e892c217917947e8a1f115847e10d5cd781db9c8961abe57bc24d2bada6c3.png","applications/id-card-filled.png":"/assets/applications/id-card-filled-6bf23b1aea09362d847c717155055d4190ffdc741b7aba573a41f234617a20e2.png","envelope.svg":"/assets/envelope-b999497ec287b60878b0f3e4755825547dc4053dfe2ec67dc73a10fdf3a5f215.svg","Favorites@2x.png":"/assets/Favorites@2x-2502490ecbb35280abe7b83d7b4f732073074ca96691acb2859b85310a549bf7.png","glassdoor.png":"/assets/glassdoor-0e0d37363987066d777f079861b28e4a9d4218f5a238599979b5827fbca894d6.png","career-fairs/empty_events.png":"/assets/career-fairs/empty_events-78e8bb93dc9cbb66e5ae3035648c8ea28554c82da79ac99f4ede1f35e00dcb01.png","career-fairs/career-fair-no-favorite-employers.png":"/assets/career-fairs/career-fair-no-favorite-employers-b6f4ded87d6f880b69304da016159f3ae43b6716c8bb761dc9f03d9c1656e967.png","career-fairs/career-fair-no-description.png":"/assets/career-fairs/career-fair-no-description-5b333e80faac0cfb9c20a3ef2c9c5af609565370e49ffe2da12bf56b0412dc8a.png","career-fairs/career-fair-no-employers.png":"/assets/career-fairs/career-fair-no-employers-aab46884874dae9774efee60ad85ea18401e5744dfbf684e5c633232a2076959.png","sad_face.svg":"/assets/sad_face-0ec11818b9feb80d6eea7ac2d498d50ff8382f12659c81f032074706ddaf7593.svg","profile_book.svg":"/assets/profile_book-dad9ba9d9fc12e0795a6d31145580a64802ec5b39b47014812e429598c5cbdd1.svg","employers/job-review-badges/mentorship_and_support.png":"/assets/employers/job-review-badges/mentorship_and_support-4bdf4dc675cc530c4944a02c618ea2cd5e6cd46f75dd3d93078050193c4bb9d2.png","employers/job-review-badges/culture.png":"/assets/employers/job-review-badges/culture-7c1db9ee1865b0bbd894bccdd000817fe63c26ae9069e0e04160840c30248ad6.png","employers/job-review-badges/overall.png":"/assets/employers/job-review-badges/overall-c7f830714b1aa7525870a6beddc4407311fd5de60cd383ceadce3cae4b19b6c1.png","employers/job-review-badges/learning_and_development.png":"/assets/employers/job-review-badges/learning_and_development-a99d0147bc63308dd33aa9a1673bfa61a391f751abc3650bb9659a616a0548e0.png","employers/analytics/glass.svg":"/assets/employers/analytics/glass-98c9318309541be7d878d03be8ea42e5eafcb1598a3023af737e73208471e76f.svg","employers/search-empty-state.png":"/assets/employers/search-empty-state-d60ce2f372551e8e1b430a9a2b0a7243d2f8c3d9dd4643c91290eded5d910e86.png","employers/onboarding/sign_up_confirmation@1x.jpg":"/assets/employers/onboarding/sign_up_confirmation@1x-2b30d71615e64535498e14469e19ea9d08efc806c20e26c563de7bf8fb1334e0.jpg","employers/onboarding/sign_up@2x.jpg":"/assets/employers/onboarding/sign_up@2x-a890f5204310ee7c5eba59f55212a14d36457a70c11f98ea682cdf8235657a07.jpg","employers/onboarding/sign_up_confirmation@2x.jpg":"/assets/employers/onboarding/sign_up_confirmation@2x-65a6b0a8ff172957512d3a7fdad2ccff396cfb62aa544a0e33cd59b586cb3c69.jpg","employers/onboarding/sign_up@1x.jpg":"/assets/employers/onboarding/sign_up@1x-63e2261f5bef2d0334b95d1a58bc211ed2b4af6c849b32c40da310f00ca7d7df.jpg","employers/no-results.svg":"/assets/employers/no-results-022f91c9cf4ce2e1761052cdbc13fad8876c3e3fba4ae73f0531482c641814cd.svg","logo-icon.svg":"/assets/logo-icon-2d294d9834da88f5fdf0ab747dd89fb15f8ab7c12a3e193294bab3d522d71a2c.svg","app-store.svg":"/assets/app-store-25178aeef6eb6b83b96f5f2d004eda3bffbb37122de64afbaef7107b384a4132.svg","students-home/reviews-left.svg":"/assets/students-home/reviews-left-98dc7f586e30341737a6453d89702b627f327e1ecbbce969b3a41cdff50f1f92.svg","students-home/community-questions-left.svg":"/assets/students-home/community-questions-left-32cdf24890e988618e1f6c06b2899e00edffd37929e6c4acf0611b617aff3077.svg","students-home/reviews-right.svg":"/assets/students-home/reviews-right-55deb0cfa03e2c6939088864d7b1c22c6d534c2f8a8edd2386c8e09182aec1db.svg","students-home/students-left.svg":"/assets/students-home/students-left-c4032f448219692b2c345f4cf92083c86d29561e23dd64582af838078ac254d0.svg","students-home/community-questions-right.svg":"/assets/students-home/community-questions-right-f87bc36833640e788620b2ca48a14493a4422ba56d5eab47cce4f7dfceb94206.svg","students-home/students-right.svg":"/assets/students-home/students-right-642ed243e9a5bc5689ffcf4b6b5e2f134e63425b36b804d133fad0d9900fb681.svg","suitecase-icon.svg":"/assets/suitecase-icon-18b42dbf6f3c76cd8c16922670e651ced5f7b0c8c4d3c65d9a37d71d51b82f5f.svg","favicon.ico":"/assets/favicon-d6b3be8966fbadf95833dc4a6a405e696cf638275db7ff77964af2e3d9f7919e.ico","public-community-question@2x.png":"/assets/public-community-question@2x-c0398cd805cc7f8a6e685d95edec642a9dff13ee643e47415c9c2c436003c681.png","bg_login.png":"/assets/bg_login-5d0365d23e58aa57d2b51f865dea845309d578437b1004a7aa5eb4e777fc5df6.png","profile-completion/organizations-done@2x.png":"/assets/profile-completion/organizations-done@2x-971da7ed0d382af93aa07d88a5b72a58bd4ef0e1c2d67f37396f2243435f88a3.png","profile-completion/work_experiences@2x.png":"/assets/profile-completion/work_experiences@2x-734591c026434b4679ef77f089b54fc7de76154c439c0f1072a871013554f28c.png","profile-completion/organizations@2x.png":"/assets/profile-completion/organizations@2x-4f4a0abccfb434008a30ee3b491d1f470a3ea44dc477f873d2bf37dbe54a6237.png","profile-completion/search-user@3x.png":"/assets/profile-completion/search-user@3x-0867dbafc6931a796aaa3cacb8ef8cf9614336337d4d3f56a2d85863a1558254.png","profile-completion/work_experiences-done@2x.png":"/assets/profile-completion/work_experiences-done@2x-c1f33344d87b9bbfcdede320419bd406dc6c4e65398418b297c41d3db9bc9b97.png","profile-completion/skills@2x.png":"/assets/profile-completion/skills@2x-32e6a979237dee1babb8a8a31b892745279115ed1107487c94daf613f40174f6.png","profile-completion/work_experiences-square.png":"/assets/profile-completion/work_experiences-square-06693e826fe8ae6d6f76003aaae3dd1cbb238d43d3fd766fd25a913207f953c0.png","profile-completion/organizations-square.png":"/assets/profile-completion/organizations-square-8580e27b3369669c5bd4165c790fcb2ae7e86eb0236e85eaa8081007fa2b8ee2.png","profile-completion/search-suitcase@3x.png":"/assets/profile-completion/search-suitcase@3x-f1779c78dafcd38aee45a6451e4cce64913ac1fcd61fe290943651edf112c545.png","profile-completion/skills-square-done.png":"/assets/profile-completion/skills-square-done-889e731f1dcd0288d6b58adf3ee70ac3970e9bbee83bd9f07d798c72784132a1.png","profile-completion/organizations-square-done.png":"/assets/profile-completion/organizations-square-done-7738c85f71d3d33e39eed9473e1e3d97cfaed349cd9c8e1eeac86edeab7b0430.png","profile-completion/work_experiences-square-done.png":"/assets/profile-completion/work_experiences-square-done-c09db40957b2e903140c42018602137a2cc15a50c60ba5dd674c2f9a767ae6f3.png","profile-completion/skills-done@2x.png":"/assets/profile-completion/skills-done@2x-c729f2b09488178520ae66bd82ee39525d772f110c2262322e39fdaf2dc5ca38.png","profile-completion/skills-square.png":"/assets/profile-completion/skills-square-1444ad7637de0e958f3d2d140c700413273f1ed437a95b641a0e0b16de26d301.png","mass-email-layouts/announcement.png":"/assets/mass-email-layouts/announcement-27ba4383734961e817a97e37329c2441581fec61b3ce48189745073f9b032247.png","mass-email-layouts/promotion.png":"/assets/mass-email-layouts/promotion-6a8b4f83335e06f49531b69bc4b7956bca8bb852062ed2d1affbea8e76e1ae95.png","mass-email-layouts/default-banner-image.png":"/assets/mass-email-layouts/default-banner-image-eb91c15e13a4f21b8ffae846113626afb234b960050bd2f347ea3a6342d2f654.png","mass-email-layouts/newsletter.png":"/assets/mass-email-layouts/newsletter-1822a45c16050770c1c36f0d235a37e676e35bf6b0694d27d5d62044d695ea54.png","mass-email-layouts/default-image.png":"/assets/mass-email-layouts/default-image-2319029fab102c3a8411fb3dfb373ec81bdfd2b56dfc28c666a2907a91d38787.png","mass-email-layouts/blank.png":"/assets/mass-email-layouts/blank-d950858238889e5b7fde9521d0c230d37b24287d974145aa971db04413ad22ae.png","ats/greenhouse/logo.png":"/assets/ats/greenhouse/logo-a42dfdccd575e809732de4f626e14b4fe6515088b57c83dc688570ccb5f8250e.png","star.gif":"/assets/star-1a01f5c56a03de3347e9c661a903b8f83de48337a327374f222107b561052b0a.gif","student-profile/empty-bio.png":"/assets/student-profile/empty-bio-61f24e7cd23ad49e8d14f2f678beb8808e674d9dcfc507b2a2042e1637fd7bb0.png","student-profile/document-sad-face.png":"/assets/student-profile/document-sad-face-5fa5327f8caae7330518fbe6f4fb336506f0d0936f6534141b53a9c073b3da2d.png","student-profile/add-button.png":"/assets/student-profile/add-button-41246c93015192d1f3ec33cd65d274a85a2e5af12126964274324e0b31fd7cf5.png","student-profile/who-viewed-my-profile-empty-dashboard.png":"/assets/student-profile/who-viewed-my-profile-empty-dashboard-5c1ea9d49cb9d28a80cd85fbaed4ff44a62b2f8f0e4a70aa6d31819737ab1384.png","student-profile/open-profiles.png":"/assets/student-profile/open-profiles-8740e92016d282c8b759f45b7fe27c49c2afa8db1af84f79b0bb34b4a77932d7.png","student-profile/lightbulb.svg":"/assets/student-profile/lightbulb-f1cf9d89391754906e31b96fcb0e342862ee0eea3ef662c5c7f293f7242b6297.svg","student-profile/gated-profile.png":"/assets/student-profile/gated-profile-a41d1828557a9c1aecaf656fee667a48bc0b880a788f316d7447859100cf51a3.png","student-profile/upload-resume-cta.png":"/assets/student-profile/upload-resume-cta-e4b526649cc619ea9a5443f2674a5bcab58c1189d4d4668287cc104354b9963f.png","student-profile/who-viewed-my-profile-empty.png":"/assets/student-profile/who-viewed-my-profile-empty-c3cd7bcacaa7e4a66a7ce849c31dad64fc846060eeaf60cfa658720adddea3f5.png","student-profile/default-bg.png":"/assets/student-profile/default-bg-29c9c5654ba15b26e94fe2cdbeb2673eb1f96f09f2fb176d064e6b97134950c2.png","student-profile/social/gray/twitch.png":"/assets/student-profile/social/gray/twitch-92814b0c36e53e5cf3e03333d86f01f467cf47899827129929d742b46414a877.png","student-profile/social/gray/tumblr.png":"/assets/student-profile/social/gray/tumblr-4f61d23bdd459a8254c543fd7050cd770d08076c8f755c3cb5a0e8cc8d94d6a9.png","student-profile/social/gray/spotify.png":"/assets/student-profile/social/gray/spotify-2f9e7cd0e3d3d143d601c6327c35910f94d2b2b35a443a93a3c1b81b8da2c55a.png","student-profile/social/gray/vimeo.png":"/assets/student-profile/social/gray/vimeo-1a132cdf99979025292760aac4fff101455f5399ad9d00add20381817ea4505b.png","student-profile/social/gray/twitter.png":"/assets/student-profile/social/gray/twitter-9301a6b652bd3964ccce6d37157f294ab7064606faea0e0ae580abb2c115d43f.png","student-profile/social/gray/youtube.png":"/assets/student-profile/social/gray/youtube-524238188be2a9b320c185165b5c3444d4d959c3391f9ab35047258ea910d776.png","student-profile/social/gray/codepen.png":"/assets/student-profile/social/gray/codepen-fa23578f5e85466139a210d7a0f1385d89cd88ce740be220ee3a5a1a08a09d02.png","student-profile/social/gray/500px.png":"/assets/student-profile/social/gray/500px-7eef20f007cf9ea5641dbc811991db7f15e3ba7dfb6bac08eed1850c4851b84b.png","student-profile/social/gray/pinterest.png":"/assets/student-profile/social/gray/pinterest-b48e3fafa33b97515a56feb0894031a43f64bf6e3d5011f36043b941a1ecd6d3.png","student-profile/social/gray/github.png":"/assets/student-profile/social/gray/github-7fd6561568de703ae75c043ec1bbe6509dcd2e93d0cfbe0cba4d8d44b3d8327f.png","student-profile/social/gray/about.me.png":"/assets/student-profile/social/gray/about.me-34bad82a536d2c43e51c0a7ce1b2242f3471f285cc1643b05a6b370a5b6dc0b8.png","student-profile/social/gray/google-plus.png":"/assets/student-profile/social/gray/google-plus-7fee727cd9d0e6605a4f7ca3c18c06c22a0ad57d69f13ed420d1781b88f1f31d.png","student-profile/social/gray/soundcloud.png":"/assets/student-profile/social/gray/soundcloud-7a283bc7aab5c0663b1865b608cb5941c84d60ede8c58ff17b78cc6b16509f1e.png","student-profile/social/gray/dribbble.png":"/assets/student-profile/social/gray/dribbble-d113f1635ab38bd522878230084a8fedf1f6632410ceef278f1027c2ac32f854.png","student-profile/social/gray/facebook.png":"/assets/student-profile/social/gray/facebook-927c8e9df0ccfd5f1f4ca9390e7625a92a2da9db2e4383d7a83c2930f06c729e.png","student-profile/social/gray/add-your-own.png":"/assets/student-profile/social/gray/add-your-own-dd1ffd0f8a03ff0b515db0baf6b009d82e7d043923092b1378b3ab07dc9bd2b8.png","student-profile/social/gray/flickr.png":"/assets/student-profile/social/gray/flickr-99ff76edba6455c70aea185476226ba6179910b3add49f35dc826868d389ca99.png","student-profile/social/gray/instagram.png":"/assets/student-profile/social/gray/instagram-76ddfef236f941ad0866b69d1be382ba94f7e120c52f122aac54f9e6b97cc744.png","student-profile/social/gray/behance.png":"/assets/student-profile/social/gray/behance-959fd1dd7f550efc804005be4016ecfe8125bf0630d3a97e27b1028906dbdd61.png","student-profile/social/gray/medium.png":"/assets/student-profile/social/gray/medium-ec35194910333835cebf70f3b7820e81b53688621128448c4f08373ee29fdd49.png","student-profile/social/color/twitch.png":"/assets/student-profile/social/color/twitch-8cd4fe2bd81ba1211c6a68c68a1c8d098013ba830388611e9b119cf882a54611.png","student-profile/social/color/tumblr.png":"/assets/student-profile/social/color/tumblr-bf1a6de511adae193a1a6ee150235a56262c83e9214f6a95223891af19cf5f30.png","student-profile/social/color/spotify.png":"/assets/student-profile/social/color/spotify-8433d5b9fce6f1e9a4e3ca69c2a13306f8786f82fcca17e50ad26781c5d82edc.png","student-profile/social/color/vimeo.png":"/assets/student-profile/social/color/vimeo-dce90d504336d4742cfa1452bc6aa74dcaa006e7ac3804d8b3c292c3f277addd.png","student-profile/social/color/twitter.png":"/assets/student-profile/social/color/twitter-dbf1ed794ebe4e814757c9190daf7397e32c16ed1d5b256322853af18bdb0716.png","student-profile/social/color/linkedin.png":"/assets/student-profile/social/color/linkedin-0ce67410f31ece41b07236c1afa80205a73744e33008d59840dc22484bf3bc8e.png","student-profile/social/color/youtube.png":"/assets/student-profile/social/color/youtube-c24ae452d0dfafec97a241944fe5255637d1d22e4a32df2c8fff91b0c67b7ae9.png","student-profile/social/color/codepen.png":"/assets/student-profile/social/color/codepen-5eb504fd203bc5316af090482a4a0b40b14f14eaad0d023a4e7368f2c8fef987.png","student-profile/social/color/500px.png":"/assets/student-profile/social/color/500px-f2f50a0db227e695a3e68b63f9579095eabf37d4cef233def4e85d37c471e1e8.png","student-profile/social/color/email.png":"/assets/student-profile/social/color/email-01e26612c5d43890a59f3ed24e3d9a59a8cb74436f45efc19c45fc95527b63fb.png","student-profile/social/color/pinterest.png":"/assets/student-profile/social/color/pinterest-64c38bc8d873fd8191f0a571157d18237a40035e24f72df109c5688ef677ab17.png","student-profile/social/color/github.png":"/assets/student-profile/social/color/github-ffa5be3cbb9d9fbdb6821c4ee37db5914a22e28c4b0c2090ad863a01be10e9c9.png","student-profile/social/color/about.me.png":"/assets/student-profile/social/color/about.me-c572e53d361e8be2900fb16bf9c60ca6e72a12fd17f3c83e87895544ef8330e4.png","student-profile/social/color/google-plus.png":"/assets/student-profile/social/color/google-plus-af13cfae417dc924dbab2772b7ad59a6c7e8aa840e4dd579c1281900528b942f.png","student-profile/social/color/soundcloud.png":"/assets/student-profile/social/color/soundcloud-bbe378c2832e9bb5b150b0ad0dee98c9039ad8f3a930b137b48bea8ceea814a7.png","student-profile/social/color/dribbble.png":"/assets/student-profile/social/color/dribbble-b43454aa6e1cb1912a91264432d6c57a3e0c42d5f3eb324d08951bd86196dffd.png","student-profile/social/color/facebook.png":"/assets/student-profile/social/color/facebook-e62f2a2bcb2068a7296479927ecee4bdf81f9dd2ce660de1a3ed639815ace620.png","student-profile/social/color/add-your-own.png":"/assets/student-profile/social/color/add-your-own-dd1ffd0f8a03ff0b515db0baf6b009d82e7d043923092b1378b3ab07dc9bd2b8.png","student-profile/social/color/flickr.png":"/assets/student-profile/social/color/flickr-1f7e2f17e860abcf4efee2d3a5935d3348ce84bf9ea859c75caadcfc16bedcdd.png","student-profile/social/color/instagram.png":"/assets/student-profile/social/color/instagram-6cbe8f3b3e5ec3c6a315b682e2a8d14ddeb34f82a2fe0658174285784d41b1ea.png","student-profile/social/color/behance.png":"/assets/student-profile/social/color/behance-28db72617d008e4a7e2c9a28d4f524ad707497daa4ed8bf9455b2fe72537a61e.png","student-profile/social/color/medium.png":"/assets/student-profile/social/color/medium-8af74e106171a8beebb07446eb1983d5dc491bbe22a2ebbd87ea3d0fa9dce6ba.png","student-profile/default-profile.png":"/assets/student-profile/default-profile-800fb65cded92babbf95628dc8d52f5762b20f12af868bf23e3b63cae22e9ba2.png","student-profile/add-button-solid.png":"/assets/student-profile/add-button-solid-01764f82dae86681a50b9951b54408aca8e6675fc2bfa42f1e9a05582edae28e.png","student-profile/course.png":"/assets/student-profile/course-5645c81c2fb2ecaac4634d8c649778f6f3091700c75d2661a8c5d57d48b03f37.png","student-profile/documents-empty.png":"/assets/student-profile/documents-empty-ad7f57ab624416976eb7f9936dec15ed407a3e0ad2dad5ebcfb0f1cb3296382c.png","student-profile/resume.svg":"/assets/student-profile/resume-fde6a31763bc140b181dc7bd71c102b31d17caf57bed303f0c31d11b8e4d11be.svg","student-mobile-gate/stylized-mobile-app.png":"/assets/student-mobile-gate/stylized-mobile-app-840309eb9ade2e14e9039c4d079f8f368769eb4d6ec1799f80323c9b491d4373.png","student-mobile-gate/mobile-app-jobs.jpg":"/assets/student-mobile-gate/mobile-app-jobs-dd483eecfa844da699c58e0db0e911967338cfff2e18f72b9dc3ff96e98218c4.jpg","student-mobile-gate/mobile-app-events.jpg":"/assets/student-mobile-gate/mobile-app-events-f4b3f7c7d3fd546a9212a6f9b50543a39264235a785144625d1baee32cbc3251.jpg","student-mobile-gate/mobile-app-hired.jpg":"/assets/student-mobile-gate/mobile-app-hired-45b4e370527cd8676018a679afa9a3a12e988868dd83c04c4c58a520e63db58a.jpg","postings/approvals-preview.png":"/assets/postings/approvals-preview-a5f39c7074c301c8453895f03c8b4325b311ea7e97bb0cda8c262bec8749e3d5.png","postings/postings-preview.png":"/assets/postings/postings-preview-14045bc0cc17f97ff9ef264fabcfbafcf3f59238017f0139539eaa3089bd5077.png","referrals/hands.svg":"/assets/referrals/hands-e8270e50ff7827788514467e28b76a44d85758fc37e382725513a045a1a29968.svg","connect-with-stripe.png":"/assets/connect-with-stripe-ae7d4d426577005d47277ec606d84f3eae5f55e8072fb3dd6566e7d436a851f7.png","student-messaging/icon-envelope.svg":"/assets/student-messaging/icon-envelope-da63d7917803844cec758db34d31f7947b68b4bd655e925307d938a93df51986.svg","student-messaging/icon-flag.svg":"/assets/student-messaging/icon-flag-5322ea1337169ce272aa7001999bde51dea8129fb5c2d7fd19ba6fea06366215.svg","student-messaging/icon-envelope-decline.svg":"/assets/student-messaging/icon-envelope-decline-d8332bb6adb02a13b242ca3746d3ff76bdb83d0f9b84c4a5d063746d1d3d549e.svg",
"jobs/job-alerts-first-time-experience.png":"/assets/jobs/job-alerts-first-time-experience-f481be3c7937649317c64ee4704121632f23a7c6e8cb84ec449a2201a2ec09c9.png","student-onboarding/new-york.jpg":"/assets/student-onboarding/new-york-2196667c66412029307ac5442698bdace22a1dae3698664cdcd9747a961a3fea.jpg","student-onboarding/san-antonio.jpg":"/assets/student-onboarding/san-antonio-411d235706ee114ae7f82932545d86133fd4d083743d8e3e224837c9776112fe.jpg","student-onboarding/dallas.jpg":"/assets/student-onboarding/dallas-b53c1e0fc70acbb8e6370698542b6649d0bd7a495cf3788aa7722ebdb3dcd026.jpg","student-onboarding/miami.jpg":"/assets/student-onboarding/miami-dbb188d551b8268989b42176e4ca1b2abb51862b1eba50b113fafc03f4dca6ef.jpg","student-onboarding/detroit.jpg":"/assets/student-onboarding/detroit-5810ae606f49f22bcd883c80cafee9e54c8615321f566748ec0cda006b0b156e.jpg","student-onboarding/st-louis.jpg":"/assets/student-onboarding/st-louis-9f14f1f0ee28453465954ca0ff7b73da3d7506be37455a19fce07c9474aec6f8.jpg","student-onboarding/minneapolis.jpg":"/assets/student-onboarding/minneapolis-5ea5ca10c5d0d473c3c3dbd1cdd0bc853caa19e9f0d083b0df9de8db54798d96.jpg","student-onboarding/washington-dc.jpg":"/assets/student-onboarding/washington-dc-2dce4eca00f0f2796815b1b38dc89069959a0823d3f16f31bf2ac103cdb8d964.jpg","student-onboarding/denver.jpg":"/assets/student-onboarding/denver-e1d27ec0dccced146ca6d42fadeddf745a097345557cceff3edf8b307f1c8471.jpg","student-onboarding/london.jpg":"/assets/student-onboarding/london-e6734e796f63a765c131f5cf40eca8091931af43961acaabe37bc9067968df37.jpg","student-onboarding/providence.jpg":"/assets/student-onboarding/providence-7d3780f6b16ff04a6884f6fe353c1e145dda8239ef4bb43d909a88c079d4753f.jpg","student-onboarding/boston.jpg":"/assets/student-onboarding/boston-7c48157e3318fdb3bbf385f8fa7319b2cfbc99627d144130b3f7e842bd2741fd.jpg","student-onboarding/boise.jpg":"/assets/student-onboarding/boise-af13928c66e7ea577bab2f97388b8676a2240307c4dba0bbd45f425c3542a865.jpg","student-onboarding/chicago.jpg":"/assets/student-onboarding/chicago-9aa44a61ecc32c2b671b453efa14db078c0a1f446d6a1d6181101487b10c6f5e.jpg","student-onboarding/phoenix.jpg":"/assets/student-onboarding/phoenix-6dd375721c514ff7117903feb588820af90422fe62dd9aafa0e84b6a32b98fa1.jpg","student-onboarding/charlotte.jpg":"/assets/student-onboarding/charlotte-863b9de4f0b22e8425caba7fe15d976a78754f46289d71a0144fcf2562159c40.jpg","student-onboarding/las-vegas.jpg":"/assets/student-onboarding/las-vegas-4ae0aaa329dc0b222738db8d314cafddfa7c27ec39072f59fd1877618f08cd77.jpg","student-onboarding/profile-completion-education-public-services.png":"/assets/student-onboarding/profile-completion-education-public-services-f2ca01a5401a75ac879c8c8d528f78b96b14c656d3e22c48bbb9ea3312677da8.png","student-onboarding/madison.jpg":"/assets/student-onboarding/madison-29ee9aa551e0500d876052df6fb0d2a68828206d77cdd4495e2d818ddb050b48.jpg","student-onboarding/circle-search.png":"/assets/student-onboarding/circle-search-84eeb43739b41653ae266b5e1d5e46f1109d5e596131d8da03cc6722ed1cc60d.png","student-onboarding/columbus.jpg":"/assets/student-onboarding/columbus-44429223a326612f9bc065fb5dbc735de0a5545ca89a860aa0b36bd5192cb241.jpg","student-onboarding/salt-lake-city.jpg":"/assets/student-onboarding/salt-lake-city-3ac5285afc235c3710319b3020dadedcb0fbb1c044c9472f8da5cc94573f778c.jpg","student-onboarding/circle-briefcase.png":"/assets/student-onboarding/circle-briefcase-1b77961a05ac6405381da017d10e6146628399df408404cb59bcee4af295837d.png","student-onboarding/omaha.jpg":"/assets/student-onboarding/omaha-f99dbc715b52c118e6a8a2b10a801ce08374791cf8858b3872f9c533b0dc8884.jpg","student-onboarding/los-angeles.jpg":"/assets/student-onboarding/los-angeles-694fc56935db5804ef63de56716f0d0633ee838da5e4e50ae7f0a473e9c45f45.jpg","student-onboarding/indianapolis.jpg":"/assets/student-onboarding/indianapolis-715403240547924af81d6265fdcc08b8bc85f42e6a492c4dec8ce1a7ee153e76.jpg","student-onboarding/honolulu.jpg":"/assets/student-onboarding/honolulu-cfcf085b03196097b55c91cf1916f32aa2260cfa63646f967676375e8977fa38.jpg","student-onboarding/nashville.jpg":"/assets/student-onboarding/nashville-00c7225ec5fcc1e84260ae3f0babbd782b123f761da397edaee91630fa1ae1c7.jpg","student-onboarding/profile-completion-tech-engineering.png":"/assets/student-onboarding/profile-completion-tech-engineering-33b39dd06b4196eb7e9b7f17006b9ffa45fae24508f4b75dbdce17fbe193368e.png","student-onboarding/portland.jpg":"/assets/student-onboarding/portland-b7cf31ae011517ec4badb533069545eeafab09132cd653aa021d54382b868ae8.jpg","student-onboarding/new-orleans.jpg":"/assets/student-onboarding/new-orleans-e8e8c380af476166d7f4245e58fed38756940e7c97e1bbb2fcf6014be044c113.jpg","student-onboarding/austin.jpg":"/assets/student-onboarding/austin-913fdabc7710916529d6e51257c69109e61f22df8075cd3adce3ef005d8cd14f.jpg","student-onboarding/kansas-city.jpg":"/assets/student-onboarding/kansas-city-ee9e4ac2cda0a856814aad7f6fc5a70fe1a8814b1c0f82297b7ee1cebeba3fec.jpg","student-onboarding/profile-completion-generic.png":"/assets/student-onboarding/profile-completion-generic-72a123e7d29166e3da855800fdf2b600bcdf0da366d843d35926bacc1267efdc.png","student-onboarding/profile-completion-health-environment.png":"/assets/student-onboarding/profile-completion-health-environment-37b77ef1595460549831c9dec69079cc9948b9f4cfa1c4bfefd909ef79388afd.png","student-onboarding/circle-flags.png":"/assets/student-onboarding/circle-flags-5f99803f478435bd6168c97c86e45415c85df97e838661142c32257e8bc5494f.png","student-onboarding/toronto.jpg":"/assets/student-onboarding/toronto-6e35571fdc4bb343d6896b1f10a81ddc0af892b68f6be4c2ae0e3bcb3cb7b9a6.jpg","student-onboarding/baltimore.jpg":"/assets/student-onboarding/baltimore-0c8683ddc9c00e8c6c68f736d38bc5a6837e1649d8ff636fe531464bea39ec94.jpg","student-onboarding/profile-completion-finance-professional-services.png":"/assets/student-onboarding/profile-completion-finance-professional-services-634c0794946e41a489098d731df50e1147d217dae82088447182a3ca1546dcd2.png","student-onboarding/san-francisco.jpg":"/assets/student-onboarding/san-francisco-1f35d97965e6d6f4082b51b0af41cf07d6ba9625d846f1dd17660315829a3384.jpg","student-onboarding/houston.jpg":"/assets/student-onboarding/houston-cc679d8f7f1d9a0b06b0f986b59c05baeb6d4731feb8bb4d20516fd0ee8a730b.jpg","student-onboarding/seattle.jpg":"/assets/student-onboarding/seattle-885c26932a641a77732f0c026f1771c6ae5940f9c0662cf11e21a33c1d58b924.jpg","student-onboarding/career-interests.png":"/assets/student-onboarding/career-interests-df519a835aaa75e6c35636a0c11c77b86ea48fdd1a351b0b20b2b162f94e33c9.png","student-onboarding/tokyo.jpg":"/assets/student-onboarding/tokyo-4b68689c21b313209ffe0df79477c391ce257f3e74f5720edbc989cd00f71f93.jpg","student-onboarding/philadelphia.jpg":"/assets/student-onboarding/philadelphia-6f04ee6a4a246df8f5d690fd4681b8df128f939d30868976ce4cd78f9acfc0c2.jpg","student-onboarding/san-diego.jpg":"/assets/student-onboarding/san-diego-3202ce6049e451c672834ee75d7ab73b54df574cb051817b8bd053da3c8fa75e.jpg","student-onboarding/atlanta.jpg":"/assets/student-onboarding/atlanta-95c0bd554ec59b16065ae774d2e346cc5d8b4e51cfc2f48c5d145fe036b38390.jpg","employer-results-change-modal/nav-change.png":"/assets/employer-results-change-modal/nav-change-6563e363c47ecbba9b40feae70afe7f06fd4b1f02393f9353d5765ab76012773.png","documents/conversion-error.png":"/assets/documents/conversion-error-2102467b06aa56eb25051cfe4670101c3f0bf8bbd7ebccdc0e2b8c7bb3ea7aac.png","documents/converting-doc.png":"/assets/documents/converting-doc-874ceaddf20917f721f6da3b0a18662f23dea8002eb4575b7804af9a99f1196e.png","documents/doc-icon.png":"/assets/documents/doc-icon-4496514c0c2a2124fdd9193c35348b4a43500f4aa0b6d86488bd41824e12dc1c.png","documents/university-approve@2x.png":"/assets/documents/university-approve@2x-277ff1f862c48831eb0e36dfaee04ae1155176612cd044e6c7a8f1eb3a72c378.png","documents/approve-pdf@2x.png":"/assets/documents/approve-pdf@2x-ef8684ad357f2cccc0758f8b4095f25973322ab94e0e022ea0b6dfdc3c71b5c3.png","documents/pdf-icon.png":"/assets/documents/pdf-icon-12cd91d0f3ab17db13747cafdf135144c8ff0600a02ca1fef04aee8092ea20bd.png","documents/empty-category.png":"/assets/documents/empty-category-a69799d8ba74402622a59db643fce0702f5b0d5efd895e7542d4565ad166b07a.png","documents/blank-slate@2x.png":"/assets/documents/blank-slate@2x-90d0b4fbdbeff13f60363c913baa13d4ee1d61857a39d1fd4874be686da08b8b.png","community-questions/questions-icon.png":"/assets/community-questions/questions-icon-473b4b2d304219e13a5822e7d07a1d83d5e9247c31aad80a24a0e5068348bed2.png","community-questions/empty-questions.svg":"/assets/community-questions/empty-questions-ffb310a95c9de4c53682eb06c583c581b1601328e629fe3a8ffe5bc3134636dc.svg","community-questions/question.png":"/assets/community-questions/question-a0440e6d610105b8ff85916940efc3fe11fdc6b9efe0cbff9a558974c5c0e70a.png","community-questions/thumbs-up.png":"/assets/community-questions/thumbs-up-694ce9210a2cfadd484dde8188b6111b1835215997c820924d00b3cabc8c987c.png","transparent-spinner.gif":"/assets/transparent-spinner-24ed9db3eb0d97ecf1f0832cbd30bd37744e0d2b520ccdad5af60f7a08a45b90.gif","fully_qualified_step_2.png":"/assets/fully_qualified_step_2-f11dcc5e62bd02a836efbe72dc75913f5b7cfcb8648d5eb0cd08b9362ace220d.png","invoices.svg":"/assets/invoices-01a6573d2c121641975cf189023eb7ad1c9952a99a3bb6eb55e196be9959f15b.svg","user-message.svg":"/assets/user-message-31797e2da552c6ea7690a12de6f026e720da2c5d75fb864d722a8568bb1930d3.svg","mass-email-templates/virtual-career-fair-session-sign-up.jpg":"/assets/mass-email-templates/virtual-career-fair-session-sign-up-039089b97680e1302a7082be9f32a40209a46f3e3b22d780b82084361ddc9f9a.jpg","mass-email-templates/virtual-career-fair-employer-registration.jpg":"/assets/mass-email-templates/virtual-career-fair-employer-registration-57724710025f0f1831cdfb7e478163a1e727748788aa9dd9602ce91fc0de7d19.jpg","mass-email-templates/virtual-career-fair-register.jpg":"/assets/mass-email-templates/virtual-career-fair-register-faa31447bc25aaad3d77c9c71fc440c06d2f839116c49d9f35f9d6ec315c4e77.jpg","mass-email-templates/handshake-invite-notification.png":"/assets/mass-email-templates/handshake-invite-notification-435814e2fd251bdd2d2ad6cbcb48bcf839ce9232efcb2fe4dae5ebf6e63e74ec.png","mass-email-templates/app-store-button.png":"/assets/mass-email-templates/app-store-button-b6fba287fe7bd25f71744de90ee44fae66bfb5e4f388efa2ec44f4aaa931cc6c.png","mass-email-templates/play-store-button.png":"/assets/mass-email-templates/play-store-button-815e905d4315b775e83b76d67cd3a53c5740ac21867e88df591ad5c3ded06e68.png","mass-email-templates/virtual-career-fair-tomorrow-tips.jpg":"/assets/mass-email-templates/virtual-career-fair-tomorrow-tips-b08bf8ef74cb1d9771d2cc3d7b3ca7bf8efa6ee8ccbde5ab0e97d5d2f5e11f3d.jpg","mass-email-templates/handshake-invite-mobile.png":"/assets/mass-email-templates/handshake-invite-mobile-6bdf7e6772b0fa740b04eeeb75bf64b809d22bcf10fdc9d9b254c1011336a4c2.png","mass-email-templates/virtual-career-fair-employer-schedule.jpg":"/assets/mass-email-templates/virtual-career-fair-employer-schedule-781caf6fbaa001914df2e480bc72eb3998dbfa07f057b0f6a54f986cf48dc7dd.jpg","mass-email-templates/virtual-career-fair-tomorrow.jpg":"/assets/mass-email-templates/virtual-career-fair-tomorrow-d18c4a1062ffc9535d9370e9be97737c651ee0dbb5ff2519ac6ec53d2992d8c6.jpg","mass-email-templates/student-referrals.png":"/assets/mass-email-templates/student-referrals-83ce8882b22f166e6a24bf7c4f2ef7c51a784575615b2ef20748646f9ae76715.png","talent-engagement-suite/HS_ETA_InAppBanner.png":"/assets/talent-engagement-suite/HS_ETA_InAppBanner-bd7c003312b50aad3896290cbb9536e90897d59ad0dd1950be356134bfb68e3d.png","targeted-email-draft.svg":"/assets/targeted-email-draft-c943673335522a8dba258fa782674bf2bf84ed7d1f6b6421b87d4c9376bcf817.svg","potted-plant-icon.svg":"/assets/potted-plant-icon-611578ff6036013dc9a22ac728de4ebce4f529f85959536f1bfd0331e5edbca7.svg","student-dashboard/content-type-navigation/community.svg":"/assets/student-dashboard/content-type-navigation/community-b9569db28e5b36aedf5505f065b2e13486f59958c47711efa879a0f945574481.svg","student-dashboard/content-type-navigation/career-paths.svg":"/assets/student-dashboard/content-type-navigation/career-paths-e65567d3d8dec3783f22bdeb3c1b799ec2a7ffdb61ad0d810f0e6fa3786a6c49.svg","student-dashboard/content-type-navigation/events.svg":"/assets/student-dashboard/content-type-navigation/events-6fd0eb0ecb4e4cfc7df7930c529f90eeb08a61f329f20336dd2543ee7703a410.svg","student-dashboard/content-type-navigation/employers.svg":"/assets/student-dashboard/content-type-navigation/employers-ff3a717ff81c1b8283e747f36d714bbd631f282089bb95d0dbe57284aabda23b.svg","student-dashboard/content-type-navigation/jobs.svg":"/assets/student-dashboard/content-type-navigation/jobs-1de9bdef638d3b2bfd9fc070e120cbcb077cca64a21983246f8ea1f36656c51e.svg","student-dashboard/campus-profiles-modal-photo.png":"/assets/student-dashboard/campus-profiles-modal-photo-4779fe4a3c527fe0ce8193d861d685678e42b885d48935c70d8f272e374bfe9a.png","student-dashboard/first-destination-survey.png":"/assets/student-dashboard/first-destination-survey-423625cf2bddcf521f3a85dba728b5f61ef555f117a4360293c06f47486fd236.png","student-dashboard/new-app-illustration.png":"/assets/student-dashboard/new-app-illustration-df9374dc022871afd6fcba42199cd810a97ac9af22f7f5c73fb8faf82c6ec4f3.png","student-dashboard/student-search.png":"/assets/student-dashboard/student-search-75836a1e5d297f5c084d1fce1cc81028490c0963d038460341f390d7009b2642.png","student-dashboard/mobile-app-prompt.png":"/assets/student-dashboard/mobile-app-prompt-d921127c17b9908189a5aaced0dda248537c92f406700223a4ad7899e9fd6a55.png","student-dashboard/first-time-experience.gif":"/assets/student-dashboard/first-time-experience-b7475157fc5cf0fda7ca6a7d43f7ee299e33fb35320200fb63bce630147c785a.gif","spinner.gif":"/assets/spinner-821b16473072dc2cde3414ea2f6ba745316c85e3d5db0d1681f9e46e5d55f1db.gif","matches-educational-modal/slide-one.png":"/assets/matches-educational-modal/slide-one-1edb7f8bc08a970c278ecc1e3c86aae64c2a822008a08e169fa252e093660f1f.png","matches-educational-modal/one-circle.svg":"/assets/matches-educational-modal/one-circle-215369443879396a2accb03aea913a62e005464b37c5001f18709dfcd7ec0c43.svg","matches-educational-modal/slide-four.svg":"/assets/matches-educational-modal/slide-four-d4d955a60db889f6d1d577f7fbbc866424a4e4d45b28e475ccd93300b2827f9a.svg","matches-educational-modal/side-panel-img.png":"/assets/matches-educational-modal/side-panel-img-56e9a8e794392c0dd5e78ce7e91a0a6760755d3043a915dadda0f68800f92558.png","matches-educational-modal/two-circle.svg":"/assets/matches-educational-modal/two-circle-ae2ebaee86eb0c23fd8e43fd6ca9b7c7efb847ddffb56a4b287f3e26566e8957.svg","matches-educational-modal/slide-three.png":"/assets/matches-educational-modal/slide-three-5457cef6e7d20174f7e3428009fb1153065d8e085ef3afae3da4863501123395.png","matches-educational-modal/slide-two.svg":"/assets/matches-educational-modal/slide-two-1f3059c6aa4c8c326648dbabc332826e13eaedccee22f4440b79fa9efbdcae05.svg","employer-checkin-kiosk/handshake_illustration.png":"/assets/employer-checkin-kiosk/handshake_illustration-0753e56c8a57d9935d7af0f794423d91d83f0bc26745efb8b417dfe0dc41c22c.png","community-question-invitations/answer-submission.png":"/assets/community-question-invitations/answer-submission-97a8a88d607c5c58ecad265483d0e843609ccbd207a32636d6b69b188ad35b15.png","filetypes/generic.png":"/assets/filetypes/generic-c21201e19dc5fd9d3d50d520baeba66ec054ff2cccd644af9f8c4316c6656dea.png","filetypes/ppt.png":"/assets/filetypes/ppt-9742f904e8d9eb8f85028b3db13dbbe6b2769abd8fe3bbdf7cef1a1c2638b6b3.png","filetypes/doc.png":"/assets/filetypes/doc-78649465e602a9748086a660ebf97af5f4acd237af35ad58d659779f0e87ebdb.png","filetypes/zip.png":"/assets/filetypes/zip-f76a2671c5e9a13978bdac812db9fe7a23c87867ec563fffe8577c75cf87cf6b.png","filetypes/xls.png":"/assets/filetypes/xls-323142048af78b930d776e24bdb4888831c3afb10e249a885d08bd48c200cc2d.png","filetypes/pdf.png":"/assets/filetypes/pdf-ba9af1b40998255be9df7f8bb10d3ffa3382efacdbc78e06b27036f3d06a4dfc.png","filetypes/mov.png":"/assets/filetypes/mov-636b38e72e4cffc080f734e93f0ae32c5772da3b7a59e05f66a42dd684cb3a0c.png","filetypes/mp3.png":"/assets/filetypes/mp3-d7059baf17307f49586252c01ad00203447020e0b4596fe19216ebd33cba0f1e.png","filetypes/img.png":"/assets/filetypes/img-e9679961b6c804ca19bc4b47d3c38c6a37e2278b7c9d5e72551ea611f7f818e4.png","interview_schedules/new_job.png":"/assets/interview_schedules/new_job-08322832a3dea13f18e2794a68d9c340024ccecb4df2d9a00fe6a427ed7bb992.png","interview_schedules/attach_job.png":"/assets/interview_schedules/attach_job-b82bed0b51339868235395d0638524de82effdc276e250eb438861922934af74.png","interview_schedules/copy_job.png":"/assets/interview_schedules/copy_job-6fb6723f45967fab00e10b9f30e1f5c40ea5b07216c29cf08004dba58c74ee69.png","logo-icon-dark.svg":"/assets/logo-icon-dark-b72f9ca7bac847e313b5a296532cb678b941dd40df20523d6fa9c1ae40066743.svg","patterns/icons.png":"/assets/patterns/icons-d44414be8ed381d824eb59ca792b16e5c7a18ed1c5a9319acdc060551cd42012.png","student-search/empty-state.png":"/assets/student-search/empty-state-6a040cadd5f95b2e0674aa779ab6947625dd63cd56b32b1145b99f1fbbc3e66e.png","alert-diamond-red.svg":"/assets/alert-diamond-red-973ee43b47e1f670c0a21d5c8e8de89e521a229b9529350bb8f5f05d9bedce93.svg","hs_logo_nameinline_small.png":"/assets/hs_logo_nameinline_small-8425f3c608a2a682c2101bc2035647814454d89f02ca8a3a8042d960decee990.png","targeted-email-shiny.svg":"/assets/targeted-email-shiny-aac9f1f010f4452f5ffda836beef1906edbb8282b36dc131b3144b144d12dac8.svg","alert-icon.svg":"/assets/alert-icon-2f400cc35daf8603745510744fe4d9ac3f0da9b89ad3ed29fc253df00e391def.svg","no_contacts.png":"/assets/no_contacts-4f69b07d6df7c3358e1305c034d3cb9b9f8a521bbc9ac867891b090afa12c21e.png","bg.png":"/assets/bg-13c5a446acd15a21ceae531aa6408fa11c1b7131990a371254b10314eb7cb721.png","official-logo-inline-dark.svg":"/assets/official-logo-inline-dark-981d79fc9c40a824d7ce26778a438af16f6f0423016531d6de16cab2a08138a3.svg","logo-square.png":"/assets/logo-square-8fd5ee2f9dcef17820d6b3048302c89d7599f03a25645aaabcf930348b4de048.png","experiences/empty-employers.svg":"/assets/experiences/empty-employers-0f60e64a366cbe1b2f85f32b156dd134736984fba08d26af70112f236b0d87ed.svg","experiences/empty_survey@2x.png":"/assets/experiences/empty_survey@2x-37408eb4da6542da2459ac0ed9c7c473db8cba0168541c9e2998f96b450fdbad.png","trophy_with_sparkles.png":"/assets/trophy_with_sparkles-d3f802b401aa840d8c5054dfb6baf828e1bd9b0a4ddeea08e539265f00da4347.png","play-store.png":"/assets/play-store-0ae725c405d6bdfe1502107ddbdd0f9b89ad2513b0439c5be7e71e0bac8a28b6.png","career-fair-image.png":"/assets/career-fair-image-8712ef012cf89dc36e3a28056063db8d6985d765525767fc8071a321f3a1d4be.png","feature-release-preferences/homepage.svg":"/assets/feature-release-preferences/homepage-cb6825ef42c6bac84b23079191f3c1724e3da90a9fbab2c591b04627f5a5b0da.svg","feature-release-preferences/reviews.svg":"/assets/feature-release-preferences/reviews-8912fd2f67528a53e10e53453f838481807715bdcd722f0728190738d2987917.svg","feature-release-preferences/emails.svg":"/assets/feature-release-preferences/emails-1c7becc0c6e2257a5d6dce5ce62598b0b5a43f10a9699225dc3336b5258eb9d1.svg","onboarding/icon-connect.svg":"/assets/onboarding/icon-connect-b84a949b8f1e2a2a8434513f30b0c1f6cbb49cc974051483dd92cb29dec25be3.svg","onboarding/icon-envelope.svg":"/assets/onboarding/icon-envelope-835d502e709b3ad76721789e0f16e8fea9aaeb43b27aea3e04605737b06b8d7d.svg","onboarding/hourglass.svg":"/assets/onboarding/hourglass-fb97b71d512f023b9407a63d1f08520548b086f177fcf305509e7818974beea3.svg","onboarding/icon-123.svg":"/assets/onboarding/icon-123-deaa9d63d00e5a704767f966f83ff975a039ecb69c0a2d2c08c670ab5613a110.svg","onboarding/icon-scales.svg":"/assets/onboarding/icon-scales-59a8c4f7c30f3368c12dd37286b95aec91bff5f9af7ec2d6f57dd9e14402dc60.svg","onboarding/school-logo-virginia.png":"/assets/onboarding/school-logo-virginia-e85ed9e0ce0bb70c31bdac22d47c0f2f687ef4f9c61b10eb3f0545329e8b9e3a.png","onboarding/school-logo-rice.png":"/assets/onboarding/school-logo-rice-3f0956419f8a5d84a4ba6e9f0352ca4cc2bcb082b4bec1d067089d585c6eb55b.png","onboarding/school-logo-morehouse.png":"/assets/onboarding/school-logo-morehouse-fdad7f587459104cf9ebe5eb602112b296153813242e974c25f78021a0c493e8.png","onboarding/school-logo-carnegie-mellon.png":"/assets/onboarding/school-logo-carnegie-mellon-4acacdbfbccda31ea1fff257ef551123ea14f6dcf2e766fd2ed0319a4a33aa79.png","onboarding/school-logo-stanford.png":"/assets/onboarding/school-logo-stanford-647ce0b28737348aa50de45206e529323f3147e2bee873ac63642ed18829520e.png","onboarding/school-logo-uga.png":"/assets/onboarding/school-logo-uga-27d509d1c0f46faf729b14e8cab53afdd4c9dd1d912d923b9bef6c92b13b7ef7.png","onboarding/school-logo-cornell.png":"/assets/onboarding/school-logo-cornell-eed9f6da8befb4646753cd6466cdcbc2515a7ab0e1740fb823a3282391867742.png","onboarding/school-logo-usf.png":"/assets/onboarding/school-logo-usf-dd4ceca2b785f74f9301e44481074e7e602dbc24b41934860d3d2aa3afe40e25.png","onboarding/school-logo-south-carolina.png":"/assets/onboarding/school-logo-south-carolina-11eec0a25aa3d5df60a17084fb7c9b231624a403c259d89236a50341a9bb8ba7.png","onboarding/icon-search.svg":"/assets/onboarding/icon-search-e91e1b899f93a1e45b91be1371202965bf8d3a9e85aac2c4045cb097ff2f726d.svg","onboarding/icon-checkmark.svg":"/assets/onboarding/icon-checkmark-cbfa4bb2ae3d355a3df2f6e305a80f4f01e16dd39064a418f28e8a23543df0b1.svg","onboarding/school-logo-harvey-mudd-no-margin.png":"/assets/onboarding/school-logo-harvey-mudd-no-margin-d6d548a567de5a520d0f9756f0b8ff4d43681c9d678333705fd51dd61d8edf10.png","onboarding/school-logo-michigan.png":"/assets/onboarding/school-logo-michigan-16a11afe9609d74ede693542cba4166eceb174a41b8968e1636516117b94382d.png","onboarding/icon-shaking-hands.svg":"/assets/onboarding/icon-shaking-hands-3dfc1390ebe5db650e902a51a1e13304674c38b46a989e4740440c0cc9029e44.svg","onboarding/icon-book.svg":"/assets/onboarding/icon-book-2c068a5ed1b384c26e30c43b54a7d614ebd6ce63475b543dd5b29fdd775c6cd5.svg","onboarding/school-logo-berkeley.png":"/assets/onboarding/school-logo-berkeley-7075ba2448e3a421c7970875fa9ada5994338617574ef9fd2248c08bb702bc4e.png","onboarding/work-experience.svg":"/assets/onboarding/work-experience-6fa6792b989834d6a4613beafc04b3dcb7a809ee6d40b2b314c8cf3882bc29f2.svg","onboarding/icon-find.svg":"/assets/onboarding/icon-find-648b5c783015fd974bc5c3d05e12a037e8c8b8916e268e97165d7e55bb24d4c2.svg","onboarding/school-logo-harvey-mudd.png":"/assets/onboarding/school-logo-harvey-mudd-acdf5f09936ea3d251bd6e94377ec14da35f36ae1ee373a50103872a0d047a64.png","onboarding/icon-lock.svg":"/assets/onboarding/icon-lock-490566b3a5c9cbae95c492de8bb0816629973f9d932ca1e6e157ead38a3ab523.svg","onboarding/icon-computer.svg":"/assets/onboarding/icon-computer-954588023325a487a565eef17e2ee7d485f7eaec26d92119401ecfd618e8f8db.svg","onboarding/icon-beaker.svg":"/assets/onboarding/icon-beaker-e97e5b4a9e5eb68d8ff5613c988fb726e1abaa11fb5a2e1c70ad9963010ae9e6.svg","onboarding/school-logo-villanova.png":"/assets/onboarding/school-logo-villanova-1f959199b0df0cc4615225a3db8e696ffa8ce5b411ca2a3232a8b58612424df6.png","onboarding/education.svg":"/assets/onboarding/education-6fa6792b989834d6a4613beafc04b3dcb7a809ee6d40b2b314c8cf3882bc29f2.svg","onboarding/school-logo-gu.png":"/assets/onboarding/school-logo-gu-af7190bca84b91cde0dbed5f70840333ccbf034e216a9ed86ce432c2ead06342.png","onboarding/icon-approval.svg":"/assets/onboarding/icon-approval-2129493bf54d3bf0d78e6bb80179d7a45ab71a1249dd395f852c88dc738e9a6d.svg","onboarding/school-logo-spelman.png":"/assets/onboarding/school-logo-spelman-eb3b1f2957ea67142ea022001957c8a220fb7dd99ca4d310d2d18971a6868c1d.png","onboarding/icon-briefcase.svg":"/assets/onboarding/icon-briefcase-48dc8740f8521e315e2d2d8549082b3d46ee9e58d57264bfad1bff48be5b55ab.svg","onboarding/school-logo-chicago.png":"/assets/onboarding/school-logo-chicago-4eba7b5ae235a7ed1b0a7537f914f3bc8b95ea9aef3bc0cce9acc2ac01afe228.png","onboarding/school-logo-carnegie-mellon-no-margin.png":"/assets/onboarding/school-logo-carnegie-mellon-no-margin-b5f6e9f499cbc08445645d8465863e66f953e8e114b536102139b94e6cbfb5a5.png","onboarding/school-logo-michigan-state.png":"/assets/onboarding/school-logo-michigan-state-b174ca688feb5f1647bd114593b1ac609fd588c71b2009f1fdaf481bbd07e654.png","avatars/school-xs.svg":"/assets/avatars/school-xs-da28a402b63681fb728c26ff0a7a54340ca61dda12547253db15ec74f0c3bfe0.svg","avatars/event-xs.svg":"/assets/avatars/event-xs-de50d5f65d7e741c537ba294c0985e05c8e6a1b1f80849398ff7dc477c44218a.svg","avatars/organization-xs.svg":"/assets/avatars/organization-xs-0ee554233584d70a5a4c26e5d926251ed739f267fa2b17a954f22cc706272b35.svg","avatars/employer-xs.svg":"/assets/avatars/employer-xs-a8edc4d230b79797a22545ec0dd959f87e3f972240c91241ea77c3c81fedcec4.svg","avatars/careercenter-xs.svg":"/assets/avatars/careercenter-xs-da28a402b63681fb728c26ff0a7a54340ca61dda12547253db15ec74f0c3bfe0.svg","avatars/course-xs.svg":"/assets/avatars/course-xs-4d12a449a626d30498368cdca5de57e0a60313bc4d6bb56f7ed9d24cf968f84a.svg","magnifying_glass.svg":"/assets/magnifying_glass-638cc7713b5bb144a5b38c2d4198ad62f8e52449807b4220a2d87c96437eb161.svg","trophy_grey.png":"/assets/trophy_grey-0f5d00d48ab3c11b83ef4a135da2824d0cf1fb507c76e2ac30a7b0e6180353e5.png","unactivated-student-mailer/chevron-right-gray-2x.png":"/assets/unactivated-student-mailer/chevron-right-gray-2x-b76582b4837fa8f3a55560039f25952c63de6a553376da6c087e8d38089f5ac4.png","unactivated-student-mailer/chevron-right-blue-2x.png":"/assets/unactivated-student-mailer/chevron-right-blue-2x-d83f0ad0b639486f6f0a5f758e058c0d45b2d71ddf3ab627ae53f7c04d0bc0e4.png","back_arrow.png":"/assets/back_arrow-54bde3a8cff9b621ee101dde9bbfbfd9e1523e53e1c1ae6f3c8a92aef8ce0b5f.png","no-recipients.svg":"/assets/no-recipients-42183c9c3f537b125d6200c1e6d9d350911441aad5282a8e5e0fd61d074b25bf.svg","loading.gif":"/assets/loading-90d1010acf9fc22f374b8c225f37d5f0ece94144f7f99dc9c27375e9fff3b5ae.gif","gears-icon.svg":"/assets/gears-icon-d89a30d684235250f3e29de7ddeb554fbffb932a8898bcbd522e62344d076d20.svg","first_destination_surveys/employment_type/full_time.svg":"/assets/first_destination_surveys/employment_type/full_time-479bcda6c3d113774a1af0b76558ddcee5876e77d0dfa44924eb785f54d44315.svg","first_destination_surveys/employment_type/part_time.svg":"/assets/first_destination_surveys/employment_type/part_time-91f0f67a1c775b9fe3ea10cf24236821fb6407b470d2197375eb1354e085997e.svg","first_destination_surveys/not_seeking/taking_a_gap_year.svg":"/assets/first_destination_surveys/not_seeking/taking_a_gap_year-6ad4356d5487bd8cde176a41883624200509c7da1dbc4668e2d7e56825baa5d5.svg","first_destination_surveys/not_seeking/taking_time_off.svg":"/assets/first_destination_surveys/not_seeking/taking_time_off-08906a2a2cd6caf2937b747512729e73e8de3b93550cc54ec43ef87b2a32fd8f.svg","first_destination_surveys/not_seeking/traveling.svg":"/assets/first_destination_surveys/not_seeking/traveling-cd67ec7ca429b1576ca128723b84427cd91e3da7ab66a4743fcf30119bb8630e.svg","first_destination_surveys/military_branch/marine_corps.svg":"/assets/first_destination_surveys/military_branch/marine_corps-1595467a949ce509e9cf4b6ef31afee094f700c259defc067f12d2af80f2b6c4.svg","first_destination_surveys/military_branch/navy.svg":"/assets/first_destination_surveys/military_branch/navy-450c35839d1f33f068a8c36be5ee98a6e25f782f89b7d747a376ef977154e0b1.svg","first_destination_surveys/military_branch/coast_guard.svg":"/assets/first_destination_surveys/military_branch/coast_guard-d54dd028342d53870d3b213db040c360ccfb6a9e3b874dff0d81d15389125658.svg","first_destination_surveys/military_branch/air_force.svg":"/assets/first_destination_surveys/military_branch/air_force-6b4ddc2110f3268ebca3fb4afb9465c0405a0c39c94ed2336a904b9868b1f3aa.svg","first_destination_surveys/military_branch/army.svg":"/assets/first_destination_surveys/military_branch/army-dd46c469f39816132d4525466fbe63477e34dbf0e907f1d86bb5a6ad65734f83.svg","first_destination_surveys/response_type/postponing_job_search.svg":"/assets/first_destination_surveys/response_type/postponing_job_search-867be1cc4972773aebf682a0f2bb7d1620377d9128746077c938bb6fd6ace6d9.svg","first_destination_surveys/response_type/starting_a_new_business_as_an_owner_founder.svg":"/assets/first_destination_surveys/response_type/starting_a_new_business_as_an_owner_founder-347543750f874271c3d70679f56dc772cd27914c5c288e085b6cf8a078884790.svg","first_destination_surveys/response_type/volunteering.svg":"/assets/first_destination_surveys/response_type/volunteering-261e69b2338eb4d1fd25800e76385c65d52d3b6d01e658ffa648fa057bd1b9fe.svg","first_destination_surveys/response_type/not_seeking.svg":"/assets/first_destination_surveys/response_type/not_seeking-867be1cc4972773aebf682a0f2bb7d1620377d9128746077c938bb6fd6ace6d9.svg","first_destination_surveys/response_type/company_sponsored_or_already_employed.svg":"/assets/first_destination_surveys/response_type/company_sponsored_or_already_employed-dca3a55a3edb6212980e06575414151e09b1a96b6166cc12ab18ea764c9c907c.svg","first_destination_surveys/response_type/continuing_education.svg":"/assets/first_destination_surveys/response_type/continuing_education-30edfe6474c0b2589257a41d126ed8635bd27224293ac908dc6ba3bbacc817dc.svg","first_destination_surveys/response_type/fellowship.svg":"/assets/first_destination_surveys/response_type/fellowship-347543750f874271c3d70679f56dc772cd27914c5c288e085b6cf8a078884790.svg","first_destination_surveys/response_type/still_looking.svg":"/assets/first_destination_surveys/response_type/still_looking-a4669c3ac4c70a3d50b6190dd82d3feaab9673fb96af39d8503a8f37464c94e5.svg","first_destination_surveys/response_type/military.svg":"/assets/first_destination_surveys/response_type/military-0e5a69e8e39a686d4121bdc71a8beb42b78ebb6b747a74fbaa521b437a6d6204.svg","first_destination_surveys/response_type/unemployed.svg":"/assets/first_destination_surveys/response_type/unemployed-867be1cc4972773aebf682a0f2bb7d1620377d9128746077c938bb6fd6ace6d9.svg","first_destination_surveys/response_type/not_seeking_for_other_reasons.svg":"/assets/first_destination_surveys/response_type/not_seeking_for_other_reasons-261e69b2338eb4d1fd25800e76385c65d52d3b6d01e658ffa648fa057bd1b9fe.svg","first_destination_surveys/response_type/working.svg":"/assets/first_destination_surveys/response_type/working-dca3a55a3edb6212980e06575414151e09b1a96b6166cc12ab18ea764c9c907c.svg","first_destination_surveys/compensation_graph_marker.svg":"/assets/first_destination_surveys/compensation_graph_marker-6e365e42c499dbc3fe095e9061139bb777c0e38213fee27debc3942afb9f7a04.svg","first_destination_surveys/graduation_status/not_looking.svg":"/assets/first_destination_surveys/graduation_status/not_looking-867be1cc4972773aebf682a0f2bb7d1620377d9128746077c938bb6fd6ace6d9.svg","first_destination_surveys/graduation_status/looking.svg":"/assets/first_destination_surveys/graduation_status/looking-a4669c3ac4c70a3d50b6190dd82d3feaab9673fb96af39d8503a8f37464c94e5.svg","first_destination_surveys/graduation_status/received_offer.svg":"/assets/first_destination_surveys/graduation_status/received_offer-dca3a55a3edb6212980e06575414151e09b1a96b6166cc12ab18ea764c9c907c.svg","first_destination_surveys/employment_category/faculty_non_tenure.svg":"/assets/first_destination_surveys/employment_category/faculty_non_tenure-36931c0772eef6ac8ca293c1a2a88fcfe904b8baca3da5bb0e4ecf97814697fc.svg","first_destination_surveys/employment_category/faculty_tenure.svg":"/assets/first_destination_surveys/employment_category/faculty_tenure-f1476f83187cadbb18d06e41d5abb01944a455793a6e365f70719dbd7a5b37e9.svg","first_destination_surveys/employment_category/freelancer.svg":"/assets/first_destination_surveys/employment_category/freelancer-a92a96fb030af4a65e59beee61eb414958f598b4cb098f3369c90e0d788e2ddc.svg","first_destination_surveys/employment_category/fellowship.svg":"/assets/first_destination_surveys/employment_category/fellowship-347543750f874271c3d70679f56dc772cd27914c5c288e085b6cf8a078884790.svg","first_destination_surveys/employment_category/organization.svg":"/assets/first_destination_surveys/employment_category/organization-ada5e0b8248733c04efb4cc81e8e0eac3fce6d77ff2b5594095ccfe326f7ce50.svg","first_destination_surveys/employment_category/temporary_contract_work_assignment.svg":"/assets/first_destination_surveys/employment_category/temporary_contract_work_assignment-35ddd55ac7c2970a6060837006ea17fef6f35b6b2559579fd1af5ff0fba47149.svg",
"first_destination_surveys/employment_category/postdoc.svg":"/assets/first_destination_surveys/employment_category/postdoc-7b3131319f6e2854f4c2854727d5c53b0b0b629e0a6f46574cb37b5a3b9fc510.svg","first_destination_surveys/employment_category/entrepreneur.svg":"/assets/first_destination_surveys/employment_category/entrepreneur-a3d0384d9cbe6328d2a7f0976054744be58910fc9485fd0af192e848d40a9b01.svg","login-v2/main-top-web.svg":"/assets/login-v2/main-top-web-2ac8529f6819292920a0c4fa0d8f924bc2f052aac7b3e98df0cddf0b60a7a7e6.svg","login-v2/sidebar-bottom-mobile.svg":"/assets/login-v2/sidebar-bottom-mobile-7fe226d2fd4304d4bb1c2cd2755183049b1f2639a556186dd0d479338b5f9d03.svg","login-v2/sidebar-middle-stroke.svg":"/assets/login-v2/sidebar-middle-stroke-64e12c68670e9149410b4c6be61ee651d715c25f524a4334e48bab2467c8bd12.svg","login-v2/sidebar-bottom-stroke-web.svg":"/assets/login-v2/sidebar-bottom-stroke-web-d24b11dcc19aa5cf156727da48f6b5ad5c3a223267a19aff991dff36879d67e7.svg","login-v2/sidebar-middle-mobile.svg":"/assets/login-v2/sidebar-middle-mobile-3957d36e64319926080b5bddab480c9aa3b1e94f8a77586384f7770089ffcf1f.svg","magic-links/magic-link-error@2x.png":"/assets/magic-links/magic-link-error@2x-80d06d56cd201092821c8bf6ad835729cdbbbe5f3f14f88c285cfe98fac670c5.png","green_triangles_pattern.png":"/assets/green_triangles_pattern-11cebb2f380ee8af2f4266b3de3c48ffdf5556447f45ef4eb1fe0cf0810d5410.png","delete.gif":"/assets/delete-32cd2462f0572cc6d63fba76837141950a47108f0015cee8f116f69002d1019f.gif","login-mobile-app-prompt.png":"/assets/login-mobile-app-prompt-113d9571b3cb48d1132a670fb35f38d05ba14bc52dfb2720390f68ff5c864b32.png","job-reviews/public-example.jpg":"/assets/job-reviews/public-example-dee6265e9cd2aa9bdaf8c83b50b1868179ff627c8d218599e312c33000c987b7.jpg","job-reviews/empty-highlights.svg":"/assets/job-reviews/empty-highlights-a9819c9b049f62c45828b52b86293519fe12902fb2e707317bca53ca4b027775.svg","job-reviews/empty-reviews.svg":"/assets/job-reviews/empty-reviews-ce847e57f5a40f42bd5caabd1dc7e7e6d82d4252a4a8fd6b65059cda316ff901.svg","job-reviews/employer-attributes-empty.svg":"/assets/job-reviews/employer-attributes-empty-f0c9daa6e1678a2c956e08c30b9cadfd8848fa4424940f531dbc7c64feb09ade.svg","alert-diamond-yellow.svg":"/assets/alert-diamond-yellow-ad9a7e76b1f47262674913306b447ecadd2de36eaa2463a2a57a2e2be0db8fa3.svg","student-prompt/woman-at-work.jpg":"/assets/student-prompt/woman-at-work-1678ef92835b84d6066750f8318b35d97cb7eee2f507f56c741fa2a7de9b7ccb.jpg","student-prompt/icon-calendar.png":"/assets/student-prompt/icon-calendar-4c75d96dd19b4df1f255617180c82aef957bb7baa5aa7d6a803debc594b639a8.png","building-icon.svg":"/assets/building-icon-95aeddd7038886457425f6929bbec7e7c8a2d2cd37358b998ed0d01403adb428.svg","checkmark.png":"/assets/checkmark-66465e891d053c5b83692b570e5b53a2fc54261fd1c8fa4c478356debe5954c5.png","applications-search/empty-drawer.svg":"/assets/applications-search/empty-drawer-a43baa2bce08e8685dfa132a2bf6739f20a8f79ba2e29547459e29a8a1d91125.svg","stars.png":"/assets/stars-3b6c8bc47f604e0ef6687dbe4f031a679e6ed83ace0a0082aec0a10c3c7880f5.png","grad-hat.svg":"/assets/grad-hat-9b96eac40ca39dffa5d9892b527f0dc7652e718546e83d2394d2a4790910a2f0.svg","exclamation_triangle.svg":"/assets/exclamation_triangle-4802202a0c97571e0a29e6c2cbf49563e146e3104bb31fdbc30c87cb3fd2f6c7.svg","email-confirm-icon.svg":"/assets/email-confirm-icon-f62a28a87b6d78d5b8b5eda351307888989892436e1291dd177386500ce969bb.svg","ats_greenhouse_credentials/greenhouse.jpg":"/assets/ats_greenhouse_credentials/greenhouse-dcb4a982d619d0bde83c68bcad16e8e5474c88002b94b647b982db7fd473bb1e.jpg","pipeline-icon.svg":"/assets/pipeline-icon-161b06e9dfd75a7415bd31a8f209982751a41df49c2eeb0a2a0513bf86a3c1a9.svg","onboarding_v2/school_logos/u_south_florida.jpg":"/assets/onboarding_v2/school_logos/u_south_florida-1fbd7eedfd1080ad8b927d5dfa00f02436c940335448260e2d9ab63b519fef67.jpg","onboarding_v2/school_logos/wpi.png":"/assets/onboarding_v2/school_logos/wpi-35f12d358fc66bfb306ec8a2785181fe861036f63174bb268630af2d43827896.png","onboarding_v2/school_logos/foothill_college.jpg":"/assets/onboarding_v2/school_logos/foothill_college-bf54a05ee699ea4040496e89a2648c2cb86bb28c18b31badf94ed214436377b6.jpg","onboarding_v2/school_logos/claremont_mckenna.jpg":"/assets/onboarding_v2/school_logos/claremont_mckenna-1de7d3756937c67a16d319dd83c53cb8a81fe517ccdc21975bec4f08bd78463a.jpg","onboarding_v2/school_logos/columbia.jpg":"/assets/onboarding_v2/school_logos/columbia-572cb9982f5cfa82e0189c5806949fa7135126f3012da5e6af0d025c3dc1573c.jpg","onboarding_v2/school_logos/u_chicago.jpg":"/assets/onboarding_v2/school_logos/u_chicago-b2e018d0d1ca67bf1925e77f5a0b849956f8ae8d9c054dfa43bf497360b0e705.jpg","onboarding_v2/school_logos/tufts.png":"/assets/onboarding_v2/school_logos/tufts-e517890ee0da2bbd0e7459097e51141902b964039efc37f189fe81486a9c9bb8.png","onboarding_v2/school_logos/harvey_mudd.png":"/assets/onboarding_v2/school_logos/harvey_mudd-deed7786c99cb4de3dc88d5b2c6935816042519ddf4c757bd8b2fd8055d16109.png","onboarding_v2/school_logos/texas_san_antonio.png":"/assets/onboarding_v2/school_logos/texas_san_antonio-e61337c0290909f480ad609c7cb80d8425159e11c857de2724fb763b1bc8998d.png","onboarding_v2/school_logos/pitzer.jpg":"/assets/onboarding_v2/school_logos/pitzer-2747f4d05d7c05de220962404167970a2e27be545f847f9d671f73af90831862.jpg","onboarding_v2/school_logos/scripps.jpg":"/assets/onboarding_v2/school_logos/scripps-e8fda8f8d094dbef4fc61b806e6028c6e2c78f7692698515e555d7e38773453c.jpg","onboarding_v2/school_logos/wake_forest.jpg":"/assets/onboarding_v2/school_logos/wake_forest-e1078c836fa21ccdac2a26e8f63072a3221ccd363ee15c70bc5d89027e714072.jpg","onboarding_v2/school_logos/u_delaware.png":"/assets/onboarding_v2/school_logos/u_delaware-0199659e22ebdcbe399907f59d7afdd911fd74b3d8f1c896ea386d99cfdbc927.png","onboarding_v2/school_logos/brandeis.jpg":"/assets/onboarding_v2/school_logos/brandeis-1737254637a3dd74cec7b2571fb655b737a8b031f7b985cb5f3722131842686f.jpg","onboarding_v2/school_logos/mills.jpg":"/assets/onboarding_v2/school_logos/mills-3c051e838f270f81d844894b1268d4a86d41310c49f73a0bbb8ad30365e61030.jpg","onboarding_v2/school_logos/clark_atlanta.png":"/assets/onboarding_v2/school_logos/clark_atlanta-3c24ababc1c2576e996d13c37e6eef0279b1411faf1eab2e83f4350cc188b858.png","onboarding_v2/school_logos/lawrence_tech.png":"/assets/onboarding_v2/school_logos/lawrence_tech-f8f7ff2d499180b255e18e3b34fe178eb279646918acc9a383d47b945060cd9a.png","onboarding_v2/school_logos/bates.jpg":"/assets/onboarding_v2/school_logos/bates-3a1179e1dfee427d88c92897febeddb7d17c86b4be8ce5d4d2b5c01b5b8edb37.jpg","onboarding_v2/school_logos/u_mich.jpg":"/assets/onboarding_v2/school_logos/u_mich-bb11210f60ba04d4df568d4da76d22503606a7efd1cff599326b8073bd07f092.jpg","onboarding_v2/school_logos/u_south_carolina.png":"/assets/onboarding_v2/school_logos/u_south_carolina-69cf6223a2f03e53220ab2e7c593be83e11eeaeae76fdf9402d7041556bbd8c3.png","onboarding_v2/school_logos/rochester.png":"/assets/onboarding_v2/school_logos/rochester-4c9048fe49aa667df1ba572c5271b8d9095861f35e926534ce974941e4fa4a12.png","onboarding_v2/school_logos/uva.png":"/assets/onboarding_v2/school_logos/uva-2f3c8978ebfc9f9c40ad2e49a8868ada6e65eb9ef2c49df46790e763baa75d46.png","onboarding_v2/school_logos/davidson.jpg":"/assets/onboarding_v2/school_logos/davidson-2644a818ca12f8dce4f040b7a622ae264b7c3a8303b6dbca55a439617bac0a7e.jpg","onboarding_v2/school_logos/uiuc.png":"/assets/onboarding_v2/school_logos/uiuc-bc1d9531142c123d5eb5568c8b75331a67c6f960c0ff60fc592ed2cf4efef4af.png","onboarding_v2/school_logos/pomona.jpg":"/assets/onboarding_v2/school_logos/pomona-91eaa1d258012cc0b76e6ff52727c6b0e68b012765a37566d3f8c48e73c0e0d0.jpg","onboarding_v2/school_logos/hofstra.png":"/assets/onboarding_v2/school_logos/hofstra-670d3691caa139204c79dcdc5b882fbb288b2753c27ef0282e07a713a0f89ee0.png","onboarding_v2/school_logos/villanova.png":"/assets/onboarding_v2/school_logos/villanova-020d8f710990acecccf8b918c4c2e37718badc27bda68a17b3933c3c93cd7566.png","onboarding_v2/school_logos/babson.png":"/assets/onboarding_v2/school_logos/babson-642577654fa0c0bd58382563dd0d05c50f96a512e8c818caf0340fb6bbaecd91.png","onboarding_v2/school_logos/michigan_tech.jpg":"/assets/onboarding_v2/school_logos/michigan_tech-e51e14563936344a874e612fb3904c20e601b2b79a74d1d799ece489898af989.jpg","onboarding_v2/school_logos/upenn.jpg":"/assets/onboarding_v2/school_logos/upenn-1e6fee78475d557d5a0091473cef2e416218eb1441c4d7280e83c75fe9e34b17.jpg","onboarding_v2/school_logos/wesleyan.jpg":"/assets/onboarding_v2/school_logos/wesleyan-a2ac6ed2d97137d47835182d2a9800585dcf71be5728a6c0a3b7fcc499b012aa.jpg","onboarding_v2/school_logos/suny_buffalo.jpg":"/assets/onboarding_v2/school_logos/suny_buffalo-e65746c7b4a6436086c113b25543e4f87eb12c65058f2e97cf78818db18c3d68.jpg","onboarding_v2/school_logos/california_irvine.gif":"/assets/onboarding_v2/school_logos/california_irvine-4832e160b0e8f674bd959229dce369f658720c62acafe13ec84a6ad66d044ff1.gif","onboarding_v2/school_logos/wisconsin_technical_cs.jpg":"/assets/onboarding_v2/school_logos/wisconsin_technical_cs-1592f1cd4410253934656b66e8866b941358b9ac1046411cb40d39a21206ab53.jpg","onboarding_v2/school_logos/emory.jpg":"/assets/onboarding_v2/school_logos/emory-5d34f7158893b456b0a812ab84b043ee7a5bb87452d52e1e61485c355ef88baf.jpg","onboarding_v2/school_logos/pepperdine.png":"/assets/onboarding_v2/school_logos/pepperdine-bbc36eaba24126f8bbf3df2c58c2e78c78847c8c761820a83dc27af67e8d33c1.png","onboarding_v2/school_logos/baylor.png":"/assets/onboarding_v2/school_logos/baylor-d162cc0f9eccc6f6a14cbda4f732a6be241b5f8eb47807f87679cf7b5cf5bd1b.png","onboarding_v2/school_logos/miami_u.jpg":"/assets/onboarding_v2/school_logos/miami_u-c7a9f08c34303ffe35e293bb6bd5d9c314acaad3bb15d6e6fde1908cdff7c9e4.jpg","onboarding_v2/school_logos/cornell.png":"/assets/onboarding_v2/school_logos/cornell-ee23d19dc918eb676b76d6d1b4d939cb17d460317285287214309a5b92e301db.png","onboarding_v2/school_logos/princeton.png":"/assets/onboarding_v2/school_logos/princeton-c4cd464ffe35205c8d9c0e2455cf7c3fa8371b352d18f288fcfb21e94b977f0b.png","onboarding_v2/school_logos/uw_la_crosse.png":"/assets/onboarding_v2/school_logos/uw_la_crosse-b5dec678799333d4fead11d523cccb115986b4148e3949403f1f23ae830edf07.png","onboarding_v2/school_logos/cmu.png":"/assets/onboarding_v2/school_logos/cmu-7ab4a884127a17812f86f99a8523d9aa225d67ac9694ad10ad67b2c2751afeff.png","onboarding_v2/school_logos/u_miami.png":"/assets/onboarding_v2/school_logos/u_miami-44c0de74911f449c7e6957cf7ad6eb2d859efc73937e8abc8bb51925ae27566b.png","onboarding_v2/school_logos/valparaiso.png":"/assets/onboarding_v2/school_logos/valparaiso-50d2674b198e7c5b1f88e014a5198b24747ee8b141f91a9a1bd4fc81860426d8.png","onboarding_v2/school_logos/u_arizona.jpg":"/assets/onboarding_v2/school_logos/u_arizona-2269145ccf57b7fb44550e8324ceda39ab0190a70a6e1f99db4c330a2f6810fb.jpg","onboarding_v2/school_logos/lehigh.png":"/assets/onboarding_v2/school_logos/lehigh-0b3f8811743112c87799961425368a7392a6f8c75499ccb8773de6085c53e2bd.png","onboarding_v2/school_logos/uc_berkeley.png":"/assets/onboarding_v2/school_logos/uc_berkeley-0056ccb37310bd93967cf242d365ff527fc9b017e61c3b0e77f54eaa8be0a664.png","onboarding_v2/school_logos/michigan_state.jpg":"/assets/onboarding_v2/school_logos/michigan_state-ce12021946ca05176759e3d5bd198b4da3798549324613376da4412e48fcc154.jpg","onboarding_v2/school_logos/asu.png":"/assets/onboarding_v2/school_logos/asu-6497d00fcf97810433044eb93477baf56eb2075253479f644cba69b0acc0627c.png","onboarding_v2/school_logos/boston_u.png":"/assets/onboarding_v2/school_logos/boston_u-bc498cc70dba7830bb4c27678e02f84b1f8bbc0204cab1d0cfa0cf3d3edd1b1d.png","onboarding_v2/school_logos/santa_clara.png":"/assets/onboarding_v2/school_logos/santa_clara-ab95c7c9d28461ee6decf1e0064d08cd17e4d81f9f33ce13960a84f62303f685.png","onboarding_v2/school_logos/stanford.png":"/assets/onboarding_v2/school_logos/stanford-303d60135a6a56253ba42ab2c75c5e47efef89fa6ec65860ca648b7669062187.png","onboarding_v2/school_logos/spelman.png":"/assets/onboarding_v2/school_logos/spelman-0ed522db3b6b4b11d51e6b5dd6405be3cf853a35ba5770a15f69b65394c8662b.png","onboarding_v2/school_logos/uga.jpg":"/assets/onboarding_v2/school_logos/uga-81a0103db326fb4564e78e37f2eba75891953efd95d1da36df299dea2bcad7f8.jpg","onboarding_v2/school_logos/u_san_diego.png":"/assets/onboarding_v2/school_logos/u_san_diego-053b0aac179b9ca2ac643764c96dce5ec84c050cb6d4b7ca1452337e07d21262.png","onboarding_v2/school_logos/ucsb.png":"/assets/onboarding_v2/school_logos/ucsb-0cd3a245b7b8347b9a3f6c965e6ae181e58eb8f49f1db1c55a9d90c46f6367ff.png","onboarding_v2/school_logos/u_colorado_boulder.png":"/assets/onboarding_v2/school_logos/u_colorado_boulder-203703ca05ac4947c70fdf1ecd6fdde25d81d83885344dc9be844a534d4399ab.png","onboarding_v2/school_logos/rice.png":"/assets/onboarding_v2/school_logos/rice-77b2152c1ab0b0538e33cdb0fcf2d11f0e40849e30b78f8dc03e44ff48287767.png","onboarding_v2/school_logos/auburn.png":"/assets/onboarding_v2/school_logos/auburn-f95e359ac8bb3a06893d7a13d6049304fc98fc86e8f2943c99fb59e6a1a585b4.png","onboarding_v2/school_logos/cal_poly.jpg":"/assets/onboarding_v2/school_logos/cal_poly-8cac1facd3a96f4fa7b2d34841f591385d96f0358fd6ca50c0bdb4e355560c7e.jpg","onboarding_v2/school_logos/wellesley.png":"/assets/onboarding_v2/school_logos/wellesley-72986ac29f9b01e233d033bd9af502c8e02f7f7fd515e45704e3305275f68216.png","onboarding_v2/school_logos/johns_hopkins.png":"/assets/onboarding_v2/school_logos/johns_hopkins-fbc5d46a8387687d23a755e9b8394fc2210c093dd6e3bf2f74a0dad14292fd81.png","onboarding_v2/school_logos/alabama_a_and_m.png":"/assets/onboarding_v2/school_logos/alabama_a_and_m-fa673ac65a5d5ca64406e15277f9a0a2e50b24ebaa03a4eaef6b49495deee2c9.png","onboarding_v2/school_logos/morehouse.jpg":"/assets/onboarding_v2/school_logos/morehouse-3356585b546ed5d16207a4d6411a20a2eb5f1eae63f18654ab1cae8b13000bae.jpg","onboarding_v2/student-people.png":"/assets/onboarding_v2/student-people-f547dbb366c37480f0370c61b43f7b23f9c88ec777285b94890bd0b815a13f25.png","onboarding_v2/major_icons/mechanical_eng.png":"/assets/onboarding_v2/major_icons/mechanical_eng-18bf9a56203eb5e2e5b052ee26b2db6e03cacfba4318a4025b2cc56c2e63eaf3.png","onboarding_v2/major_icons/biology.png":"/assets/onboarding_v2/major_icons/biology-ad40df17304a3fb65d3fb034a80ba27a57ec58ef6bc8b3d481d51226bd1c63b8.png","onboarding_v2/major_icons/statistics.png":"/assets/onboarding_v2/major_icons/statistics-29f3f227378769b95365e6c67f66f76753acdb39fdde53a7eb70423b70cd5d80.png","onboarding_v2/major_icons/accounting.png":"/assets/onboarding_v2/major_icons/accounting-eb5f17db7befcb837d84a74d07a24021f693e8f42ffc573e59461b3dc7cd33e3.png","onboarding_v2/major_icons/marketing.png":"/assets/onboarding_v2/major_icons/marketing-8f30c3d9df101437f487f296f165369387b527ed167fba99a4238a9cf1ce32b5.png","onboarding_v2/major_icons/finance.png":"/assets/onboarding_v2/major_icons/finance-3f303fea339cb85903b60be1804bf5340ee2f14334db33ebb606f976766071f4.png","onboarding_v2/major_icons/cyber_security.png":"/assets/onboarding_v2/major_icons/cyber_security-2e47bf16c44aa5edc4cef7d6d4709728cf386baece932bcacba5f430df09755a.png","onboarding_v2/major_icons/data_mining.png":"/assets/onboarding_v2/major_icons/data_mining-dfbc874b4631f90ee84186d816de4c421e6996e5c1c10122ca133daea6147153.png","onboarding_v2/major_icons/consulting.png":"/assets/onboarding_v2/major_icons/consulting-ac73c3eefe7b4c8536220f5b49b17a6790f0f34fea1d1ed904bb781f26f4bdd7.png","onboarding_v2/major_icons/chemistry.png":"/assets/onboarding_v2/major_icons/chemistry-ce04b14542a638d55ac2a6b8c9f4cf2637ca1fda64e3966ad4792e9d053c5019.png","onboarding_v2/major_icons/political_science.png":"/assets/onboarding_v2/major_icons/political_science-f24b4f2d330474cda7ca49889eedb7e2608257fbefc8cc4dd6980a4740ea8673.png","onboarding_v2/major_icons/sales.png":"/assets/onboarding_v2/major_icons/sales-45fb90a187b086d6cb65b638d705d97856bc23c80f3950d5cf0b1d3eb960b199.png","onboarding_v2/major_icons/business.png":"/assets/onboarding_v2/major_icons/business-243f15af9e66d04657d93efb246e503b236feab20de7b2bfade4a80ef769cdc3.png","onboarding_v2/major_icons/economics.png":"/assets/onboarding_v2/major_icons/economics-a8703ae8c280bd097a5c4f0a43836130a2efb3e4ed3350898a18d2c7191d2fe7.png","onboarding_v2/major_icons/computer_science.png":"/assets/onboarding_v2/major_icons/computer_science-eb167c88a17b9af8d727c76191fc95cd150a69ca9ff6da43b6481d5235144971.png","onboarding_v2/major_icons/entrepreneurship.png":"/assets/onboarding_v2/major_icons/entrepreneurship-f19ad4e8d066ff3bdd279c0366f0b3bbb4b0838f7582ba4100af3c8b8b8a3eee.png","employer-applicant-analysis/import.png":"/assets/employer-applicant-analysis/import-f78c01343671f5719ea5c97fd711b04a735fceb93fe3eb0b949d0e7a768201a5.png","employer-applicant-analysis/scan.png":"/assets/employer-applicant-analysis/scan-4caf5874e6c82dec415e9dae70ee62f715b358204f42b65605fb63d7ac089ee9.png","employer-applicant-analysis/report.png":"/assets/employer-applicant-analysis/report-1fb4e2b664a9abacd3651986202c0f31af3acee9acdda0d776e1539d900049bb.png","employer-status-autoupdate-modal/highlight-navigation.png":"/assets/employer-status-autoupdate-modal/highlight-navigation-c29c33f9404f4389846c5d02eee2d128d8bb0574e6b732ae421350654413de76.png","mass-email-icons/icon-job-mask.png":"/assets/mass-email-icons/icon-job-mask-4c19149f0b48bd3dc8ee6914817f8eb1842cc6fdfb3e75803238249b7801c473.png","mass-email-icons/icon-event-mask.png":"/assets/mass-email-icons/icon-event-mask-5beec500c21a3a35d4143ff7bf1b5186b2a32dd2a375f9f349f2d435915244c7.png","mass-email-icons/icon-fair-mask.png":"/assets/mass-email-icons/icon-fair-mask-7c79042c54f6d0d341b196de9f1f1939e36470b566e6bc3fb9086215d8b98eed.png"}}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,s=this.length;t<s;t++)if(t in this&&this[t]===e)return t;return-1};Handshake.Mixin=function(){function t(){}var s;return s=["extended","included"],t.extend=function(t){var i,n,o;for(i in t)o=t[i],e.call(s,i)<0&&(this[i]=o);return null!=(n=t.extended)&&n.apply(this),this},t.include=function(t){var i,n,o;for(i in t)o=t[i],e.call(s,i)<0&&(this.prototype[i]=o);return null!=(n=t.included)&&n.apply(this),this},t}()}.call(this),function(){$(document).ready(function(){$(".fb-nav").length>0&&($(document).on(window.PAGE_CHANGE_EVENT,function(){return $(".fb-nav").addClass("hidden-xs"),$(".fb-nav-wrapper").removeClass("expanded")}),$(".navbar-brand span").addClass("hidden-xs"),$(".navbar-toggle").on("click",function(){return $(".fb-nav").toggleClass("hidden-xs"),$(".fb-nav-wrapper").toggleClass("expanded"),$(".left-navigation-bar").toggleClass("expanded")}))})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Operations=function(){function t(){this.remove_worker=e(this.remove_worker,this),this.add_worker=e(this.add_worker,this),this.workers=0,this.workers_created=0,Object.defineProperty(this,"isWorking",{get:function(){return this.workers>0}})}return t.prototype.add_worker=function(){var e;if(this.workers=this.workers+1,this.workers_created=this.workers_created+1,"undefined"!=typeof Turbolinks&&null!==Turbolinks&&!window.is_ie9)return null!=(e=Turbolinks.ProgressBar)?e.start():void 0},t.prototype.remove_worker=function(){var e;if(this.workers=this.workers-1,"undefined"!=typeof Turbolinks&&null!==Turbolinks&&this.workers<=0&&!window.is_ie9)return null!=(e=Turbolinks.ProgressBar)?e.done():void 0},t}(),Handshake.operations=new Handshake.Operations}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.PagedForm={},Handshake.PagedForm.Page=function(){function e(e){this.index=ko.observable(e.index),this.name=ko.observable(e.name),this.description=ko.observable(e.description),e.select_action&&(this.select_action=e.select_action),this.enabled=e.enabled||ko.observable(!0),this.shown=e.shown||ko.observable(!0),this.available=e.available||this.shown,e.validator&&(this.validator=e.validator)}return e}(),Handshake.PagedForm.View=function(){function t(t,s,i,n){var o,r,a,c,l,u,h,_,d,p,m,f;this.resource=t,this.cancelRoute=null!=s?s:null,this.domContext=null!=i?i:null,this.options=null!=n?n:{},this.currentPageValid=e(this.currentPageValid,this),this.changePage=e(this.changePage,this),this.scrollToTopOfForm=e(this.scrollToTopOfForm,this),this.selectPage=e(this.selectPage,this),this.finish_action=e(this.finish_action,this),this.saveChanges=e(this.saveChanges,this),this.finalizeAction=e(this.finalizeAction,this),this.postSelectPage=e(this.postSelectPage,this),this.preSelectPage=e(this.preSelectPage,this),this.reselectPage=e(this.reselectPage,this),this.nextPage=e(this.nextPage,this),this.disableNextButton=e(this.disableNextButton,this),this.previousPage=e(this.previousPage,this),this.disablePreviousButton=e(this.disablePreviousButton,this),this.cancel=e(this.cancel,this),this.cancelAction=e(this.cancelAction,this),this.pushHistory=e(this.pushHistory,this),this.stateIndex=e(this.stateIndex,this),this.paged_form_on_pop_state=e(this.paged_form_on_pop_state,this),this.paged_form_on_resize=e(this.paged_form_on_resize,this),this.paged_form_before_page_change=e(this.paged_form_before_page_change,this),this.paged_form_on_before_unload=e(this.paged_form_on_before_unload,this),this.unmount_paged_form=e(this.unmount_paged_form,this),this.pages_width=ko.observable(0),this.finish_width=ko.observable(0),this.pageOptions=ko.observableArray([]),this.currentPage=ko.observable(),(o=getUrlVar("initial_page",window.location))?this.currentPage(parseInt(o)):this.currentPage(Handshake.Helpers.getInitialPageFromStorage()),this.currentPageTitle=ko.computed((r=this,function(){return r.pageOptions().length>r.currentPage()?r.pageOptions()[r.currentPage()].name():""})),this.currentPageDescription=ko.computed((a=this,function(){return a.pageOptions().length>a.currentPage()?a.pageOptions()[a.currentPage()].description():""})),this.showCancelButton=ko.observable(!0),this.finalizeText=ko.observable("Finalize"),this.show_finalize_spinner=ko.observable(!1),this.create_text=ko.observable(null),this.lastPage=ko.computed((c=this,function(){var e,t;if(0===c.pageOptions().length||null==c.currentPage())return null;for(e=c.currentPage(),t=c.currentPage()+1;t<=c.pageOptions().length-1;)!0===c.pageOptions()[t].available()&&(e=c.pageOptions()[t].index()),t+=1;return e})),this.disableSaveButton=ko.computed((l=this,function(){return l.options.disable_save_override?l.options.disable_save_override():l.resource&&!l.resource().isChanged()})),this.show_create_button=ko.computed((u=this,function(){var e;return null!=u.create_text()&&(null!=(e=u.resource())?e.isNew():void 0)&&u.currentPage()===u.lastPage()})),this.showFinalizeButton=ko.computed((h=this,function(){return!h.show_create_button()&&(null!=h.resource&&h.resource().isNew()||!(null!=h.resource&&h.resource().isChanged()))&&null!=h.finalizeText()&&h.currentPage()===h.lastPage()})),this.showSaveButton=ko.computed((_=this,function(){return!_.showFinalizeButton()&&!_.show_create_button()&&(!_.resource||_.resource().isPersisted())})),this.force_recalculate_footer=ko.observable(),this.wiggle_room=45,this.two_rows=ko.computed((d=this,function(){var e;return d.force_recalculate_footer(),e=d.finish_width(),d.showFinalizeButton()||d.showSaveButton()||(e=0),$(".paged-form-nav-bar",d.domContext).width()<=(d.showCancelButton()?$(".paged-form-cancel",d.domContext).outerWidth(!0):0)+$(".paged-form-previous",d.domContext).outerWidth(!0)+$(".paged-form-next",d.domContext).outerWidth(!0)+e+d.wiggle_room})),this.pages_css=ko.computed((p=this,function(){var e;return p.force_recalculate_footer(),e=p.finish_width(),p.showFinalizeButton()||p.showSaveButton()||(e=0),$(".paged-form-nav-bar",p.domContext).width()<=(p.showCancelButton()?$(".paged-form-cancel",p.domContext).outerWidth(!0):0)+$(".paged-form-previous",p.domContext).outerWidth(!0)+$(".paged-form-next",p.domContext).outerWidth(!0)+e+p.pages_width()+p.wiggle_room?"hidden":""})),this.finish_text=ko.computed((m=this,function(){return m.showFinalizeButton()?m.finalizeText():m.show_create_button()?m.create_text():m.showSaveButton()?"Save Changes":void 0})),this.finish_css=ko.computed((f=this,function(){var e;return e=[],f.showFinalizeButton()||f.show_create_button()||f.showSaveButton()||e.push("hidden"),(f.showSaveButton()&&f.disableSaveButton()||f.show_finalize_spinner())&&e.push("disabled"),(f.showFinalizeButton()||f.show_create_button())&&e.push("btn-success"),f.showSaveButton()&&e.push("btn-primary"),e.push("margin-left"),e.join(" ")})),this.showDeleteButton=ko.observable(!1),this.canceled=ko.observable(!1),$(window).on("resize",this.paged_form_on_resize),$(window).on("beforeunload",this.paged_form_on_before_unload),$(document).on("page:before-change",this.paged_form_before_page_change),this.options.turn_off_state_management||$(window).on("popstate",this.paged_form_on_pop_state)}return t.prototype.unmount_paged_form=function(){if($(window).off("beforeunload",this.paged_form_on_before_unload),$(document).off("page:before-change",this.paged_form_before_page_change),$(window).off("resize",this.paged_form_on_resize),!this.options.turn_off_state_management)return $(window).off("popstate",this.paged_form_on_pop_state)},t.prototype.paged_form_on_before_unload=function(){if(!this.canceled()&&(!this.options.parent_form_resource||!this.options.parent_form_resource().isChanged())&&this.resource&&this.resource().isChanged())return"There are unsaved changes."},t.prototype.paged_form_before_page_change=function(e){if(!this.canceled()&&(!this.options.parent_form_resource||!this.options.parent_form_resource().isChanged())&&this.resource&&this.resource().isChanged())return confirm("There are unsaved changes.")?void 0:e.preventDefault()},t.prototype.paged_form_on_resize=function(){return this.force_recalculate_footer.notifySubscribers()},t.prototype.paged_form_on_pop_state=function(e){var t,s,i,n,o;if(t=e.originalEvent,!window.is_ie9&&(null!=(n=t.state)&&null!=(o=n.data)?o.paged_form:void 0)&&null!==(i=this.stateIndex(t.state)))return s=this.pageOptions()[i],this.changePage(s)},t.prototype.stateIndex=function(e){return e&&e.data?e.data.index:null},t.prototype.pushHistory=function(){if(!window.is_ie9&&(null===this.stateIndex(history.state)||this.currentPage()!==this.stateIndex(history.state)))return history.pushState({data:{paged_form:!0,pushStateOverridden:!0,index:this.currentPage()}},this.currentPageTitle,"")},t.prototype.cancelAction=function(){var e;return e="/",this.resource&&(e=this.resource().base_route("index")),this.cancelRoute&&(e=this.cancelRoute),window.location.href=e},t.prototype.cancel=function(){return this.canceled(!0),this.cancelAction()},t.prototype.disablePreviousButton=function(){var e;for(e=this.currentPage()-1;e>=0&&(!0!==this.pageOptions()[e].enabled()||!0!==this.pageOptions()[e].shown());)e-=1;return!this.pageOptions()[e]},t.prototype.previousPage=function(){var e,t;if(this.currentPageValid()){for(e=this.currentPage()-1;e>=0&&(!0!==this.pageOptions()[e].enabled()||!0!==this.pageOptions()[e].shown());)e-=1;return(t=this.pageOptions()[e])?this.selectPage(t):void 0}},t.prototype.disableNextButton=function(){var e;for(e=this.currentPage()+1;e<=this.pageOptions().length-1&&(!0!==this.pageOptions()[e].enabled()||!0!==this.pageOptions()[e].shown());)e+=1;return!this.pageOptions()[e]},t.prototype.nextPage=function(){var e,t;if(this.currentPageValid()){for(t=this.currentPage()+1;t<=this.pageOptions().length-1&&(!0!==this.pageOptions()[t].enabled()||!0!==this.pageOptions()[t].shown());)t+=1;return(e=this.pageOptions()[t])?this.selectPage(e):void 0}},t.prototype.reselectPage=function(){return this.currentPage()>=this.pageOptions().length&&this.currentPage(0),this.selectPage(this.pageOptions()[this.currentPage()],null,!0)},t.prototype.preSelectPage=function(){},t.prototype.postSelectPage=function(){},t.prototype.finalizeAction=function(){},t.prototype.saveChanges=function(){},t.prototype.finish_action=function(){var e;if(e=[],_(this.pageOptions()).each(function(t){var s;if(s=t.validator)return e=e.concat(s(!0).errors||[])}),!(e.length>0))return this.showFinalizeButton()?this.finalizeAction():this.show_create_button()?this.create_action():this.showSaveButton()?this.saveChanges():bugsnagClient.notify("Paged form finish action called with no button shown.");Handshake.Helpers.notifyError(e)},t.prototype.selectPage=function(e,t,s){return null==s&&(s=!1),!!e.enabled()&&(!(!s&&!this.currentPageValid())&&(this.changePage(e),this.pushHistory(),this.force_recalculate_footer.notifySubscribers()))},t.prototype.scrollToTopOfForm=function(){return $(this.domContext).closest(".slideout-modal").length>0?$(".slideout-body").scrollTop(0):$(window).scrollTop(0)},t.prototype.changePage=function(e){var t;return t=this.currentPage(),this.preSelectPage(e),this.currentPage(e.index()),e.select_action&&e.select_action(),this.scrollToTopOfForm(),Handshake.Helpers.setInitialPageInStorage(this.currentPage()),this.postSelectPage(t)},t.prototype.currentPageValid=function(){var e,t;return!(t=this.pageOptions()[this.currentPage()].validator)||(!!(e=t()).valid||(Handshake.Helpers.notifyError(e.errors),!1))},t.prototype.initToolTips=function(e){return $(e).find(">:first-child").tooltip()},t}()}.call(this),function(){var e,t,s,i;Handshake.passed={},window.imagePaths={},t=["current_user_id","logged_in_user_id","current_user_institution_id","current_user_active_prospect_id","logged_in_user_institution_id","current_user_time_zone_offset","logged_in_user_created_at","current_user_progress","current_user_on_campus_employment_school_id","logged_in_user_institution_created_at","logged_in_user_institution_size_id","logged_in_user_institution_industry_id","waiting_room_polling_frequency","current_user_student_outreach_messages_remaining","campaign_size_calculation_segment_max"],i=["android_app_base_url","app_region","app_url","bugsnag_app_version","bugsnag_release_stage","cdn_url","currency_symbol","current_session_id","current_user_calculated_first_name","current_user_created_at","current_user_employer_role","current_user_guid","current_user_institution_managed_email","current_user_institution_calculated_short_name","current_user_institution_id_type","current_user_institution_logo_url","current_user_institution_name","current_user_institution_type","current_user_institution_host","current_user_last_logged_in_pretty","current_user_last_name","current_user_mobile_number","current_user_name","current_user_primary_email","current_user_rails_time_zone","current_user_roles","current_user_school_feature_preferences","current_user_time_zone","current_user_title","current_user_type","current_user_user_profile_photo_url","default_currency","environment_name","facebook_app_id","frontend_metrics_collector_url","fullstory_org_id","google_analytics_tracking_id","host","ios_app_base_url","js_segment_write_key","logged_in_user_global_id","logged_in_user_institution_ga_code","logged_in_user_institution_global_id","logged_in_user_institution_id_type","logged_in_user_institution_managed_email","logged_in_user_institution_name","logged_in_user_institution_type","logged_in_user_joined_active_rollouts","logged_in_user_name","logged_in_user_school_year_name","logged_in_user_slo_url","logged_in_user_type","mapbox_api_key","mapbox_mode","room_assignment_management_article_url","root_url","server_time_at_load","terms_of_service_url","university_email_tld","webpack_public_path","pusher_key","pusher_region"],
e=["current_user_has_premium_seat","current_user_has_premium_event_checkin_feature_enabled","current_user_is_confirmed","current_user_is_free_employer","current_user_school_no_emails_to_students","current_user_school_sensitive_marketing_tolerance","current_user_time_zone_observes_dst","disable_employer_registration_changes","enable_employer_checkin_predefined_questions","enable_employer_product_announcement_modal_globally","enable_experience_approval_custom_questions","enable_mobile_web_event_checkin_landing_page","enable_segment_with_filters_from_school_exp","enable_time_zone_modal","in_production","logged_in_user_fortune_500_ranked","poll_for_notification_updates","record_fullstory_session_to_segment","should_allow_touchnet_and_cashnet","should_display_award_tracker","should_display_gpa","should_display_us_work_authorization","should_display_community_college_filters","should_display_work_study","should_obfuscate_appcues_pii","should_show_sidebar_content_in_employer_registration","should_recommend_similar_jobs","should_recommend_vf_resume_upload","should_track_ga_event","should_use_geographic_region","should_use_extra_uk_tos_language","show_time_zone_modal","show_school_user_org_role_modal","should_show_job_role_group_salaries_and_locations","should_show_fellowship_in_fds","should_display_short_address_in_student_onboarding","should_display_language_proficiency_in_student_onboarding","should_display_veterans_are_underrepresented","should_display_fortune_500_employers","use_appcues","use_fullstory"],s=function(e){var t;return(t=document.querySelector('meta[name="'+e+'"]'))?t.getAttribute("content"):void 0},["default_searches","allowed_report_base_types","current_user_feature_flags","dynamic_roles","dynamic_role_memberships","current_school","current_user_premium_features","current_user_preferences","unsafe_dictionary"].forEach(function(e){var t;if(t=s(e))return Handshake.passed[e]=JSON.parse('{"data" :'+t+"}").data}),t.forEach(function(e){var t;return t=s(e),Handshake.passed[e]=t?+t:void 0}),i.forEach(function(e){var t;return t=s(e),Handshake.passed[e]=t}),e.forEach(function(e){var t;return t=s(e),Handshake.passed[e]="true"===t}),Handshake.current_user_id=Handshake.passed.current_user_id,Handshake.environment_name=Handshake.passed.environment_name,Handshake.in_production=Handshake.passed.in_production,window.imagePaths.img=s("data-img"),window.imagePaths.pdf=s("data-pdf"),window.imagePaths.doc=s("data-doc"),window.imagePaths.xls=s("data-xls"),window.imagePaths.ppt=s("data-ppt"),window.imagePaths.zip=s("data-zip"),window.imagePaths.mp3=s("data-mp3")}.call(this),function(){Handshake.permissions={},$(document).on("ready page:change",function(){return Handshake.permissions={}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Resource=function(){function t(t,s){var i,n,o,r,a,c,l;this.initial_prop=t,this.initial_from_server=null==s||s,this.end_ajax_call=e(this.end_ajax_call,this),this.start_ajax_call=e(this.start_ajax_call,this),this.find_errors_and_show_toastr=e(this.find_errors_and_show_toastr,this),this.ajax_call=e(this.ajax_call,this),this["new"]=e(this["new"],this),this.index=e(this.index,this),this.fetch=e(this.fetch,this),this.destroy=e(this.destroy,this),this.save=e(this.save,this),this.create=e(this.create,this),this.revert=e(this.revert,this),this.update=e(this.update,this),this.setLatestData=e(this.setLatestData,this),this.getLatestData=e(this.getLatestData,this),this.markAsDestroyed=e(this.markAsDestroyed,this),this.anyChanged=e(this.anyChanged,this),this.isFieldChanged=e(this.isFieldChanged,this),this.markAsChanged=e(this.markAsChanged,this),this.clearChanged=e(this.clearChanged,this),this.getJSON=e(this.getJSON,this),this.recalculate_entity_path=e(this.recalculate_entity_path,this),this.collection_route=e(this.collection_route,this),this.member_route=e(this.member_route,this),this.base_route=e(this.base_route,this),this.attributes=e(this.attributes,this),this.attributes_hash=null,this.updatables=[],this.in_json=[],this.changed_props=ko.observableArray(),this.always_send_all_properties=ko.observable(!1),this.id=ko.observable(this.initial_prop?this.initial_prop.id:0),this.markedAsDestroyed=ko.observable(!1),this.errors=ko.observable({}),this.is_editing=ko.observable(!1),this.current_ajax_calls=ko.observableArray([]),this.one_call_at_a_time=ko.observable(!0),this.isChecked=ko.observable(!1),this.ajax_call_count=ko.observable(0),this.cache={},this.type=this.constructor.type,this.underscore=this.constructor.underscore,this.underscore_plural=this.constructor.underscore_plural||this.underscore+"s",this.nested_methods=this.constructor.nested_methods,this.isChanged=ko.computed((i=this,function(){return i.changed_props().length})),this.in_ajax=ko.computed((n=this,function(){return n.current_ajax_calls().length>0})),this.id_type=ko.computed((o=this,function(){return o.id()+"-"+o.type})),this.errors_full_messages=ko.computed((r=this,function(){var e,t,s,i,n,o,a,c;if(t=[],_.isArray(r.errors())?t=r.errors():_.isString(r.errors())?t=[r.errors()]:_.isObject(r.errors())&&_.each(_.keys(r.errors()),function(e){return _.each(r.errors()[e],function(s){var i,n,o;return i="",(null!=(n=r.attributes_hash[e])?n.error_prefix:void 0)?i=r.attributes_hash[e].error_prefix+" ":(null!=(o=r.attributes_hash[e])?o.no_error_prefix:void 0)||"base"===e?s=capitalizeString(s):i=capitalizeString(e.split("_").join(" "))+" ",t.push(""+i+s)})}),t.length>0){for(c=t[0],i=s=1,o=t.length;1<=o?s<o:s>o;i=1<=o?++s:--s)e="",","!==(n=t[i-1].slice(-1))&&"."!==n&&(e+=","),a=e+=" "+t[i];return c+(a||"")}return""})),this.invalid=ko.computed((a=this,function(){return _.isObject(a.errors())&&_.keys(a.errors()).length>0})),this.isNew=ko.computed((c=this,function(){return!c.id()||0===c.id()})),this.isPersisted=ko.computed((l=this,function(){return!l.isNew()})),this.isLoading=ko.observable(!1)}return t.registeredClasses=[],t.prototype.attributes=function(e){var t,s;return null!==this.attributes_hash&&console.error("You already set the attributes. Due to irreversible operations when calling this function, this can only be done once"),this.attributes_hash=e,_.each(_.keys(e),(t=this,function(s){var i,n;if((n=e[s]).array?t["_"+s]=ko.observableArray([]):t["_"+s]=ko.observable(),t[s]=ko.computed({read:function(){return t["_"+s]()},write:function(e){return t["_"+s]()!==e&&t.markAsChanged(s),t.cache.latestData&&e===t.cache.latestData[s]&&t.clearChanged(s),t["_"+s](e)}}),t[s].push=function(e){return t.markAsChanged(s),t["_"+s].push(e)},t[s].pop=function(e){return t.markAsChanged(s),t["_"+s].pop(e)},t[s].unshift=function(e){return t.markAsChanged(s),t["_"+s].unshift(e)},t[s].shift=function(e){return t.markAsChanged(s),t["_"+s].shift(e)},t[s].reverse=function(e){return t.markAsChanged(s),t["_"+s].reverse(e)},t[s].sort=function(e){return t.markAsChanged(s),t["_"+s].sort(e)},t[s].remove=function(e){return t.markAsChanged(s),t["_"+s].remove(e)},t[s].splice=function(e,i,n){return t.markAsChanged(s),void 0===n?t["_"+s].splice(e,i):t["_"+s].splice(e,i,n)},t[s].removeAll=function(e){return t.markAsChanged(s),t["_"+s].removeAll(e)},t[s].subscribe=function(e,i,n){return t["_"+s].subscribe(e,i,n)},n.default_raw?(i=n.default_raw,n.loader?t["_"+s](n.loader(i)):t["_"+s](i)):n["default"]&&t["_"+s](n["default"]),_.has(n,"load")&&!n.load||t.updatables.push(s),_.has(n,"send")&&n.send&&t.in_json.push(s),_.has(n,"belongs_to")&&n.belongs_to&&!n.array)return t["_"+s](new n.belongs_to)})),this.update(this.initial_prop,this.initial_from_server),_.each(_.keys(e),(s=this,function(e){return s.set_up_validations(e)}))},t.prototype.set_up_validations=function(e){var t,s,i,n;if(n=(null!=(t=Handshake.Validations)&&null!=(s=t[this.underscore])?s[e]:void 0)||{},this.attributes_hash[e].validations&&_.extend(n,this.attributes_hash[e].validations),!_.isEqual(n,{}))return i={name:e,resource:this,validations:n},this[e].extend({validate:i})},t.prototype.base_route=function(e){return _.contains(this.nested_methods||["new","create","index"],e)&&this.nested_route?this.nested_route()+"/"+this.underscore_plural:"/"+this.underscore_plural},t.prototype.member_route=function(e){var t;return t=this.base_route()+"/"+this.id(),e&&"show"!==e?t+"/"+e:t},t.prototype.collection_route=function(e){return this.base_route()+"/"+e},t.prototype.recalculate_entity_path=function(){return this.entity_path=this.base_route("show")+"/"+this.id(),this.edit_entity_path=this.member_route("edit"),this.entity_url=""+Handshake.passed.host+this.entity_path},t.prototype.getJSON=function(e){var t,s;return t={},this.always_send_all_properties()&&(e=!1),_.each(this.in_json,(s=this,function(i){var n,o,r;if(o=s.attributes_hash[i],!e||-1!==s.changed_props.indexOf(i)||o.nested_attribute){if(r=_.has(o,"sender")?o.sender(s[i]()):_.has(o,"convert_undefined_to_null")&&void 0===s[i]()?null:_.has(o,"array")&&_.has(o,"convert_empty_to_blank")&&0===s[i]().length?[""]:s[i](),!o.nested_attribute)return t[i]=r;if(o.array)return t[i+"_attributes"]=_.map(r,function(t){var s;return s=t.getJSON(e&&t.isPersisted()),0!==t.id()&&(s.id=t.id()),s});if(r)return n=r.getJSON(e&&r.isPersisted()),0!==r.id()&&(n.id=r.id()),t[i+"_attributes"]=n}})),this.markedAsDestroyed()&&(t._destroy=!0),t},t.prototype.clearChanged=function(e){return this.changed_props.remove(e)},t.prototype.markAsChanged=function(e){if(!this.isFieldChanged(e))return this.changed_props.push(e)},t.prototype.isFieldChanged=function(e){return this.changed_props.indexOf(e)>=0},t.prototype.anyChanged=function(e){return _.intersection(this.changed_props(),e).length>0},t.prototype.markAsDestroyed=function(){return this.markedAsDestroyed(!0)},t.prototype.getLatestData=function(){return this.cache.latestData},t.prototype.setLatestData=function(){return this.cache.latestData=$.extend(!0,{},this.getJSON())},t.prototype.update=function(e,t){var s;if(null==t&&(t=!1),_.isObject(e))return _.each(_.keys(e),(s=this,function(i){var n,o;if(-1!==_.indexOf(s.updatables,i,!1)&&((n=s.attributes_hash[i]).loader&&t?s["_"+i](n.loader(e[i])):n.convert_integer_to_string?(o=n.array?_.map(e[i],function(e){return e?String(e):e}):e[i]?String(e[i]):e[i],s["_"+i](o)):n.belongs_to?n.array?s["_"+i](Handshake.Resource.resourcesFromArray(e[i],n.belongs_to)):s["_"+i]()?s["_"+i]().update(e[i],t):e[i]&&s["_"+i](Handshake.Resource.resourceFromObject(e[i])):n.polymorphic&&e[i]?s["_"+i](Handshake.Resource.resourceFromObject(e[i])):n.array?s["_"+i](e[i]||new Array([])):s["_"+i](e[i]),!t))return s.markAsChanged(i)})),e.id&&this.id(e.id),this.recalculate_entity_path(),this.cache.latestData=$.extend(!0,{},e),t?(this.changed_props.removeAll(),this.isLoading(!1)):void 0},t.prototype.revert=function(){return this.update(this.cache.latestData)},t.prototype.create=function(e,t,s){var i,n,o;if(null==s&&(s={}),!this.isPersisted())return n=this.getJSON(!1),0===_.compact(_.values(n)).length?(Handshake.Helpers.notifyError("Please fill out the required fields."),void("undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"EmptyObjectCreate",errorMessage:"User called create on an object that has no keys.",severity:"warning"}))):((i=s)[this.underscore]=n,this.ajax_call({type:"POST",method:"create",on_member:!1,action:null,url:this.custom_create_url?this.custom_create_url:null,data:i,success:(o=this,function(t){if(o.is_editing(!1),o.id(t[o.underscore].id),e)return e(t)}),failure:function(e){if(t)return t(e)}}))},t.prototype.save=function(e,t,s,i){var n,o,r;return null==i&&(i={}),o=this.getJSON(!0),_.isEmpty(o)&&(o=this.getJSON(!1)),(n=i)[this.underscore]=o,this.ajax_call({type:"PUT",method:"update",on_member:!0,action:null,url:this.custom_save_url?this.custom_save_url:null,data:n,success:(r=this,function(t){if(r.is_editing(!1),e)return e(t)}),failure:function(e){if(t)return t(e)}})},t.prototype.destroy=function(e,t,s){return this.ajax_call({type:"DELETE",method:"destroy",on_member:!0,data:s,action:null,success:e,failure:t})},t.prototype.fetch=function(e,t){return this.ajax_call({type:"GET",method:"show",on_member:!0,action:null,success:e,failure:t})},t.prototype.index=function(e,t,s){return this.ajax_call({type:"GET",method:"index",on_member:!1,action:null,data:s,success:e,failure:t})},t.prototype["new"]=function(e,t,s){var i,n;return null==s&&(s={}),n=this.getJSON(!1),(i=s)[this.underscore]=n,this.ajax_call({type:"GET",method:"new",on_member:!1,action:"new",data:i,success:e,failure:t})},t.prototype.ajax_call=function(e){var t,s,i,n,o,r,a,c,l,u,h,d,p,m,f;if(e.type&&e.method){if(this.one_call_at_a_time()&&-1!==this.current_ajax_calls.indexOf(e.method))console.log("Dropping request to "+e.method+" as it is already being performed");else if(h=e.type,r=e.method,l=e.on_member,t=e.action,i=e.data||{ajax:!0},u=e.success,n=e.failure,o=e.latest_only,s=e.content_type,c=e.no_error_tracking,!l||!this.isNew())return d=e.url?e.url:l?this.base_route(r)+"/"+this.id():""+this.base_route(r),t&&(d+="/"+t),this.start_ajax_call(e),o&&(this.ajax_call_count(this.ajax_call_count.peek()+1),a=this.ajax_call_count()),"GET"===h&&i?s||(s="application/x-www-form-urlencoded"):(s||(s="application/json"),i=JSON.stringify(i)),$.ajax({type:h,url:d+".json",dataType:"json",contentType:s,data:i,success:(f=this,function(e){if(o&&a!==f.ajax_call_count())return n({success:!1,errors:["cancelled"]});if(e&&!c&&f.find_errors_and_show_toastr(e),!_.has(e,"success")||e.success){if(_.has(e,f.underscore)&&f.update(e[f.underscore],!0),_.isFunction(u))return u(e)}else if(n&&n(e),"InvalidAuthenticityToken"===e.internal_error)return bugsnagClient.notify(e.internal_error),Handshake.SPA.reload()}),error:(m=this,function(e){if(e&&e.responseJSON?m.find_errors_and_show_toastr(e.responseJSON):m.errors({}),n)return n(e)}),complete:(p=this,function(){return p.end_ajax_call(e)}),beforeSend:Handshake.operations.xhr_progress_handler})}else console.log("Options must include at the least type, method")},t.prototype.find_errors_and_show_toastr=function(e){return e&&_.has(e,"errors")?(this.errors(e.errors),Handshake.Helpers.notifyError(this.errors_full_messages())):this.errors({})},t.prototype.start_ajax_call=function(e){if(this.current_ajax_calls.push(e.method),!e.skip_visual_indicators)return Handshake.operations.add_worker()},t.prototype.end_ajax_call=function(e){if(this.current_ajax_calls.remove(e.method),!e.skip_visual_indicators)return Handshake.operations.remove_worker()},t.registerClass=function(e){return this.registeredClasses.push(e)},t.registerAllClasses=function(){return Handshake.Resource.registerClass(Handshake.AlmaMaters.AlmaMater),Handshake.Resource.registerClass(Handshake.Applications.Application),Handshake.Resource.registerClass(Handshake.Appointments.Appointment),Handshake.Resource.registerClass(Handshake.AppointmentBlocks.AppointmentBlock),Handshake.Resource.registerClass(Handshake.AppointmentBlockInstances.AppointmentBlockInstance),Handshake.Resource.registerClass(Handshake.AppointmentCategories.AppointmentCategory),Handshake.Resource.registerClass(Handshake.AppointmentMediums.AppointmentMedium),Handshake.Resource.registerClass(Handshake.AppointmentPreferences.AppointmentPreference),Handshake.Resource.registerClass(Handshake.AppointmentTypes.AppointmentType),Handshake.Resource.registerClass(Handshake.AuthInformations.AuthInformation),Handshake.Resource.registerClass(Handshake.Articles.Article),Handshake.Resource.registerClass(Handshake.Attachments.Attachment),Handshake.Resource.registerClass(Handshake.Attendees.Attendee),Handshake.Resource.registerClass(Handshake.Booths.Booth),Handshake.Resource.registerClass(Handshake.BoothOptions.BoothOption),Handshake.Resource.registerClass(Handshake.BulkInvites.BulkInvite),Handshake.Resource.registerClass(Handshake.Buildings.Building),Handshake.Resource.registerClass(Handshake.CareerCenters.CareerCenter),Handshake.Resource.registerClass(Handshake.CareerFairs.CareerFair),Handshake.Resource.registerClass(Handshake.CareerFairItems.CareerFairItem),Handshake.Resource.registerClass(Handshake.CareerFairSessions.CareerFairSession),Handshake.Resource.registerClass(Handshake.CareerPlans.SchoolYear),Handshake.Resource.registerClass(Handshake.CareerPlans.CareerPlanCategory),Handshake.Resource.registerClass(Handshake.CareerPlans.PlanItem),Handshake.Resource.registerClass(Handshake.CareerPlans.PlanItemCompletion),Handshake.Resource.registerClass(Handshake.Charges.Charge),Handshake.Resource.registerClass(Handshake.Comments.Comment),Handshake.Resource.registerClass(Handshake.Comments.Activity),Handshake.Resource.registerClass(Handshake.CommunicationTypes.CommunicationType),Handshake.Resource.registerClass(Handshake.Consortia.Consortium),Handshake.Resource.registerClass(Handshake.Contacts.Contact),Handshake.Resource.registerClass(Handshake.ContactJobs.ContactJob),Handshake.Resource.registerClass(Handshake.Conversations.Conversation),Handshake.Resource.registerClass(Handshake.ConversionTrackers.ConversionTracker),Handshake.Resource.registerClass(Handshake.Courses.Course),Handshake.Resource.registerClass(Handshake.CustomJobInterestOptions.CustomJobInterestOption),Handshake.Resource.registerClass(Handshake.CustomJobInterests.CustomJobInterest),Handshake.Resource.registerClass(Handshake.DigestEmails.DigestEmail),Handshake.Resource.registerClass(Handshake.DistributedEmployers.DistributedEmployer),Handshake.Resource.registerClass(Handshake.Divisions.Division),Handshake.Resource.registerClass(Handshake.Documents.Document),Handshake.Resource.registerClass(Handshake.DocumentTypes.DocumentType),Handshake.Resource.registerClass(Handshake.Downloads.Download),Handshake.Resource.registerClass(Handshake.DropIns.DropIn),Handshake.Resource.registerClass(Handshake.Educations.Education),Handshake.Resource.registerClass(Handshake.EmailActions.EmailAction),Handshake.Resource.registerClass(Handshake.EmailTemplates.EmailTemplate),Handshake.Resource.registerClass(Handshake.EmployerApprovals.EmployerApproval),Handshake.Resource.registerClass(Handshake.EmployerApprovalPreferences.EmployerApprovalPreference),Handshake.Resource.registerClass(Handshake.EmployerMerges.EmployerMerge),Handshake.Resource.registerClass(Handshake.EmployerRegistrations.EmployerRegistration),Handshake.Resource.registerClass(Handshake.Employers.Employer),Handshake.Resource.registerClass(Handshake.EmployerAlums.EmployerAlum),Handshake.Resource.registerClass(Handshake.EmployerFlags.EmployerFlag),Handshake.Resource.registerClass(Handshake.EmploymentTypes.EmploymentType),Handshake.Resource.registerClass(Handshake.EventTypes.EventType),Handshake.Resource.registerClass(Handshake.EventPreferences.EventPreference),Handshake.Resource.registerClass(Handshake.Events.Event),Handshake.Resource.registerClass(Handshake.Experiences.Experience),Handshake.Resource.registerClass(Handshake.ExternalLinks.ExternalLink),Handshake.Resource.registerClass(Handshake.ExtraCurriculars.ExtraCurricular),Handshake.Resource.registerClass(Handshake.Favorites.Favorite),Handshake.Resource.registerClass(Handshake.FirstDestinationResponses.FirstDestinationResponse),Handshake.Resource.registerClass(Handshake.FirstDestinationSurveys.FirstDestinationSurvey),Handshake.Resource.registerClass(Handshake.FirstDestinationRecipients.FirstDestinationRecipient),Handshake.Resource.registerClass(Handshake.GraduateProgramInterests.GraduateProgramInterest),Handshake.Resource.registerClass(Handshake.Industries.Industry),Handshake.Resource.registerClass(Handshake.Interests.Interest),Handshake.Resource.registerClass(Handshake.InstitutionAttendees.InstitutionAttendee),Handshake.Resource.registerClass(Handshake.InstitutionTypes.InstitutionType),Handshake.Resource.registerClass(Handshake.InstitutionSizes.InstitutionSize),Handshake.Resource.registerClass(Handshake.InstitutionLabels.InstitutionLabel),Handshake.Resource.registerClass(Handshake.InternalMessages.InternalMessage),Handshake.Resource.registerClass(Handshake.InternshipApprovals.InternshipApproval),Handshake.Resource.registerClass(Handshake.InternshipPreferences.InternshipPreference),Handshake.Resource.registerClass(Handshake.InterviewPreferences.InterviewPreference),Handshake.Resource.registerClass(Handshake.InterviewScheduleGroups.InterviewScheduleGroup),Handshake.Resource.registerClass(Handshake.InterviewScheduleTemplates.InterviewScheduleTemplate),Handshake.Resource.registerClass(Handshake.InterviewScheduleTimelines.InterviewScheduleTimeline),Handshake.Resource.registerClass(Handshake.InterviewScheduleTypes.InterviewScheduleType),Handshake.Resource.registerClass(Handshake.InterviewSchedules.InterviewSchedule),Handshake.Resource.registerClass(Handshake.InterviewScheduleDates.InterviewScheduleDate),Handshake.Resource.registerClass(Handshake.InterviewScheduleJobs.InterviewScheduleJob),Handshake.Resource.registerClass(Handshake.InterviewSlots.InterviewSlot),Handshake.Resource.registerClass(Handshake.InterviewSlotSwaps.InterviewSlotSwap),Handshake.Resource.registerClass(Handshake.JobPreferences.JobPreference),Handshake.Resource.registerClass(Handshake.JobTypes.JobType),Handshake.Resource.registerClass(Handshake.JobFunctions.JobFunction),Handshake.Resource.registerClass(Handshake.JobRoles.JobRole),Handshake.Resource.registerClass(Handshake.Jobs.Job),Handshake.Resource.registerClass(Handshake.Journals.Journal),Handshake.Resource.registerClass(Handshake.KioskPreferences.KioskPreference),Handshake.Resource.registerClass(Handshake.Labels.Label),Handshake.Resource.registerClass(Handshake.LearningObjectives.LearningObjective),Handshake.Resource.registerClass(Handshake.Locations.Location),Handshake.Resource.registerClass(Handshake.Majors.Major),Handshake.Resource.registerClass(Handshake.MajorGroups.MajorGroup),Handshake.Resource.registerClass(Handshake.MajorGroups.ParentMajorGroup),Handshake.Resource.registerClass(Handshake.MassEmails.MassEmailCard),Handshake.Resource.registerClass(Handshake.MassEmails.MassEmail),Handshake.Resource.registerClass(Handshake.MentorshipPreferences.MentorshipPreference),Handshake.Resource.registerClass(Handshake.Mentorships.Mentorship),Handshake.Resource.registerClass(Handshake.MessageTemplates.MessageTemplate),Handshake.Resource.registerClass(Handshake.Minors.Minor),Handshake.Resource.registerClass(Handshake.Notes.Note),Handshake.Resource.registerClass(Handshake.OfficeLocations.OfficeLocation),Handshake.Resource.registerClass(Handshake.Organizations.Organization),Handshake.Resource.registerClass(Handshake.OrganizationMemberships.OrganizationMembership),Handshake.Resource.registerClass(Handshake.PaymentPreferences.PaymentPreference),Handshake.Resource.registerClass(Handshake.PendingEmployerApprovals.PendingEmployerApproval),Handshake.Resource.registerClass(Handshake.Pins.Pin),Handshake.Resource.registerClass(Handshake.PositionInformations.PositionInformation),Handshake.Resource.registerClass(Handshake.PostGraduationInterests.PostGraduationInterest),Handshake.Resource.registerClass(Handshake.Postings.Posting),Handshake.Resource.registerClass(Handshake.Projects.Project),Handshake.Resource.registerClass(Handshake.Registrations.Registration),Handshake.Resource.registerClass(Handshake.ResumeParsings.ResumeParsing),Handshake.Resource.registerClass(Handshake.Rooms.Room),Handshake.Resource.registerClass(Handshake.SalaryTypes.SalaryType),Handshake.Resource.registerClass(Handshake.SchoolExpertises.SchoolExpertise),Handshake.Resource.registerClass(Handshake.SchoolMajors.SchoolMajor),Handshake.Resource.registerClass(Handshake.SchoolMinors.SchoolMinor),Handshake.Resource.registerClass(Handshake.Skills.Skill),Handshake.Resource.registerClass(Handshake.Schools.School),Handshake.Resource.registerClass(Handshake.StudentInterviewPreferences.StudentInterviewPreference),Handshake.Resource.registerClass(Handshake.StudentPreferences.StudentPreference),Handshake.Resource.registerClass(Handshake.StudentScreens.StudentScreen),Handshake.Resource.registerClass(Handshake.SurveyPages.SurveyPage),Handshake.Resource.registerClass(Handshake.QuestionOptionResponses.QuestionOptionResponse),Handshake.Resource.registerClass(Handshake.QuestionResponses.QuestionResponse),Handshake.Resource.registerClass(Handshake.SurveyResponses.SurveyResponse),Handshake.Resource.registerClass(Handshake.Surveys.Survey),Handshake.Resource.registerClass(Handshake.Questions.Question),Handshake.Resource.registerClass(Handshake.QuestionOptions.QuestionOption),Handshake.Resource.registerClass(Handshake.TwoFactorSettings.TwoFactorSetting),Handshake.Resource.registerClass(Handshake.Users.User),Handshake.Resource.registerClass(Handshake.UserGoals.UserGoal),Handshake.Resource.registerClass(Handshake.UserImages.UserImage),Handshake.Resource.registerClass(Handshake.UserAppointmentTypes.UserAppointmentType),Handshake.Resource.registerClass(Handshake.WorkExperiences.WorkExperience),Handshake.Resource.registerClass(Handshake.QualificationInformations.QualificationInformation)},t.findClassForType=function(e){return 0===Handshake.Resource.registeredClasses.length&&this.registerAllClasses(),_.find(this.registeredClasses,function(t){return t.type===e})},t.resourceFromObject=function(e,t){var s;if(t||(s=e.type||(null!=e._source?e._source.type:null),t=this.findClassForType(s)),t)return null!=e._source?new t(e._source):new t(e);console.log("Could not find class for the passed object "+e.type)},t.resourcesFromArray=function(e,t){return _.map(e,(s=this,function(e){return s.resourceFromObject(e,t)}));var s},t.observableResourceFromObject=function(e,t){return ko.observable(this.resourceFromObject(e,t))},t.classFromUnderscore=function(e){return _.find(t.registeredClasses,function(t){return t.underscore===e})},t}(),$(function(){if(!(Handshake.Resource.registeredClasses.length>0))return Handshake.Resource.registerAllClasses()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.ResourceEditor=function(){function t(t,s){var i,n,o,r;this.options=s,this.buildNewItem=e(this.buildNewItem,this),this.removeItem=e(this.removeItem,this),this.updateItem=e(this.updateItem,this),this.cancelEditing=e(this.cancelEditing,this),this.createItem=e(this.createItem,this),this.saveItem=e(this.saveItem,this),this.showCreateForm=e(this.showCreateForm,this),this.selectItem=e(this.selectItem,this),this.items=ko.observableArray(ko.utils.arrayMap(t,(i=this,function(e){return i.buildNewItem(e)}))),this.editing=ko.computed((n=this,function(){return n.items().reduce(function(e,t){return e||t.is_editing()},!1)})),this.itemToAdd=ko.observable(null),this.shouldHideList=ko.computed((o=this,function(){return null===o.items||0===o.items().length})),this.options||(this.options={}),this.showTile=ko.computed((r=this,function(){return"undefined"==typeof r.options.show_empty_tiles||r.options.show_empty_tiles||!r.shouldHideList()}))}return t.prototype.selectItem=function(e){return e.is_editing(!0)},t.prototype.showCreateForm=function(){return this.itemToAdd(this.buildNewItem({})),this.itemToAdd().is_editing(!0),this.options.newAtBottom?this.items.push(this.itemToAdd()):this.items.unshift(this.itemToAdd())},t.prototype.saveItem=function(e){if(this.validateFields(e))return void 0!==e.id()?this.updateItem(e):this.createItem(e)},t.prototype.createItem=function(e){return e.create((t=this,function(){return t.itemToAdd(null)}));var t},t.prototype.cancelEditing=function(e){return void 0===e.id()?(this.items.remove(e),this.itemToAdd(null)):(e.revert(),e.is_editing(!1))},t.prototype.updateItem=function(e){return e.save((t=this,function(){return t.itemToAdd(null)}));var t},t.prototype.removeItem=function(e,t,s){var i,n;if(null==s&&(s=!1),!1,!this.options.confirmOnDelete||confirm(this.options.confirmOnDelete))return e.destroy((n=this,function(t){if(n.items.remove(e),null!=n.postRemove)return n.postRemove(t,e)}),(i=this,function(t){if(null!=i.remove_failure)return i.remove_failure(t,e)}),{confirmed:s})},t.prototype.buildNewItem=function(){return null},t}(),Handshake.ResourceForm=function(){function t(t){var s,i;(this.options=t,this.submit=e(this.submit,this),this.cancel=e(this.cancel,this),this.destroy=e(this.destroy,this),null!=this.options.params)&&(this.options.resource.isNew()?(this.options.title||(this.options.title="New "+this.options.resource.type),$.extend(this.options.params,{method:"new",on_member:!1,action:"new",type:"GET"})):(this.options.title||(null!=this.options.resource.name?this.options.title=ko.computed((i=this,function(){return i.options.resource.name()?"Editing "+i.options.resource.name():""})):null!=this.options.resource.title?this.options.title=ko.computed((s=this,function(){return s.options.resource.title()?"Editing "+s.options.resource.title():""})):this.options.title="Editing"),this.options.resource.isLoading(!0),$.extend(this.options.params,{method:"edit",on_member:!0,action:"edit",type:"GET"})),this.options.resource.ajax_call(this.options.params))}return t.prototype.destroy=function(){return this.options.resource.isNew()?Handshake.Helpers.notifyError(this.options.resource.type+" cannot be deleted, since it has not been saved."):this.options.resource.destroy((e=this,function(){return Handshake.Helpers.notifySuccess(e.options.resource.type+" was successfully deleted."),window.location.href=e.options.resource.base_route("index")}));var e},t.prototype.cancel=function(e){if(null==e&&(e=!0),this.options.resource.revert(),this.options.resource.isNew()){if(e)return window.location.href=this.options.resource.base_route("index")}else if(e)return window.location.href=this.options.resource.entity_path},t.prototype.submit=function(e){return null==e&&(e=!0),this.options.resource.isNew()?this.options.resource.create((s=this,function(){if(Handshake.Helpers.notifySuccess(s.options.resource.type+" was successfully created."),e)return window.location.href=s.options.resource.entity_path})):this.options.resource.save((t=this,function(){if(Handshake.Helpers.notifySuccess(t.options.resource.type+" saved successfully."),e)return window.location.href=t.options.resource.entity_path}));var t,s},t}()}.call(this),function(){window.Handshake.Helpers.getFilterSections=function(e,t){return ko.computed(function(){return _.filter(e(),function(e){return e.hidden===t})})},window.Handshake.Helpers.hasOptionsForVisibility=function(e,t){return _(e).some(function(e){return e.hidden===t})},window.Handshake.Helpers.hasPremiumFilter=function(e,t){return _(e).some(function(e){return e.premium&&e.hidden===t})}}.call(this),function(){$.fn.select2.defaults.closeOnSelect=!1,window.Handshake.Helpers.setupSelect2=function(e,t,s,i){return $(e,t).select2({placeholder:i,ajax:{url:s,dataType:"json",data:function(e){return{query:e,simple_search:!0}},results:function(e){return{results:e}}},formatResult:window.Handshake.Helpers.select2_format,formatSelection:window.Handshake.Helpers.select2_format})},window.Handshake.Helpers.select2_format=function(e){return e.name}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.TabbedPage={},Handshake.TabbedPage.Page=function(){function e(e,t,s){this.index=ko.observable(e),this.name=ko.observable(t),this.description=ko.observable(s)}return e}(),Handshake.TabbedPage.View=function(){function t(){var t,s;this.selectPage=e(this.selectPage,this),this.postSelectPage=e(this.postSelectPage,this),this.preSelectPage=e(this.preSelectPage,this),this.reselectPage=e(this.reselectPage,this),this.nextPage=e(this.nextPage,this),this.previousPage=e(this.previousPage,this),this.pageOptions=ko.observableArray([]),this.currentPage=ko.observable(Handshake.Helpers.getInitialPageFromStorage()),this.currentPageTitle=ko.computed((t=this,function(){return t.pageOptions().length>t.currentPage()?t.pageOptions()[t.currentPage()].name():""})),this.currentPageDescription=ko.computed((s=this,function(){return s.pageOptions().length>s.currentPage()?s.pageOptions()[s.currentPage()].description():""}))}return t.prototype.previousPage=function(){var e;if(e=this.pageOptions()[this.currentPage()-1])return this.selectPage(e)},t.prototype.nextPage=function(){var e;if(e=this.pageOptions()[this.currentPage()+1])return this.selectPage(e)},t.prototype.reselectPage=function(){return this.currentPage()>=this.pageOptions().length&&this.currentPage(0),this.selectPage(this.pageOptions()[this.currentPage()])},t.prototype.preSelectPage=function(){},t.prototype.postSelectPage=function(){},t.prototype.selectPage=function(e){var t;return t=this.currentPage(),this.preSelectPage(e),this.currentPage(e.index()),Handshake.Helpers.setInitialPageInStorage(this.currentPage()),this.postSelectPage(t)},t.prototype.initToolTips=function(){},t}()}.call(this),function(){var e,t;Handshake.TimeZoneHelper={MIN_YEAR:1900},window.Handshake.Helpers.isValidDate=function(e){var t
;return(t=moment(e,"YYYY-MM-DD",!0)).isValid()&&t.toDate().getFullYear()>=Handshake.TimeZoneHelper.MIN_YEAR},window.Handshake.Helpers.isValidDateTime=function(e){var t;return(t=moment(e,"YYYY-MM-DD h:mm a",!0)).isValid()&&t.toDate().getFullYear()>=Handshake.TimeZoneHelper.MIN_YEAR},window.Handshake.Helpers.isISO8601=function(e){var t;return(t=moment(e,"YYYY-MM-DDTHH:mm:ssZZ",!0)).isValid()&&t.toDate().getFullYear()>=Handshake.TimeZoneHelper.MIN_YEAR},window.Handshake.Helpers.startToEndMonthsFancy=function(e,t){return e&&t?moment(e).format("MMMM YYYY")+" to "+moment(t).format("MMMM YYYY"):e?"Started "+moment(e).format("MMMM YYYY"):t?"Finished "+moment(t).format("MMMM YYYY"):""},window.Handshake.Helpers.startToEndTimeFancy=function(e,t){return e&&t?moment(e).format("h:mm a")+" to "+moment(t).format("h:mm a"):e?"Start "+moment(e).format("h:mm a"):t?"End "+moment(t).format("h:mm a"):""},window.Handshake.Helpers.prettyDuration=function(e){var t,s,i,n,o;return"",n="",i="",s=(t=moment().startOf("month").diff(e.startOf("month"),"months"))%12,(o=Math.floor(t/12))>0&&(n=o+" year",o>1&&(n+="s")),s<11?(i=s+1+" month",s>=1&&(i+="s")):n=o+1+" year",""===n?i:""===i?n:n+", "+i},window.Handshake.Helpers.dateIsInNextMonth=function(e){var t,s;return t=moment(),s=moment(t).add(1,"M"),e>=moment(s).startOf("month")},window.Handshake.Helpers.copyForWorkExperienceTenure=function(e){var t,s;return s=Handshake.Helpers.dateIsInNextMonth(e),t=Handshake.Helpers.prettyDuration(e),s?"Beginning "+e.format("MMM YYYY"):e.format("MMM YYYY")+" - Present ("+t+")"},window.Handshake.Helpers.startToEndSuccinct=function(e,t,s){var i,n,o;return i={hide_abbreviation:!0},n=Handshake.TimeZoneHelper.dateTime("day_short_date",e,s,i),o=Handshake.TimeZoneHelper.dateTime("time",e,s,i),e?t?moment(e).format("YYYY-MM-DD")===moment(t).format("YYYY-MM-DD")?(n=Handshake.TimeZoneHelper.dateTime("short_day_short_date",e,s,i))+" at "+o+" - "+Handshake.TimeZoneHelper.dateTime("time",t,s):n+" - "+Handshake.TimeZoneHelper.dateTime("day_short_date",t,s,i):n+" at "+o:""},window.Handshake.Helpers.whenInWords=function(e){return moment(e).isValid()?moment(e).fromNow():"at an unknown time"},window.Handshake.Helpers.toDateTimePicker=function(e,t){return null==t&&(t=null),e?(t||(t=Handshake.passed.current_user_time_zone),moment.tz(e,t).format("YYYY-MM-DD hh:mm a")):""},window.Handshake.Helpers.fromDateTimePicker=function(e,t){return null==t&&(t=null),e?(t||(t=Handshake.passed.current_user_time_zone),moment.tz(e,"YYYY-MM-DD hh:mm a",t).format()):""},window.Handshake.Helpers.toDatePicker=function(e,t){var s;return null==t&&(t=null),e?(t||(t="undefined"!=typeof Handshake&&null!==Handshake&&null!=(s=Handshake.passed)?s.current_user_time_zone:void 0),t?moment.tz(e,t).format("YYYY-MM-DD"):("undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"NoTimeZonePassed",errorMessage:"No timezone passed to toDatePicker, defaulting to browsers's time zone"}),moment(e).format("YYYY-MM-DD"))):""},window.Handshake.Helpers.fromDatePicker=function(e,t){var s;return null==t&&(t=null),e?(t||(t="undefined"!=typeof Handshake&&null!==Handshake&&null!=(s=Handshake.passed)?s.current_user_time_zone:void 0),t?moment.tz(e,"YYYY-MM-DD",t).format():("undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"NoTimeZonePassed",errorMessage:"No timezone passed to toDatePicker, defaulting to browsers's time zone"}),moment(e,"YYYY-MM-DD").format())):""},window.Handshake.Helpers.toTimePicker=function(e,t){return null==t&&(t=null),e?(t||(t=Handshake.passed.current_user_time_zone),Handshake.TimeZoneHelper.dateTime("time",e,t,{hide_abbreviation:!0})):""},window.Handshake.Helpers.fromTimePicker=function(e,t){return null==t&&(t=null),e?(t||(t=Handshake.passed.current_user_time_zone),moment.tz(e,"hh:mm a",t).format()):""},window.Handshake.Helpers.toMonthPicker=function(e){return e?moment(e).format("MM/YYYY"):""},window.Handshake.Helpers.fromMonthPicker=function(e){return e?moment(e,"MM/YYYY").format():""},window.Handshake.Helpers.straightDate=function(e){return e?moment(e).format("MMMM Do YYYY"):""},window.Handshake.Helpers.straightDateTime=function(e){return e?moment(e).format("MMMM Do YYYY h:mm a"):""},window.Handshake.Helpers.fullStraightDate=function(e){return e?moment(e).format("dddd, MMMM Do YYYY"):""},window.Handshake.Helpers.fullStraightDateTime=function(e,t){var s;return s="dddd, MMMM Do YYYY h:mm a",t&&(s+=" z"),e?moment(e).format(s):""},window.Handshake.Helpers.startToEnd=function(e,t,s,i,n,o){var r;return null==n&&(n="-"),null==o&&(o={}),r=window.Handshake.TimeZoneHelper.dateTime(e,t,i,o),r+=" "+n+" ",r+=window.Handshake.TimeZoneHelper.dateTime(e,s,i,o)},window.Handshake.Helpers.startToEndTime=function(e,t,s,i,n){return null==i&&(i="-"),null==n&&(n={}),window.Handshake.Helpers.startToEnd("time",e,t,s,i,n)},window.Handshake.Helpers.startToEndDate=function(e,t,s,i,n){return null==i&&(i="-"),null==n&&(n={}),window.Handshake.Helpers.startToEnd("long_date",e,t,s,i,n)},window.Handshake.Helpers.startToEndSmart=function(e,t,s,i,n){var o;return null==n&&(n="-"),o=window.Handshake.TimeZoneHelper.dateTime(e,t,i),o+=" "+n+" ",moment(t).dayOfYear()===moment(s).dayOfYear()?o+=window.Handshake.TimeZoneHelper.dateTime("time",s,i):o+=window.Handshake.TimeZoneHelper.dateTime(e,s,i),o},window.Handshake.Helpers.startToEndSmartDates=function(e,t,s,i,n){var o;return null==n&&(n="-"),moment(t).format("YYYY-MM-DD")===moment(s).format("YYYY-MM-DD")&&(e="time"),o=window.Handshake.TimeZoneHelper.dateTime(e,t,i),o+=" "+n+" ",o+=window.Handshake.TimeZoneHelper.dateTime(e,s,i)},window.Handshake.Helpers.dayOfWeekText=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]},window.Handshake.Helpers.validateDateTimeInput=function(e,t){var s,i,n,o,r,a,c,l;return a="YYYY-MM-DD H:mm a"===(t=(t=t||"YYYY-MM-DD h:mm a").replace("yyyy-mm-dd","YYYY-MM-DD").replace("mm/yyyy","MM/YYYY").replace("ii p","mm a"))?/^\d{4}\-\d{1,2}\-\d{1,2} \d{1,2}:\d{2} (am|pm)$/:"YYYY-MM-DD"===t?/^\d{4}\-\d{1,2}\-\d{1,2}$/:"MM/YYYY"===t?/^\d{1,2}\/\d{4}$/:"H:mm a"===t?/^\d{1,2}:\d{2} (am|pm)$/:/.*/,i=(s=$(e)).closest(".form-group"),n=s.closest(".input-group"),l=s.val().trim(),c=moment(l,t),o=s.hasClass("required")?!a.test(l):""!==l&&!a.test(l),r=c.parsingFlags().unusedTokens.length>0||!c.isValid(),o||(o=s.hasClass("required")?r:""!==l&&r),o?(i.addClass("text-danger"),n.siblings(".error-wrapper").find(".invalid-date:first").removeClass("hidden")):(i.removeClass("text-danger"),n.siblings(".error-wrapper").find(".invalid-date:first").addClass("hidden")),!o},window.Handshake.Helpers.defaultNextGraduationDate=function(){var e;return(e=new Date).getMonth()<=4?new Date(e.getFullYear(),4):new Date(e.getFullYear()+1,4)},window.Handshake.TimeZoneHelper.observesDST=function(e){return moment.tz(1,"M",e).format("Z")!==moment.tz(6,"M",e).format("Z")},window.Handshake.TimeZoneHelper.browserTimeZoneOffset=function(e){var t;return null==e&&(e=!1),Handshake.passed.show_time_zone_modal||e?(t=60*moment().utcOffset(),moment().isDST()&&(t-=3600),t>46800?(bugsnagClient.notify({errorClass:"InvalidTZOffset",errorMessage:"Greater than +13",groupingHash:"Invalid timezone offset",metaData:{timezoneData:{tz:t,now:moment().format(),valid:moment().isValid(),dst:moment().isDST(),show_modal:Handshake.passed.show_time_zone_modal,passed_tz:Handshake.passed.current_user_time_zone_offset,moment_zone:moment().zone(),utc_offset:moment().utcOffset()}}}),t=-18e3):t<-39600&&(bugsnagClient.notify({errorClass:"InvalidTZOffset",errorMessage:"Less than -11",groupingHash:"Invalid timezone offset",metaData:{timezoneData:{tz:t,now:moment().format(),valid:moment().isValid(),dst:moment().isDST(),show_modal:Handshake.passed.show_time_zone_modal,passed_tz:Handshake.passed.current_user_time_zone_offset,moment_zone:moment().zone(),utc_offset:moment().utcOffset()}}}),t=-18e3),t):Handshake.passed.current_user_time_zone_offset},window.Handshake.TimeZoneHelper.browserTimeZoneObservesDST=function(e){var t,s;return null==e&&(e=!1),Handshake.passed.show_time_zone_modal||e?(t=moment(1,"M").format("Z")!==moment(6,"M").format("Z"),-28800===(s=window.Handshake.TimeZoneHelper.browserTimeZoneOffset(e))&&!1===t&&(t=!0),-36e3===s&&!0===t&&(t=!1),-32400===s&&!1===t&&(t=!0),t):Handshake.passed.current_user_time_zone_observes_dst},e=function(e,t){switch(e){case"full_date":case"full_date_time":return t.format("dddd, MMMM Do YYYY");case"long_date":case"long_date_time":return t.format("MMMM Do YYYY");case"when_date_time":return t.format("MMMM Do YYYY")+" at";case"short_date":case"short_date_time":return t.format("MMM Do YYYY");case"day_short_date":case"day_short_date_time":return t.format("dddd, MMM D");case"very_short_date":case"very_short_date_time":return t.format("MMM DD");case"day_only":return t.format("dddd");case"month_day_year":case"month_day_year_time":return t.shorthandWithTwoDigitYear("L");case"short_day_short_date":return t.format("ddd, MMM DD")}},t=function(t,s,i,n,o){var r,a,c,l,u;return i?(a=e(t,s),c=s.format("h:mm a"),o.hide_abbreviation||(r=window.Handshake.TimeZoneHelper.browserTimeZoneObservesDST(),l=window.Handshake.TimeZoneHelper.observesDST(i),u=60*-moment.tz.zone(i).utcOffset(moment({months:5})),l&&(u-=3600),(o.show_abbreviation||n!==u||r!==l)&&(c+=s.format(" z"))),"time"===t?c:o.reverse?c+" "+a:a+" "+c):"Unknown Time"},window.Handshake.TimeZoneHelper.dateTime=function(s,i,n,o){if(null==o&&(o={}),!i)return"Unknown Time";if(i=moment(i),n&&moment.tz.zone(n))i=moment(i).tz(n);else if(n)return"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"UnknownTimeZone",errorMessage:"Unknown time zone '"+n+"'. Returning 'Unknown Time'"}),"Unknown Time";return["full_date_time","long_date_time","when_date_time","very_short_date_time","short_date_time","full_short_date_time","day_short_date_time","time","month_day_year_time"].indexOf(s)>=0?t(s,i,n,window.Handshake.TimeZoneHelper.browserTimeZoneOffset(),o):e(s,i)}}.call(this),function(){var e,t;(e=window.Handshake).Transducers||(e.Transducers={}),window.Handshake.Transducers.transduce=function(e,t){return null==t&&(t=[]),{map:function(s){return Handshake.Transducers.transduce(e,t.concat(Handshake.Transducers.mapping(s)))},filter:function(s){return Handshake.Transducers.transduce(e,t.concat(Handshake.Transducers.filtering(s)))},combine:function(s){return Handshake.Transducers.transduce(e,t.concat(s))},reduce:function(s,i){var n;return n=(n=_.compose.apply(_,t))(s),_(e).inject(n,i)}}},window.Handshake.Transducers.mapping=function(e){return function(t){return function(s,i){return t(s,e(i))}}},window.Handshake.Transducers.filtering=function(e){return function(t){return function(s,i){return e(i)?t(s,i):s}}},(t=window.Handshake).Combiners||(t.Combiners={}),window.Handshake.Combiners.add=function(e,t){return e+t},window.Handshake.Combiners.concat=function(e,t){return e.concat(t)}}.call(this),function(){"undefined"!=typeof Turbolinks&&null!==Turbolinks&&(window.is_ie9||Turbolinks.ProgressBar.enable(),Turbolinks.pagesCached(0))}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.KnockoutRailsHelper=function(){function t(){this.unmountViews=e(this.unmountViews,this),this.mountViews=e(this.mountViews,this),this.setupCallbacks=e(this.setupCallbacks,this),this.nodeToViewModelMapping={}}var s,i,n;return s="data-knockout-class",n="data-knockout-props",i="[data-turbolinks-permanent]",t.prototype.setupCallbacks=function(){return"undefined"!=typeof Turbolinks&&null!==Turbolinks?($(document).on("ready",(i=this,function(){return i.mountViews({permanent_views_only:!0})})),$(document).on("page:change",(s=this,function(){return s.mountViews({permanent_views_only:!1})})),$(document).on(Turbolinks.EVENTS.BEFORE_UNLOAD,(t=this,function(){return t.unmountViews()}))):$(document).ready((e=this,function(){return e.mountViews({permanent_views_only:!0}),e.mountViews({permanent_views_only:!1})}));var e,t,s,i},t.prototype.findNodes=function(e){var t;return null==e&&(e=!1),t=e?i+" > ["+s+"]":"["+s+"]",document.querySelectorAll(t)},t.prototype.nodeIsPermanent=function(e){return e.parents(i).length>0},t.prototype.mountViews=function(e){return _(this.findNodes(e.permanent_views_only)).each((t=this,function(i){var o,r,a,c,l;if(o=$(i),!t.nodeIsPermanent(o)||e.permanent_views_only){if(a=o.attr(s),c=(c=o.attr(n))&&JSON.parse(c),null!=Handshake[a])return l=new Handshake[a](c,o),ko.applyBindings(l,i),o.uniqueId(),r=o.attr("id"),t.nodeToViewModelMapping[r]=l;window.location.href=window.location}}));var t},t.prototype.unmountViews=function(){return _(this.findNodes()).each((e=this,function(t){var s,i;if(s=t.id,i=e.nodeToViewModelMapping[s],!e.nodeIsPermanent($(t)))return null!=i?(_.isFunction(i.unmount)&&i.unmount(),ko.cleanNode(t),delete e.nodeToViewModelMapping[s]):void 0}));var e},t}(),(new Handshake.KnockoutRailsHelper).setupCallbacks()}.call(this),window.Handshake.passed.use_appcues){var appcuesLoaded=$.Deferred(),scriptElement=document.createElement("script");scriptElement.type="text/javascript",scriptElement.async=!0,scriptElement.src="https://fast.appcues.com/43819.js",scriptElement.addEventListener("load",appcuesLoaded.resolve,!1);var parentElement=document.getElementsByTagName("script")[0];parentElement.parentNode.insertBefore(scriptElement,parentElement),$.when(appcuesLoaded).done(function(){if("undefined"!=typeof window.Appcues&&null!==window.Appcues){var e=window.Handshake.passed,t={institutionName:e.current_user_institution_name,institutionId:e.current_user_institution_id,institutionType:e.current_user_institution_types,userType:e.current_user_type,createdAt:e.current_user_created_at,lastLogin:e.current_user_last_logged_in_pretty,region:e.app_region,roles:e.current_user_roles,schoolId:e.current_user_institution_id,featurePreferences:e.current_user_school_feature_preferences,redMarketingTolerance:e.current_user_school_sensitive_marketing_tolerance,noEmailsToStudents:e.current_user_school_no_emails_to_students,premiumSeat:e.current_user_has_premium_seat},s=e.should_obfuscate_appcues_pii?e.current_user_guid:e.current_user_id,i=e.should_obfuscate_appcues_pii?Object.assign(t):Object.assign(t,{emailAddress:e.current_user_institution_managed_email,name:e.current_user_name,calculatedFirstName:e.current_user_calculated_first_name,title:e.current_user_title});window.Appcues.identify(s,i),$(document).on(window.PAGE_CHANGE_EVENT,function(){"undefined"!=typeof window.Appcues&&null!==window.Appcues&&window.Appcues.page()})}})}var supportLink;(function(){var e;ko.virtualElements.allowedBindings.can=!0,ko.virtualElements.allowedBindings.cannot=!0,ko.bindingHandlers.safeText={update:function(e,t){var s,i;return i=ko.utils.unwrapObservable(t()),s=null!=i?i:{value:""},ko.bindingHandlers.text.update(e,function(){return s})}},ko.bindingHandlers.safeValue={update:function(e,t){var s,i;return i=ko.utils.unwrapObservable(t()),s=i.check,i.value,ko.bindingHandlers.value.update(e,function(){return null!=s?s:{value:""}})}},ko.bindingHandlers.redirectSearch={init:function(e,t){var s,i,n,o;return o=$(e),i=t(),n=$("#query",o),s=$("#search_button",o),n.on("keypress",function(e){if(13===e.which)return ko.bindingHandlers.redirectSearch.do_search(e,n,i)}),s.on("click",function(e){return ko.bindingHandlers.redirectSearch.do_search(e,n,i)})},do_search:function(e,t,s){var i,n;return e.preventDefault(),n=t.val(),i=-1!==s.indexOf("?")?"&":"?",window.location.href=s+i+"query="+n}},ko.bindingHandlers.invisible={update:function(e,t){var s;return s=ko.utils.unwrapObservable(t()),ko.bindingHandlers.visible.update(e,function(){return!s})}},ko.bindingHandlers.doneTyping={init:function(e,t,s){var i;return i=s.get("delay"),$(e).donetyping(function(e){return ko.utils.unwrapObservable(t())(e)},i)}},ko.bindingHandlers.popover={init:function(e,t,s,i,n){var o,r;if(r=ko.utils.unwrapObservable(t()),$(e).popover(r).click(function(e){return e.preventDefault()}),o=function(t){var s,i;if(i=$(".popover")[0],s=t.originalEvent.target,i&&s!==e&&!i.contains(s))return $(e).popover("hide")},$(e).on("shown.bs.popover",function(){var e;if(e=$(".popover")[0],ko.cleanNode(e),ko.applyBindingsToDescendants(n,e),r.hide_on_click_outside)return $("body").on("click",o)}),r.hide_on_click_outside)return $(e).on("hidden.bs.popover",function(){return $("body").off("click",o)})}},ko.bindingHandlers.tooltip={init:function(e,t){var s;return(s=ko.utils.unwrapObservable(t()))?$(e).tooltip({title:s,container:"body"}):$(e).tooltip()},update:function(e,t){var s;if((s=ko.utils.unwrapObservable(t()))&&($(e).attr("data-original-title",s),void 0!==$(e).attr("aria-describedby")))return $(e).tooltip("show")}},ko.bindingHandlers.lock_form_field={update:function(e,t,s){var i,n,o;if(i=ko.utils.unwrapObservable(t()),o=s.get("lock_text")||$(e).attr("title")||"This field is locked by your school. If you would like to change it, please contact your career office.",null==(n=s.get("lock_position_parent"))&&(n=!0),i){if(!$(e).parent().hasClass("virtual-tooltip"))return $(e).attr("disabled","disabled"),$(e).wrap("<div class='virtual-tooltip' style='position: "+(n?"relative":"static")+"'/>"),$("<div class='virtual-tooltip-cover "+(n?"":"with-margins")+"' />").insertAfter($(e)).tooltip({title:o,container:"body"})}else if($(e).parent().hasClass("virtual-tooltip"))return $(e).removeAttr("disabled"),$(e).next().remove(),$(e).unwrap()}},ko.bindingHandlers.infiniteScroll={init:function(e,t){var s,i,n,o,r,a,c;return r=(c=ko.unwrap(t())).container_selector||e,n=c.bottom_offset||300,o=c.callback,s=$(r),i=r===window?$(document):s,a=_.throttle(o,500,{trailing:!1}),s.on("scroll",function(){if(s.scrollTop()+s.height()>i.height()-n)return a()}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){return s.off("scroll")})}},ko.bindingHandlers.validateDate={init:function(e,t,s){var i,n,o,r,a,c,l,u,h,_,d,p,m;if(t())return n=$(e),i=n.siblings(".validated-datetime"),o=n.closest(".input-group"),m=(t=s.get("value"))?ko.utils.unwrapObservable(t()):n.val(),c=s.get("format")||"yyyy-mm-dd H:ii p",n.donetyping(function(e){if(Handshake.Helpers.validateDateTimeInput(e,c)&&""!==$(e).val())return i.data("date",$(e).val())},this.timeout),n.on("change",function(){if(Handshake.Helpers.validateDateTimeInput(n,c)&&""!==n.val())return i.data("date",n.val())}),p=c.replace("ii p","mm am/pm").toLowerCase(),n.attr("placeholder")||n.attr("placeholder",p),o.after("<div class='error-wrapper'><span class='invalid-date hidden' aria-live='assertive'>Invalid Date </span><span class='format-hint hidden' aria-live='polite'>"+p+"</span></div>"),h=s.get("moment_format")||c.replace("yyyy-mm-dd","YYYY-MM-DD").replace("mm/yyyy","MM/YYYY").replace("ii p","mm a"),_=s.get("moment_time_zone")||ko.observable(Handshake.passed.current_user_time_zone),a=m?moment.tz(m,h,_()):moment(),"mm/yyyy"===(d={autoclose:!0,showMeridian:!0,minView:s.get("minView"),maxView:s.get("maxView"),startView:s.get("startView")||2,format:c}).format?(u=3,l=4,d.startView=4):"yyyy-mm-dd"===d.format?(u=2,l=4):"H:ii p"===d.format?(u=0,l=1,d.formatViewType="time",d.startView=1):(u=0,l=4),d.minView=d.minView||u,d.maxView=d.maxView||l,r="time"===d.formatViewType?a:a.startOf("hour"),d.initialDate=moment(r.format("YYYY-MM-DD hh:mm a"),"YYYY-MM-DD hh:mm a").toDate(),i.on("click",function(){return window.date_hint_triggered=!0,i.find(".fa").tooltip("hide")}),i.datetimepicker(d),i.on("changeDate",function(){return n.val(i.data("date")).trigger("change")}),n.on("blur",function(){return o.siblings(".error-wrapper").find(".format-hint:first").addClass("hidden")}),n.on("focus",function(){var e;if(o.siblings(".error-wrapper").find(".format-hint:first").removeClass("hidden"),!window.date_hint_triggered)return window.date_hint_triggered=!0,(e=i.find(".fa")).tooltip({trigger:"manual",title:"Click here to select date"}),e.tooltip("show"),setTimeout(function(){return e.tooltip("hide")},4e3)}),s().minDate&&s().minDate.subscribe(function(){if(i.data("datetimepicker"))return i.data("datetimepicker").setStartDate(s().minDate())}),s().maxDate&&s().maxDate.subscribe(function(){if(i.data("datetimepicker"))return i.data("datetimepicker").setEndDate(s().maxDate())}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){return i.data("datetimepicker").remove()})},update:function(e,t,s){var i;if(t=s.get("value"))return(i=ko.utils.unwrapObservable(t()))&&i!==$(e).val()?$(e).val(i).trigger("change"):void 0}},window.Handshake.Helpers.formatted_datetime_helper=function(e,t,s,i,n,o){var r,a,c;return a=!0,r=function(){var e;if(a)return e=moment.tz(s(),i()),null!=s()&&e.isValid()&&s(e.format()),a=!1},i.subscribe(r,null,"beforeChange"),i.subscribe(function(e){var t;if(t=moment.tz(s(),"YYYY-MM-DD hh:mm a",e),null!=s()&&t.isValid())return s(t.format())}),c=ko.computed({read:function(){return n(s(),i())},write:function(e){return s(o(e,i()))}}),ko.applyBindingsToNode(e,{value:c},t)},ko.bindingHandlers.formatted_time={init:function(e,t,s,i,n){var o,r,a;return r=s.get("moment_time_zone")||ko.observable(Handshake.passed.current_user_time_zone),a=window.Handshake.Helpers.toTimePicker,o=window.Handshake.Helpers.fromTimePicker,window.Handshake.Helpers.formatted_datetime_helper(e,n,t(),r,a,o)}},ko.bindingHandlers.formatted_date={init:function(e,t,s,i,n){var o,r,a;return r=s.get("moment_time_zone")||ko.observable(Handshake.passed.current_user_time_zone),a=window.Handshake.Helpers.toDatePicker,o=window.Handshake.Helpers.fromDatePicker,window.Handshake.Helpers.formatted_datetime_helper(e,n,t(),r,a,o)}},ko.bindingHandlers.formatted_datetime={init:function(e,t,s,i,n){var o,r,a;return r=s.get("moment_time_zone")||ko.observable(Handshake.passed.current_user_time_zone),a=window.Handshake.Helpers.toDateTimePicker,o=window.Handshake.Helpers.fromDateTimePicker,window.Handshake.Helpers.formatted_datetime_helper(e,n,t(),r,a,o)}},ko.bindingHandlers.formatted_money={init:function(e,t,s,i,n){var o,r;return r=t(),o=ko.computed({read:function(){var e;if((e=r())&&!isNaN(e))return Handshake.Helpers.numberWithCommas(parseFloat(e).toFixed(2))},write:function(e){return e=String(e).replace(/[^0-9.]/g,""),r(e)}}).extend({computed_validation:r}),ko.applyBindingsToNode(e,{validated_value:o},n)}},ko.bindingHandlers.text_as_money={init:function(e,t,s,i,n){var o;return o=ko.computed(function(){var e;return e=ko.utils.unwrapObservable(t()),Handshake.passed.currency_symbol+Handshake.Helpers.numberWithCommas(parseFloat(e).toFixed(2))}),ko.applyBindingsToNode(e,{text:o},n)}},ko.bindingHandlers.ladda_button={init:function(e,t){var s,i;return(s=$(e)).addClass("ladda-button"),s.data("style","zoom-in"),s.data("spinner-size","20"),i=Ladda.create(e),t().subscribe(function(e){return e?i.start():i.stop()})}},ko.bindingHandlers.file={init:function(e,t){$(e).change(function(){var e;e=this.files[0],ko.isObservable(t())&&t()(e)})},update:function(e,t,s){var i,n,o,r,a;n=ko.utils.unwrapObservable(t()),i=s(),a=window.URL||window.webkitURL,i.fileObjectURL&&ko.isObservable(i.fileObjectURL)&&((o=i.fileObjectURL())&&a.revokeObjectURL(o),i.fileObjectURL(n&&a.createObjectURL(n))),i.fileBinaryData&&ko.isObservable(i.fileBinaryData)&&(n?((r=new FileReader).onload=function(e){i.fileBinaryData(e.target.result)},r.readAsArrayBuffer(n)):i.fileBinaryData(null))}},ko.bindingHandlers.select2_ajax={init:function(e,t){var s,i,n,o,r,a,c,l,u,h;return a=t(),i=!1,n=$(e).attr("multiple"),c=a.primary_property||"name",u=a.secondary_property,s=function(e){var t,s;return t="function"==typeof c?Handshake.Helpers.escapeString(c(e)):Handshake.Helpers.escapeString(e[c]),u?("undefined"===(s="function"==typeof u?Handshake.Helpers.escapeString(u(e)):Handshake.Helpers.escapeString(e[u]))&&(s=""),"<p class='no-margin-bottom'>"+t+"</p><span class='text-muted'>"+s+"</span>"):t},l=a.resultFormatFunction||s,h=a.selectionFormatFunction||s,a.lastElement&&(o=l,l=function(e){return"last_element"===e.id?a.lastElement.resultDisplayValue:o(e)},r=h,h=function(e){return"last_element"===e.id?a.lastElement.selectedDisplayValue:r(e)}),$(e).select2({placeholder:a.placeholder||"Type...",searchInputPlaceholder:a.search_placeholder||"Type to filter results...",allowClear:a.allowClear||!1,format:a.format,multiple:n,id:function(e){return null!=a.id_function?a.lastElement&&"last_element"===e.id?"last_element":a.id_function(e):e.id},ajax:{url:ko.utils.unwrapObservable(a.url),dataType:"json",quietMillis:300,data:function(e,t){return a.dataFunction?a.dataFunction(e,t):{query:e,simple_search:a.simple_search||!0,page:t}},results:function(e){var t;return t=e,a.results_property&&(t=e[a.results_property]),a.results_filter&&(t=a.results_filter(t)),a.lastElement&&t.push({id:"last_element"}),a.infinite_scroll?{results:t,more:t.length>=(a.per_page||25)}:{results:t}}},formatResult:l,formatSelection:h,initSelection:function(e,t){var s,o;if(!i){if(i=!0,!$(e).data("initial-value"))return a.initial_value&&ko.utils.unwrapObservable(a.initial_value)?(n?(s=[],_.each(ko.utils.unwrapObservable(a.initial_value),function(e){if("undefined"!=typeof e.id&&null!==e.id)return s.push(e)})):(o=ko.utils.unwrapObservable(a.initial_value),s="undefined"!=typeof o.id&&null!==o.id?o:null),t(s)):void 0;t($(e).data("initial-value"))}}}),$("input.select2-input[autocomplete*='off']").attr("autocomplete","none"),$(e).on("change",function(t){var s;return a.lastElement&&a.lastElement.onSelect&&"last_element"===t.val?(a.lastElement.onSelect(),void(a.lastElement.resetValueOnSelect&&$(e).select2("val",null))):(a.value&&a.value(t.val),a.full_data&&((s=$(e).select2("data"))||(s={}),a.full_data(s,!0)),a.on_change&&a.on_change(t.val),a.resetAfterSelection?$(e).select2("val",null):void 0)}),$(e).on("select2-opening",function(e){if(a.openingFunction)return a.openingFunction(e)}),$(e).on("select2-removing",function(e){if(a.removingFunction)return a.removingFunction(e)}),$(e).on("select2-selecting",function(t){if(a.selectingFunction)return a.selectingFunction($(e).select2("data"),t)})},update:function(e,t){var s;if((s=t()).value&&$(e).select2("val",ko.utils.unwrapObservable(s.value)),s.full_data)return $(e).attr("multiple")||"undefined"!=typeof s.full_data().id&&null!==s.full_data().id?$(e).select2("data",ko.utils.unwrapFunction(s.full_data)):$(e).select2("data",null)}},ko.bindingHandlers.selectedText={init:function(e,t){var s,i;return(s=t())($("option:selected",e).text()),$(e).change((i=this,function(){return s($("option:selected",i).text())}))}},ko.bindingHandlers.select2_static={init:function(e,t){var s;return s=t(),$(e).select2({placeholder:s.placeholder||"Choose...",allowClear:s.allowClear||!1,setDefaultOnUpdate:s.setDefaultOnUpdate||!0,data:s.data||void 0}),$(e).on("change",function(t){var i;if(s.value&&s.value(t.val),s.full_data&&((i=$(e).select2("data"))||(i={}),s.full_data(i)),s.on_change)return s.on_change()})},update:function(e,t){var s,i,n,o;if((i=t()).collection&&(s=ko.utils.unwrapFunction(i.collection),$(e).empty(),_(s).each(function(t){var s;return s=$("<option></option>").attr("value",t.id).text(t.name),$(e).append(s)}),i.allowClear&&$(e).prepend($("<option value></option>"))),i.value&&(i.value()?$(e).select2("val",ko.utils.unwrapObservable(i.value)):i.collection&&(o=null,i.setDefaultOnUpdate&&(null!=(n=(s=ko.utils.unwrapFunction(i.collection))[0])?n.id:void 0)&&(o=s[0].id),$(e).select2("val",o),i.value(o))),i.full_data)return $(e).attr("multiple")||"undefined"!=typeof i.full_data().id&&null!==i.full_data().id?$(e).select2("data",ko.utils.unwrapFunction(i.full_data)):$(e).select2("data",null)}},ko.bindingHandlers.typeahead={init:function(e,t,s){var i,n,o,r,a;return i=s(),(o=ko.utils.unwrapObservable(t())).displayKey||(o.displayKey="name"),a=function(e){if(i.value)return i.value(e)},n=function(t,s){if(a(s[o.displayKey]),o.onChange&&o.onChange(s,e),13===t.keyCode)return t.preventDefault(),!1},r=null,$(e).attr("autocomplete","none").typeahead({highlight:!0,minLength:o.minLength||1,hint:o.hint},{displayKey:o.displayKey,templates:{suggestion:function(e){var t,s;return s=e[o.displayKey],(t=document.createElement("p")).appendChild(document.createTextNode(s)),"<div role='option'>"+t.innerHTML+"</div>"}},source:function(e,t,s){return r&&clearTimeout(r),r=setTimeout(function(){var t;return Handshake.operations.add_worker(),o.params||(o.params={}),t=_.extend(o.params,{query:e}),$.getJSON(o.path,t,function(t){var i,n;return n=o.dataKey?t[o.dataKey]:t,i=o.processValues?o.processValues(n,e):n,Handshake.operations.remove_worker(),s(i)})},300)}}).on("typeahead:selected",function(e,t,s){return n(e,t,s)}).on("typeahead:autocompleted",function(e,t,s){return n(e,t,s)})}},ko.bindingHandlers.disableOnSubmit={update:function(e,t){if(ko.utils.unwrapObservable(t()))return $(e).on("submit",function(){return $('[type="submit"]').prop("disabled","disabled")})}},ko.bindingHandlers.disable_navigation_on_click={init:function(e){return $(e).on("click",function(){return $(e).click(function(){return!1}),!0})}},ko.bindingHandlers.confirmClick={init:function(e,t,s){var i;return i=s.get("confirmation_message")||"Are you sure?",$(e).click(function(){return!!confirm(i)&&$(e).unbind("click").click(function(){return!1})})}},ko.bindingHandlers.datePopover={init:function(e,t){var s,i;if(i=ko.utils.unwrapObservable(t()))return s={minView:"month",startView:"month",autoclose:!0,showMeridian:!0,todayBtn:!0,todayHighlight:!0},null!=i.dateTimePickerOptions&&_.extend(s,i.dateTimePickerOptions),$(e).popover({html:!0,content:function(){var t,n;return n=$(i.popoverParentSelector).clone(!0).removeClass("hidden"),(t=$(i.popoverSelector,n)).datetimepicker(s).on("changeDate",function(t){return $(e).popover("hide"),i.changeDate(t)}),i.minDate&&t.data("datetimepicker").setStartDate(i.minDate()),i.maxDate&&t.data("datetimepicker").setEndDate(i.maxDate()),n}}).click(function(e){return e.preventDefault(),e.stopPropagation()}),$("body").click(function(){return $(e).popover("hide")})}},ko.bindingHandlers.navigate={update:function(e,t,s,i,n){var o,r;return r=ko.utils.unwrapObservable(t()),o=function(){return function(){return Handshake.SPA.navigate(r),!1}},ko.bindingHandlers.click.init(e,o,s,i,n),ko.bindingHandlers.attr.update(e,ko.observable({href:r}))}},ko.bindingHandlers.asyncList={init:function(e,t,s,i,n){var o,r,a,c,l;return o=t(),this.name=o.name,this.list=o.list,this.dependents=o.dependents||[],this.anythingLoading=ko.computed((c=this,function(){return _(c.dependents).reduce(function(e,t){return e||t.isLoading()},c.list.isLoading())})),a=ko.computed((l=this,function(){return l.anythingLoading()?l.name+"-loading":l.list.hasItems()?l.name+"-items":l.name+"-empty"})),r=ko.computed(function(){return{name:a,data:i}}),ko.bindingHandlers.template.update(e,r,s,i,n)}},ko.bindingHandlers.asyncDependent={update:function(e,t,s,i,n){var o;return o=ko.computed(function(){return _(t()).reduce(function(e,t){return e&&!t.isLoading()},!0)}),ko.bindingHandlers.visible.update(e,o,s,i,n)}},ko.bindingHandlers.can={init:function(e,t,s,i,n){var o,r,a,c,l;return c=(a=t())[0],r=a[1],l=(o=a.length>=3?a[2]:null)?Handshake.ability.can(c,r,o):Handshake.ability.can(c,r),ko.bindingHandlers["if"].init(e,l,s,i,n),{controlsDescendantBindings:!0}}},ko.bindingHandlers.cannot={init:function(e,t,s,i,n){var o,r,a,c,l,u;return c=(a=t())[0],r=a[1],o=a.length>=3?a[2]:null,u=o?Handshake.ability.can(c,r,o):Handshake.ability.can(c,r),l=ko.computed(function(){return!u()}),ko.bindingHandlers["if"].init(e,l,s,i,n),{controlsDescendantBindings:!0}}},ko.bindingHandlers.pluralize={update:function(e,t){var s,i,n,o,r;return r=(i=ko.utils.unwrapObservable(t())).text,s=i.count,o=i.pluralizer||"s",n=Handshake.Helpers.pluralizeString(r,s,o),ko.bindingHandlers.text.update(e,function(){return n})}},ko.bindingHandlers.truncateString={update:function(e,t){var s,i,n,o;return o=(i=ko.utils.unwrapObservable(t())).text,s=i.length,n=Handshake.Helpers.truncateString(o,s),ko.bindingHandlers.text.update(e,function(){return n})}},ko.bindingHandlers.fileupload={init:function(e,t){var s;return s=ko.utils.unwrapObservable(t()),$(e).fileupload(s()),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){return $(e).fileupload("destroy")})}},
window.Handshake.Helpers.wysiwygCSS=".wysiwyg-color-black{color:#000!important}.wysiwyg-color-silver{color:silver!important}.wysiwyg-color-gray{color:gray!important}\n.wysiwyg-color-maroon{color:maroon!important}.wysiwyg-color-red{color:red!important}.wysiwyg-color-purple{color:purple!important}\n.wysiwyg-color-green{color:green!important}.wysiwyg-color-olive{color:olive!important}.wysiwyg-color-navy{color:navy!important}\n.wysiwyg-color-blue{color:#00f!important}.wysiwyg-color-orange{color:orange!important}.wysiwyg-text-align-left{text-align:left!important}\n.wysiwyg-text-align-center{text-align:center!important}.wysiwyg-text-align-right{text-align:right!important}';",ko.bindingHandlers.wysihtml5={init:function(e,t,s){var i,n,o,r,a,c,l;return i=$(e),r=ko.utils.unwrapObservable(t()),n=function(){var e,t,s;return e=i.nextAll(".wysihtml5-sandbox").contents().find("head")[0],(s=document.createElement("style")).type="text/css",t=window.Handshake.Helpers.wysiwygCSS,s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t)),e.appendChild(s)},a=function(){var e;return $(i.data("wysihtml5").editor.composer.editableArea).height(r.height),e=$(i.data("wysihtml5").editor.composer.editableArea),$(".wysihtml5-sandbox").contents().find("body").bind("change focus blur",function(){return e.height(r.height)})},o={load:function(){if(n(),null!=(null!=r?r.height:void 0)&&a(),null!=(null!=r?r.on_load:void 0))return r.on_load()},blur:function(){return i.change()}},l={stylesheets:[],toolbar:{"font-styles":!0,emphasis:!0,blockquote:!0,text_align_buttons:!0,lists:!0,color:!0,link:!0,html:!1,image:!0,insert_variable_dropdown:!1,fa:!0},parserRules:Handshake.wysihtml5ParserRules,events:o},null!=(null!=r?r.wysihtml5_options:void 0)?(_.defaults(r.wysihtml5_options.toolbar,l.toolbar),_.defaults(r.wysihtml5_options,l),i.wysihtml5(r.wysihtml5_options)):i.wysihtml5(l),null!=(c=s.get("textInput"))&&c.subscribe(function(){var e;if(!i.is(":focus"))return null!=(e=i.data("wysihtml5"))?e.editor.setValue(c()):void 0}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){return i.data("wysihtml5").editor.fire("destroy:composer")})}},ko.bindingHandlers.width={update:function(e,t,s){var i,n;if(i=s(),ko.toJS(i),n=$(e).addClass("invisible").removeClass("hidden").outerWidth(!0),t()(n),$(e).removeClass("invisible"),i.css)return i.css.notifySubscribers()}},ko.bindingHandlers.foreachKeyValue={transformObject:function(e){var t,s,i;s=[];for(t in e)i=e[t],s.push({key:t,value:i});return s},init:function(e,t,s,i,n){var o,r;return r=ko.utils.unwrapObservable(t()),o=ko.bindingHandlers.foreachKeyValue.transformObject(r),ko.applyBindingsToNode(e,{foreach:o},n),{controlsDescendantBindings:!0}}},ko.bindingHandlers.sortBy={init:function(e,t,s,i){var n,o,r,a,c,l,u,h,_;return a=(l=$(e)).children().detach(),(c=$("<button></button>")).addClass("sortable__item"),c.text(l.text()),u=ko.unwrap(t()),s.get("ignoreCase")&&(u+=".case_insensitive_sorting"),h='searchable.sortingInfo.isSortColumn("'+u+'", "asc")',_='searchable.sortingInfo.isSortColumn("'+u+'", "desc")',o=$("<span class='fa fa--comfy fa-caret-down' data-bind='visible: "+h+"'></span>"),r=$("<span class='fa fa--comfy fa-caret-up' data-bind='visible: "+_+"'></span>"),n=$('<div class="sortable-icons"\n     data-bind=\'invisible: '+h+" || "+_+'\'>\n  <i class="fa fa-caret-up"></i>\n  <i class="fa fa-caret-down"></i>\n</div>'),c.append(a),c.append(r),c.append(o),c.append(n),c.click(function(e){return e.preventDefault(),i.searchable.setSortOption({field:u,sort_direction:"asc"})}),l.html(c)}},ko.bindingHandlers.bulk_action_checkbox={init:function(e,t,s,i,n){var o,r,a;return r=ko.utils.unwrapObservable(t()),a=n.$parent.searchable,o={checked:ko.computed(function(){return a.item_checked(r)}),click:function(){return a.toggle_checkbox(r),!0}},ko.applyBindingsToNode(e,o,n)}},ko.bindingHandlers.validated_value={init:function(e,t,s,i,n){var o,r,a,c,l;if(c=t(),l=s.get("valueUpdate"),!s.get("checked")&&!(null!=(r=s.get("select2_ajax"))&&r.full_data||null!=(a=s.get("select2_static"))&&a.full_data))return o={value:c},l&&_.extend(o,{valueUpdate:l}),ko.applyBindingsToNode(e,o,n)},update:function(e,t,s){var i,n,o,r,a,c,l,u,h,d,p;if(i=$(e),n=i.parents(".form-group"),p=t(),a=i.attr("id"),o=s(),d=o.validation_target?o.validation_target:p,p&&d)if(r=function(){if(n.addClass("has-error"),i.attr("aria-invalid","true"),!o.hasOwnProperty("hide_errors"))return i.attr("aria-describedby",a+"-error"),h()},u=function(){return n.removeClass("has-error"),n.find(".help-block.errors").remove(),i.removeAttr("aria-invalid"),i.removeAttr("aria-describedby")},h=function(){var e,t;return t=c(p.error_prefix,_.first(d.errors())),e=i.closest(".input-group").length>0?i.closest(".input-group"):i,$('<div class="help-block errors" id="'+a+'-error"></div>').append($('<div class="error"><i class="fa danger fa-exclamation-triangle" title="Error"></i> '+t+"</div>")).insertAfter(e)},c=function(e,t){return capitalizeString(e.split("_").join(" "))+" "+t+"."},n.length){if(null!=d.valid){if(d.valid)return u(),(null!=(l=d.errors())?l.length:void 0)?r():void 0;"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"ValidatingUnsupportedElement",errorMessage:"Encountered validated_value binding for a value which does not support validations. Please add validations or make this binding a normal 'value' binding.",metaData:{element:e}})}}else"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"ValidatingUnwrappedElement",errorMessage:"Trying to use validated_value binding on an element that isn't wrapped in a <div class='form-group'>.",metaData:{element:e}})}},ko.bindingHandlers.inline_svg={init:function(e,t){var s,i,n;if(s=$(e),i=s.attr("class"),n=t())return s.load(n,function(e){var t;if(t=_($(e)).find(function(e){return e instanceof SVGElement}))return $(t).replaceAll(s).addClass(i);console.error("Could not find SVG element in response.",e)});s.remove()}},ko.bindingHandlers.numeric={update:function(e,t,s){var i,n,o,r;if(r=s().value||s().validated_value,o=t(),r){if(n=String(r()).replace(/[^0-9.]/g,""),i=parseFloat(n),!isNaN(i)&&i!==r())return i=i.toExponential()===i.toString()?n:i.toFixed(o),$(e).val(i),setTimeout(function(){return $(e).change()},0)}else console.error("The numeric binding must be used in tandem with the value or validated_value binding.")}},ko.bindingHandlers.iframe_content={update:function(e,t){var s,i;return i=ko.utils.unwrapObservable(t()),(s=e.contentWindow.document).open(),s.write(i),s.close()}},e=function(e){return""===$(e).children().first().val()},ko.bindingHandlers.include_blank={init:function(t,s){var i;return(i=ko.utils.unwrapObservable(s()))&&!e(t)?$(t).prepend("<option value></option>"):!i&&e(t)?$(t).children().first().remove():void 0},update:function(t,s){var i;return(i=ko.utils.unwrapObservable(s()))&&!e(t)?($(t).prepend("<option value></option>"),$(t).children().first().attr("selected","selected"),$(t).change()):!i&&e(t)?($(t).children().first().remove(),$(t).children().first().attr("selected","selected"),$(t).change()):void 0}},ko.bindingHandlers.scroll_shadow={init:function(e){var t,s,i;return(t=$(e)).addClass("scroll-shadow"),s=function(){var s,i;return i=e.scrollTop,s=e.scrollHeight-e.clientHeight-i,i>0?t.addClass("can-scroll-up"):t.removeClass("can-scroll-up"),s>0?t.addClass("can-scroll-down"):t.removeClass("can-scroll-down")},t.scroll(s),i=null,t.is(":hidden")?i=setInterval(function(){if(t.is(":visible"))return clearInterval(i),s()},100):s(),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){if(t.off("scroll"),i)return clearInterval(i)})},update:function(e,t){var s;if(s=t(),_(s).has("update_on_changed"))return $(e).trigger("scroll")}},ko.bindingHandlers.click_and_drag_checkbox={init:function(e){return Handshake.ClickAndDragCheckbox.enable($(e))}},ko.bindingHandlers.radio_boolean={init:function(e,t,s,i,n){var o,r;return r=t(),o=ko.computed({read:function(){var e;return null!=(e=r())?e.toString():void 0},write:function(e){return r("true"===e||"false"!==e&&null)}}),ko.applyBindingsToNode(e,{checked:o},n)}},ko.bindingHandlers.react_component={init:function(e){return ko.utils.domNodeDisposal.addDisposeCallback(e,function(){return ReactDOM.unmountComponentAtNode(e)}),{controlsDescendantBindings:!0}},update:function(e,t){var s,i,n,o;if(o=ko.unwrap(t()),s=Handshake.react_components[o.name],i=ko.utils.unwrapFunction(o.props),o.remount_on_update&&ReactDOM.unmountComponentAtNode(e),s)return n=React.createElement(s,i),ReactDOM.render(n,e);console.error(o.name+" is not defined on Handshake.react_components.")}},ko.utils.unwrapFunction=function(e){return"function"!=typeof e?e:ko.utils.unwrapFunction(e())},ko.observableArray.fn.trackHasItems=function(){var e,t,s,i,n;return this.hasItems=ko.observable(this.length>0),this.finishedLoading=ko.observable(this.length>0),this.isEmpty=ko.computed((e=this,function(){return!e.hasItems()&&e.finishedLoading()})),this.isLoading=ko.computed((t=this,function(){return!t.hasItems()&&!t.finishedLoading()})),this.clear=(s=this,function(){return s([]),s.finishedLoading(!1)}),this.subscribe((i=this,function(e){if(i.hasItems(e&&e.length>0),e)return i.finishedLoading(!0)})),this.markAsFinishedLoading=(n=this,function(){return n.finishedLoading(!0)}),this}}).call(this),function(){window.is_ie9=!1,window.is_ie10=!1,window.is_ie11=!1,-1!==navigator.appVersion.indexOf("MSIE 10")?window.is_ie10=!0:-1!==navigator.userAgent.indexOf("Trident/7.0")&&(window.is_ie11=!0)}.call(this),function(){Handshake.Helpers.calendarColor=function(e){var t;return t=["#fff","#000","#000","#000","#fff","#000","#fff","#fff","#fff","#000","#000"],[["#5484ed","#a4bdfc","#46d6db","#7ae7bf","#51b749","#fbd75b","#ffb878","#ff887c","#dc2127","#dbadff","#e1e1e1"][e],t[e]]}}.call(this),function(){Handshake.ClickAndDragCheckbox=function(){function e(){}var t,s,i,n,o,r,a,c;return r=!1,i=!1,n=null,t=function(e){return e.prop("checked")},a=function(){if(!r)return $(document).mouseup(function(){return i=!1,n=null}),r=!0},o=function(e){var t;return(t=e.parent(".expanded-checkbox")).length>0?$(t[0]):e},s=function(e){var t;return(t=e.children(":checkbox")).length>0?$(t[0]):e},c=function(e){var o;if(o=s($(e.target)),i&&n!==t(o))return o.click()},e.enable=function(e){return e.mousedown(function(e){return i=!0,n=!t($(e.target))}),a(),o(e).mouseenter(c),e.mouseleave(c)},e}()}.call(this),function(){$(document).on("click",".copyable-input",function(e){return e.target.select()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.ExponentialPoll=function(){function t(t,s){this.callback=t,this.success=s,this.failure=e(this.failure,this),this.start_poll=e(this.start_poll,this),this.count=0,this.timeout=2e3}return t.prototype.start_poll=function(){if(this.count+=1,!(this.count>11))return this.count>2&&(this.timeout*=2),this.callback(this.success,this.failure)},t.prototype.failure=function(){return setTimeout(this.start_poll,this.timeout)},t}()}.call(this),function(){ko.extenders.validate=function(e,t){var s,i,n,o,r,a,c,l;return r=t.resource||{errors:ko.observable({})},c=new Handshake.Validator.Runner(t.validations),l=[],e(),e.key=ko.observable(t.name),e.error_prefix=(null!=(i=r.attributes_hash)&&null!=(n=i[t.name])?n.error_prefix:void 0)||t.name,e.pristine=ko.observable(!0),e.errors=ko.computed(function(){return!Object.keys(r.errors()).length&&e.pristine()?[]:r.errors()[e.key()]}),e.valid=ko.computed(function(){var t;return!(null!=(t=e.errors())?t.length:void 0)&&!c.errors().length}),s=function(){var t,s;if(!e.pristine())return t=r.errors(),c.errors().length?(t[e.key()]=t[e.key()]||[],t[e.key()]=t[e.key()].concat(c.errors()),l=_(l).union(c.errors())):(t[e.key()]=_(t[e.key()]).reject(function(e){return _(l).contains(e)}),(null!=(s=t[e.key()])?s.length:void 0)||delete t[e.key()],l=[]),r.errors(t)},a=function(t){var s;return s=[void 0,null,""],!!_(s).contains(e())&&_(s).contains(t)},o=function(e){var t;return(t=r.errors())[e]=[],r.errors(t)},e.validate=function(t,i){return null==i&&(i=!1),i&&o(e.key()),c.validate(t),s()},e.force_validation=function(t){return e.pristine(!1),e.validate(e(),t),e.valid()},e.subscribe(function(t){if(!e.pristine()||!a(t))return e.pristine(!1),e.validate(t)}),c.validate(e()),e},ko.extenders.computed_validation=function(e,t){return e.valid=t.valid,e.errors=t.errors,e.error_prefix=t.error_prefix,e}}.call(this),window.Handshake.FullStory={},window.Handshake.FullStory.initialize=function(){var e,t,s,i,n,o,r,a,c=window.Handshake.passed;c.fullstory_org_id&&c.use_fullstory&&(window._fs_debug=!1,window._fs_host="fullstory.com",window._fs_org=c.fullstory_org_id,window._fs_namespace="FS",e=window,t=document,s=window._fs_namespace,i="script",n="user",s in e?e.console&&e.console.log&&e.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'):((r=e[s]=function(e,t,s){r.q?r.q.push([e,t,s]):r._api(e,t,s)}).q=[],(o=t.createElement(i)).async=1,o.crossOrigin="anonymous",o.src="https://"+_fs_host+"/s/fs.js",(a=t.getElementsByTagName(i)[0]).parentNode.insertBefore(o,a),r.identify=function(e,t,s){r(n,{uid:e},s),t&&r(n,t,s)},r.setUserVars=function(e,t){r(n,e,t)},r.event=function(e,t,s){r("event",{n:e,p:t},s)},r.shutdown=function(){r("rec",!1)},r.restart=function(){r("rec",!0)},r.consent=function(e){r("consent",!arguments.length||e)},r.identifyAccount=function(e,t){o="account",(t=t||{}).acctId=e,r(o,t)},r.clearUserCookie=function(){}),window.FS.identify(c.logged_in_user_id.toString(),{displayName:c.logged_in_user_name,email:c.logged_in_user_institution_managed_email,userType_str:c.logged_in_user_type,institutionName_str:c.logged_in_user_institution_name,schoolYearName_str:c.logged_in_user_school_year_name,handshakeManaged_bool:c.current_school&&c.current_school.handshake_managed,searchTypeaheadVariation_str:c.enable_experiment_search_typeahead}),c.record_fullstory_session_to_segment&&(window._fs_ready=function(){var e=window.FS.getCurrentSessionURL();e&&window.segment_helper.trackEvent("fullstory-recording",{session_url:e})}))},window.Handshake.FullStory.initialize(),window.Handshake.in_production&&window.Handshake.passed.google_analytics_tracking_id&&window.Handshake.passed.google_analytics_tracking_id.length>0&&(!function(e,t,s,i,n,o,r){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,o=t.createElement(s),r=t.getElementsByTagName(s)[0],o.async=1,o.src=i,r.parentNode.insertBefore(o,r)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),"demo"===window.Handshake.passed.environment_name&&window.ga("require","displayfeatures"),window.ga("create",window.Handshake.passed.google_analytics_tracking_id,"auto"),"Students"===window.Handshake.passed.logged_in_user_type&&"undefined"!=typeof window.Handshake.passed.logged_in_user_institution_ga_code&&window.ga("create",window.Handshake.passed.logged_in_user_institution_ga_code,{cookieDomain:"auto",name:"schoolTracker"}),window.ga("set","dimension1",window.Handshake.passed.logged_in_user_type),window.ga("set","dimension2",window.Handshake.passed.logged_in_user_school_year_name),window.ga("set","dimension3",window.Handshake.passed.environment_name),window.ga("set","dimension4",window.Handshake.passed.logged_in_user_is_confirmed),window.ga("set","dimension5",window.Handshake.passed.logged_in_user_institution_name),window.ga("set","dimension6",window.Handshake.passed.logged_in_user_joined_active_rollouts),"undefined"!=typeof window.Handshake.passed.logged_in_user_id&&window.ga("set","userId",window.Handshake.passed.logged_in_user_global_id),$(document).on(window.PAGE_CHANGE_EVENT,function(){if(window.ga("send","pageview"),"Students"===window.Handshake.passed.logged_in_user_type&&"undefined"!=typeof window.Handshake.passed.logged_in_user_institution_ga_code&&(window.ga("schoolTracker.send","pageview"),window.Handshake.passed.should_track_ga_event)){var e=window.location.pathname.split("/"),t=e[1],s=e[2];window.ga("schoolTracker.send",t,"action",s)}})),function(){$(document).on("ready page:change",function(){return document.cookie=Handshake.passed.environment_name+"_js_on=true; path=/"})}.call(this);var userType=window.Handshake.passed.current_user_type,$buoop={required:{i:11,e:-3,f:-3,o:-3,s:10,c:-3},insecure:!0,mobile:!1,api:2020.02,url:"https://browser-update.org/update.html",newwindow:!0,test:!1,shift_page_down:!1,text:"It looks like your browser is out of date and     <a target=_blank href="+(supportLink="Employers"===userType?"https://support.joinhandshake.com/hc/en-us/articles/360042850913":"https://support.joinhandshake.com/hc/en-us/articles/360020691933")+"> <span style='text-decoration: underline;'>not fully supported</span></a>.    This may cause Handshake to work improperly.<br>    We recommend updating your browser for a better experience and improved security.    <div class='buorg-buttons'>      <a class='buorg-button'{ignore_but}>Ignore</a>      <a class='buorg-button'{up_but}>Learn How</a>    </div>"};try{document.addEventListener("DOMContentLoaded",$buo_f,!1)}catch(e){window.attachEvent("onload",$buo_f)}!function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var s=Array.prototype.slice.call(arguments);return s.unshift(t),e.push(s),e}};for(var t=0;t<e.methods.length;t++){var s=e.methods[t];e[s]=e.factory(s)}e.load=function(t,s){if("undefined"!=typeof window.Handshake.passed.js_segment_write_key&&window.Handshake.passed.js_segment_write_key){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n),e._loadOptions=s}else e._loadOptions=s},e.SNIPPET_VERSION="4.1.0",e.load(window.Handshake.passed.js_segment_write_key),e.page()}}(),$(document).on(window.PAGE_CHANGE_EVENT,function(){window.segment_helper.instrumentPage()}),function(t){function s(){return{logged_in_user_id:t.Handshake.passed.logged_in_user_id,current_user_id:t.Handshake.passed.current_user_id,feature_flags:t.Handshake.passed.current_user_feature_flags,current_session_id:t.Handshake.passed.current_session_id}}function i(e){var t={};return $.each(e[0].attributes,function(e,s){-1==$.inArray(s.name,u)&&(t[s.name]=s.value)}),t}function n(e){var s=$(e.currentTarget);return{id:e.id,tag:s.get(0).tagName.toLowerCase(),page:t.location.pathname,section:s.closest("*[data-section]").data("section"),attributes:i(s),selectors:l.getSelectors(s.get(0))}}function o(){var e={};t.analytics.page({properties:s(),options:e});var i={url:t.location.href,title:document.title,page:t.location.pathname},n=$.extend(s(),i);t.analytics.track("$view",n,e)}function r(){$(document).on("click","a, button, input[type=submit]",function(e){var i=$(e.currentTarget),o=$.extend(s(),n(e));o.text="input"==o.tag?i.val():$.trim(i.text().replace(/[\s\r\n]+/g," ")),t.analytics.track("$click",o,{})})}function a(){$(document).on("submit","form",function(e){var i=$.extend(s(),n(e));t.analytics.track("$submit",i,{})})}function c(){t.analytics.ready(function(){$.post("/sessions/anonymous_id",{anonymous_id:t.analytics.user().anonymousId()})})}var l=t.segment_helper||{},u=["data-bind","target"];l.getSelectors=function(e){for(var t=0,s=[];e&&1==e.nodeType&&t<10&&("HTML"!==e.nodeName&&"BODY"!==e.nodeName);e=e.parentNode){var i="";i+=e.nodeName.toLowerCase(),e.hasAttribute("id")&&(i+="#"+e.getAttribute("id")),e.hasAttribute("class")&&(i+="."+e.getAttribute("class")),s.unshift(i),t++}return s.length?s.join(" "):null},l.trackEvent=function(i,n,o){try{(o=o||{}).integrations=o.integrations||{HubSpot:!1},o=$.extend({},o);var r=$.extend(s(),n);t.analytics.track(i,r,o)}catch(e){e instanceof ReferenceError&&(t.Handshake.passed.in_production?t.bugsnagClient.notify(e.message+" for segment.trackEvent. Please check if env variables are set properly."):t.console.error(e.message+" for segment.trackEvent. Please check if env variables are set properly."))}},l.identify=function(e){(e=e||{}).integrations=e.integrations||{HubSpot:!1},e=$.extend({},e);var s=t.Handshake.passed.logged_in_user_id,i={email:t.Handshake.passed.logged_in_user_institution_managed_email};s&&t.analytics.identify(s,i,e)},l.instrumentPage=function(){this.identify(),o(),t.segmentDocumentEventTrackersInitialized||(r(),a(),c(),t.segmentDocumentEventTrackersInitialized=!0)},t.segment_helper=l}(window),UNSAFE__HandshakeI18n.prototype={loadDictionary:function(e,t){this.dictionary=e,this.currencySymbol=t},t:function(e){var t=e.split("."),s=t.shift(),i=this.dictionary[s];return"string"==typeof i?i:this.t(t.join("."))}},window.UNSAFE__i18n=new UNSAFE__HandshakeI18n(Handshake.passed.unsafe_dictionary,Handshake.passed.currency_symbol),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Validator={},Handshake.Validator.Base=function(){function e(){this.reset_errors()}return e.prototype.validate=function(e){return null==e&&(e=this.options),this.reset_errors(),_(e).every((t=this,function(e,s){return"function"!=typeof t[s]||t[s]()}));var t},e.prototype.set_error=function(e){return this.error_messages.push(e),!1},e.prototype.reset_errors=function(){return this.error_messages=[]},e}(),Handshake.Validator.PresenceValidator=function(t){function s(e,t){this.value=e,this.options=t,this.validate_if=this.options.validate_if}return e(s,t),s.prototype.validate=function(){return this.options={presence:!0},s.__super__.validate.call(this)},s.prototype.presence=function(){return!(!_.isFunction(this.validate_if)||this.validate_if())||(!!("string"==typeof this.value?!this.value.match(/^\s*$/):this.value||!1===this.value||0===this.value)||this.set_error("can't be blank"))},s}(Handshake.Validator.Base),Handshake.Validator.LengthValidator=function(t){function s(e,t){this.value=e,this.options=t}return e(s,t),s.prototype.value_is_blank=function(){return""===this.value||void 0===this.value||null===this.value},s.prototype.maximum=function(){var e;return!!this.value_is_blank()||((null!=(e=this.value)?e.length:void 0)<=this.options.maximum||this.set_error("must be less than "+this.options.maximum))},s.prototype.minimum=function(){var e;return!!this.value_is_blank()||((null!=(e=this.value)?e.length:void 0)>=this.options.minimum||this.set_error("must be more than "+this.options.minimum))},s}(Handshake.Validator.Base),Handshake.Validator.NumericalityValidator=function(t){function s(e,t){this.value=e,this.options=t}return e(s,t),s.prototype.only_integer=function(){return!this.value||(!isNaN(this.value)||this.set_error("must be a valid integer"))},s}(Handshake.Validator.Base),Handshake.Validator.DateValidator=function(t){function i(e,t){this.value=e,this.options=t,this.on_or_before=s(this.on_or_before,this)}return e(i,t),i.prototype.validate=function(){return!0===this.options&&(this.options={date:!0}),i.__super__.validate.call(this)},i.prototype.date=function(){return!!moment(this.value).isValid()||this.set_error("must be a valid date")},i.prototype.on_or_before=function(){var e;return!!((e=moment(this.value)).isValid()&&e<=moment(this.options.on_or_before))||this.set_error("must be on or before "+moment(this.options.on_or_before).format("YYYY-MM-DD"))},i}(Handshake.Validator.Base),Handshake.Validator.FormatValidator=function(t){function s(e,t){this.value=e,this.options=t}return e(s,t),s.prototype.validate=function(){switch(this.options){case"email":this.options={email:!0}}return s.__super__.validate.call(this)},s.prototype.email=function(){var e;return e=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.[a-z]{2,64}|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,!!this.test(e)||this.set_error("must be a valid email address")},s.prototype["with"]=function(){return!!this.test(this.options["with"])||this.set_error("is not a valid format")},s.prototype.test=function(e){return e.test(this.value)},s}(Handshake.Validator.Base),Handshake.Validator.Runner=function(){function e(e){this.validations=e,this.validate=s(this.validate,this),this.errors=ko.observableArray()}return e.prototype.validate=function(e){return this.errors([]),_(this.validations).every((t=this,function(s,i){var n,o;o=null,n=t.validator_name(i);try{o=new Handshake.Validator[n](e,s)}catch(r){return void("undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"NoValidatorError",errorMessage:"No validator definition for "+n+"."}))}return!!o.validate()||(t.errors.push(o.error_messages),!1)}));var t},e.prototype.validator_name=function(e){return capitalizeString(e)+"Validator"},e}()}.call(this),function(){Handshake.wysihtml5ParserRules={classes:{"wysiwyg-clear-both":1,"wysiwyg-clear-left":1,"wysiwyg-clear-right":1,"wysiwyg-color-aqua":1,"wysiwyg-color-black":1,"wysiwyg-color-blue":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-gray":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-maroon":1,"wysiwyg-color-navy":1,"wysiwyg-color-olive":1,"wysiwyg-color-purple":1,"wysiwyg-color-red":1,"wysiwyg-color-silver":1,"wysiwyg-color-teal":1,"wysiwyg-color-white":1,"wysiwyg-color-yellow":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1,"wysiwyg-font-size-large":1,"wysiwyg-font-size-larger":1,"wysiwyg-font-size-medium":1,"wysiwyg-font-size-small":1,"wysiwyg-font-size-smaller":1,"wysiwyg-font-size-x-large":1,"wysiwyg-font-size-x-small":1,"wysiwyg-font-size-xx-large":1,"wysiwyg-font-size-xx-small":1,"wysiwyg-text-align-center":1,"wysiwyg-text-align-justify":1,"wysiwyg-text-align-left":1,"wysiwyg-text-align-right":1,"wysiwyg-color-orange":1},tags:{tr:{add_class:{align:"align_text"}},strike:{remove:1},form:{rename_tag:"div"},rt:{rename_tag:"span"},code:{},acronym:{rename_tag:"span"},br:{add_class:{clear:"clear_br"}},details:{rename_tag:"div"},h4:{add_class:{align:"align_text"}},em:{},title:{remove:1},multicol:{rename_tag:"div"},figure:{rename_tag:"div"},xmp:{rename_tag:"span"},small:{rename_tag:"span",set_class:"wysiwyg-font-size-smaller"},area:{remove:1},time:{rename_tag:"span"},dir:{rename_tag:"ul"},bdi:{rename_tag:"span"},command:{remove:1},ul:{},progress:{rename_tag:"span"},dfn:{rename_tag:"span"},iframe:{remove:1},figcaption:{rename_tag:"div"},a:{check_attributes:{target:"any",href:"url"},set_attributes:{rel:"nofollow"}},img:{check_attributes:{width:"dimension",alt:"alt",src:"url",height:"dimension"},add_class:{align:"align_img"}},rb:{rename_tag:"span"},footer:{rename_tag:"div"},noframes:{remove:1},abbr:{rename_tag:"span"},u:{},bgsound:{remove:1},address:{rename_tag:"div"},basefont:{remove:1},nav:{rename_tag:"div"},h1:{add_class:{align:"align_text"}},head:{remove:1},tbody:{add_class:{align:"align_text"}},dd:{rename_tag:"div"},s:{rename_tag:"span"},li:{},td:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},object:{remove:1},div:{add_class:{align:"align_text"}},option:{rename_tag:"span"},select:{rename_tag:"span"},i:{},track:{remove:1},wbr:{remove:1},fieldset:{rename_tag:"div"},big:{rename_tag:"span",set_class:"wysiwyg-font-size-larger"},button:{rename_tag:"span"},noscript:{remove:1},svg:{remove:1},input:{remove:1},table:{},keygen:{remove:1},h5:{add_class:{align:"align_text"}},meta:{remove:1},map:{rename_tag:"div"},isindex:{remove:1},mark:{rename_tag:"span"},caption:{add_class:{align:"align_text"}},tfoot:{add_class:{align:"align_text"}},base:{remove:1},video:{remove:1},strong:{},canvas:{remove:1},output:{rename_tag:"span"},marquee:{rename_tag:"span"},b:{},q:{check_attributes:{cite:"url"}},applet:{remove:1},span:{},rp:{rename_tag:"span"},spacer:{remove:1},source:{remove:1},aside:{rename_tag:"div"},frame:{remove:1},section:{rename_tag:"div"},body:{rename_tag:"div"},ol:{},nobr:{rename_tag:"span"},html:{rename_tag:"div"},summary:{rename_tag:"span"},"var":{rename_tag:"span"},del:{remove:1},blockquote:{check_attributes:{cite:"url"}},style:{remove:1},device:{remove:1},meter:{rename_tag:"span"},h3:{add_class:{align:"align_text"}},textarea:{rename_tag:"span"},embed:{remove:1},hgroup:{rename_tag:"div"},font:{rename_tag:"span",add_class:{size:"size_font"}},tt:{rename_tag:"span"},noembed:{remove:1},thead:{add_class:{align:"align_text"}},blink:{rename_tag:"span"},plaintext:{rename_tag:"span"},xml:{remove:1},h6:{add_class:{align:"align_text"}},param:{remove:1},th:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},legend:{rename_tag:"span"},hr:{},label:{rename_tag:"span"},dl:{rename_tag:"div"},kbd:{rename_tag:"span"},listing:{rename_tag:"div"},dt:{rename_tag:"span"},nextid:{remove:1},pre:{},center:{rename_tag:"div",set_class:"wysiwyg-text-align-center"},audio:{remove:1},datalist:{rename_tag:"span"},samp:{rename_tag:"span"},col:{remove:1},article:{rename_tag:"div"},cite:{},link:{remove:1},script:{remove:1},bdo:{rename_tag:"span"},menu:{rename_tag:"ul"},colgroup:{remove:1},ruby:{rename_tag:"span"},h2:{add_class:{align:"align_text"}},ins:{rename_tag:"span"},p:{add_class:{align:"align_text"}},sub:{},comment:{remove:1},frameset:{remove:1},optgroup:{rename_tag:"span"},header:{rename_tag:"div"},sup:{}}}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.FirstDestinationSurveyPages={},Handshake.FirstDestinationSurveyPage=function(){function t(t){this.props=t,this.still_looking_redirect=e(this.still_looking_redirect,this),this.subscriptions=[],this.vm={response:this.props.response,job_offer_index:this.props.job_offer_index,is_invalid:this.props.is_invalid,survey:this.props.survey,save_and_redirect:this.props.save_and_redirect,set_job_offer_index:this.props.set_job_offer_index,still_looking_redirect:this.still_looking_redirect}}return t.prototype.still_looking_redirect=function(){var e,t,s;return e=_(this.props.first_destination_response_types()).findWhere({id:this.props.response.first_destination_response_type_id()}),t=_(this.props.first_destination_response_types()).findWhere({name:"Still Looking"}),this.vm.response.first_destination_response_type_id(t.id),$.getJSON(this.props.route_for_first_destination_resource("seeking_options"),(s=this,function(t){var i,n,o;return o="Continuing Education"===(null!=e?e.name:void 0)?"Continuing Education":"Employment",n=_(t.seeking_options).findWhere({name:o}),s.vm.response.seeking_option_id(n.id),s.vm.response.question_history([Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType.slug]),i=s.vm.survey.survey_id()?Handshake.FirstDestinationSurveyPages.TakeSurvey.slug:"Continuing Education"!==o&&s.props.user_logged_in?Handshake.FirstDestinationSurveyPages.Postings.slug:Handshake.FirstDestinationSurveyPages.Results.slug,s.props.start_loading(),s.vm.save_and_redirect(i,!1)}))},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.AlreadyEmployed=function(t){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.props.set_graph(null),this.vm.options=[{label:"Yes",value:!0},{label:"No",value:!1}],this.props.finish_loading()}return e(s,t),s.slug="already-employed",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.ChangedJobAspects=function(t){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.vm.response.changed_company(!1),this.vm.response.changed_level(!1),this.vm.response.changed_function(!1),this.vm.response.changed_industry(!1),this.vm.response.changed_geography(!1),this.props.set_graph(null),this.props.finish_loading()}return e(s,t),s.slug="changed-job-aspects",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.FacilitationType=function(t){function s(e){this.props=e,
s.__super__.constructor.call(this,this.props),"part_time_mba"===this.props.survey.survey_type()?(this.vm.school_facilitation_types=ko.observableArray([{id:"school_facilitated_alumni_network",name:UNSAFE__i18n.t("school_capitalized")+" Related / Alumni Network"},{id:"school_facilitated_recruiting",name:UNSAFE__i18n.t("school_capitalized")+" Posting / Recruiting Activity"}]),this.vm.graduate_facilitation_types=ko.observableArray([{id:"graduate_facilitated_employer",name:"Current / Former Employer"},{id:"graduate_facilitated_headhunter",name:"Executive Search Firm/Headhunter"},{id:"graduate_facilitated_own_network",name:"Graduate\u2019s Own Network"},{id:"graduate_facilitated_external_job_posting",name:"External Job Posting"},{id:"graduate_facilitated_other",name:"Other"}])):(this.vm.school_facilitation_types=ko.observableArray([{id:"school_facilitated_conversion_of_internship",name:"Conversion of Internship"},{id:"school_facilitated_scheduled_interviews",name:"Scheduled Interview"},{id:"school_facilitated_school_career_center_job_posting",name:"Career Center Job Posting"},{id:"school_facilitated_career_center_activity",name:"Career Center Activity"},{id:"school_facilitated_network",name:UNSAFE__i18n.t("school_capitalized")+" Network / Resources"}]),this.vm.graduate_facilitation_types=ko.observableArray([{id:"graduate_facilitated_conversion_of_internship",name:"Conversion of Internship"},{id:"graduate_facilitated_personal_contact",name:"Personal Contact"},{id:"graduate_facilitated_online_posting",name:"Online Posting"},{id:"graduate_facilitated_other",name:"Other"}])),this.props.set_graph(null),this.props.finish_loading()}return e(s,t),s.slug="facilitation-type",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType=function(s){function i(t){var s;this.props=t,this.decorate_response_types=e(this.decorate_response_types,this),this.filtered_response_types=e(this.filtered_response_types,this),i.__super__.constructor.call(this,this.props),this.vm.first_destination_response_types=this.decorate_response_types(this.filtered_response_types(this.props.first_destination_response_types)),this.vm.first_destination_response_type_id=ko.observable(this.vm.response.first_destination_response_type_id()),this.props.set_graph("response_types"),this.subscriptions.push(this.vm.first_destination_response_type_id.subscribe((s=this,function(e){return s.vm.response.is_fellowship("Fellowship"===e),"Fellowship"===e?s.vm.response.first_destination_response_type_id(null):s.vm.response.first_destination_response_type_id(e)}))),this.vm.response.is_fellowship()&&this.vm.first_destination_response_type_id("Fellowship"),this.props.finish_loading()}return t(i,s),i.slug="type",i.prototype.filtered_response_types=function(e){return"full_time_mba"===this.props.survey.survey_type()||"specialty_masters"===this.props.survey.survey_type()?_(e()).filter(function(e){return-1!==["Volunteering","Continuing Education","Military","Company Sponsored or Already Employed","Starting a New Business as an Owner/Founder","Postponing Job Search","Not Seeking for Other Reasons"].indexOf(e.name)}):"part_time_mba"===this.props.survey.survey_type()?_(e()).filter(function(e){return-1!==["Volunteering","Continuing Education","Military","Postponing Job Search","Not Seeking for Other Reasons"].indexOf(e.name)}):_(e()).filter(function(e){return-1!==["Working","Volunteering","Continuing Education","Military","Fellowship","Still Looking","Not Seeking"].indexOf(e.name)})},i.prototype.decorate_response_types=function(e){return _(e).each((t=this,function(e){if("Not Seeking for Other Reasons"===e.name)return e.input_value=t.vm.response.not_seeking_option_name}));var t},i}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferCompensation=function(s){function i(t){var s,n,o,r,a,c,l,u,h;this.props=t,this.setup_offer_date_validations=e(this.setup_offer_date_validations,this),this.setup_salary_information_validations=e(this.setup_salary_information_validations,this),this.clear_salary=e(this.clear_salary,this),this.show_compensation_modal=e(this.show_compensation_modal,this),i.__super__.constructor.call(this,this.props),this.vm.job_offer=this.vm.response.first_destination_response_job_offers()[this.vm.job_offer_index()],this.vm.survey.salary_information_required()&&"accepted"===this.vm.job_offer.status()&&this.setup_salary_information_validations(this.vm.job_offer),"accepted"===this.vm.job_offer.status()&&this.setup_offer_date_validations(this.vm.job_offer),this.props.format_dates(),this.vm.pay_schedules=ko.observableArray(),null!==this.vm.job_offer.end_date()?(this.has_end_date=ko.observable("yes"),this.show_end_date=ko.observable(!0)):(this.has_end_date=ko.observable("no"),this.show_end_date=ko.observable(!1)),this.pay_schedule_name=ko.computed((n=this,function(){if(n.vm.pay_schedules().length&&n.vm.job_offer.pay_schedule_id())return _(n.vm.pay_schedules()).findWhere({id:n.vm.job_offer.pay_schedule_id()}).name})),s=ko.computed((o=this,function(){if(o.pay_schedule_name()&&o.vm.job_offer.compensation_salary())switch(o.pay_schedule_name()){case"Hourly Wage":return 40*o.vm.job_offer.compensation_salary()*52;case"Monthly Stipend":return 12*o.vm.job_offer.compensation_salary();default:return o.vm.response.compensation_salary()}})),this.props.set_graph(null),$.getJSON(this.props.route_for_first_destination_resource("pay_schedules"),(r=this,function(e){return r.vm.pay_schedules(e.pay_schedules),r.props.finish_loading()})),this.salary_is_zero=ko.computed((a=this,function(){return 0===parseFloat(a.vm.job_offer.compensation_salary())})),this.button_text=ko.computed((c=this,function(){return c.salary_is_zero()?"Ok":"No"})),this.show_second_button=ko.computed((l=this,function(){return!l.salary_is_zero()})),this.warning_text=ko.computed((u=this,function(){var e,t;if(t=Handshake.Helpers.numberWithCommas(parseFloat(u.vm.job_offer.compensation_salary()).toFixed(2)),u.salary_is_zero())return"Salary must be greater than $"+t;switch(e=Handshake.Helpers.numberWithCommas(parseFloat(s()).toFixed(2)),u.pay_schedule_name()){case"Monthly Stipend":return"You entered a monthly stipend of $"+t+", which is a yearly total of $"+e+" assuming 12 months worked in a year. Is this monthly stipend correct?";case"Hourly Wage":return"You entered a hourly wage of $"+t+", which is a yearly total of $"+e+" assuming 40 hours per week and 52 weeks per year. Is this hourly wage correct?";case"Annual Salary":return"You entered an annual salary of $"+t+". Is this correct?"}})),this.pay_schedule_name.subscribe(this.show_compensation_modal),this.handle_end_date=(h=this,function(){return h.show_end_date("yes"===h.has_end_date()),"no"===h.has_end_date()?(h.vm.job_offer.end_date(null),h.vm.job_offer.markAsChanged("end_date")):(h.vm.job_offer.end_date(moment().endOf("day")),h.vm.job_offer.markAsChanged("end_date")),!0})}return t(i,s),i.slug="job-offer-compensation",i.prototype.show_compensation_modal=function(){var e,t;if(!this.vm.job_offer.compensation_salary())return!1;switch(e=this.vm.job_offer.compensation_salary(),t=!1,this.pay_schedule_name()){case"Monthly Stipend":t=e<100||e>5e3;break;case"Hourly Wage":t=e<8||e>50;break;case"Annual Salary":t=e<5e3||e>2e5;break;default:t=!1}return t?$("#compensation-warning-modal").modal("show"):void 0},i.prototype.clear_salary=function(){return this.vm.job_offer.compensation_salary(""),$("#compensation-warning-modal").modal("hide")},i.prototype.setup_salary_information_validations=function(e){return e.compensation_salary.extend({validate:{name:"compensation_salary",resource:e,validations:{presence:!0,numericality:{only_integer:!0}}}}),e.pay_schedule_id.extend({validate:{name:"pay_schedule_id",resource:e,validations:{presence:!0}}})},i.prototype.setup_offer_date_validations=function(e){return e.accept_date.extend({validate:{name:"accept_date",resource:e,validations:{date:{on_or_before:moment().endOf("day")},presence:!0}}}),e.start_date.extend({validate:{name:"start_date",resource:e,validations:{date:!0,presence:!0}}})},i}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferEmployer=function(s){function i(t){var s,n,o;this.props=t,this.set_employer_information=e(this.set_employer_information,this),this.set_employer_name=e(this.set_employer_name,this),i.__super__.constructor.call(this,this.props),this.vm.job_offer=this.vm.response.first_destination_response_job_offers()[this.vm.job_offer_index()],this.vm.set_employer_name=this.set_employer_name,this.vm.set_employer_information=this.set_employer_information,this.vm.show_employer_typeahead=ko.observable(this.vm.job_offer.employer_name()&&!this.vm.job_offer.employer_id()),this.vm.employer_industry_select2_options={url:this.props.route_for_first_destination_resource("industries"),placeholder:"Employer Industry",full_data:(n=this,function(e){return e?(n.vm.job_offer.industry_id(e.id),n.vm.job_offer.industry_name(e.name)):{id:n.vm.job_offer.industry_id(),name:n.vm.job_offer.industry_name()}})},this.vm.employer_typeahead_options={path:this.props.route_for_first_destination_resource("employers"),dataKey:"results",onChange:this.set_employer_information},this.vm.employer_select2_options={placeholder:"Select an employer",resultFormatFunction:Handshake.Helpers.logoFormatSelection,url:this.props.route_for_first_destination_resource("employers"),full_data:(o=this,function(e){return e?o.set_employer_information(e):{id:o.vm.job_offer.employer_id(),name:o.vm.job_offer.employer_name()}})},s={location:this.vm.job_offer.location,object_type:"job",place_types:["(cities)"],placeholder:"Select a city",disable_custom_input:!0},this.addLocationView=new Handshake.Locations.AddLocationView(s),this.props.finish_loading()}return t(i,s),i.slug="job-offer-employer",i.prototype.set_employer_name=function(e){return this.vm.job_offer.employer_name(e.value)},i.prototype.set_employer_information=function(e){return this.vm.job_offer.employer_name(e.name),this.vm.job_offer.employer_id(e.id)},i}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferEmploymentType=function(s){function i(t){var s,n;this.props=t,this.process_employment_types=e(this.process_employment_types,this),i.__super__.constructor.call(this,this.props),this.vm.job_offer=this.vm.response.first_destination_response_job_offers()[this.vm.job_offer_index()],this.vm.employment_types=ko.observableArray(),this.props.set_graph(null),$.getJSON(this.props.route_for_first_destination_resource("employment_types"),(s=this,function(e){var t,i;return i=_(e.employment_types).filter(function(e){return-1!==["Full-Time","Part-Time"].indexOf(e.name)}),t=s.process_employment_types(i),s.vm.employment_types(t),s.props.finish_loading()})),this.subscriptions.push(this.vm.job_offer.employment_type_id.subscribe((n=this,function(e){var t;if(e)return t=_(n.vm.employment_types()).findWhere({id:e}),n.vm.job_offer.employment_type_name(t.name)})))}return t(i,s),i.slug="job-offer-employment-type",i.prototype.process_employment_types=function(e){return _(e).map((t=this,function(e){var s;return e.icon_url=null!=(s=_(t.props.employment_type_icons).findWhere({name:e.name}))?s.icon_url:void 0,"specialty_masters"===t.props.survey.survey_type()&&(e.display_name=e.display_name.replace("30","20")),e}));var t},i}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferFacilitationType=function(t){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.vm.job_offer=this.vm.response.first_destination_response_job_offers()[this.vm.job_offer_index()],this.vm.school_facilitation_types=ko.observableArray([{id:"school_facilitated_conversion_of_internship",name:"Conversion of Internship"},{id:"school_facilitated_scheduled_interviews",name:"Scheduled Interview"},{id:"school_facilitated_school_career_center_job_posting",name:"Career Center Job Posting"},{id:"school_facilitated_career_center_activity",name:"Career Center Activity"},{id:"school_facilitated_network",name:UNSAFE__i18n.t("school_capitalized")+" Network / Resources"},{id:"school_facilitated_other",name:"Other "+UNSAFE__i18n.t("school_capitalized")+"-Facilitated Source"}]),this.vm.graduate_facilitation_types=ko.observableArray([{id:"graduate_facilitated_conversion_of_internship",name:"Conversion of Internship"},{id:"graduate_facilitated_personal_contact",name:"Personal Contact"},{id:"graduate_facilitated_online_posting",name:"Online Posting"},{id:"graduate_facilitated_other",name:"Other Graduate-Facilitated Source"}]),this.props.set_graph(null),this.props.finish_loading()}return e(s,t),s.slug="job-offer-facilitation-type",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferInformation=function(s){function i(t){this.props=t,this.set_job_position_name=e(this.set_job_position_name,this),i.__super__.constructor.call(this,this.props),this.vm.job_offer=this.vm.response.first_destination_response_job_offers()[this.vm.job_offer_index()],this.vm.job_position_typeahead_options={path:this.props.route_for_first_destination_resource("job_roles"),dataKey:"job_roles",onChange:this.set_job_position_name},this.vm.employed_during_education_options=[{value:!0,display:"Yes"},{value:!1,display:"No"}],this.vm.is_internship_options=[{value:!0,display:"Yes"},{value:!1,display:"No"}],this.vm.job_function_select2_options={url:this.props.route_for_first_destination_resource("job_functions"),placeholder:"Job Function",initial_value:{id:this.vm.job_offer.job_function_id(),name:this.vm.job_offer.job_function_name()}},this.props.set_graph(null),this.props.finish_loading()}return t(i,s),i.slug="job-offer-information",i.prototype.set_job_position_name=function(e){return this.vm.job_offer.job_position_name(e.name)},i}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferList=function(s){function i(t){this.props=t,this.edit_offer=e(this.edit_offer,this),this.add_offer=e(this.add_offer,this),i.__super__.constructor.call(this,this.props),this.vm.add_offer=this.add_offer,this.vm.edit_offer=this.edit_offer,this.props.set_graph(null),this.props.finish_loading()}return t(i,s),i.slug="job-offer-list",i.prototype.add_offer=function(){var e;return e=new Handshake.FirstDestinationResponses.FirstDestinationResponseJobOffer({status:"pending"}),this.vm.response.first_destination_response_job_offers.push(e),this.vm.set_job_offer_index(this.vm.response.first_destination_response_job_offers().length-1),this.vm.save_and_redirect("job-offer-status",!1)},i.prototype.edit_offer=function(e){return this.vm.set_job_offer_index(e()),this.vm.save_and_redirect("job-offer-status",!1)},i}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.JobOfferStatus=function(t){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.vm.job_offer=this.vm.response.first_destination_response_job_offers()[this.vm.job_offer_index()],this.vm.job_offer_statuses=[],this.vm.response.has_accepted_offer(this.vm.job_offer)||this.vm.job_offer_statuses.push({name:"Accepted",value:"accepted"}),this.vm.job_offer_statuses.push({name:"Rejected",value:"rejected"}),this.vm.job_offer_statuses.push({name:"Pending",value:"pending"}),this.props.set_graph(null),this.props.finish_loading()}return e(s,t),s.slug="job-offer-status",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.StaffOnly=function(t){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.vm.knowledge_source_typeahead_options={path:"/schools/"+Handshake.passed.current_user_institution_id+"/knowledge_sources"},this.props.set_graph(null),this.props.finish_loading()}return e(s,t),s.slug="staff-only",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.FirstDestinationSurveyPages.StatusAtGraduation=function(t){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.vm.first_destination_graduation_statuses=this.props.first_destination_graduation_statuses,this.props.set_graph(null),this.props.finish_loading()}return e(s,t),s.slug="status-at-graduation",s}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.AlmaMaters={},Handshake.AlmaMaters.AlmaMater=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({user_id:{send:!0},graduation_year:{send:!0},continuing_education_school_id:{},continuing_education_school_name:{send:!0}}),this.is_custom_school=ko.observable(null===this.continuing_education_school_id()&&null!==this.continuing_education_school_name())}return t(i,s),i.type="AlmaMater",i.underscore="alma_mater",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Analytics={},Handshake.LookerKeepalive=function(){function t(t){this.looker_sso_refresh=e(this.looker_sso_refresh,this),this.unmount=e(this.unmount,this),this.looker_keepalive_src=ko.observable(),this.looker_sso_refresh_interval=setInterval(this.looker_sso_refresh,t/2*1e3)}return t.prototype.unmount=function(){return clearInterval(this.looker_sso_refresh_interval)},t.prototype.looker_sso_refresh=function(){return $.ajax("/analytics/explore_embed_url",{success:(e=this,function(t){return e.looker_keepalive_src(t.looker_embed_url)})});var e},t}(),Handshake.ExploreAnalyticsView=function(){function t(t){this.props=t,this.unmount=e(this.unmount,this),this.looker_keepalive=new Handshake.LookerKeepalive(this.props.looker_session_length_seconds),this.refresh_sso_link_href=function(e,t){var s;return s=$(t.target).data("explore-name"),$.ajax("/analytics/explore_embed_url",{data:{explore_name:s},success:function(e){return $(t.target).attr("href",e.looker_embed_url)}}),!0}}return t.prototype.unmount=function(){return this.looker_keepalive.unmount()},t}(),Handshake.ExploreEmbedAnalyticsView=function(){function t(t){var s,i;this.props=t,this.on_message_explore_state_changed=e(this.on_message_explore_state_changed,this),this.teardown_looker_iframe_url_tracking=e(this.teardown_looker_iframe_url_tracking,this),this.setup_looker_iframe_url_tracking=e(this.setup_looker_iframe_url_tracking,this),this.load_plain_explore=e(this.load_plain_explore,this),this.restore_iframe_state=e(this.restore_iframe_state,this),this.replace_state=e(this.replace_state,this),this.unmount=e(this.unmount,this),Handshake.Helpers.hideSidebar(),this.looker_keepalive=new Handshake.LookerKeepalive(this.props.looker_session_length_seconds),this.setup_looker_iframe_url_tracking(),this.explore_iframe_src=ko.observable(),s=new Clipboard("#insights-share-btn",{text:function(){return window.location.href}}),$("#insights-share-btn").tooltip({trigger:"manual",title:"Copied Shareable Link to Clipboard!",placement:"bottom"}),s.on("success",function(e){return $(e.trigger).tooltip("show"),setTimeout(function(){return $(e.trigger).tooltip("hide")},1500),ga("send","event","insights","click","share-button")}),(i=getUrlParams().insights_page)?this.restore_iframe_state(i):this.load_plain_explore(this.props.explore_name)}return t.prototype.unmount=function(){return Handshake.Helpers.showSidebar(),this.looker_keepalive.unmount(),clearInterval(this.looker_iframe_url_updates_interval),this.teardown_looker_iframe_url_tracking()},t.prototype.replace_state=function(e){var t;return t=window.location.pathname+"?insights_page="+urlsafeEncode64(e),history.replaceState(history.state,document.title,t)},t.prototype.restore_iframe_state=function(e){return $.ajax("/analytics/create_signed_embed_url",{data:{looker_requested_path:urlsafeDecode64(e)},beforeSend:Handshake.operations.xhr_progress_handler,success:(t=this,function(e){return t.explore_iframe_src(e.signed_embed_url)}),complete:function(){return Handshake.operations.remove_worker()}});var t},t.prototype.load_plain_explore=function(e){return $.ajax("/analytics/explore_embed_url",{data:{explore_name:e},beforeSend:Handshake.operations.xhr_progress_handler,success:(t=this,function(e){return t.explore_iframe_src(e.looker_embed_url)}),complete:function(){return Handshake.operations.remove_worker()}});var t},t.prototype.setup_looker_iframe_url_tracking=function(){return $(window).on("message",this.on_message_explore_state_changed)},t.prototype.teardown_looker_iframe_url_tracking=function(){return $(window).off("message",this.on_message_explore_state_changed)},t.prototype.on_message_explore_state_changed=function(e){var t;if(e.originalEvent.source===$("#insights-iframe")[0].contentWindow&&"explore:state:changed"===(t=JSON.parse(e.originalEvent.data)).type)return this.replace_state(t.explore.url.replace("/embed/",""))},t}(),Handshake.InsightsView=function(){function t(t){this.props=t,this.unmount=e(this.unmount,this),this.looker_keepalive=new Handshake.LookerKeepalive(this.props.looker_session_length_seconds)}return t.prototype.unmount=function(){return this.looker_keepalive.unmount()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Applications={},Handshake.Applications.Application=function(s){function i(t){var s,n,o,r,a,c,l,u,h,_,d,p;this.autoUpdateStatusTo=e(this.autoUpdateStatusTo,this),this.can_switch_to_status=e(this.can_switch_to_status,this),this.qualification_explanation_row=e(this.qualification_explanation_row,this),this.document_path=e(this.document_path,this),this.invited_by_path=e(this.invited_by_path,this),this.user_path=e(this.user_path,this),this.applicable_employer_path=e(this.applicable_employer_path,this),this.relevant_applicables=e(this.relevant_applicables,this),this.find_relevant_interviews=e(this.find_relevant_interviews,this),this.reset=e(this.reset,this),this.decline=e(this.decline,this),this.mark_as_alternate=e(this.mark_as_alternate,this),this.mark_as_primary=e(this.mark_as_primary,this),this.notify_applicant=e(this.notify_applicant,this),this.review=e(this.review,this),this.hire=e(this.hire,this),this.nested_route=e(this.nested_route,this),this.poll_for_fully_qualified=e(this.poll_for_fully_qualified,this),this.qualification_preference_attr=e(this.qualification_preference_attr,this),this.qualifications_tooltip_html=e(this.qualifications_tooltip_html,this),this.nice_preference_name=e(this.nice_preference_name,this),this.qualification_preference_css=e(this.qualification_preference_css,this),i.__super__.constructor.call(this,t),this.attributes({response_message:{send:!0},response_date:{},status:{send:!0},fancy_status:{},user_id:{send:!0,no_error_prefix:!0},user_name:{},user_first_name:{},user_last_name:{},user_school_name:{},applicable_id:{send:!0},applicable_type:{send:!0},applicable_name:{},applicable_path:{},applicable_employer_id:{},applicable_employer_name:{},document_ids:{send:!0,array:!0},document_approval_required:{},document_approved_at:{},created_at:{},updated_at:{},invited_by_id:{send:!0},invited_by_name:{send:!0},seen:{send:!0},original_job_id:{send:!0},original_job_name:{},late_application:{},fully_qualified:{},fully_qualified_calculated_at:{},interview_slot_present:{},alternate_status_relevant:{},interview_schedule_groups:{array:!0},employer_deadline_date:{},withdrawn:{},ats_integrated:{},qualification_information:{belongs_to:Handshake.QualificationInformations.QualificationInformation}}),this.alternate_status_relevant_undefined=ko.computed((s=this,function(){return null==s.alternate_status_relevant()})),this.can_configure_status=ko.computed((n=this,function(){return!n.withdrawn()&&!n.ats_integrated()})),this.document_blocked=ko.computed((o=this,function(){return o.document_approval_required()&&!o.document_approved_at()&&!o.withdrawn()})),this.fancy_name=ko.computed((r=this,function(){return r.original_job_name()?r.original_job_name():"Interview Schedule"})),this.fancy_applicable_type=ko.computed((a=this,function(){return"InterviewSchedule"===a.applicable_type()?"Interview Schedule":a.applicable_type()})),this.is_primary=ko.computed((c=this,function(){return"primary"===c.status()})),this.is_alternate=ko.computed((l=this,function(){return"alternate"===l.status()})),this.non_job_interview_schedule_group_names=ko.computed((u=this,function(){return Handshake.Transducers.transduce(u.interview_schedule_groups()).filter(function(e){return!e.interview_schedule_job_id}).map(function(e){return e.name}).reduce(Handshake.Combiners.concat,[])})),this.preference_info_bar_style=ko.computed((h=this,function(){var e;return(0===(e=h.qualification_information().preferences_specified_count())?100:h.qualification_information().preferences_met_count()/e*100)+"%"})),this.preference_info_text=ko.computed((_=this,function(){return _.fully_qualified_calculated_at()&&_.qualification_information()&&_.qualification_information().isPersisted()?_.qualification_information().preferences_met_count()+"/"+_.qualification_information().preferences_specified_count():""})),this.poll_count=0,this.timeout=2e3,this.status_css=ko.computed((d=this,function(){var e,t;return d.withdrawn()||"declined"===d.status()?"application-declined":"pending"===(e=d.status())||"reviewed"===e||"hired"===e?"application-"+d.status():"primary"===(t=d.status())||"alternate"===t?"application-interviewing":""})),this.status_text=ko.computed((p=this,function(){return p.withdrawn()?"Withdrawn":capitalizeString(p.status())}))}return t(i,s),i.type="Application",i.underscore="application",i.nested_methods=["create"],i.STATUS_TOOLTIP="This is a shared status. As you update it, the student who applied will be able to see the state of their application.",i.QUALIFIED_TOOLTIP="The green or grey bar displays the number of preferences each student matches in the job they applied for.",i.prototype.qualification_preference_css=function(e){return{"met-qualification-preference":function(){switch(e){case"school_years_and_graduation_dates":return this.qualification_information().met_school_years_and_graduation_dates_requirement;case"majors":return this.qualification_information().met_majors_requirement;case"cumulative_and_department_gpa":return ko.computed((t=this,function(){return t.qualification_information().met_cumulative_gpa_requirement()}));case"work_authorization":return this.qualification_information().met_work_authorization_requirement;case"work_study_eligibility":return this.qualification_information().met_work_study_eligibility_requirement&&this.qualification_information().work_study_eligibility_requirement}var t}.call(this)}},i.prototype.nice_preference_name=function(e){switch(e){case"school_years_and_graduation_dates":return"school year or graduation date";case"majors":return"major";case"cumulative_and_department_gpa":return"minimum GPA";case"work_authorization":return"work authorization status";case"work_study_eligibility":return"work study eligibility"}},i.prototype.qualifications_tooltip_html=function(e,t){return ko.computed((s=this,function(){var i,n,o;return s.qualification_information()&&s.qualification_information().isPersisted()?"Career Services"===Handshake.passed.current_user_type&&Handshake.passed.current_user_institution_id_type!==s.qualification_information().user_institution_id_type()?'<div class="no-qualifications">This student is from a different school, so application details are hidden.</div>':"work_authorization"===e&&"Accepting OPT/CPT"===s.qualification_information().work_authorization_requirement()?"<div class='no-qualifications'>Accepting OPT/CPT</div>":(i='<div class="row">',i+="<div class='col-xs-6'><b>Job "+("all"===e?"Preferences":"Preference")+"</b></div>",i+="<div class='col-xs-6'><b>Student Information</b></div>",i+="</div>",n="","all"!==e&&"school_years_and_graduation_dates"!==e||(n+=s.qualification_explanation_row("school_years_and_graduation_dates")),"all"!==e&&"cumulative_and_department_gpa"!==e||(n+=s.qualification_explanation_row("cumulative_gpa","GPA: ")),"all"!==e&&"majors"!==e||(n+=s.qualification_explanation_row("majors")),"all"!==e&&"work_study_eligibility"!==e||(n+=s.qualification_explanation_row("work_study_eligibility")),!0!==t&&"US work authorization not required"===s.qualification_information().work_authorization_requirement()||"all"!==e&&"work_authorization"!==e||(n+=s.qualification_explanation_row("work_authorization","",t)),"all"===e&&("Career Services"===Handshake.passed.current_user_type?(n+=s.qualification_explanation_row("colleges"),n+=s.qualification_explanation_row("institution_labels","Labels: ")):s.qualification_information().met_school_specific_requirements()||(n+=s.build_qualification_explanation_row(!1,"School-specific requirements","Not met"))),o=n.length>0?""+i+n:"all"===e?'<div class="no-qualifications">No preferences set for the job this student applied for</div>':"work_authorization"===e?!1===t||"US work authorization not required"===s.qualification_information().work_authorization_requirement()?"<div class='no-qualifications'>Job does not require U.S. work authorization</div>":"<div class='no-qualifications'>Willing to sponsor candidates</div>":"<div class='no-qualifications'>No preference set for "+s.nice_preference_name(e)+"</div>",moment(s.created_at())<moment().subtract(6,"months")&&(o+='<div class="old-application-note">\n  Application is more than 6 months old, so qualification information is no longer\n  updating. Last updated on '+moment(s.updated_at()).shorthandWithTwoDigitYear("l")+".\n</div>"),o):'<div class="no-qualifications">Preferences data for this student are being calculated.</div>'}));var s},i.prototype.qualification_preference_attr=function(e,t){return{title:this.qualifications_tooltip_html(e,t)}},i.prototype.poll_for_fully_qualified=function(){var e;if(!this.fully_qualified_calculated_at()){if(!(this.poll_count>14))return this.poll_count+=1,this.poll_count>2&&(this.timeout*=2),this.fetch((e=this,function(){
if(!e.fully_qualified_calculated_at())return setTimeout(e.poll_for_fully_qualified,e.timeout)}));bugsnagClient.notify("Fully qualified never set for application "+this.id())}},i.prototype.nested_route=function(){return this.applicable_path()},i.prototype.hire=function(e){return null==e&&(e=null),this.ajax_call({type:"POST",method:"hire",on_member:!0,action:"hire",success:function(t){if(e)return e(t)}})},i.prototype.review=function(e){return null==e&&(e=null),this.ajax_call({type:"POST",method:"review",on_member:!0,action:"review",success:function(t){if(e)return e(t)}})},i.prototype.notify_applicant=function(e){return null==e&&(e=null),this.ajax_call({type:"POST",method:"notify_applicant",on_member:!0,action:"notify_applicant",success:function(t){if(e)return e(t)}})},i.prototype.mark_as_primary=function(e,t){return null==t&&(t=null),this.ajax_call({type:"POST",method:"mark_as_primary",on_member:!0,action:"mark_as_primary",data:{interview_schedule_id:e},success:function(e){if(t)return t(e)}})},i.prototype.mark_as_alternate=function(e,t){return null==t&&(t=null),this.ajax_call({type:"POST",method:"mark_as_alternate",on_member:!0,action:"mark_as_alternate",data:{interview_schedule_id:e},success:function(e){if(t)return t(e)}})},i.prototype.decline=function(e,t){return null==e&&(e=null),null==t&&(t={}),this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",data:t,success:function(t){if(e)return e(t)}})},i.prototype.reset=function(e){return null==e&&(e=null),this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(e)return e(t)}})},i.prototype.find_relevant_interviews=function(e){return null==e&&(e=null),this.ajax_call({type:"POST",method:"relevant_interviews",on_member:!0,action:"relevant_interviews",success:function(t){if(e)return e(t)}})},i.prototype.relevant_applicables=function(e){return this.ajax_call({type:"GET",method:"relevant_applicables",on_member:!0,action:"relevant_applicables",success:function(t){return e(t)}})},i.prototype.applicable_employer_path=function(){return this.applicable_employer_id()?new Handshake.Employers.Employer({id:this.applicable_employer_id()}).entity_path:null},i.prototype.user_path=function(){return this.user_id()?new Handshake.Users.User({id:this.user_id()}).entity_path:null},i.prototype.invited_by_path=function(){return this.invited_by_id()?new Handshake.Users.User({id:this.invited_by_id()}).entity_path:null},i.prototype.document_path=function(){return this.document_ids().length>0?this.member_route("download_documents"):null},i.prototype.build_qualification_explanation_row=function(e,t,s){var i;return i=e?"fa fa-check-circle-o":"fa fa-times-circle-o",i="Unknown"===s?"fa fa-question":i,"<div class='row'>\n  <div class='col-xs-6 requirement'>\n    "+Handshake.Helpers.escapeString(t)+"\n  </div>\n  <div class='col-xs-6 student-value'>\n    <i class='"+i+" icon'></i>\n    <div class='value'>\n      "+Handshake.Helpers.escapeString(s)+"\n    </div>\n  </div>\n</div>"},i.prototype.qualification_explanation_row=function(e,t){var s,i,n,o;return null==t&&(t=""),n="",s=this.qualification_information()["met_"+e+"_requirement"](),i=this.qualification_information()[e+"_requirement"](),o=this.qualification_information()["student_"+e](),_.isEmpty(i)||_.isEmpty(o)||(i=t+i,n+=this.build_qualification_explanation_row(s,i,o)),n},i.prototype.can_switch_to_status=function(e){var t,s;if(this.withdrawn())return!1;switch(e){case"hired":return"reviewed"===(t=this.status())||"pending"===t||"primary"===t||"alternate"===t||"declined"===t;case"declined":return"reviewed"===(s=this.status())||"pending"===s||"primary"===s||"alternate"===s||"hired"===s;case"reviewed":return"Employers"===Handshake.passed.current_user_type&&"pending"===this.status()}},i.prototype.autoUpdateStatusTo=function(e,t){if("Employers"===Handshake.passed.current_user_type&&this.can_switch_to_status(e))switch(e){case"reviewed":if("application_opened"===t&&"pending"===this.status())return this.review()}},i}(Handshake.Resource),Handshake.BulkDownloadDocumentsModal=function(){function t(t){this.props=t,this.confirm=e(this.confirm,this),this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.download_success=e(this.download_success,this),this.modal=$("#bulk-download-documents"),this.document_options=ko.observable(this.props.document_types),this.selected_document_type_ids=ko.observableArray(_.map(this.document_options(),function(e){return e.id}))}return t.prototype.download_success=function(e){return this.props.searchable.ajax_download_view.bulkActionSuccess(e)},t.prototype.show_modal=function(){return this.modal.modal("show"),!1},t.prototype.hide_modal=function(){return this.modal.modal("hide")},t.prototype.confirm=function(){var e;return e=_.isFunction(this.props.extra_data)?this.props.extra_data():{},this.props.searchable.performBulkAction($.extend(e,{selected_document_type_ids:this.selected_document_type_ids()})),!1},t}(),Handshake.FullyQualifiedModal=function(){function t(){var t;this.next_page=e(this.next_page,this),this.current_page=ko.observable(0),this.button_text=ko.computed((t=this,function(){return 2===t.current_page()?"Got it! Let's go!":"Next"})),$(".fully-qualified-modal").modal("show")}return t.prototype.next_page=function(){return 2===this.current_page()?$(".fully-qualified-modal").modal("hide"):this.current_page(this.current_page()+1)},t}(),Handshake.Applications.KeyActions=function(){function t(t,s){this.searchable=t,this.coreSchoolsOnlyClick=e(this.coreSchoolsOnlyClick,this),this.qualifiedOnlyClick=e(this.qualifiedOnlyClick,this),this.dismiss_popover=e(this.dismiss_popover,this),this.popover_content=e(this.popover_content,this),this.searchable.coreSchoolsOnly(s),this.popover_options={html:!0,placement:"bottom",hide_on_click_outside:!0,animation:!1,content:this.popover_content(s)}}return t.prototype.popover_content=function(e){var t,s,i;return s="applications-key-actions-popover",i='<div class="filter-option" data-bind="click: function() { qualifiedOnlyClick(null) }">\n  <i class="fa fa-check" data-bind="css: { active: searchable.qualifiedOnly() === null }" aria-hidden="true"></i>\n  <span>All Applicants</span>\n</div>\n<div class="filter-option match-all-preferences" data-bind="click: function() { qualifiedOnlyClick(true) }">\n  <i class="fa fa-check" data-bind="css: { active: searchable.qualifiedOnly() === true }" aria-hidden="true"></i>\n  <span>Match All Preferences</span>\n</div>\n<div class="filter-option do-not-match-all-preferences" data-bind="click: function() { qualifiedOnlyClick(false) }">\n  <i class="fa fa-check" data-bind="css: { active: searchable.qualifiedOnly() === false }" aria-hidden="true"></i>\n  <span>Do Not Match All Preferences</span>\n</div>',t='<div class="filter-option" data-bind="click: function() { coreSchoolsOnlyClick(false) }">\n  <i class="fa fa-check" data-bind="css: { active: !searchable.coreSchoolsOnly() }" aria-hidden="true"></i>\n  <span>All '+UNSAFE__i18n.t("schools_capitalized")+'</span>\n</div>\n<div class="filter-option" data-bind="click: function() { coreSchoolsOnlyClick(true) }">\n  <i class="fa fa-check" data-bind="css: { active: searchable.coreSchoolsOnly }" aria-hidden="true"></i>\n  <span>Your '+UNSAFE__i18n.t("schools_capitalized")+"</span>\n</div>",e?"<div class='"+s+"'>"+i+"<hr />"+t+"</div>":"<div class='"+s+"'>"+i+"</div>"},t.prototype.dismiss_popover=function(){return $("#key-actions-edit").popover("hide")},t.prototype.qualifiedOnlyClick=function(e){return this.searchable.qualifiedOnlyClick(e),this.dismiss_popover()},t.prototype.coreSchoolsOnlyClick=function(e){return this.searchable.coreSchoolsOnlyClick(e),this.dismiss_popover()},t}(),Handshake.ApplicationsView=function(){function t(t){var s,i,n,o,r,a,c,l,u,h,d,p,m,f,b,y;this.props=t,this.download_packages=e(this.download_packages,this),this.withdrawApplication=e(this.withdrawApplication,this),this.findRelevantInterviews=e(this.findRelevantInterviews,this),this.resetApplication=e(this.resetApplication,this),this.declineApplication=e(this.declineApplication,this),this.status_change_callback=e(this.status_change_callback,this),this.interviewApplication=e(this.interviewApplication,this),this.markApplicationAsAlternate=e(this.markApplicationAsAlternate,this),this.markApplicationAsPrimary=e(this.markApplicationAsPrimary,this),this.update_primary_and_alternate_counts=e(this.update_primary_and_alternate_counts,this),this.reviewApplication=e(this.reviewApplication,this),this.hireApplication=e(this.hireApplication,this),this.selectApplication=e(this.selectApplication,this),this.bulk_message_users_failure=e(this.bulk_message_users_failure,this),this.bulk_message_users_success=e(this.bulk_message_users_success,this),this.bulk_message_users_cancel=e(this.bulk_message_users_cancel,this),this.bulk_message_users_confirm=e(this.bulk_message_users_confirm,this),this.bulk_message_users_select=e(this.bulk_message_users_select,this),this.update_all_statuses_unless_failed=e(this.update_all_statuses_unless_failed,this),this.alternateApplicationsSuccess=e(this.alternateApplicationsSuccess,this),this.primaryApplicationsSuccess=e(this.primaryApplicationsSuccess,this),this.declineApplicationsSuccess=e(this.declineApplicationsSuccess,this),this.declineApplicationsEmailCancel=e(this.declineApplicationsEmailCancel,this),this.declineApplicationsEmailConfirm=e(this.declineApplicationsEmailConfirm,this),this.declineApplicationsEmailSelect=e(this.declineApplicationsEmailSelect,this),this.hireApplicationsSuccess=e(this.hireApplicationsSuccess,this),this.massEmailUsersSuccess=e(this.massEmailUsersSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.new_application_after_create=e(this.new_application_after_create,this),this.perform_search_on_toggle=e(this.perform_search_on_toggle,this),this.searchCallback=e(this.searchCallback,this),this.poll_applications_for_fully_qualified=e(this.poll_applications_for_fully_qualified,this),this.showReviewDeclineEmailModal=e(this.showReviewDeclineEmailModal,this),this.resetDeclineTemplateSubjectAndMessage=e(this.resetDeclineTemplateSubjectAndMessage,this),this.confirmDecline=e(this.confirmDecline,this),this.cancelDecline=e(this.cancelDecline,this),this.wysihtml5_options=e(this.wysihtml5_options,this),this.unmount=e(this.unmount,this),this.applications=ko.observableArray([]),this.application_change_callback=this.props.application_change_callback||(u=this,function(e){var t;if(e)return null!=(t=_(u.applications()).find(function(t){return t.id()===e.id()}))?t.status(e.status()):void 0}),this.job_applications_only="Job"===(null!=(o=this.props.nested_resource)?o.type:void 0),this.interview_schedule_applications_only="InterviewSchedule"===(null!=(r=this.props.nested_resource)?r.type:void 0),this.viewing_all_applications=!this.job_applications_only&&!this.interview_schedule_applications_only,this.interview_page=ko.observable(this.props.interview_page||this.interview_schedule_applications_only),this.interview_page()&&(this.interview_schedule_applications_only?this.interview_schedule=ko.observable(Handshake.Resource.resourceFromObject(this.props.nested_resource)):this.interview_schedule=this.props.interview_schedule),this.show_interview_schedule_groups=ko.observable(this.props.show_interview_schedule_groups),this.userReviewModalView=this.interview_schedule_applications_only?new Handshake.UserReviewModalView({jobApplicationsView:this,interview_schedule:this.interview_schedule()}):new Handshake.UserReviewModalView({jobApplicationsView:this}),this.already_warned=ko.observable(!1),this.selectedApplication=ko.observable(),this.selectedApplicationRelevantInterviews=ko.observableArray([]),this.applications.subscribe((h=this,function(){return h.poll_applications_for_fully_qualified()})),this.props.show_fully_qualified_modal&&(this.fully_qualified_modal=new Handshake.FullyQualifiedModal),this.searchable=new Handshake.Searchable($("#search-form"),"applications",this.searchCallback),"Students"!==Handshake.passed.current_user_type?(i=Handshake.cookies.read("applications_filters",{user_scoped:!0})||{qualified_only:null,minimum_gpa_qualified_only:!1,school_year_and_graduation_date_qualified_only:!1,major_qualified_only:!1,work_authorization_qualified_only:!1},this.searchable.qualifiedOnly(i.qualified_only),this.minimum_gpa_qualified_only=ko.observable(i.minimum_gpa_qualified_only),this.school_year_and_graduation_date_qualified_only=ko.observable(i.school_year_and_graduation_date_qualified_only),this.major_qualified_only=ko.observable(i.major_qualified_only),this.work_authorization_qualified_only=ko.observable(i.work_authorization_qualified_only),d=this,c=function(){var e;return e={qualified_only:d.searchable.qualifiedOnly(),minimum_gpa_qualified_only:d.minimum_gpa_qualified_only(),school_year_and_graduation_date_qualified_only:d.school_year_and_graduation_date_qualified_only(),major_qualified_only:d.major_qualified_only(),work_authorization_qualified_only:d.work_authorization_qualified_only()},Handshake.cookies.write("applications_filters",e,{user_scoped:!0,permanent:!0})},this.searchable.qualifiedOnly.subscribe(c),this.minimum_gpa_qualified_only.subscribe(c),this.school_year_and_graduation_date_qualified_only.subscribe(c),this.major_qualified_only.subscribe(c),this.work_authorization_qualified_only.subscribe(c)):("Students"!==Handshake.passed.current_user_type&&this.searchable.qualifiedOnly(!0),this.minimum_gpa_qualified_only=ko.observable(!1),this.school_year_and_graduation_date_qualified_only=ko.observable(!1),this.major_qualified_only=ko.observable(!1),this.work_authorization_qualified_only=ko.observable(!1)),this.searchable.showPerPageOption(!0),this.interview_schedule_applications_only&&(this.newApplicationModal=new Handshake.CreateApplicationView({success_callback:this.new_application_after_create,applicable:this.props.nested_resource}),this.react_props=ko.computed((p=this,function(){var e;return e=p.interview_schedule().getJSON(),{interviewSchedule:e=JSON.parse(JSON.stringify(e)),interviewSlotBreakdown:p.props.interview_slot_breakdown}}))),a="Employers"===Handshake.passed.current_user_type&&this.job_applications_only,this.key_actions=new Handshake.Applications.KeyActions(this.searchable,a),_.extend(this.searchable.defaultParams(),{core_schools_only:this.searchable.coreSchoolsOnly()}),this.searchable.addExternalParam("minimum_gpa_qualified_only",this.minimum_gpa_qualified_only),this.searchable.addExternalParam("school_year_and_graduation_date_qualified_only",this.school_year_and_graduation_date_qualified_only),this.searchable.addExternalParam("major_qualified_only",this.major_qualified_only),this.searchable.addExternalParam("work_authorization_qualified_only",this.work_authorization_qualified_only),this.application_warning_modal=new Handshake.Applications.ApplicationWarningModal(this.interview_schedule,this.status_change_callback,this.already_warned),this.bulk_application_warning_modal=new Handshake.Applications.BulkApplicationWarningModal(this.interview_schedule,this.searchable,this.already_warned),n={interview_schedule:this.interview_schedule,applications:this.applications,searchable:this.searchable,show_interview_schedule_groups:this.show_interview_schedule_groups},this.manage_interview_schedule_groups_modal=new Handshake.ManageInterviewScheduleGroupsModal(n),this.user_can_select_applications=ko.computed((m=this,function(){return(!m.interview_schedule||"approved"===m.interview_schedule().status())&&(!m.props.interview_schedule_employer_deadline_enabled||"Employers"!==Handshake.passed.current_user_type||null==m.interview_schedule().employer_deadline_date()||moment(m.interview_schedule().employer_deadline_date())>moment())})),this.declineTemplateSubject=ko.observable(this.props.decline_template_subject),this.declineTemplateMessage=ko.observable(this.props.decline_template_message),this.templateConfirmed=ko.observable(!1),this.shouldAskBeforeDecline=ko.observable(this.props.should_ask_before_decline),this.applicationToDecline=ko.observable(null),this.reviewDeclineEmailModal=$("#review-decline-email-modal"),this.modalAction=ko.observable(""),this.bulk_download_documents=new Handshake.BulkDownloadDocumentsModal({searchable:this.searchable,document_types:this.props.document_types}),s=ko.computed((f=this,function(){return f.applications().length&&f.applications()[0].withdrawn()})),this.download_packages_success=(b=this,function(e){var t;return"Employers"===Handshake.passed.current_user_type&&(t=b.searchable.checked_ids().length>0,_.each(b.applications(),function(e){if(t&&b.searchable.checked_ids.indexOf(e.id())>-1||!t)return"pending"===e.status()?e.status("reviewed"):void 0})),b.bulk_download_documents.download_success(e)}),ko.computed((y=this,function(){var e,t;return e=[],"Employers"===Handshake.passed.current_user_type&&e.push({label:"Message Applicants",type:"simple",key_action:!0,bulk_action:"message_users",select_action:y.bulk_message_users_select,confirm_action:y.bulk_message_users_confirm,cancel_action:y.bulk_message_users_cancel,success:y.bulk_message_users_success,failure:y.bulk_message_users_failure}),y.download_packages_bulk_action={label:"Download Applicant Packages",type:"simple",key_action:!0,bulk_action:"download_application_documents_pdf",select_action:y.bulk_download_documents.show_modal,confirm_action:y.bulk_download_documents.confirm,cancel_action:y.bulk_download_documents.hide_modal,success:y.download_packages_success},e=e.concat([{label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"User",select_action:y.bulkLabelSelect,confirm_action:y.bulkLabelConfirm,cancel_action:y.bulkLabelCancel,success:y.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:y.bulkLabelSelect,confirm_action:y.bulkLabelConfirm,cancel_action:y.bulkLabelCancel,success:y.bulkRemoveLabelSuccess}]),y.job_applications_only&&"external"===y.props.nested_resource.job_apply_setting.apply_type?e.push({label:"Download Applicant Profiles",type:"simple",key_action:!0,bulk_action:"download_applicant_profiles",success:function(e){return y.searchable.ajax_download_view.bulkActionSuccess(e)}}):e=e.concat([y.download_packages_bulk_action,{label:"Download Applicant Packages: Zip",type:"simple",bulk_action:"download_application_documents_zip",select_action:y.bulk_download_documents.show_modal,confirm_action:y.bulk_download_documents.confirm,cancel_action:y.bulk_download_documents.hide_modal,success:y.download_packages_success}]),"Employers"===Handshake.passed.current_user_type&&e.push({label:"Download Applicant Data to CSV",type:"simple",bulk_action:"download_csv",success:y.searchable.ajax_download_view.bulkActionSuccess}),y.interview_page()&&(e.push({label:"Add Students to Interview Group",type:"simple",bulk_action:"add_student_to_group",success:y.manage_interview_schedule_groups_modal.success,select_action:y.manage_interview_schedule_groups_modal.select_add,confirm_action:y.manage_interview_schedule_groups_modal.confirm}),e.push({label:"Remove Students from Interview Group",type:"simple",bulk_action:"remove_student_from_group",success:y.manage_interview_schedule_groups_modal.success,select_action:y.manage_interview_schedule_groups_modal.select_remove,confirm_action:y.manage_interview_schedule_groups_modal.confirm}),s()||(y.user_can_select_applications()&&!y.searchable.all_pages_checked()&&e.push({label:"Mark Applications As Primary",type:"simple",bulk_action:"mark_applications_as_primary",success:y.primaryApplicationsSuccess,confirm_action:y.bulk_application_warning_modal.confirm_primary_action}),"Preselect"!==(t=y.interview_schedule().interview_schedule_type_name())&&"Room Only"!==t||!y.user_can_select_applications()||y.searchable.all_pages_checked()||e.push({label:"Mark Applications As Alternate",type:"simple",bulk_action:"mark_applications_as_alternate",success:y.alternateApplicationsSuccess,confirm_action:y.bulk_application_warning_modal.confirm_alternate_action}))),s()||y.searchable.all_pages_checked()||(e.push({label:"Mark Applications as Hired",type:"simple",bulk_action:"hire_applications",success:y.hireApplicationsSuccess}),y.user_can_select_applications()&&!y.searchable.all_pages_checked()&&e.push({label:"Mark Applications As Declined",type:"simple",bulk_action:"decline_applications",select_action:y.declineApplicationsEmailSelect,confirm_action:y.declineApplicationsEmailConfirm,success:y.declineApplicationsSuccess})),"Career Services"===Handshake.passed.current_user_type&&e.push({label:"Send Email to Applicants",type:"simple",key_action:!0,bulk_action:"mass_email_applicants",success:y.massEmailUsersSuccess}),y.searchable.bulkActions(e)})),this.withdrawApplicationsModal=new Handshake.WithdrawApplicationsModal(null),"Career Services"===(l=Handshake.passed.current_user_type)||"Admins"===l?this.searchable.initialSetup("UniversityApplications"):"Employers"===l&&this.interview_schedule_applications_only?this.searchable.initialSetup("EmployerInterviewScheduleApplications"):"Employers"===l&&this.job_applications_only?this.searchable.initialSetup("EmployerJobApplications"):Bugsnag.notify("Unexpected user type "+l+" encountered in Applications")}return t.prototype.unmount=function(){if(null!=this.searchable.bulk_message_panel)return this.searchable.bulk_message_panel.unmount()},t.prototype.wysihtml5_options=function(){return{wysihtml5_options:{toolbar:{insert_variable_dropdown:{student_first_name:"Student First Name",job_title:"Job Title"},image:!1}},on_load:function(){return $('a[data-wysihtml5-command="openInsertVariable"]').on("click",function(e){return $(e.target).closest(".dropdown").toggleClass("open"),!1}),$('a[data-wysihtml5-command="insertVariable"]').on("click",function(e){var t,s;return s=$(e.target).closest(".wysihtml5-toolbar").siblings("textarea").data("wysihtml5"),t=$(e.target).attr("data-wysihtml5-command-value"),s.editor.toolbar.execCommand("insertHTML","{{"+t+"}}")})}}},t.prototype.cancelDecline=function(){return this.applicationToDecline(null),this.modalAction(""),this.reviewDeclineEmailModal.modal("hide"),this.resetDeclineTemplateSubjectAndMessage()},t.prototype.confirmDecline=function(e){return this.templateConfirmed(e),this.reviewDeclineEmailModal.modal("hide"),"single"===this.modalAction()?(this.declineApplication(this.applicationToDecline()),this.resetDeclineTemplateSubjectAndMessage()):"bulk"===this.modalAction()?this.declineApplicationsEmailConfirm():void 0},t.prototype.resetDeclineTemplateSubjectAndMessage=function(){return this.declineTemplateSubject(this.props.decline_template_subject),this.declineTemplateMessage(this.props.decline_template_message)},t.prototype.showReviewDeclineEmailModal=function(e){return this.applicationToDecline(e),this.modalAction("single"),this.reviewDeclineEmailModal.modal("show")},t.prototype.poll_applications_for_fully_qualified=function(){return _.each(this.applications(),function(e){if(!e.fully_qualified_calculated_at())return e.poll_for_fully_qualified()})},t.prototype.searchCallback=function(e){return this.applications(Handshake.Resource.resourcesFromArray(e.results,Handshake.Applications.Application))},t.prototype.perform_search_on_toggle=function(){return this.searchable.performExternalParamsSearch(),!0},t.prototype.new_application_after_create=function(e){return this.searchable.currentResult.unshift(e.application),this.applications.unshift(Handshake.Resource.resourceFromObject(e.application)),this.newApplicationModal.reset_new_application(),Handshake.Helpers.notifySuccess("Application successfully created.")},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.massEmailUsersSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.hireApplicationsSuccess=function(e){if(this.interview_page()&&this.update_primary_and_alternate_counts(e),this.update_all_statuses_unless_failed("hired",e.failed_ids),null!=e.message)return Handshake.Helpers.notifySuccess(e.message)},t.prototype.declineApplicationsEmailSelect=function(){return this.modalAction("bulk"),this.reviewDeclineEmailModal.modal("show"),!1},t.prototype.declineApplicationsEmailConfirm=function(){var e;return e={custom_subject:this.declineTemplateSubject(),custom_template:this.declineTemplateMessage(),template_confirmed:this.templateConfirmed()},this.searchable.performBulkAction(e),!1},t.prototype.declineApplicationsEmailCancel=function(){return this.modalAction("bulk"),this.reviewDeclineEmailModal.modal("show")},t.prototype.declineApplicationsSuccess=function(e){if(this.interview_page()&&this.update_primary_and_alternate_counts(e),this.update_all_statuses_unless_failed("declined",e.failed_ids),null!=e.message)return Handshake.Helpers.notifySuccess(e.message)},t.prototype.primaryApplicationsSuccess=function(e){if(this.update_primary_and_alternate_counts(e),this.update_all_statuses_unless_failed("primary",e.failed_ids),null!=e.message)return Handshake.Helpers.notifySuccess(e.message)},t.prototype.alternateApplicationsSuccess=function(e){if(this.update_primary_and_alternate_counts(e),this.update_all_statuses_unless_failed("alternate",e.failed_ids),null!=e.message)return Handshake.Helpers.notifySuccess(e.message)},t.prototype.update_all_statuses_unless_failed=function(e,t){var s,i;return s=this.searchable.checked_ids().length>0,_.each(this.applications(),(i=this,function(n){if((null==t||!_.contains(t,parseInt(n.id())))&&(s&&i.searchable.checked_ids.indexOf(n.id())>-1||!s))return n.status(e)}))},t.prototype.bulk_message_users_select=function(){return this.searchable.bulk_message_panel.show_panel(!0),!1},t.prototype.bulk_message_users_confirm=function(){return this.searchable.bulk_message_panel.confirm(),!1},t.prototype.bulk_message_users_cancel=function(){return this.searchable.bulk_message_panel.show_panel()},t.prototype.bulk_message_users_success=function(e){if(e.message)return Handshake.Helpers.notifySuccess(e.message)},t.prototype.bulk_message_users_failure=function(e){return e.error&&Handshake.Helpers.notifyError(e.error),this.searchable.bulk_message_panel.show_panel()},t.prototype.selectApplication=function(e){return $(".qualifications-tooltip").tooltip("hide"),$(".qualification-preference").tooltip("hide"),e.ats_integrated()||e.autoUpdateStatusTo("reviewed","application_opened"),this.userReviewModalView.selectApplication(e)},t.prototype.hireApplication=function(e){return e.hire((t=this,function(s){if(t.selectedApplication(e),t.status_change_callback)return t.status_change_callback(s)}));var t},t.prototype.reviewApplication=function(e){return e.review((t=this,function(s){if(t.selectedApplication(e),t.status_change_callback)return t.status_change_callback(s)}));var t},t.prototype.update_primary_and_alternate_counts=function(e){return this.interview_schedule().primary_selections_count(e.interview_schedule.primary_selections_count),this.interview_schedule().alternate_selections_count(e.interview_schedule.alternate_selections_count)},t.prototype.markApplicationAsPrimary=function(e){return this.interviewApplication(e,"primary")},t.prototype.markApplicationAsAlternate=function(e){return this.interviewApplication(e,"alternate")},t.prototype.interviewApplication=function(e,t){var s;return null==t&&(t="alternate"),this.selectedApplication(e),this.application_warning_modal.should_confirm_primary(t)?(this.application_warning_modal.current_page("primary_warning"),this.application_warning_modal.show_modal(this.selectedApplication())):e["mark_as_"+t](this.interview_schedule().id(),(s=this,function(e){return s.status_change_callback(e)}))},t.prototype.status_change_callback=function(e){if(this.application_change_callback&&this.application_change_callback(),this.interview_page())return this.update_primary_and_alternate_counts(e),this.application_warning_modal.should_show_notify_warning(this.selectedApplication().status())?(this.application_warning_modal.current_page("notify"),this.application_warning_modal.show_modal(this.selectedApplication())):void 0},t.prototype.declineApplication=function(e){var t,s;return t=this.shouldAskBeforeDecline()&&this.declineTemplateSubject()&&this.declineTemplateMessage()?{application:{custom_subject:this.declineTemplateSubject(),custom_template:this.declineTemplateMessage(),template_confirmed:this.templateConfirmed()}}:{},e.decline((s=this,function(t){if(s.selectedApplication(e),s.status_change_callback)return s.status_change_callback(t)}),t)},t.prototype.resetApplication=function(e){return e.reset((t=this,function(s){if(t.selectedApplication(e),t.status_change_callback)return t.status_change_callback(s)}));var t},t.prototype.findRelevantInterviews=function(e){return e.find_relevant_interviews((t=this,function(e){return t.selectedApplicationRelevantInterviews(Handshake.Resource.resourcesFromArray(e.interview_schedules))}));var t},t.prototype.withdrawApplication=function(e){return this.withdrawApplicationsModal.application(e),this.withdrawApplicationsModal.open_modal()},t.prototype.download_packages=function(){return this.searchable.selectBulkAction(this.download_packages_bulk_action)},t}(),Handshake.Applications.ApplicationWarningModal=function(){function t(t,s,i){this.interview_schedule=t,this.success_callback=s,this.already_warned=i,this.show_alternate_button=e(this.show_alternate_button,this),this.primary_slots_taken=e(this.primary_slots_taken,this),this.primary_slots_count=e(this.primary_slots_count,this),this.confirm_status=e(this.confirm_status,this),this.confirm_alternate=e(this.confirm_alternate,this),this.confirm_primary=e(this.confirm_primary,this),this.should_confirm_primary=e(this.should_confirm_primary,this),this.notify_applicant=e(this.notify_applicant,this),this.should_show_notify_warning=e(this.should_show_notify_warning,this),this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.modal_element=$("#notify-applicant-modal"),this.current_page=ko.observable("notify"),this.application=ko.observable()}return t.prototype.show_modal=function(e){return this.application(e),this.modal_element.modal("show"),this.already_warned(!0)},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t.prototype.should_show_notify_warning=function(e){var t;if(t=null,"primary"===e)t=this.interview_schedule().primary_signup_start();else{if("alternate"!==e)return!1;t=this.interview_schedule().alternate_signup_start()}return this.interview_schedule().is_preselect()&&moment()>moment(t)&&moment()<moment(this.interview_schedule().signup_end())},t.prototype.notify_applicant=function(){var e;return this.application().notify_applicant((e=this,function(){return e.hide_modal(),Handshake.Helpers.notifySuccess("Notification successfully sent")})),!1},t.prototype.should_confirm_primary=function(e){return!this.already_warned()&&this.interview_schedule().primary_selections_count()>=this.interview_schedule().interview_slots_size()&&"primary"===e},t.prototype.confirm_primary=function(){return this.confirm_status("primary")},t.prototype.confirm_alternate=function(){return this.confirm_status("alternate")},t.prototype.confirm_status=function(e){var t,s;return t="mark_as_"+e,this.application()[t](this.interview_schedule().id(),(s=this,function(e){return _.isFunction(s.success_callback)&&s.success_callback(e),s.should_show_notify_warning(s.application().status())?s.current_page("notify"):s.hide_modal()}))},t.prototype.primary_slots_count=function(){return this.interview_schedule().primary_slots_count()},t.prototype.primary_slots_taken=function(){return this.interview_schedule().primary_selections_count()},t.prototype.show_alternate_button=function(){return"Preselect"===this.interview_schedule().interview_schedule_type_name()||"Room Only"===this.interview_schedule().interview_schedule_type_name()},t}(),Handshake.Applications.BulkApplicationWarningModal=function(){function t(t,s,i){this.interview_schedule=t,this.searchable=s,this.already_warned=i,this.show_alternate_button=e(this.show_alternate_button,this),
this.new_primaries_count_text=e(this.new_primaries_count_text,this),this.primary_slots_taken=e(this.primary_slots_taken,this),this.primary_slots_count=e(this.primary_slots_count,this),this.confirm_alternate=e(this.confirm_alternate,this),this.confirm_primary=e(this.confirm_primary,this),this.should_show_primary_warning=e(this.should_show_primary_warning,this),this.notify_applicants=e(this.notify_applicants,this),this.perform_action=e(this.perform_action,this),this.should_show_notify_warning=e(this.should_show_notify_warning,this),this.confirm_action=e(this.confirm_action,this),this.confirm_alternate_action=e(this.confirm_alternate_action,this),this.confirm_primary_action=e(this.confirm_primary_action,this),this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.modal_element=$("#bulk-notify-applicant-modal"),this.current_page=ko.observable("notify"),this.status=ko.observable("primary")}return t.prototype.show_modal=function(){return this.already_warned(!0),$("#confirm-bulk-action-modal").modal("hide"),this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t.prototype.confirm_primary_action=function(){return this.status("primary"),this.confirm_action()},t.prototype.confirm_alternate_action=function(){return this.status("alternate"),this.confirm_action()},t.prototype.confirm_action=function(){return this.should_show_primary_warning()?(this.current_page("primary_warning"),this.show_modal(),!1):this.should_show_notify_warning()?(this.current_page("notify"),this.show_modal(),!1):this.perform_action()},t.prototype.should_show_notify_warning=function(){var e;return e="primary"===this.status()?this.interview_schedule().primary_signup_start():this.interview_schedule().alternate_signup_start(),this.interview_schedule().is_preselect()&&moment()>moment(e)&&moment()<moment(this.interview_schedule().signup_end())},t.prototype.perform_action=function(){return this.searchable.performBulkAction(),this.hide_modal()},t.prototype.notify_applicants=function(){return this.searchable.performBulkAction({notify_applicants:!0}),this.hide_modal()},t.prototype.should_show_primary_warning=function(){var e;return"primary"===this.status()&&(e=this.searchable.confirmBulkActionData().item_count,!this.already_warned()&&this.interview_schedule().primary_selections_count()+e>this.interview_schedule().interview_slots_size())},t.prototype.confirm_primary=function(){return this.should_show_notify_warning()?(this.current_page("notify"),this.show_modal(),!1):this.perform_action()},t.prototype.confirm_alternate=function(){var e;return e=_(this.searchable.bulkActions()).find(function(e){return"mark_applications_as_alternate"===e.bulk_action}),this.searchable.selectBulkAction(e),this.perform_action()},t.prototype.primary_slots_count=function(){return this.interview_schedule().primary_slots_count()},t.prototype.primary_slots_taken=function(){return this.interview_schedule().primary_selections_count()},t.prototype.new_primaries_count_text=function(){var e;return 1===(e=this.searchable.confirmBulkActionData().item_count)?e+" more primary, ":e+" more primaries, "},t.prototype.show_alternate_button=function(){return"Preselect"===this.interview_schedule().interview_schedule_type_name()||"Room Only"===this.interview_schedule().interview_schedule_type_name()},t}(),Handshake.CreateApplicationView=function(){function t(t){var s,i,n,o,r,a;this.props=t,this.update_profile_and_proceed=e(this.update_profile_and_proceed,this),this.proceed=e(this.proceed,this),this.createApplication=e(this.createApplication,this),this.showProfileCompletionPromptFirst=e(this.showProfileCompletionPromptFirst,this),this.createApplicationSuccess=e(this.createApplicationSuccess,this),this.selectDocument=e(this.selectDocument,this),this.setup_new_document_view=e(this.setup_new_document_view,this),this.clearSubmittableDocument=e(this.clearSubmittableDocument,this),this.startUpload=e(this.startUpload,this),this.reset_selected_documents=e(this.reset_selected_documents,this),this.reset_new_document=e(this.reset_new_document,this),this.reset_new_application=e(this.reset_new_application,this),this.initialize_document_type_options=e(this.initialize_document_type_options,this),this.initialize_select_job_warning=e(this.initialize_select_job_warning,this),this.applicable=ko.observable(Handshake.Resource.resourceFromObject(this.props.applicable)),this.interview_slots=this.props.interview_slots||ko.observable(),this.selected_documents=ko.observableArray(),this.new_document=ko.observable(),this.new_document_progress=ko.observable(0),this.new_application=ko.observable(),this.show_select_job_warning=ko.observable(!1),this.all_document_type_options=ko.observableArray([]),this.document_type_id=ko.observable(),this.file_chosen=ko.observable(!1),this.show_profile_completion_prompt_after=(null!=(s=this.props.missing_profile_components)?s.length:void 0)>0,this.show_profile_completion_prompt=ko.observable(this.show_profile_completion_prompt_after),this.callback_data=ko.observable(),this.apply_disabled=ko.computed((n=this,function(){return n.new_application()&&(n.new_application().in_ajax()||n.new_application().isPersisted())})),this.pending_document_count=this.props.pending_document_count,this.reset_new_application(),this.currentSubmittableDocument=ko.observable(),this.reset_new_document(),this.setup_new_document_view(),this.destination_path=ko.observable(),this.additional_instructions=ko.observable(!1),"Job"===this.applicable().type&&(this.applicable().use_external_apply_link()&&this.applicable().external_apply_link().length>0||this.applicable().additional_application_instructions())&&"Students"===Handshake.passed.current_user_type&&this.additional_instructions(!0),this.document_select2_options={placeholder:"Document...",value:this.selected_documents,url:(o=this,function(){return new Handshake.Documents.Document({user_id:o.new_application().user_id()}).base_route("index")}),secondary_property:function(e){return e.document_type.name+" - "+(e["public"]?"Public":"Private")},dataFunction:function(e){return{query:e,simple_search:!0,approved_only:!0,valid_pdfs_only:!0}}},this.original_job_select2_options={placeholder:"Job Applied For...",url:"/interview_schedules/"+this.applicable().id()+"/relevant_jobs",dataFunction:function(e){return{query:e,simple_search:!0}},full_data:(r=this,function(e,t){return e||t?(r.new_application().original_job_id(e?e.id:null),r.new_application().original_job_name(e?e.name:null)):{id:r.new_application().original_job_id(),name:r.new_application().original_job_name()}})},i="InterviewSchedule"===this.applicable().type?this.applicable().entity_path+"/possible_students":"/students",this.student_select2_options={placeholder:"Student...",url:i,secondary_property:"institution_managed_email",dataFunction:function(e){return{query:e,simple_search:!0}},full_data:(a=this,function(e){return e?(a.new_application().user_id(e.id),a.new_application().user_name(e.name),a.reset_selected_documents()):{id:a.new_application().user_id(),name:a.new_application().user_name()}})},this.initialize_select_job_warning(),this.initialize_document_type_options()}return t.prototype.initialize_select_job_warning=function(){var e;if("InterviewSchedule"===this.applicable().type&&("jobs"===this.applicable().application_mode()&&!this.interview_slots()))return this.applicable().ajax_call({type:"GET",method:"interview_slots",on_member:!0,action:"interview_slots",success:(e=this,function(t){return e.interview_slots(Handshake.Resource.resourcesFromArray(t))})})},t.prototype.initialize_document_type_options=function(){return(new Handshake.DocumentTypes.DocumentType).index((e=this,function(t){return e.all_document_type_options(Handshake.Resource.resourcesFromArray(t.document_types))}));var e},t.prototype.reset_new_application=function(){return this.new_application(new Handshake.Applications.Application({applicable_path:this.applicable().entity_path,applicable_id:this.applicable().id(),applicable_type:this.applicable().type})),"Students"===Handshake.passed.current_user_type?(this.new_application().user_id(Handshake.passed.current_user_id),this.new_application().user_name(Handshake.passed.current_user_name)):(this.new_application().user_id(null),this.new_application().user_name(null)),this.new_application().original_job_id(null),this.new_application().original_job_name(null),this.reset_selected_documents(),this.reset_new_document()},t.prototype.reset_new_document=function(){return this.new_document(new Handshake.Documents.Document({user_id:Handshake.passed.current_user_id}))},t.prototype.reset_selected_documents=function(){return $("#selected_documents").select2("data",[]),this.selected_documents([])},t.prototype.startUpload=function(){return this.uploader.upload()},t.prototype.clearSubmittableDocument=function(){return this.currentSubmittableDocument(null)},t.prototype.setup_new_document_view=function(){var e,t;return this.uploader=new Handshake.FileUploader({record:this.new_document(),attachment_name:"document",file_input:$("#new-document-upload-input"),success:(e=this,function(t,s){return $.ajax({url:"/users/"+Handshake.passed.current_user_id+"/documents/quick_create",type:"POST",data:{document_s3_key:t,"document[name]":s.name,"document[document_content_type]":s.type,"document[document_type_id]":e.document_type_id()},progress:e.new_document_progress,success:function(t){var s;return t.success?($("#selected_documents").select2("data",$("#selected_documents").select2("data").concat(t.document)),s=new Handshake.Documents.Document(t.document),e.selectDocument(s),e.reset_new_document(),e.new_document_progress(100),setTimeout(function(){return e.new_document_progress(0)},250),Handshake.Helpers.notifySuccess("Your document has been uploaded and added to the list of selected documents.")):(e.new_document().errors(t.errors),e.new_document_progress(0)),e.file_chosen(!1)},error:function(t){return e.new_document().errors(t),e.new_document_progress(0),e.file_chosen(!1)}})})}),$("#new-document-upload-input").on("change",(t=this,function(){return t.file_chosen(!0)}))},t.prototype.selectDocument=function(e){return this.selected_documents.push(""+e.id())},t.prototype.createApplicationSuccess=function(e){return this.additional_instructions()?($("body").trigger("createApplication",{application:e.application,callback:this.reset_new_application.bind(this)}),$("#additional-instructions-modal").on("hide.bs.modal",(t=this,function(){if(_.isFunction(t.props.success_callback))return t.props.success_callback(e)})).modal("show")):(_.isFunction(this.props.success_callback)&&this.props.success_callback(e),this.reset_new_application());var t},t.prototype.showProfileCompletionPromptFirst=function(e){return this.show_profile_completion_prompt(!0),this.callback_data(e),$("#new-application-modal").on("hide.bs.modal",(t=this,function(){return t.proceed()}));var t},t.prototype.createApplication=function(){if(this.new_application().user_id()){if("Students"===Handshake.passed.current_user_type||"InterviewSchedule"!==this.new_application().applicable_type()||this.new_application().original_job_id())return this.new_application().document_ids(this.selected_documents()),this.show_profile_completion_prompt_after&&this.show_profile_completion_prompt?this.new_application().create(this.showProfileCompletionPromptFirst):($("#new-application-modal").on("show").modal("hide"),this.new_application().create(this.createApplicationSuccess)),!1;Handshake.Helpers.notifyError("Please select a job.")}else Handshake.Helpers.notifyError("Please select a student.")},t.prototype.proceed=function(){return this.show_profile_completion_prompt_after&&this.createApplicationSuccess(this.callback_data()),this.show_profile_completion_prompt(!1),$.ajax({url:"/users/"+Handshake.passed.current_user_id+".json",type:"PUT",data:{user:{student_metadatum_attributes:{profile_completion_cta_in_apply_flow_shown_at:new Date}}}})},t.prototype.update_profile_and_proceed=function(){return this.show_profile_completion_prompt_after&&$("#new-application-modal").on("show").modal("hide"),window.open("/users/"+Handshake.passed.current_user_id),this.proceed()},t}(),Handshake.ApplicationsManageView=function(){function t(t){var s,i,n,o,r,a,c,l,u,h,_;this.props=t,this.save_interview_schedule=e(this.save_interview_schedule,this),this.remove_invite=e(this.remove_invite,this),this.set_invites=e(this.set_invites,this),this.load_invites=e(this.load_invites,this),this.selectApplication=e(this.selectApplication,this),this.selected_primaries=e(this.selected_primaries,this),this.on_new_application_created=e(this.on_new_application_created,this),this.sortingIsEnabled=ko.observable(!0),this.interview_schedule=ko.observable(Handshake.Resource.resourceFromObject(this.props.interview_schedule)),this.jobApplicationsView=new Handshake.ApplicationsView({application_change_callback:this.load_invites,interview_page:!0,interview_schedule:this.interview_schedule,document_types:this.props.document_types,show_interview_schedule_groups:this.props.show_interview_schedule_groups,interview_schedule_employer_deadline_enabled:this.props.interview_schedule_employer_deadline_enabled}),this.jobApplicationsView.searchable.pushHistoryOnSearchPerformed(!1),this.jobApplicationsView.searchable.ajax_download_path=this.interview_schedule().member_route("applications_csv_download"),this.userReviewModalView=new Handshake.UserReviewModalView({jobApplicationsView:this.jobApplicationsView,interview_schedule:this.interview_schedule()}),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.props.show_fully_qualified_modal&&(this.fully_qualified_modal=new Handshake.FullyQualifiedModal),this.props.quick_add_students_enabled&&(this.newApplicationModal=new Handshake.CreateApplicationView({success_callback:this.on_new_application_created,applicable:this.props.interview_schedule})),this.applications=ko.observableArray([]),this.primary_applications=ko.computed((s=this,function(){return ko.utils.arrayFilter(s.jobApplicationsView.applications(),function(e){return e.is_primary()})})),this.primary_danger=ko.computed((i=this,function(){return i.interview_schedule().primary_selections_count()>i.interview_schedule().interview_slots_size()})),this.interview_slots_summary=ko.computed((n=this,function(){return"primaries selected for "+n.interview_schedule().interview_slots_size()+" interview slots"})),this.days_until_primary_signup_start=ko.computed((o=this,function(){return Math.abs(o.interview_schedule().days_until_primary_signup_start())})),this.days_until_primary_signup_start_label=ko.computed((r=this,function(){var e;return 1===(e=r.interview_schedule().days_until_primary_signup_start())?"day until primaries are notified":-1===e?"day ago primaries were notified":e<-1?"days ago primaries were notified":0===e?"primaries will be notified today":"days until primaries are notified"})),this.days_until_alternate_signup_start=ko.computed((a=this,function(){return Math.abs(a.interview_schedule().days_until_alternate_signup_start())})),this.days_until_alternate_signup_start_label=ko.computed((c=this,function(){var e;return 1===(e=c.interview_schedule().days_until_alternate_signup_start())?"day until alternates are notified":-1===e?"day ago alternates were notified":e<-1?"days ago alternates were notified":0===e?"alternates will be notified today":"days until alternates are notified"})),this.slots_taken_text=ko.computed((l=this,function(){var e;return(e=l.interview_schedule().primary_slots_student_ids_count())+" / "+(l.selected_primaries()-e)+" / "+l.interview_schedule().primary_slots_count()})),this.slots_taken_tooltip_text=ko.computed((u=this,function(){var e,t,s,i;return s=u.interview_schedule().primary_slots_student_ids_count(),e=u.selected_primaries()-s,i=(t=u.interview_schedule().primary_slots_count())-s,s+" "+(1===s?"primary has":"primaries have")+" already chosen their "+(1===s?"slot":"slots")+".<br><br>"+e+" additional "+(1===e?"primary":"primaries")+" selected for "+i+" remaining "+(1===i?"slot":"slots")+" out of "+t+" total."})),$("#slots-taken-tooltip").tooltip({placement:"top",title:(h=this,function(){return h.slots_taken_tooltip_text()}),html:"true"}),$("#user-review-modal").on("hide.bs.modal",(_=this,function(){return _.jobApplicationsView.searchable.performSearch()})),this.load_invites()}return t.prototype.on_new_application_created=function(e){return this.jobApplicationsView.searchable.currentResult.unshift(e.application),this.jobApplicationsView.applications.unshift(Handshake.Resource.resourceFromObject(e.application)),this.newApplicationModal.reset_new_application(),Handshake.Helpers.notifySuccess("Application successfully created.")},t.prototype.selected_primaries=function(){return this.interview_schedule().is_preselect()?this.primary_applications().length:this.applications().length},t.prototype.selectApplication=function(e){return $(".qualifications-tooltip").tooltip("hide"),$(".qualification-preference").tooltip("hide"),this.userReviewModalView.selectUser(e.user_id())},t.prototype.load_invites=function(){return Handshake.operations.add_worker(),$.getJSON("/interview_schedules/"+this.interview_schedule().id()+"/applicants.json",(e=this,function(t){return Handshake.operations.remove_worker(),t.success?(e.set_invites(t.applications),e.interview_schedule().primary_slots_student_ids(t.primary_slots_data.primary_slots_student_ids),e.interview_schedule().primary_slots_student_ids_count(t.primary_slots_data.primary_slots_student_ids_count),e.interview_schedule().primary_slots_count(t.primary_slots_data.primary_slots_count)):e.applications([])}));var e},t.prototype.set_invites=function(e){return this.applications(Handshake.Resource.resourcesFromArray(e,Handshake.Applications.Application))},t.prototype.remove_invite=function(e,t){return this.sortingIsEnabled(!1),t.stopPropagation(),e.reset((s=this,function(e){return setTimeout(function(){return s.jobApplicationsView.searchable.performSearch()},500),e.success&&(s.interview_schedule().update(e.interview_schedule),s.set_invites(e.interviewing_applications)),s.sortingIsEnabled(!0)}));var s},t.prototype.save_interview_schedule=function(){return this.interview_schedule().save()},t}(),Handshake.UserReviewModalView=function(){function t(t){var s,i;this.props=t,this.addTabChangeHandlers=e(this.addTabChangeHandlers,this),this.loadApplicantInformation=e(this.loadApplicantInformation,this),this.selectApplication=e(this.selectApplication,this),this.selectUser=e(this.selectUser,this),this.selectDocument=e(this.selectDocument,this),this.onSelectionChange=e(this.onSelectionChange,this),this.selectPreviousUser=e(this.selectPreviousUser,this),this.selectNextUser=e(this.selectNextUser,this),this.disableNext=e(this.disableNext,this),this.disablePrevious=e(this.disablePrevious,this),this.working=ko.observable(!1),this.jobApplicationsView=this.props.jobApplicationsView,this.interview_schedule=this.props.interview_schedule,this.userIdList=ko.computed((s=this,function(){return _.uniq(_.map(s.jobApplicationsView.applications(),function(e){return e.user_id()}))})),this.show_documents_tab=ko.observable(!1),this.can_take_notes=ko.observable(!1),this.notesPage=new Handshake.Notes.NotesView(null,!1),this.selectedUser=ko.observable(),this.selectedUserApplications=ko.observableArray([]),this.selectedDocument=ko.observable(),this.selectedUserDocuments=ko.observable({}),this.documentCount=ko.observable(0),this.educationsView=new Handshake.Educations.EducationsView({current_user_type:Handshake.passed.current_user_type,current_user_institution_id:Handshake.passed.current_user_institution_id}),this.workExperiencesView=new Handshake.WorkExperiences.WorkExperiencesView({}),this.extraCurricularsView=new Handshake.ExtraCurriculars.ExtraCurricularsView({}),this.projectsView=new Handshake.Projects.ProjectsView({}),this.externalLinksView=new Handshake.ExternalLinks.ExternalLinksView({}),this.coursesView=new Handshake.Courses.CoursesView({}),this.organizationMembershipsView=new Handshake.OrganizationMemberships.OrganizationMembershipsView({}),this.skillsView=new Handshake.Skills.SkillsView({}),this.showPdf=ko.computed((i=this,function(){return i.selectedDocument()&&i.selectedDocument().pdf_file_name()}))}return t.prototype.disablePrevious=function(){return 0===_.indexOf(this.userIdList(),this.selectedUser().id())},t.prototype.disableNext=function(){return _.indexOf(this.userIdList(),this.selectedUser().id())===this.userIdList().length-1},t.prototype.selectNextUser=function(){var e;return(e=_.indexOf(this.userIdList(),this.selectedUser().id())+1)>=this.userIdList().length&&(e=0),this.selectUser(this.userIdList()[e])},t.prototype.selectPreviousUser=function(){var e;return(e=_.indexOf(this.userIdList(),this.selectedUser().id())-1)<0&&(e=0),this.selectUser(this.userIdList()[e])},t.prototype.onSelectionChange=function(e,t){return this.selectDocument(t.val)},t.prototype.selectDocument=function(e){return _.each(this.selectedUserDocuments(),(t=this,function(s){return _.each(s,function(s){var i;if((null!=s&&null!=(i=s.id)?i.toString():void 0)===(null!=e?e.toString():void 0))return t.selectedDocument(Handshake.Resource.resourceFromObject(s,Handshake.Documents.Document))})}));var t},t.prototype.selectUser=function(e){return this.loadApplicantInformation("/interview_schedules/"+this.interview_schedule.id()+"/applicant_information?user_id="+e)},t.prototype.selectApplication=function(e){return this.loadApplicantInformation("/applications/"+e.id()+"/applicant_information")},t.prototype.loadApplicantInformation=function(e){return this.working(!0),$.getJSON(e,(t=this,function(e){return e.success?(t.selectedUser(new Handshake.Users.User(e.user)),t.selectedUserApplications(Handshake.Resource.resourcesFromArray(e.applications)),t.selectedUserDocuments(e.application_documents),t.selectedDocument(null),t.documentCount(0),_.each(t.selectedUserApplications(),function(e){return t.selectedDocument()||t.selectDocument(e.document_ids()[0]),t.documentCount(t.documentCount()+e.document_ids().length)}),t.show_documents_tab(e.show_documents_tab),t.can_take_notes(e.can_take_notes),t.can_take_notes()?t.notesPage.setNoteable(e.user):t.notesPage.setNoteable(null),t.educationsView.items(Handshake.Resource.resourcesFromArray(e.educations)),t.workExperiencesView.items(Handshake.Resource.resourcesFromArray(e.work_experiences)),t.extraCurricularsView.items(Handshake.Resource.resourcesFromArray(e.extra_curriculars)),t.projectsView.items(Handshake.Resource.resourcesFromArray(e.projects)),t.externalLinksView.items(Handshake.Resource.resourcesFromArray(e.external_links)),t.organizationMembershipsView.items(Handshake.Resource.resourcesFromArray(e.organization_memberships)),t.skillsView.items(Handshake.Resource.resourcesFromArray(e.skills)),t.working(!1),t.updateModalSize(),t.addTabChangeHandlers(),setTimeout(function(){if(t.selectedDocument())return $("#application-document-select").select2("val",t.selectedDocument().id())},200)):_.has(e,"error")?Handshake.Helpers.notifyError(e.error):void 0}));var t},t.prototype.updateModalSize=function(){return $("#user-review-modal").data("bs.modal").handleUpdate()},t.prototype.addTabChangeHandlers=function(){if(!this.tabChangeHandlersAdded)return this.tabChangeHandlersAdded=!0,$(".nav-tabs a").on("shown.bs.tab",this.updateModalSize)},t}(),Handshake.WithdrawApplicationsModal=function(){function t(t){var s;this.confirm=e(this.confirm,this),this.load_data=e(this.load_data,this),this.open_modal=e(this.open_modal,this),this.modal_has_opened=!1,this.interview_schedules=ko.observableArray([]),this.jobs=ko.observableArray([]),this.application=ko.observable(),this.loading=ko.observable(!0),this.application.subscribe((s=this,function(e){if(s.jobs([]),s.interview_schedules([]),s.modal_has_opened&&e)return s.load_data()})),this.application(t)}return t.prototype.open_modal=function(){return this.modal_has_opened=!0,this.application()&&this.load_data(),$("#withdraw-applications-modal").modal("show")},t.prototype.load_data=function(){return this.loading(!0),this.application().relevant_applicables((e=this,function(t){return e.jobs(Handshake.Resource.resourcesFromArray(t.jobs)),e.interview_schedules(Handshake.Resource.resourcesFromArray(t.interview_schedules)),e.loading(!1)}));var e},t.prototype.confirm=function(){return this.application().destroy(function(){return Handshake.SPA.navigate(window.location.path)},function(){return window.setTimeout(function(){return Handshake.SPA.navigate(window.location.path)},3e3)})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.AppointmentBlockInstances={},Handshake.AppointmentBlockInstances.AppointmentBlockInstance=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({start_date:{send:!0},end_date:{send:!0},appointment_block:{belongs_to:Handshake.AppointmentBlocks.AppointmentBlock}})}return e(s,t),s.type="AppointmentBlockInstance",s.underscore="appointment_block_instance",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.AppointmentBlocks={},Handshake.AppointmentBlocks.AppointmentBlock=function(s){function i(t){this.dateRange=e(this.dateRange,this),this.name=e(this.name,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},start_time:{send:!0},end_time:{send:!0},start_date:{send:!0},end_date:{send:!0},walkin:{send:!0},repeating:{send:!0},unavailable:{send:!0},day_of_week:{send:!0},appointment_medium_ids:{send:!0,array:!0,convert_empty_to_blank:!0},appointment_type_ids:{array:!0},appointment_type_names:{},block_appointment_type_ids:{array:!0,send:!0,convert_empty_to_blank:!0},user_name:{},moment_time_zone:{send:!0},external_event_name:{}})}return t(i,s),i.type="AppointmentBlock",i.underscore="appointment_block",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i.prototype.name=function(){return this.repeating()||moment(new Date(this.start_date())).format("YYYY-MM-DD")===moment(new Date(this.end_date())).format("YYYY-MM-DD")?Handshake.Helpers.dayOfWeekText(this.day_of_week())+" from "+Handshake.Helpers.startToEndTime(new Date(this.start_time()),new Date(this.end_time()),this.moment_time_zone(),"to"):""+Handshake.Helpers.startToEnd("full_date_time",new Date(this.start_time()),new Date(this.end_time()),this.moment_time_zone(),"to")},i.prototype.dateRange=function(){if(this.start_date()&&this.end_date())return window.Handshake.Helpers.startToEndDate(new Date(this.start_date()),new Date(this.end_date()),this.moment_time_zone(),"to")},i}(Handshake.Resource),Handshake.EditAppointmentBlockView=function(){function t(t){this.props=t,this.adjustTimeToToday=e(this.adjustTimeToToday,this),this.submit=e(this.submit,this),this.props&&this.props.appointment_block&&(this.appointment_block=Handshake.Resource.resourceFromObject(this.props.appointment_block))}return t.prototype.submit=function(){return this.appointment_block.update({start_time:this.adjustTimeToToday(this.appointment_block.start_time()),end_time:this.adjustTimeToToday(this.appointment_block.end_time())}),this.appointment_block.isNew()?this.appointment_block.create(function(e){return Handshake.Helpers.notifySuccess("Appointment Block was successfully added.",function(){return window.location=e.redirect_path})}):this.appointment_block.save(function(e){return Handshake.Helpers.notifySuccess("Appointment Block was successfully updated.",function(){return window.location=e.redirect_path})})},t.prototype.adjustTimeToToday=function(e){var t,s;return t=moment.tz(e,"YYYY-MM-DDTHH:mm:ssZZ",this.appointment_block.moment_time_zone()),s=moment(),t.year(s.year()).month(s.month()).date(s.date()).startOf("minute"),t.format("YYYY-MM-DDTHH:mm:ssZZ")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.AppointmentCategories={},Handshake.AppointmentCategories.AppointmentCategory=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},created_at:{},description:{},school_id:{},appointment_type_ids:{array:!0},appointment_type_names:{array:!0},sort_order:{send:!0}}),this.appointment_type_names_joined=ko.computed((s=this,function(){return s.appointment_type_names().join(", ")}))}return t(i,s),i.type="AppointmentCategory",i.underscore="appointment_category",i.underscore_plural="appointment_categories",i.prototype.calculated_sort_order=function(){return null===this.sort_order()?Infinity:this.sort_order()},i.prototype.nested_route=function(){return"/schools/"+school_id()+"/"},i}(Handshake.Resource),Handshake.EditAppointmentCategoryView=function(){function e(){}return e}(),Handshake.IndexAppointmentCategoriesView=function(){function t(t){this.props=t,this.reSort=e(this.reSort,this),this.appointmentCategories=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.appointment_categories))}return t.prototype.reSort=function(e){var t,s;return s=[],t=e.item,ko.utils.arrayForEach(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),t.ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.AppointmentMediums={},Handshake.AppointmentMediums.AppointmentMedium=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},school_id:{send:!0},sort_order:{send:!0},appointments_count:{}})}return t(i,s),i.type="AppointmentMedium",i.underscore="appointment_medium",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.AppointmentMediumManageView=function(){function t(t){this.props=t,this.reSort=e(this.reSort,this),this.addMedium=e(this.addMedium,this),this.new_name=ko.observable(""),this.school_mediums=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.school_mediums)),this.school_id=this.props.school_id}return t.prototype.addMedium=function(){return this.new_medium=new Handshake.AppointmentMediums.AppointmentMedium({name:this.new_name(),school_id:this.school_id}),this.new_medium.create((e=this,function(){return e.school_mediums.unshift(e.new_medium),e.new_name("")}));var e},t.prototype.reSort=function(e){var t,s;return s=[],t=e.item,ko.utils.arrayForEach(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),t.ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.AppointmentPreferences={},Handshake.AppointmentPreferences.AppointmentPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({student_visible:{send:!0},auto_approve_student_requests:{send:!0},enabled:{send:!0},walkin_appointment_medium_id:{send:!0},institution_label_name:{},institution_label_id:{send:!0},must:{send:!0},custom_message:{send:!0},request_period:{send:!0}})}return e(s,t),s.type="AppointmentPreference",s.underscore="appointment_preference",s}(Handshake.Resource),Handshake.EditAppointmentPreferencesView=function(){function e(e){var t;this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.appointment_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.appointment_preference)),this.preferenceLabelView=new Handshake.Labels.PreferenceLabelView(this.appointment_preference),this.request_period_time=ko.observable(0),
+this.appointment_preference().request_period()%1440==0?this.request_period_time(1440):+this.appointment_preference().request_period()%60==0?this.request_period_time(60):this.request_period_time(1),this.request_period_value=ko.observable(+this.appointment_preference().request_period()/this.request_period_time()),ko.computed((t=this,function(){return t.appointment_preference().request_period(+t.request_period_value()*+t.request_period_time())}))}return e.prototype.cancel=function(){return this.appointment_preference().revert(),this.request_period_value(0),this.request_period_time(1)},e.prototype.submit=function(){return this.appointment_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.AppointmentTypes={},Handshake.AppointmentTypes.AppointmentType=function(s){function i(t){this.post_survey_path=e(this.post_survey_path,this),this.advisor_survey_path=e(this.advisor_survey_path,this),this.pre_survey_path=e(this.pre_survey_path,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},created_at:{},description:{send:!0},length:{send:!0},maximum_open_appointments:{send:!0},school_id:{},pre_message:{send:!0},pre_survey_id:{send:!0},pre_survey_name:{},post_message:{send:!0},post_survey_id:{send:!0},post_survey_name:{},advisor_survey_id:{send:!0},advisor_survey_name:{},appointment_category_ids:{send:!0,convert_empty_to_blank:!0,array:!0},appointment_category_names:{array:!0},sort_order:{send:!0},drop_in_enabled:{send:!0},student_screen:{send:!0,nested_attribute:!0,belongs_to:Handshake.StudentScreens.StudentScreen}})}return t(i,s),i.type="AppointmentType",i.underscore="appointment_type",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i.prototype.pre_survey_path=function(){return new Handshake.Surveys.Survey({id:this.pre_survey_id()}).entity_path},i.prototype.advisor_survey_path=function(){return new Handshake.Surveys.Survey({id:this.advisor_survey_id()}).entity_path},i.prototype.post_survey_path=function(){return new Handshake.Surveys.Survey({id:this.post_survey_id()}).entity_path},i}(Handshake.Resource),Handshake.EditAppointmentTypeView=function(s){function i(t,s){var n,o,r;this.props=t,this.unmount=e(this.unmount,this),this.cancel=e(this.cancel,this),this.saveChanges=e(this.saveChanges,this),this.create_action=e(this.create_action,this),this.appointment_type=ko.observable(new Handshake.AppointmentTypes.AppointmentType(this.props.appointment_type)),i.__super__.constructor.call(this,this.appointment_type),this.appointment_type().isNew()&&this.currentPage(0),this.finalizeText(null),this.showDeleteButton(this.appointment_type().isPersisted()),this.create_text("Create Appointment Type"),this.on_details_page=ko.computed((n=this,function(){return 0===n.currentPage()})),this.on_requirements_page=ko.computed((o=this,function(){return 1===o.currentPage()})),this.pageOptions.push(new Handshake.PagedForm.Page({index:0,name:"Details",description:""})),this.pageOptions.push(new Handshake.PagedForm.Page({index:1,name:"Requirements",description:""})),this.reselectPage(),this.student_screen_view=new Handshake.StudentScreenView($.extend({},this.props.student_screen_params,{student_screen:this.appointment_type().student_screen}),s),this.appointment_type().student_screen().isChanged.subscribe((r=this,function(){if(r.appointment_type().student_screen().isChanged())return r.appointment_type().markAsChanged("student_screen")}))}return t(i,s),i.prototype.create_action=function(){return this.appointment_type().create((e=this,function(){return Handshake.Helpers.notifySuccess("Appointment Type was successfully created."),Handshake.SPA.navigate(e.appointment_type().base_route("index"))}));var e},i.prototype.saveChanges=function(){return this.appointment_type().save((e=this,function(){return Handshake.Helpers.notifySuccess("Appointment Type was successfully updated."),Handshake.SPA.navigate(e.appointment_type().base_route("index"))}));var e},i.prototype.cancel=function(){return Handshake.SPA.navigate(this.appointment_type().base_route("index"))},i.prototype.unmount=function(){return this.unmount_paged_form()},i}(Handshake.PagedForm.View),Handshake.IndexAppointmentTypesView=function(){function t(t){var s;this.props=t,this.clearSearch=e(this.clearSearch,this),this.reSort=e(this.reSort,this),this.appointment_category_name_for_type=e(this.appointment_category_name_for_type,this),this.searchCallback=e(this.searchCallback,this),this.appointment_categories=ko.observableArray(_.sortBy(Handshake.Resource.resourcesFromArray(this.props.appointment_categories),function(e){return e.calculated_sort_order()})),this.appointmentTypes=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"schools",this.searchCallback),this.searchable.defaultParams({per_page:400}),this.searchable.showPagination(!1),this.enableSorting=ko.computed((s=this,function(){return 0===s.searchable.allSelectedValues().length})),this.searchable.initialSetup("UniversityAppointmentTypes")}return t.prototype.searchCallback=function(e){return this.appointmentTypes(Handshake.Resource.resourcesFromArray(e.results))},t.prototype.appointment_category_name_for_type=function(e){var t;return t=_.filter(this.appointment_categories(),function(t){return-1!==t.appointment_type_ids().indexOf(e.id())}),_.map(t,function(e){return e.name()}).join(", ")},t.prototype.reSort=function(e){var t,s;return s=[],t=e.item,ko.utils.arrayForEach(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),t.ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},t.prototype.clearSearch=function(){return this.searchable.filterView.uncheckAll(),this.searchable.booleanView.reset(),this.searchable.rangeView.reset()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Appointments={},Handshake.Appointments.Appointment=function(s){function i(t){var s,n,o,r,a,c,l;this.equals=e(this.equals,this),this.cancel=e(this.cancel,this),this.reset=e(this.reset,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.tag_class=e(this.tag_class,this),this.student_path=e(this.student_path,this),i.__super__.constructor.call(this,t),this.attributes({description:{send:!0},student_id:{send:!0},student_name:{},student_first_name:{},student_last_name:{},school_id:{send:!0},staff_member_id:{send:!0},staff_member_name:{},staff_member_first_name:{},staff_member_last_name:{},staff_member_photo_url:{},status:{send:!0},basic_status:{},appointment_medium_id:{send:!0},time_zone:{send:!0},moment_time_zone:{},start_date:{send:!0},end_date:{send:!0},walkin:{send:!0},appointment_type_id:{send:!0,convert_undefined_to_null:!0},appointment_type_name:{},appointment_medium_name:{},created_at:{},checked_in:{},pre_survey_response:{belongs_to:Handshake.SurveyResponses.SurveyResponse,send:!0,nested_attribute:!0},drop_in_id:{send:!0},office_location_id:{convert_undefined_to_null:!0,send:!0},potential_appointment_medium_ids:{array:!0}}),this.nice_start_date_time=Handshake.TimeZoneHelper.dateTime("long_date_time",this.start_date(),this.moment_time_zone()),this.nice_end_date_time=Handshake.TimeZoneHelper.dateTime("long_date_time",this.end_date(),this.moment_time_zone()),this.calendar_start_to_end_time=ko.computed((s=this,function(){if(Handshake.passed.current_user_time_zone)return moment(s.start_date()).dayOfYear()===moment(s.end_date()).dayOfYear()?Handshake.Helpers.startToEndTime(s.start_date(),s.end_date(),Handshake.passed.current_user_time_zone):Handshake.Helpers.startToEndSmart("very_short_date_time",s.start_date(),s.end_date(),Handshake.passed.current_user_time_zone)})),this.name=ko.computed((n=this,function(){return"Appointment with "+n.staff_member_name()})),this.fancy_status=ko.computed((o=this,function(){return"no_show"===o.status()?"no show":o.status()})),this.start_date_formatted=ko.computed({read:(a=this,function(){return Handshake.Helpers.toDateTimePicker(a.start_date(),a.moment_time_zone())}),write:(r=this,function(e){return r.start_date(Handshake.Helpers.fromDateTimePicker(e,r.moment_time_zone()))})}),this.end_date_formatted=ko.computed({read:(l=this,function(){return Handshake.Helpers.toDateTimePicker(l.end_date(),l.moment_time_zone())}),write:(c=this,function(e){return c.end_date(Handshake.Helpers.fromDateTimePicker(e,c.moment_time_zone()))})})}return t(i,s),i.type="Appointment",i.underscore="appointment",i.prototype.student_path=function(){return this.student_id()?new Handshake.Users.User({id:this.student_id()}).entity_path:null},i.prototype.tag_class=function(){return{"tag--default":"cancelled"===this.status(),"tag--primary":"completed"===this.status(),"tag--success":"approved"===this.status(),"tag--info":"started"===this.status(),"tag--warning":"requested"===this.status(),"tag--danger":"declined"===this.status(),"tag--interrupted":"no_show"===this.status()}},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.cancel=function(e){return this.ajax_call({type:"POST",method:"cancel",on_member:!0,action:"cancel",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.equals=function(e){return this.staff_member_id()===e.staff_member_id()&&this.start_date()===e.start_date()&&this.end_date()===e.end_date()&&this.appointment_type_id()===e.appointment_type_id()},i}(Handshake.Resource),Handshake.RequestAppointmentView=function(){function t(t){var s,i,n,o,r,a,c,l,u,h,d,p,m,f,b,y,v,g,k,w;this.props=t,this.notifyFailure=e(this.notifyFailure,this),this.destroyAppointmentSuccess=e(this.destroyAppointmentSuccess,this),this.updateAppointmentSuccess=e(this.updateAppointmentSuccess,this),this.createAppointmentSuccess=e(this.createAppointmentSuccess,this),this.destroyAppointment=e(this.destroyAppointment,this),this.finalizeAction=e(this.finalizeAction,this),this.confirmOverlappingAppointments=e(this.confirmOverlappingAppointments,this),this.datePopoverSelected=e(this.datePopoverSelected,this),this.select_day=e(this.select_day,this),this.fetch_availability=e(this.fetch_availability,this),this.handle_keydown_next_week=e(this.handle_keydown_next_week,this),this.choose_next_week=e(this.choose_next_week,this),this.handle_keydown_previous_week=e(this.handle_keydown_previous_week,this),this.choose_previous_week=e(this.choose_previous_week,this),this.updateChoices=e(this.updateChoices,this),this.topBarChanged=e(this.topBarChanged,this),this.appointment_params=e(this.appointment_params,this),this.selectAppointmentType=e(this.selectAppointmentType,this),this.selectAppointmentCategory=e(this.selectAppointmentCategory,this),this.chooseSlot=e(this.chooseSlot,this),this.unchooseSlot=e(this.unchooseSlot,this),this.skipSlotsView=e(this.skipSlotsView,this),this.appointmentStudentSelect2Options=e(this.appointmentStudentSelect2Options,this),this.pushHistory=e(this.pushHistory,this),this.on_pop_state=e(this.on_pop_state,this),this.unmount=e(this.unmount,this),this.set_option_disable=e(this.set_option_disable,this),this.appointmentCategoryChoices=ko.observableArray(_.sortBy(Handshake.Resource.resourcesFromArray(this.props.appointment_categories),function(e){return e.calculated_sort_order()})),this.appointmentTypeChoices=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.appointment_types)),this.allAppointmentTypeChoices=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.appointment_types)),this.advisorChoices=ko.observableArray([]),this.slotChoices=ko.observableArray([]),this.loadingSlots=ko.observable(!1),this.overlappingAppointments=ko.observableArray([]),this.overlappingAppointmentsConfirmed=ko.observable(!1),this.initial_load=!0,this.appointment_mediums=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.appointment_mediums)),this.selected_appointment_medium_id=ko.observable(),this.selected_appointment_medium=ko.computed((n=this,function(){return _.find(n.appointment_mediums(),function(e){return e.id()===n.selected_appointment_medium_id()})})),this.available_appointment_medium_ids=ko.observableArray(),this.appointment_medium_choices=ko.computed((o=this,function(){return _.filter(o.appointment_mediums(),function(e){return-1!==o.available_appointment_medium_ids().indexOf(e.id())})})),this.divider="----------",this.time_zone_choices=ko.observableArray(this.props.us_time_zone_options.concat(this.divider,this.props.non_us_time_zone_options)),this.selected_time_zone=ko.observable(this.props.time_zone_default),this.selected_moment_time_zone=ko.observable(this.props.moment_time_zone_default),this.props.office_locations&&(this.office_locations=ko.observableArray(this.props.office_locations)),this.min_date=ko.computed((r=this,function(){if("Students"===Handshake.passed.current_user_type)return moment.tz(r.selected_moment_time_zone()).format("YYYY-MM-DD")})),this.selectedAppointmentCategoryId=ko.observable(),this.selectedAppointmentCategory=ko.computed((a=this,function(){return _.find(a.appointmentCategoryChoices(),function(e){return e.id()===a.selectedAppointmentCategoryId()})})),this.originalAppointment=ko.observable(Handshake.Resource.resourceFromObject(this.props.appointment)),this.appointment=ko.observable(Handshake.Resource.resourceFromObject(this.props.appointment)),this.appointment().staff_member_id()&&this.advisorChoices().push({id:this.appointment().staff_member_id(),name:this.appointment().staff_member_name()}),this.slotHasBeenChosen=ko.observable(this.appointment().isPersisted()||this.appointment().walkin()),this.slotHasBeenChosen()&&(s=_.find(this.appointmentCategoryChoices(),(c=this,function(e){return-1!==e.appointment_type_ids().indexOf(c.appointment().appointment_type_id())})))&&this.selectedAppointmentCategoryId(s.id()),this.appointmentMediumChoices=ko.computed((l=this,function(){return"Students"!==Handshake.passed.current_user_type?l.props.appointment_mediums:l.slotHasBeenChosen()&&l.appointment().potential_appointment_medium_ids().length>0?_.filter(l.props.appointment_mediums,function(e){return-1!==l.appointment().potential_appointment_medium_ids().indexOf(e.id)}):l.props.appointment_mediums})),this.takeSurveyView=new Handshake.TakeSurveyView({redirectOnSubmit:!1,redirectToIndex:!1,use_finish_button:!1,appointment_id:this.props.appointment.id,appointment_type:this.props.appointment_type}),this.props.appointment.pre_survey_response_id&&(this.takeSurveyView.survey_response(new Handshake.SurveyResponses.SurveyResponse({id:this.props.appointment.pre_survey_response_id})),this.takeSurveyView.survey_response().fetch((u=this,function(e){return u.takeSurveyView.survey(new Handshake.Surveys.Survey(e.survey)),u.takeSurveyView.current_page(u.takeSurveyView.survey().survey_pages()[0])}))),this.availableAppointmentTypes=ko.computed((h=this,function(){return h.selectedAppointmentCategory()?_.filter(h.allAppointmentTypeChoices(),function(e){return _(h.selectedAppointmentCategory().appointment_type_ids()).contains(+e.id())}):h.allAppointmentTypeChoices()})),this.selectedAppointmentTypeId=ko.observable(this.appointment().appointment_type_id()),this.selectedAppointmentType=ko.computed((d=this,function(){return _.find(d.appointmentTypeChoices(),function(e){return e.id()===d.selectedAppointmentTypeId()})})),this.selectedAdvisorId=ko.observable(this.appointment().staff_member_id()),this.selectedAdvisor=ko.computed((p=this,function(){return _.find(p.advisorChoices(),function(e){return e.id===p.selectedAdvisorId()})})),this.appointmentCategoriesExist=ko.computed((m=this,function(){return m.appointmentCategoryChoices().length>0})),this.topFilterClass=ko.computed((f=this,function(){return f.appointmentCategoriesExist()?"col-md-3":"col-md-4"})),this.finalizeText=ko.observable(null),this.appointment().isNew()?"Students"===Handshake.passed.current_user_type?this.finalizeText("Request"):this.finalizeText("Create"):this.finalizeText("Update"),this.instances_available_hash=ko.observable({}),this.pickedDay=ko.observable(),this.appointment().isPersisted()?(this.timeline_week_start=ko.observable(moment.tz(this.appointment().start_date(),this.selected_moment_time_zone()).startOf("week")),this.pickedDay(moment.tz(this.appointment().start_date(),this.selected_moment_time_zone()))):(this.timeline_week_start=ko.observable(moment.tz(this.selected_moment_time_zone()).startOf("week")),this.pickedDay(this.timeline_week_start())),this.timeline_date_options=ko.computed((b=this,function(){return _.map(_.range(0,7),function(e){var t;return{date:t=moment.tz(b.timeline_week_start(),b.selected_moment_time_zone()).add(e,"days").format("YYYY-MM-DD"),instances_available:b.instances_available_hash()[moment.tz(t,b.selected_moment_time_zone()).format("YYYY-MM-DD")]||!1}})})),this.categoryHasBeenChosen=ko.computed((y=this,function(){return y.slotHasBeenChosen()||0===y.appointmentCategoryChoices().length||!!y.selectedAppointmentCategory()})),i=this.slotHasBeenChosen()?2:0===this.appointmentCategoryChoices().length?1:0,this.currentPageIndex=ko.observable(i),this.pushHistory(i),this.onCategoryPage=ko.computed((v=this,function(){return 0===v.currentPageIndex()})),this.onTypePage=ko.computed((g=this,function(){return 1===g.currentPageIndex()})),this.onSlotDetailsPage=ko.computed((k=this,function(){return 2===k.currentPageIndex()})),$("#appointment_description").on("blur",(w=this,function(){return w.appointment().description.force_validation()})),$(window).on("popstate",this.on_pop_state)}return t.prototype.set_option_disable=function(e,t){return ko.applyBindingsToNode(e,{disable:t===this.divider},t)},t.prototype.unmount=function(){return $(window).off("popstate",this.on_pop_state)},t.prototype.on_pop_state=function(e){var t,s,i;if(t=e.originalEvent,!window.is_ie9&&(null!=(s=t.state)&&null!=(i=s.data)?i.handshake_appointments:void 0)&&t.state&&t.state.data&&null!==t.state.data.index)return this.currentPageIndex(t.state.data.index)},t.prototype.pushHistory=function(e){if(!window.is_ie9)return this.currentPageIndex(e),history.pushState({turbolinks:!1,data:{handshake_appointments:!0,pushStateOverridden:!0,index:e}},"New Appointment","")},t.prototype.appointmentStudentSelect2Options=function(e){return{placeholder:"Choose a student...",url:"/students",secondary_property:"institution_managed_email",full_data:function(t){return t?(e.student_id(t.id),e.student_name(t.name)):{id:e.student_id(),name:e.student_name()}}}},t.prototype.skipSlotsView=function(){if("Career Services"===Handshake.passed.current_user_type)return this.slotHasBeenChosen(!0)},t.prototype.unchooseSlot=function(){return this.appointment().appointment_type_id()?this.fetch_availability(this.pickedDay(),!0):this.currentPageIndex(1),this.appointment(this.originalAppointment()),this.slotHasBeenChosen(!1)},t.prototype.chooseSlot=function(e){return this.appointment().update({id:this.originalAppointment().id(),student_id:this.originalAppointment().student_id(),student_name:this.originalAppointment().student_name(),start_date:e.start_date(),end_date:e.end_date(),time_zone:e.time_zone(),moment_time_zone:e.moment_time_zone(),walkin:e.walkin(),staff_member_id:e.staff_member_id(),staff_member_name:e.staff_member_name(),staff_member_photo_url:e.staff_member_photo_url(),appointment_type_id:e.appointment_type_id(),appointment_type_name:e.appointment_type_name(),potential_appointment_medium_ids:e.potential_appointment_medium_ids()}),this.originalAppointment().isPersisted()&&(this.appointment().status(this.originalAppointment().status()),this.appointment().appointment_medium_id(this.originalAppointment().appointment_medium_id()),this.appointment().appointment_medium_name(this.originalAppointment().appointment_medium_name()),this.appointment().description(this.originalAppointment().description())),this.selectedAppointmentType().pre_survey_id()&&this.takeSurveyView.build_survey_response(this.selectedAppointmentType().pre_survey_id()),this.slotHasBeenChosen(!0)},t.prototype.selectAppointmentCategory=function(e){return this.selectedAppointmentCategoryId(e.id()),this.pushHistory(1)},t.prototype.selectAppointmentType=function(e){return this.selectedAppointmentTypeId(e.id()),this.initial_load=!0,this.fetch_availability(this.pickedDay(),!0)},t.prototype.appointment_params=function(){var e;return e={date:this.pickedDay().format("YYYY-MM-DD"),time_zone:this.selected_time_zone(),appointment_type_ids:this.selectedAppointmentTypeId(),staff_member_ids:this.selectedAdvisorId(),appointment_medium_ids:this.selected_appointment_medium_id()},null!=this.selectedAppointmentCategoryId()&&(e.appointment_category_id=this.selectedAppointmentCategoryId()),e},t.prototype.topBarChanged=function(){return this.fetch_availability(this.pickedDay(),!0)},t.prototype.updateChoices=function(e){var t,s,i;if(null==e&&(e=!1),!this.initial_load){if(this.slotHasBeenChosen(!1),this.categoryHasBeenChosen()&&this.selectedAppointmentType())return t=this.appointment_params(),e&&delete t.appointment_category_id,this.loadingSlots(!0),Handshake.operations.add_worker(),$.ajax({type:"GET",url:"/appointments/available_time_slots",dataType:"json",data:t,success:(i=this,function(e){return e.error&&Handshake.Helpers.notifyError(e.error),i.selected_moment_time_zone(e.moment_time_zone),i.slotChoices(Handshake.Resource.resourcesFromArray(e.available_time_slots)),i.advisorChoices(e.available_advisors),i.available_appointment_medium_ids(e.available_appointment_medium_ids),i.appointmentTypeChoices(Handshake.Resource.resourcesFromArray(e.available_appointment_types)),i.appointmentCategoryChoices(_.sortBy(Handshake.Resource.resourcesFromArray(e.available_appointment_categories),function(e){return e.calculated_sort_order()}))}),complete:(s=this,function(){return s.loadingSlots(!1),Handshake.operations.remove_worker()})});Handshake.Helpers.notifyError("Please select a category and type before continuing.")}},t.prototype.choose_previous_week=function(){return this.fetch_availability(this.timeline_week_start().subtract(1,"week"))},t.prototype.handle_keydown_previous_week=function(e,t){var s;return"Enter"!==(s=t.key||t.keyCode)&&13!==s||this.choose_previous_week()},t.prototype.choose_next_week=function(){return this.fetch_availability(this.timeline_week_start().add(1,"week"))},t.prototype.handle_keydown_next_week=function(e,t){var s;return"Enter"!==(s=t.key||t.keyCode)&&13!==s||this.choose_next_week()},t.prototype.fetch_availability=function(e,t){var s,i,n,o;return null==t&&(t=!1),(i=this.appointment_params()).date=moment.tz(e,this.selected_moment_time_zone()).format("YYYY-MM-DD"),i.time_zone=this.selected_time_zone(),i.initial_load=this.initial_load,s=new Handshake.Appointments.Appointment,t&&this.loadingSlots(!0),s.ajax_call({type:"GET",on_member:!1,action:"weekly_availability",method:"weekly_availability",data:i,success:(o=this,function(e){if(o.selected_moment_time_zone(e.moment_time_zone),o.instances_available_hash({}),_.each(e.results,function(e){return o.instances_available_hash()[moment.tz(e,o.selected_moment_time_zone()).format("YYYY-MM-DD")]=!0}),o.timeline_week_start(moment.tz(e.start_date,o.selected_moment_time_zone())),o.initial_load&&(e.first_available_date?o.pickedDay(moment.tz(e.first_available_date,o.selected_moment_time_zone())):o.appointment()&&o.appointment().isPersisted()?o.pickedDay(moment.tz(o.appointment().start_date(),o.selected_moment_time_zone())):o.pickedDay(moment.tz(o.selected_moment_time_zone()).startOf("day")),o.initial_load=!1),1===o.currentPageIndex()&&o.pushHistory(2),t)return o.updateChoices()}),failure:(n=this,function(){return n.updateChoices(!0)})})},t.prototype.select_day=function(e){if(e.instances_available)return this.pickedDay(moment.tz(e.date,this.selected_moment_time_zone())),this.updateChoices()},t.prototype.datePopoverSelected=function(e){return this.pickedDay(moment.tz(e.date,this.selected_moment_time_zone()).startOf("day")),this.fetch_availability(this.pickedDay(),!0)},t.prototype.confirmOverlappingAppointments=function(){return this.overlappingAppointmentsConfirmed(!0),this.finalizeAction()},t.prototype.finalizeAction=function(){var e,t;if(t=!1,this.takeSurveyView.survey_response()?(this.appointment().isPersisted()||this.takeSurveyView.completed())&&(this.appointment().pre_survey_response(this.takeSurveyView.survey_response()),"Students"===Handshake.passed.current_user_type?this.appointment().pre_survey_response().user_id(Handshake.passed.current_user_id):this.appointment().pre_survey_response().user_id(this.appointment().student_id()),t=!0):(this.appointment().pre_survey_response(null),t=!0),t)return this.appointment().isNew()?(e={},this.overlappingAppointmentsConfirmed()&&(e.overlap_confirmed=!0),this.props.drop_in&&(e.drop_in_id=this.props.drop_in.id),"Students"!==Handshake.passed.current_user_type||this.appointment().description.force_validation()?this.appointment().create(this.createAppointmentSuccess,this.notifyFailure,e):(Handshake.Helpers.notifyError("Please let us know what we can help you with."),$("#appointment_description")[0].focus())):this.appointment().save(this.updateAppointmentSuccess,this.notifyFailure)},t.prototype.destroyAppointment=function(){if(confirm("Are you sure you want to delete this appointment?"))return this.appointment().destroy(this.destroyAppointmentSuccess,this.notifyFailure)},t.prototype.createAppointmentSuccess=function(){return"Students"===Handshake.passed.current_user_type?Handshake.Helpers.notifySuccess("Appointment successfully requested"):Handshake.Helpers.notifySuccess("Appointment successfully created"),window.location.href=this.appointment().entity_path},t.prototype.updateAppointmentSuccess=function(){return Handshake.Helpers.notifySuccess("Appointment successfully updated"),window.location.href=this.appointment().entity_path},t.prototype.destroyAppointmentSuccess=function(){return Handshake.Helpers.notifySuccess("Appointment successfully destroyed"),window.location.href=this.appointment().base_route("index")},t.prototype.notifyFailure=function(e){if(null!=e.overlapping_appointments&&(this.overlappingAppointments(Handshake.Resource.resourcesFromArray(e.overlapping_appointments)),$("#overlapping-appointments-warning-modal").modal("show")),"invalid_appointment_type"===e.reason&&this.unchooseSlot(),"invalid_appointment_medium"===e.reason)return this.unchooseSlot(),Handshake.Helpers.notifyError("Appointment could not be saved because you selected an invalid appointment medium.")},t}(),Handshake.AppointmentsManageView=function(){function t(t){var s,i,n,o,r,a,c,l,u,h,d,p,m,f,b,y,v;this.props=t,this.saveAdvisorViewPreferences=e(this.saveAdvisorViewPreferences,this),this.toggleAllAdvisors=e(this.toggleAllAdvisors,this),this.loadAppointmentMediums=e(this.loadAppointmentMediums,this),this.loadAppointmentTypes=e(this.loadAppointmentTypes,this),this.hidePopover=e(this.hidePopover,this),this.showPopover=e(this.showPopover,this),this.calculatedTimeStyle=e(this.calculatedTimeStyle,this),this.setStartAndEndTime=e(this.setStartAndEndTime,this),this.loadDataSuccess=e(this.loadDataSuccess,this),this.loadData=e(this.loadData,this),this.refresh=e(this.refresh,this),this.setPickedDay=e(this.setPickedDay,this),this.chooseNextDay=e(this.chooseNextDay,this),this.choosePreviousDay=e(this.choosePreviousDay,this),this.window_resized=e(this.window_resized,this),this.unmount=e(this.unmount,this),setInterval((i=this,function(){return i.refresh()}),this.REFRESH_RATE),this.initialLoad=!0,this.loading=ko.observable(!1),this.pickedDay=ko.observable(),s=moment(),this.pickedDay(s),ko.computed((n=this,function(){if(n.pickedDay(),!n.initialLoad)return n.loadData()})).extend({throttle:200}),this.user_can_manage_all_appointments=ko.observable(!1),(new Handshake.Appointments.Appointment).ajax_call({type:"GET",method:"calendar",on_member:!1,action:"calendar",data:{date:s.toISOString(),initial_load:!0},success:(o=this,function(e){return $(".kiosk-button").on("click",function(){return $("#checkin-modal").modal("show"),!1}),o.loadDataSuccess(e)})}),this.timeframe=ko.observable({start_time:moment().startOf("day"),end_time:moment().endOf("day")}),this.appointment_type_options=ko.observableArray(),this.appointment_medium_options=ko.observableArray(),this.daysOfWeekOptions=ko.observableArray(),$("#date-button").popover({html:!0,content:(r=this,function(){var e;return e=$("#date-picker-popover").clone(!0).removeClass("hidden"),$("#date-picker",e).datetimepicker({minView:"month",startView:"month",autoclose:!0,showMeridian:!0,todayBtn:!0,todayHighlight:!0}).on("changeDate",function(e){return r.setPickedDay(moment(e.date)),$("#date-button").popover("hide")}),e})}).click(function(e){return e.preventDefault()}),this.time_header=ko.computed((a=this,function(){var e,t,s;return s=a.timeframe().start_time.startOf("hour"),e=a.timeframe().end_time.diff(s,"hours"),_.map(function(){t=[];for(var s=0;0<=e?s<=e:s>=e;0<=e?s++:s--)t.push(s);return t}.apply(this),function(e){return s.clone().add(e,"hours").format("h a")})})),this.advisorViews=ko.observableArray(),this.sortedAdvisorViews=ko.computed((c=this,function(){return c.advisorViews().slice().sort(function(e,t){var s,i;return(s=e.user.first_name().toUpperCase())<(i=t.user.first_name().toUpperCase())?-1:s>i?1:0})})),this.filteredAdvisorViews=ko.computed((l=this,function(){return ko.utils.arrayFilter(l.sortedAdvisorViews(),function(e){return!e.hidden()})})),this.scoped_advisor_ids=ko.computed((u=this,function(){var e;return e=[],_(u.advisorViews()).each(function(t){if(!t.hidden())return e.push(parseInt(t.user.id()))}),e})),this.allAdvisorsShown=ko.computed((h=this,function(){return h.scoped_advisor_ids().length===h.advisorViews().length})),this.selectedView=ko.observable(),this.recalculate_size=ko.observable(),this.calculatedCalendarStyle=ko.computed((d=this,function(){return d.recalculate_size(),{height:$(window).height()-$(".appointment-calendar-wrapper").offset().top-40+"px"}})),this.columnWidth=ko.computed((p=this,function(){var e;return p.recalculate_size(),e=($(".appointment-calendar-wrapper").width()-85)/p.filteredAdvisorViews().length,Math.max(140,e)})),this.widthStyle=ko.computed((m=this,function(){return{width:m.columnWidth()+"px"}})),this.calculatedTimeContainerStyle=ko.computed((f=this,function(){return{height:(f.timeframe().end_time-f.timeframe().start_time)/3600*f.PIXELS_PER_MINUTE+"px"}})),this.calculatedWidth=ko.computed((b=this,function(){return b.columnWidth()*b.filteredAdvisorViews().length})),this.calculatedAdvisorContainerStyle=ko.computed((y=this,function(){return{width:y.calculatedWidth()+Handshake.Helpers.scrollBarSize().width+"px"}})),this.calculatedGridContainerStyle=ko.computed((v=this,function(){return{width:v.calculatedWidth()+"px"}})),$(window).on("resize",this.window_resized)}return t.PIXELS_PER_MINUTE=3,t.prototype.DEFAULT_APPOINTMENT_LENGTH=30,t.prototype.REFRESH_RATE=3e5,t.prototype.unmount=function(){return $(window).off("resize",this.window_resized)},t.prototype.window_resized=function(){return this.recalculate_size.notifySubscribers()},t.prototype.choosePreviousDay=function(){return this.setPickedDay(moment(this.pickedDay()).subtract(1,"day"))},t.prototype.chooseNextDay=function(){return this.setPickedDay(moment(this.pickedDay()).add(1,"day"))},t.prototype.setPickedDay=function(e){return this.hidePopover(),this.pickedDay(e),this.setStartAndEndTime(e)},t.prototype.refresh=function(){return this.loadData()},t.prototype.loadData=function(){return this.loading(!0),Handshake.operations.add_worker(),$.ajax({type:"GET",url:"/appointments/calendar.json",dataType:"json",data:{date:this.pickedDay().toISOString()},success:(t=this,function(e){return t.loadDataSuccess(e)}),complete:(e=this,function(){return Handshake.operations.remove_worker(),e.loading(!1)})});var e,t},t.prototype.loadDataSuccess=function(e){
var t,s,i;return null!=e.days_of_week&&this.daysOfWeekOptions(e.days_of_week),this.initialLoad||"Admins"===Handshake.passed.current_user_type?(s=[],_.each(e.advisor_data,(i=this,function(e){return s.push(new Handshake.Appointments.AppointmentsManageAdvisorView(i,i.timeframe,e))})),this.user_can_manage_all_appointments(e.user_can_manage_all_appointments)):(s=this.advisorViews(),_.each(s,function(t){return t.setFullData(e.advisor_data[t.user.id()])})),this.advisorViews(s),this.initialLoad&&(t=60*(moment().hours()-this.timeframe().start_time.hours())*Handshake.AppointmentsManageView.PIXELS_PER_MINUTE,$(".appointment-calendar-grid-scrollable").scrollTop(t),this.initialLoad=!1),this.loadAppointmentTypes(),this.loadAppointmentMediums()},t.prototype.setStartAndEndTime=function(e){return this.timeframe({start_time:moment(e).startOf("day"),end_time:moment(e).endOf("day")})},t.prototype.calculatedTimeStyle=function(){return{height:60*Handshake.AppointmentsManageView.PIXELS_PER_MINUTE+"px"}},t.prototype.showPopover=function(e,t,s,i){return this.selectedView(t),"create"===e?this.selectedView().showCreatePopover(s,i):"edit"===e?this.selectedView().showEditAppointmentBlockPopover(s,i):this.selectedView().showDetailsPopover(s,i)},t.prototype.hidePopover=function(){return $(".appointment-popover").hide(),$(".selecting").height(this.DEFAULT_APPOINTMENT_LENGTH*Handshake.AppointmentsManageView.PIXELS_PER_MINUTE).hide()},t.prototype.loadAppointmentTypes=function(){return $.getJSON("/schools/"+Handshake.passed.current_user_institution_id+"/appointment_types?simple_search=true&per_page=400",(e=this,function(t){return t.unshift(""),e.appointment_type_options(t)}));var e},t.prototype.loadAppointmentMediums=function(){return $.getJSON("/schools/"+Handshake.passed.current_user_institution_id+"/appointment_mediums?simple_search=true",(e=this,function(t){return t.unshift(""),e.appointment_medium_options(t)}));var e},t.prototype.toggleAllAdvisors=function(e,t){var s;return s=this.allAdvisorsShown(),_.each(this.advisorViews(),function(e){return e.hidden(s)}),t.stopPropagation()},t.prototype.saveAdvisorViewPreferences=function(){return Handshake.operations.add_worker(),$.ajax({type:"POST",url:"/appointments/save_advisor_view_preferences.json",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({scoped_advisors:this.scoped_advisor_ids()}),success:function(e){return!0===e.success?Handshake.Helpers.notifySuccess("Preferences succesfully saved."):Handshake.Helpers.notifyError("Preferences could not be saved.")},complete:function(){return Handshake.operations.remove_worker()}})},t.prototype.calendarScrolled=function(e,t){return $(".appointment-calendar-staff-scrollable")[0].scrollLeft=t.target.scrollLeft,$(".appointment-calendar-times-scrollable")[0].scrollTop=t.target.scrollTop},t}(),Handshake.Appointments.AppointmentsManageAdvisorView=function(){function t(t,s,i){var n,o,r,a,c;this.parentView=t,this.timeframe=s,this.attach_appointment_tooltips=e(this.attach_appointment_tooltips,this),this.attach_appointment_block_tooltips=e(this.attach_appointment_block_tooltips,this),this.calculatedBlockStyle=e(this.calculatedBlockStyle,this),this.calculatedAppointmentStyle=e(this.calculatedAppointmentStyle,this),this.calculateGridStyle=e(this.calculateGridStyle,this),this.toggleView=e(this.toggleView,this),this.setFullData=e(this.setFullData,this),this.setAppointments=e(this.setAppointments,this),this.deleteAppointmentBlock=e(this.deleteAppointmentBlock,this),this.saveAppointmentBlock=e(this.saveAppointmentBlock,this),this.createAppointmentBlockSuccess=e(this.createAppointmentBlockSuccess,this),this.createAppointmentBlock=e(this.createAppointmentBlock,this),this.createAppointmentFailure=e(this.createAppointmentFailure,this),this.createAppointmentSuccess=e(this.createAppointmentSuccess,this),this.createAppointment=e(this.createAppointment,this),this.showPopover=e(this.showPopover,this),this.showDetailsPopover=e(this.showDetailsPopover,this),this.showEditAppointmentBlockPopover=e(this.showEditAppointmentBlockPopover,this),this.showCreatePopover=e(this.showCreatePopover,this),this.setNewAppointmentBlockLength=e(this.setNewAppointmentBlockLength,this),this.setNewAppointmentLength=e(this.setNewAppointmentLength,this),this.new_appointment_creation_disabled=e(this.new_appointment_creation_disabled,this),this.resetNewAppointmentBlock=e(this.resetNewAppointmentBlock,this),this.resetNewAppointment=e(this.resetNewAppointment,this),this.adjustTimeToToday=e(this.adjustTimeToToday,this),this.confirmOverlappingAppointments=e(this.confirmOverlappingAppointments,this),this.loadUserAppointmentTypes=e(this.loadUserAppointmentTypes,this),this.setSelectingStyle=e(this.setSelectingStyle,this),this.hidden=ko.observable(i.hidden||!1),this.user=Handshake.Resource.resourceFromObject(i.user),this.appointment_block_instances=ko.observableArray(),this.appointments=ko.observableArray(),this.block_day_of_week=ko.observable(),this.block_start_time=ko.observable(),this.block_end_time=ko.observable(),this.block_start_date=ko.observable(),this.block_end_date=ko.observable(),this.block_start_time.subscribe((r=this,function(){if(moment(r.block_start_time(),"H:mm a")<moment(r.block_end_time(),"H:mm a"))return r.setSelectingStyle()})),this.block_end_time.subscribe((a=this,function(){if(moment(a.block_start_time(),"H:mm a")<moment(a.block_end_time(),"H:mm a"))return a.setSelectingStyle()})),this.setFullData(i),this.selectedAppointment=ko.observable(),this.resetNewAppointment(),this.selectedAppointmentBlock=ko.observable(),this.overlappingAppointments=ko.observableArray([]),this.overlapping_appointments_confirmed=ko.observable(!1),o=this.timeframe().end_time.diff(this.timeframe().start_time,"minutes"),n=Math.ceil(o/this.INTERVAL),this.grid_item_blocks=new Array(n),this.appointment_type_options=ko.observableArray(),this.new_appointment_saving=ko.observable(!1),this.studentSelect2Options={placeholder:"Choose a student...",url:"/students?simple_search=true",secondary_property:"institution_managed_email",full_data:(c=this,function(e,t){return e||t?(c.newAppointment.student_id(e?e.id:null),c.newAppointment.student_name(e?e.name:null)):{id:c.newAppointment.student_id(),name:c.newAppointment.student_name()}})},this.loadUserAppointmentTypes()}return t.prototype.PIXELS_PER_MINUTE=Handshake.AppointmentsManageView.PIXELS_PER_MINUTE,t.prototype.INTERVAL=30,t.prototype.NEW_APPOINTMENT_MINUTE_ROUNDING=5,t.prototype.setSelectingStyle=function(){var e,t,s,i;return s=this.adjustTimeToToday(moment(this.block_start_time(),"H:mm a")),e=this.adjustTimeToToday(moment(this.block_end_time(),"H:mm a")),t=$(".selecting").position(),(i=this.calculateGridStyle(s,e)).left=t.left+"px",i.width=this.parentView.columnWidth()+"px",$(".selecting").attr("style",_.map(i,function(e,t){return t+":"+e}).join("; ")).show()},t.prototype.loadUserAppointmentTypes=function(){return $.getJSON("/users/"+this.user.id()+"/user_appointment_types?active=true",(e=this,function(t){var s;return s=_.map(t.user_appointment_types,function(e){return{id:e.appointment_type_id,name:e.appointment_type_name,type:"AppointmentType"}}),e.appointment_type_options(Handshake.Resource.resourcesFromArray(_.uniq(s,function(e){return e.id}))),e.resetNewAppointmentBlock()}));var e},t.prototype.confirmOverlappingAppointments=function(){return this.overlapping_appointments_confirmed(!0),this.createAppointment(this.create_appointment_action)},t.prototype.adjustTimeToToday=function(e){var t;return e=moment(e),(t=moment(this.timeframe().start_time)).hours(e.hours()),t.minutes(e.minutes()),t},t.prototype.resetNewAppointment=function(){return this.newAppointment=new Handshake.Appointments.Appointment({staff_member_id:this.user.id(),school_id:this.user.institution_id(),moment_time_zone:Handshake.passed.current_user_time_zone_name})},t.prototype.resetNewAppointmentBlock=function(){return this.newAppointmentBlock=new Handshake.AppointmentBlocks.AppointmentBlock({user_id:this.user.id(),repeating:!1,unavailable:!1,block_appointment_type_ids:_.uniq(_.map(this.appointment_type_options(),function(e){return e.id()}))})},t.prototype.new_appointment_creation_disabled=function(){if(this.newAppointment)return!this.newAppointment.student_id()||!this.newAppointment.appointment_medium_id()||this.new_appointment_saving()},t.prototype.setNewAppointmentLength=function(e){var t,s;return e?(s=(null!=(t=_.find(this.parentView.appointment_type_options(),function(t){return t.id===+e.id}))?t.length:void 0)||this.parentView.DEFAULT_APPOINTMENT_LENGTH,this.newAppointment.end_date(moment(this.newAppointment.start_date()).add(s,"minutes").toISOString()),this.newAppointment.appointment_type_id(e.id),$(".selecting").height(s*this.PIXELS_PER_MINUTE)):{id:null,text:null}},t.prototype.setNewAppointmentBlockLength=function(){var e,t;return e=30,_.each(this.parentView.appointment_type_options(),(t=this,function(s){if(-1!==t.newAppointmentBlock.appointment_type_ids().indexOf(""+s.id)&&s.length>e)return e=s.length})),this.block_end_time(moment(this.block_start_time(),"h:mm a").add(e,"minutes").format("h:mm a"))},t.prototype.showCreatePopover=function(e,t){var s,i,n,o,r;return this.parentView.hidePopover(),i=$(t.currentTarget).offset(),s=$(t.currentTarget).data("grid-cell-index")*this.INTERVAL,o=isNaN(s)?moment($(t.currentTarget).data("time")):this.timeframe().start_time.clone().add(s,"minutes"),r=(t.clientY+window.pageYOffset-i.top)/this.PIXELS_PER_MINUTE,r-=r%this.NEW_APPOINTMENT_MINUTE_ROUNDING,o.add(r,"minutes"),this.newAppointment.moment_time_zone(Handshake.passed.current_user_time_zone),this.newAppointment.start_date(o.toISOString()),this.newAppointment.end_date(moment(o).add(this.parentView.DEFAULT_APPOINTMENT_LENGTH,"minutes").toISOString()),moment(this.newAppointment.start_date())<moment().subtract(30,"minutes")?this.newAppointment.status("completed"):moment(this.newAppointment.start_date())<moment()?(this.newAppointment.status("started"),this.newAppointment.walkin(!0)):this.newAppointment.status("approved"),(n=$(t.currentTarget).offset()).top+=r*this.PIXELS_PER_MINUTE,$(".selecting").show().offset(n),i.left+=$(t.currentTarget).width()/2,i.top+=this.INTERVAL+r*this.PIXELS_PER_MINUTE,this.showPopover(".create-appointment-popover",i),this.block_day_of_week(moment(o).day()),this.block_start_time(moment(o).format("h:mm a")),this.block_end_time(moment(o).add(this.parentView.DEFAULT_APPOINTMENT_LENGTH,"minutes").format("h:mm a")),this.block_start_date(window.Handshake.Helpers.toDatePicker(moment(o))),this.block_end_date(window.Handshake.Helpers.toDatePicker(moment(o).add(6,"months")))},t.prototype.showEditAppointmentBlockPopover=function(e,t){var s,i;return this.parentView.hidePopover(),this.block_day_of_week(null),this.block_start_time(null),this.block_end_time(null),this.block_start_date(null),this.block_end_date(null),s=$(t.currentTarget).offset(),i=$(t.currentTarget).offset(),$(".selecting").show().offset(i),this.selectedAppointmentBlock(e.appointment_block()),this.block_day_of_week(this.selectedAppointmentBlock().day_of_week()),this.block_start_time(window.Handshake.Helpers.toTimePicker(this.selectedAppointmentBlock().start_time())),this.block_end_time(window.Handshake.Helpers.toTimePicker(this.selectedAppointmentBlock().end_time())),this.block_start_date(window.Handshake.Helpers.toDatePicker(this.selectedAppointmentBlock().start_date())),this.block_end_date(window.Handshake.Helpers.toDatePicker(this.selectedAppointmentBlock().end_date())),s.top+=15,s.left+=this.INTERVAL,this.showPopover(".edit-appointment-block-popover",s)},t.prototype.showDetailsPopover=function(e,t){var s;return this.parentView.hidePopover(),s=$(t.currentTarget).offset(),this.selectedAppointment(e),s.top+=15,s.left+=this.INTERVAL,this.showPopover(".details-appointment-popover",s)},t.prototype.showPopover=function(e,t){var s,i;return i=$(e).width(),t.left+i>$(window).width()&&(t.left-=i),s=$(e).height(),t.top+s>$(window).height()&&t.top-s>$(".global-header").height()&&(t.top-=s),$(e).show().offset(t)},t.prototype.createAppointment=function(e){var t;return this.create_appointment_action="string"==typeof e?e:void 0,this.new_appointment_saving(!0),$("#overlapping-appointments-warning-modal").modal("hide"),this.newAppointment.pre_survey_response(null),t={},this.overlapping_appointments_confirmed()&&(t.overlap_confirmed=!0),this.newAppointment.create(this.createAppointmentSuccess,this.createAppointmentFailure,t)},t.prototype.createAppointmentSuccess=function(e){var t;if(Handshake.Helpers.notifySuccess("Appointment created"),t=new Handshake.Appointments.Appointment(e.appointment),!this.create_appointment_action)return this.appointments.push(t),this.parentView.hidePopover(),this.resetNewAppointment(),this.resetNewAppointmentBlock(),this.new_appointment_saving(!1);window.location.href=t.member_route(this.create_appointment_action)},t.prototype.createAppointmentFailure=function(e){return null!=e.overlapping_appointments?(this.overlappingAppointments(Handshake.Resource.resourcesFromArray(e.overlapping_appointments)),$("#overlapping-appointments-warning-modal").modal("show")):this.notifyFailure(e),this.new_appointment_saving(!1)},t.prototype.createAppointmentBlock=function(){return this.newAppointmentBlock.update({day_of_week:this.block_day_of_week(),start_time:this.adjustTimeToToday(moment(this.block_start_time(),"H:mm a")).toISOString(),end_time:this.adjustTimeToToday(moment(this.block_end_time(),"H:mm a")).toISOString(),start_date:moment(this.block_start_date(),"YYYY-MM-DD").toISOString(),end_date:moment(this.block_end_date(),"YYYY-MM-DD").toISOString()}),this.newAppointmentBlock.create(this.createAppointmentBlockSuccess,this.notifyFailure)},t.prototype.createAppointmentBlockSuccess=function(){return this.parentView.hidePopover(),this.resetNewAppointmentBlock(),this.resetNewAppointment(),this.parentView.loadData()},t.prototype.saveAppointmentBlock=function(){return this.selectedAppointmentBlock().update({start_time:this.adjustTimeToToday(moment(this.block_start_time(),"H:mm a")).toISOString(),end_time:this.adjustTimeToToday(moment(this.block_end_time(),"H:mm a")).toISOString(),start_date:moment(this.block_start_date(),"YYYY-MM-DD").toISOString(),end_date:moment(this.block_end_date(),"YYYY-MM-DD").toISOString()}),this.selectedAppointmentBlock().save((e=this,function(){return e.parentView.hidePopover(),e.parentView.loadData(),e.selectedAppointmentBlock(null),e.resetNewAppointmentBlock(),e.resetNewAppointment()}));var e},t.prototype.deleteAppointmentBlock=function(){return this.selectedAppointmentBlock().destroy((e=this,function(){return e.parentView.hidePopover(),e.parentView.loadData(),e.selectedAppointmentBlock(null)}));var e},t.prototype.setAppointments=function(e){return this.appointments(Handshake.Resource.resourcesFromArray(e))},t.prototype.setFullData=function(e){return this.appointment_block_instances(Handshake.Resource.resourcesFromArray(e.appointment_block_instances)),this.setAppointments(e.appointments)},t.prototype.toggleView=function(e,t){return this.hidden(!this.hidden()),t.stopPropagation()},t.prototype.calculateGridStyle=function(e,t){var s,i;return e?(moment(e)<this.timeframe().start_time&&(e=this.timeframe().start_time),i=Math.abs(this.timeframe().start_time.diff(moment(e),"minutes")),t||(t=moment(e).add(this.INTERVAL,"minutes")),moment(t)>this.timeframe().end_time&&(t=this.timeframe().end_time),s=Math.abs(this.timeframe().start_time.diff(moment(t),"minutes")),{height:Math.abs(i-s)*this.PIXELS_PER_MINUTE+"px",top:i*this.PIXELS_PER_MINUTE+"px"}):{height:this.INTERVAL*this.PIXELS_PER_MINUTE+"px"}},t.prototype.calculatedAppointmentStyle=function(e,t){return $.extend({},this.calculateGridStyle(e,t),{width:this.parentView.columnWidth()-30+"px"})},t.prototype.calculatedBlockStyle=function(e,t){return $.extend({},this.calculateGridStyle(e,t),{width:this.parentView.columnWidth()+"px"})},t.prototype.attach_appointment_block_tooltips=function(){return $('.appointment-block .calendar-tooltip[data-toggle="tooltip"]').tooltip()},t.prototype.attach_appointment_tooltips=function(){return $('.appointment .walkin-indicator[data-toggle="tooltip"]').tooltip()},t.prototype.notifyFailure=function(e){if(!1===e.success)return Handshake.Helpers.notifyError(e.errors)},t}(),Handshake.AppointmentsView=function(){function t(){var t;this.declineAppointment=e(this.declineAppointment,this),this.searchCallback=e(this.searchCallback,this),this.appointments=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"appointments",this.searchCallback),"Career Services"===(t=Handshake.passed.current_user_type)||"Admins"===t?this.searchable.initialSetup("UniversityAppointments"):this.searchable.initialSetup("Appointment"),this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1,alert_level:"info",alert_message:"You may message the student to explain why you declined the appointment"})}return t.prototype.searchCallback=function(e){return this.appointments(Handshake.Resource.resourcesFromArray(e.results,Handshake.Appointments.Appointment))},t.prototype.declineAppointment=function(e){return e.decline((t=this,function(){return t.messagesView.new_conversation_to_user_id(e.student_id()),$("#send-message").modal("show")}));var t},t}(),Handshake.ShowAppointmentView=function(){function t(t){var s,i,n;this.props=t,this.declineAppointment=e(this.declineAppointment,this),this.cancelAppointment=e(this.cancelAppointment,this),this.chooseStudentActivity=e(this.chooseStudentActivity,this),this.chooseProfile=e(this.chooseProfile,this),this.chooseSurvey=e(this.chooseSurvey,this),this.chooseNotes=e(this.chooseNotes,this),this.chooseComments=e(this.chooseComments,this),this.success_callback=e(this.success_callback,this),this.chosenTab=ko.observable("notes"),this.looker_embedded_url=ko.observable(null),this.insightsView=new Handshake.InsightsView(this.props),"Students"===Handshake.passed.current_user_type&&this.chooseComments(),this.appointment=ko.observable(Handshake.Resource.resourceFromObject(this.props.appointment)),this.props.comments_enabled&&(this.commentsView=new Handshake.Comments.CommentsView(this.appointment)),this.props.notes_enabled&&(this.notesPage=new Handshake.Notes.NotesView(this.appointment(),!1)),this.props.profile_enabled&&(this.studentProfileLoaded=ko.observable(!1),this.profileView=new Handshake.ProfileView({})),this.props.show_survey&&(this.takeSurveyView=new Handshake.TakeSurveyView({redirectOnSubmit:!0,redirectToIndex:!1,survey_id:this.props.survey_id,use_finish_button:!0,appointment_id:this.props.appointment.id,appointment_type:this.props.appointment_type}),this.props.appointment.advisor_survey_response_id?(this.takeSurveyView.survey_response(new Handshake.SurveyResponses.SurveyResponse({id:this.props.appointment.advisor_survey_response_id})),this.takeSurveyView.survey_response().fetch((n=this,function(e){return n.takeSurveyView.survey(new Handshake.Surveys.Survey(e.survey)),n.takeSurveyView.current_page(n.takeSurveyView.survey().survey_pages()[0])}))):this.chosenTab("survey")),"Students"===Handshake.passed.current_user_type?this.props.can_cancel_appointment?(i="Please message your staff member to explain why you would like to cancel. Your appointment will not be cancelled until you send the message.",s="info"):(i="You may not cancel your appointment this close to the start date. Please message your staff member below to explain your reason for canceling.",s="danger"):"Career Services"===Handshake.passed.current_user_type&&(i="You may message the student to explain why you "+("requested"===this.appointment().status()?"declined":"cancelled")+" the appointment",s="info"),this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1,alert_level:s,alert_message:i,success_callback:this.success_callback,to_user_id:this.props.to_user_id})}return t.prototype.success_callback=function(){if("declined"===this.appointment().status());else if(this.props.can_cancel_appointment)return this.appointment().cancel()},t.prototype.chooseComments=function(){return this.chosenTab("comments")},t.prototype.chooseNotes=function(){return this.chosenTab("notes")},t.prototype.chooseSurvey=function(){return this.chosenTab("survey")},t.prototype.chooseProfile=function(){if(this.chosenTab("profile"),!this.studentProfileLoaded())return this.profileView.loadUser(this.appointment().student_id()),this.studentProfileLoaded(!0)},t.prototype.chooseStudentActivity=function(){if(this.chosenTab("student_activity"),!this.looker_embedded_url())return this.looker_embedded_url(this.props.looker_embed_url)},t.prototype.cancelAppointment=function(){return $("#send-message").modal("show")},t.prototype.declineAppointment=function(){return this.appointment().decline(function(){return $("#send-message").modal("show")})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Articles={},Handshake.Articles.Article=function(s){function i(t){var s,n,o,r;this.unpublish=e(this.unpublish,this),this.publish=e(this.publish,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({title:{send:!0},name:{},body:{send:!0},text_body:{},author_id:{send:!0,convert_undefined_to_null:!0},author_name:{},author_first_name:{},author_last_name:{},status:{send:!0},photo:{send:!0},photo_url:{},pinned_order:{send:!0},school_path:{},school_id:{},student_screen:{send:!0,nested_attribute:!0,belongs_to:Handshake.StudentScreens.StudentScreen},created_at:{}}),this.published=ko.computed((s=this,function(){return"published"===s.status()})),this.truncated_text=ko.computed((n=this,function(){return n.photo_url()?Handshake.Helpers.truncateString(n.text_body(),200):Handshake.Helpers.truncateString(n.text_body(),400)})),this.photo_present=ko.computed((o=this,function(){return o.photo_url()})),this.card_subtitle=ko.computed((r=this,function(){return"By "+r.author_name()+" - "+Handshake.TimeZoneHelper.dateTime("very_short_date",r.created_at())}))}return t(i,s),i.type="Article",i.underscore="article",i.prototype.nested_route=function(){return this.school_path()},i.prototype.publish=function(e){return this.ajax_call({type:"POST",method:"publish",on_member:!0,action:"publish",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.unpublish=function(e){return this.ajax_call({type:"POST",method:"unpublish",on_member:!0,action:"unpublish",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.ShowArticleView=function(){function t(t){var s;this.props=t,this.publish_item=e(this.publish_item,this),this.unpublish_item=e(this.unpublish_item,this),this.mouseout=e(this.mouseout,this),this.mouseover=e(this.mouseover,this),this.article=ko.observable(Handshake.Resource.resourceFromObject(this.props.article)),this.moused_over=ko.observable(!1),this.unpublish_text=ko.observable("Published"),this.publish_text=ko.observable("Not Published"),this.props.pins_enabled&&(s=ko.observable(),this.props.pin&&s(new Handshake.Pins.Pin(this.props.pin)),this.createPinModal=new Handshake.Pins.CreateModalView(this.article,s))}return t.prototype.mouseover=function(){return this.moused_over(!0),this.unpublish_text("Unpublish"),this.publish_text("Publish Article")},t.prototype.mouseout=function(){return this.moused_over(!1),this.unpublish_text("Published"),this.publish_text("Not Published")},t.prototype.unpublish_item=function(){return this.article().unpublish((e=this,function(t){return e.article().status(t.article.status)}));var e},t.prototype.publish_item=function(){return this.article().publish((e=this,function(t){return e.article().status(t.article.status)}));var e},t}(),Handshake.Articles.ArticlePagedForm=function(s){function i(t,s){var n,o,r,a;this.article=t,this.parent=s,this.cancel=e(this.cancel,this),this.saveChanges=e(this.saveChanges,this),this.finalizeAction=e(this.finalizeAction,this),this.unmount=e(this.unmount,this),i.__super__.constructor.call(this,ko.observable(this.article)),this.article.isNew()&&this.currentPage(0),this.finalizeText(this.article.isPersisted()?"Save Changes":"Create"),this.showDeleteButton(this.article.isPersisted()),this.onBasicsPage=ko.computed((n=this,function(){return 0===n.currentPage()})),this.onContentPage=ko.computed((o=this,function(){return 1===o.currentPage()})),this.onRequirementsPage=ko.computed((r=this,function(){return 2===r.currentPage()})),this.pageOptions.push(new Handshake.PagedForm.Page({index:0,name:"Basics",description:""})),this.pageOptions.push(new Handshake.PagedForm.Page({index:1,name:"Content",description:""})),this.pageOptions.push(new Handshake.PagedForm.Page({index:2,name:"Qualifications",description:""})),this.reselectPage(),this.delete_path=ko.computed((a=this,function(){return a.article.isNew()?"":a.article.entity_path}))}return t(i,s),i.prototype.unmount=function(){return this.unmount_paged_form()},i.prototype.finalizeAction=function(){return this.parent.submit()},i.prototype.saveChanges=function(){return this.parent.submit()},i.prototype.cancel=function(){return this.parent.cancel()},i}(Handshake.PagedForm.View),Handshake.ArticleFormView=function(s){function i(t,s){var n,o,r;this.props=t,this.element=s,this.change_image=e(this.change_image,this),this.setActiveCropView=e(this.setActiveCropView,this),this.article=new Handshake.Articles.Article({id:this.props.article_id,school_id:this.props.school_id,school_path:"/schools/"+this.props.school_id}),this.relevant_schools=ko.observableArray([]),this.parent_major_groups=ko.observableArray([]),this.selected_major_groups=ko.observableArray([]),this.selected_majors=ko.observableArray([]),this.paged_form_view=ko.observable(),i.__super__.constructor.call(this,{title:"",resource:this.article,form:!0,params:{data:{ajax:!0},success:(n=this,function(e){if(e.success)return n.article.school_path("/schools/"+n.article.school_id()),n.relevant_schools(Handshake.Resource.resourcesFromArray(e.relevant_schools)),n.parent_major_groups(e.parent_major_groups),e.selected_major_groups&&n.selected_major_groups(e.selected_major_groups),e.selected_majors&&n.selected_majors(e.selected_majors),n.paged_form_view(new Handshake.Articles.ArticlePagedForm(n.article,n))})}}),this.author_select2_options={placeholder:"Author...",url:"/users/career_services",simple_search:!1,allowClear:!0,full_data:(o=this,function(e){return e?(o.article.author_id(e.id),o.article.author_name(e.name)):{id:o.article.author_id(),name:o.article.author_name()}})},this.submit_text=ko.computed((r=this,function(){return r.article.isNew()?"Create Article":"Update Article"})),this.photo_view_active=!1,this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.change_image),this.photoCropView=new Handshake.UserImages.CropImageView(this.article,"logo","photo",".crop-logo",!1)}return t(i,s),i.prototype.setActiveCropView=function(){return this.photo_view_active=!0},i.prototype.change_image=function(e){return this.photo_view_active?(this.photoCropView.changeImage(e),this.photo_view_active=!1):this.userImageUploadView.defaultSaveImage(e)},i}(Handshake.ResourceForm),Handshake.ArticlesView=function(){function t(t){var s,i;this.props=t,this.massEmailJobsSuccess=e(this.massEmailJobsSuccess,this),this.searchCallback=e(this.searchCallback,this),this.articles=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"articles",this.searchCallback),"Career Services"!==Handshake.passed.current_user_type||this.props.use_new_mass_emails||this.searchable.bulkActions([{label:"Send Email to Students About Articles",type:"simple",key_action:!0,bulk_action:"mass_email_about_items",success:this.massEmailJobsSuccess}]),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s?this.searchable.initialSetup("UniversityArticles"):this.searchable.initialSetup("Article"),this.articles_groups_of_3=ko.computed((i=this,function(){return _.toArray(_.groupBy(i.articles(),function(e,t){return Math.floor(t/3)}))}))}return t.prototype.searchCallback=function(e){return this.articles(Handshake.Resource.resourcesFromArray(e.results,Handshake.Articles.Article))},t.prototype.massEmailJobsSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t}(),Handshake.Articles.Card=function(){function e(e){this.props=e,this.vm={type:"article",featured:this.props.featured,heading_params:{title:this.props.card.title(),title_path:this.props.card.entity_path,subtitle:this.props.card.card_subtitle(),title_length:40},content_params:{description:this.props.card.text_body(),description_length:120},action_params:{actions:[{text:"Read Article",url:this.props.card.entity_path,"class":"btn-brand-purple"}]}}}return e}(),Handshake.Articles.List=function(){function e(e){var t;this.vm=e,this.vm.articles=ko.observableArray().trackHasItems(),this.vm.resources_url="/schools/"+this.vm.school_id()+"/articles",$.getJSON(this.vm.resources_url+".json",{cache:!1,simple_search:!0,purpose:"student_dashboard"},(t=this,function(e){return t.vm.articles(Handshake.Resource.resourcesFromArray(e))}))}return e}(),Handshake.Articles.Preview=function(){function e(e){this.vm=e}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Attachments={},Handshake.Attachments.Attachment=function(s){function i(t){this.attachable_path=e(this.attachable_path,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{},attachable_id:{},attachable_type:{},name:{send:!0},smart_name:{},document_file_name:{send:!0},document_content_type:{send:!0},document_file_size:{},human_document_file_size:{},simple_type:{},document_type_name:{},document:{send:!0},fancy_status:{},type_icon:{},document_upload_status:{},s3_key:{send:!0}})}return t(i,s),i.type="Attachment",i.underscore="attachment",i.prototype.nested_route=function(){return""+this.attachable_path()},i.prototype.attachable_path=function(){return Handshake.Resource.resourceFromObject({id:this.attachable_id(),type:this.attachable_type()}).entity_path},i}(Handshake.Resource),Handshake.Attachments.CreateAttachmentView=function(){function t(t,s){this.attachable=t,null==s&&(s=null),this.poll_upload_status=e(this.poll_upload_status,this),this.setup_new_attachment_view=e(this.setup_new_attachment_view,this),this.reset_new_attachment=e(this.reset_new_attachment,this),this.deleteItem=e(this.deleteItem,this),this.attachments=ko.observableArray([]),this.new_attachment=ko.observable(),this.new_attachment_progress=ko.observable(0),this.attachments(Handshake.Resource.resourcesFromArray(s,Handshake.Attachments.Attachment)),this.reset_new_attachment(),this.setup_new_attachment_view()}return t.prototype.deleteItem=function(e){return e.destroy((t=this,function(){return t.attachments.remove(e)}));var t},t.prototype.reset_new_attachment=function(){return this.new_attachment(new Handshake.Attachments.Attachment({attachable_type:this.attachable().type,attachable_id:this.attachable().id()}))},t.prototype.setup_new_attachment_view=function(){return this.uploader=new Handshake.FileUploader({file_input:$("#new-attachment-upload-input"),record:this.new_attachment(),attachment_name:"document",upload_on_select:!0,success:(t=this,function(e){var s;return(s=t.new_attachment()).s3_key(e),s.create(function(){return t.attachments.push(s),t.reset_new_attachment(),t.uploader.record=t.new_attachment(),t.new_attachment_progress(100),t.poll_upload_status(s),setTimeout(function(){return t.new_attachment_progress(0)},250)},function(e){return t.new_attachment_progress(0),Handshake.Helpers.notifyError(e.errors.join(", "))})}),error:function(e){return Handshake.Helpers.notifyError(e.join(", "))},progress:(e=this,function(t){return e.new_attachment_progress(t)})});var e,t},t.prototype.poll_upload_status=function(e,t){return null==t&&(t=1e3),setTimeout((s=this,function(){return e.fetch(function(i){if("complete"!==i.attachment.document_upload_status)return s.poll_upload_status(e,t+1e3)})}),t);var s},t}(),Handshake.AttachmentFormView=function(){function t(t){this.props=t,this.submit=e(this.submit,this),this.attachment=new Handshake.Attachments.Attachment(this.props.attachment),this.document_s3_key=ko.observable(),this.uploaded_file_name=ko.observable()}
return t.prototype.handleDocumentChange=function(e,t){var s;return this.uploaded_file_name(null!=(s=t.currentTarget.files[0])?s.name:void 0)},t.prototype.submit=function(){var e;return $("#attachment_document").length>0&&$("#attachment_document")[0].files.length>0?new Handshake.FileUploader({file_input:$("#attachment_document"),record:this.attachment,attachment_name:"document",success:(e=this,function(t){return e.document_s3_key(t),$("#attachment_document").val(null),$("form").submit()}),error:function(e){return Handshake.Helpers.notifyError("Error uploading file: "+e.join(", "))}}).upload():$("form").submit(),!1},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Attendees={},Handshake.Attendees.Attendee=function(s){function i(t){var s,n,o;this.user_path=e(this.user_path,this),this.attendable_path=e(this.attendable_path,this),this.nested_route=e(this.nested_route,this),this.user_info=e(this.user_info,this),this.nice_amount_due=e(this.nice_amount_due,this),i.__super__.constructor.call(this,t),this.attributes({name:{},created_at:{},attendable_id:{send:!0},attendable_type:{send:!0},survey_response_id:{send:!0},registered:{send:!0},registered_at:{send:!0},registering:{send:!0},send_payment_reminder:{send:!0},checked_in:{send:!0},checked_in_at:{},invited_at:{},invited:{},waitlisted_at:{},waitlisted:{},event_name:{},user_name:{},amount_due:{},user_id:{send:!0},user:{belongs_to:Handshake.Users.User},user_type:{},hide_attendance:{send:!0},mass_email_id:{send:!0},qualified:{}}),this.checked_in_status=ko.computed((s=this,function(){return null!=s.checked_in_at()?"Checked in "+Handshake.Helpers.whenInWords(s.checked_in_at()):null!=s.checked_in()?"Checked In":void 0})),this.registered_at_status=ko.computed((n=this,function(){return null!=n.registered_at()?"Registered "+Handshake.Helpers.whenInWords(n.registered_at()):null!=n.registered_at()?"Registered":void 0})),this.waitlisted_at_status=ko.computed((o=this,function(){return null!=o.waitlisted_at()&&null!=o.waitlisted()?"Joined waitlist "+Handshake.Helpers.whenInWords(o.waitlisted_at()):null!=o.waitlisted()?"Waitlist":void 0}))}return t(i,s),i.type="Attendee",i.underscore="attendee",i.prototype.nice_amount_due=function(){return Handshake.passed.currency_symbol+parseFloat(this.amount_due()).toFixed(2)},i.prototype.user_info=function(){switch(this.user_type()){case"Students":return this.user_name()+" (Student)";case"Employers":return this.user_name()+" (Employer)";default:return this.user_name()+" ("+this.user_type()+")"}},i.prototype.nested_route=function(){return this.attendable_path()},i.prototype.attendable_path=function(){return Handshake.Resource.resourceFromObject({id:this.attendable_id(),type:this.attendable_type()}).entity_path},i.prototype.user_path=function(){return new Handshake.Users.User({id:this.user_id()}).entity_path},i}(Handshake.Resource),Handshake.CreateAttendeeView=function(){function t(t){this.props=t,this.submit=e(this.submit,this),this.create_failure=e(this.create_failure,this),this.create_success=e(this.create_success,this),this.attendee=ko.observable(null),this.attendable=Handshake.Resource.resourceFromObject(this.props.attendable),this.takeSurveyView=new Handshake.TakeSurveyView({callback:this.submit,survey_id:this.props.survey_id,use_finish_button:!0})}return t.prototype.create_success=function(e){return"Students"===Handshake.passed.current_user_type&&this.attendable.external_link()&&this.attendable.external_link().length>0?Handshake.SPA.navigate(this.attendable.external_link()):(this.attendee(Handshake.Resource.resourceFromObject(e.attendee)),Handshake.Helpers.notifySuccess(e.success_message),setTimeout(function(){return window.location.href=e.redirect_path},1500))},t.prototype.create_failure=function(e){var t;if(e.payment_required&&!e.errors)return"Stripe"===e.payment_method?(this.stripe_handler=StripeCheckout.configure({key:e.stripe_publishable_key,token:(t=this,function(e){return t.charge=new Handshake.Charges.Charge({chargeable_path:t.attendee().entity_path}),t.charge.update({external_customer_id:e.id,last_four_digits:e.card.last4,card_type:e.card.brand}),t.attendee().create(t.create_success,null,{charge:t.charge.getJSON(!1),stripeToken:e.id})})}),this.stripe_handler.open({name:"Pay Now",amount:e.amount_due,currency:Handshake.passed.default_currency.toLowerCase()})):"Cashnet"===e.payment_method?(Handshake.Helpers.notifySuccess("Redirecting to Cashnet."),window.location.href=e.redirect_url):"Touchnet"===e.payment_method?(Handshake.Helpers.notifySuccess("Redirecting to Touchnet."),function(e,t){var s;s=document.createElement("form"),document.body.appendChild(s),s.method=t,s.action=e,s.submit()}(e.redirect_url,"POST")):void 0},t.prototype.submit=function(e){return this.attendee(new Handshake.Attendees.Attendee({attendable_id:this.attendable.id(),attendable_type:this.attendable.type,survey_response_id:e.survey_response.id,user_id:Handshake.passed.current_user_id,mass_email_id:getUrlParams().mass_email_id})),this.attendee().create(this.create_success,this.create_failure)},t}(),Handshake.AttendUnattendView=function(){function t(t,s,i,n){var o;this.attendable=t,this.new_attendee_path=i,this.survey_response_id=n,this.leave_event=e(this.leave_event,this),this.join_event=e(this.join_event,this),this.create_failure=e(this.create_failure,this),this.create_success=e(this.create_success,this),this.mouseout=e(this.mouseout,this),this.mouseover=e(this.mouseover,this),this.toggleHideAttendance=e(this.toggleHideAttendance,this),this.attendee=ko.observable(),s&&this.attendee(Handshake.Resource.resourceFromObject(s)),this.moused_over=ko.observable(!1),this.leave_attendable_text=ko.observable("Registered"),this.hide_attendance=ko.observable(!1),s&&this.hide_attendance(this.attendee().hide_attendance()),this.button=ko.computed((o=this,function(){return o.attendee()&&o.attendee().registered()?"leave":o.attendable&&0===o.attendable.available_space()?"full":"join"})),"true"===location.search.split("auto_join=")[1]&&this.join_event()}return t.prototype.toggleHideAttendance=function(){return this.attendee().update({hide_attendance:!this.attendee().hide_attendance()}),this.attendee().save(function(){return Handshake.Helpers.notifySuccess("Your attendance privacy setting was successfully updated")},function(){return Handshake.Helpers.notifyError("Your attendance privacy setting update failed. Please try again.")}),!0},t.prototype.mouseover=function(){return this.moused_over(!0),this.leave_attendable_text("Leave Event")},t.prototype.mouseout=function(){return this.moused_over(!1),this.leave_attendable_text("Registered")},t.prototype.create_success=function(e){return"Students"===Handshake.passed.current_user_type&&this.attendable.external_link()&&this.attendable.external_link().length>0?Handshake.SPA.navigate(this.attendable.external_link()):(this.attendee(Handshake.Resource.resourceFromObject(e.attendee)),Handshake.Helpers.notifySuccess(e.success_message),e.conversion_tracking?setTimeout(function(){return window.location.href=e.redirect_path},1500):void 0)},t.prototype.create_failure=function(e){var t;if(e.payment_required&&!e.errors)return"Stripe"===e.payment_method?(this.stripe_handler=StripeCheckout.configure({key:e.stripe_publishable_key,token:(t=this,function(e){return t.charge=new Handshake.Charges.Charge({chargeable_path:t.attendee().entity_path}),t.charge.update({external_customer_id:e.id,last_four_digits:e.card.last4,card_type:e.card.brand}),t.attendee().create(t.create_success,null,{charge:t.charge.getJSON(!1),stripeToken:e.id})})}),this.stripe_handler.open({name:"Pay Now",amount:e.amount_due,currency:Handshake.passed.default_currency.toLowerCase()})):"Cashnet"===e.payment_method?(Handshake.Helpers.notifySuccess("Redirecting to Cashnet."),window.location.href=e.redirect_url):"Touchnet"===e.payment_method?(Handshake.Helpers.notifySuccess("Redirecting to Touchnet."),function(e,t){var s;s=document.createElement("form"),document.body.appendChild(s),s.method=t,s.action=e,s.submit()}(e.redirect_url,"POST")):void 0},t.prototype.join_event=function(){return"Students"===Handshake.passed.current_user_type&&this.attendable.attendee_form_required()&&!this.survey_response_id?Handshake.SPA.navigate(this.new_attendee_path):(this.attendee(new Handshake.Attendees.Attendee({attendable_id:this.attendable.id(),attendable_type:this.attendable.type,survey_response_id:this.survey_response_id,user_id:Handshake.passed.current_user_id})),this.attendee().create(this.create_success,this.create_failure))},t.prototype.leave_event=function(){return this.attendee().destroy((e=this,function(t){return e.attendee(Handshake.Resource.resourceFromObject(t.attendee)),Handshake.Helpers.notifySuccess("You have successfully left the event")}));var e},t}(),Handshake.ReviewAttendeesView=function(){function t(t){var s,i;this.props=t,this.resume_download=e(this.resume_download,this),this.resume_zip_download=e(this.resume_zip_download,this),this.resume_pdf_download=e(this.resume_pdf_download,this),this.csv_download=e(this.csv_download,this),this.registerFromWaitlist=e(this.registerFromWaitlist,this),this.checkedInChanged=e(this.checkedInChanged,this),this.select_attendee=e(this.select_attendee,this),this.loadMoreAttendees=e(this.loadMoreAttendees,this),this.bulkToggleChecks=e(this.bulkToggleChecks,this),this.chooseSurveyResponses=e(this.chooseSurveyResponses,this),this.chooseCharges=e(this.chooseCharges,this),this.chooseProfile=e(this.chooseProfile,this),this.registerFromWaitlistWithPayment=e(this.registerFromWaitlistWithPayment,this),this.removeAttendee=e(this.removeAttendee,this),this.attendable=Handshake.Resource.resourceFromObject(this.props.attendable),this.selected_attendee=ko.observable(null),this.attendees=ko.observableArray([]),this.moreToLoad=ko.observable(!0),this.loadingMoreAttendees=ko.observable(!1),this.filter=ko.observable(""),this.show_profile_tab=ko.observable(!1),this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,this.timeout=null,this.filter.subscribe((s=this,function(){return s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(function(){return s.loadMoreAttendees(!0)},300)})),this.picked_attendee_ids=ko.observableArray([]),this.allChecked=ko.computed((i=this,function(){return i.picked_attendee_ids().length===i.attendees().length})),this.loadMoreAttendees(),this.educationsView=new Handshake.Educations.EducationsView({current_user_type:Handshake.passed.current_user_type,current_user_institution_id:Handshake.passed.current_user_institution_id}),this.workExperiencesView=new Handshake.WorkExperiences.WorkExperiencesView({}),this.extraCurricularsView=new Handshake.ExtraCurriculars.ExtraCurricularsView({}),this.projectsView=new Handshake.Projects.ProjectsView({}),this.externalLinksView=new Handshake.ExternalLinks.ExternalLinksView({}),this.organizationMembershipsView=new Handshake.OrganizationMemberships.OrganizationMembershipsView({}),this.skillsView=new Handshake.Skills.SkillsView({}),this.chargesView=new Handshake.Charges.ChargesView(this.props.charges),this.surveyResponsesView=new Handshake.SurveyResponses.SurveyResponsesView,this.chosenTab=ko.observable("profile")}return t.prototype.removeAttendee=function(){return this.selected_attendee().destroy((e=this,function(){return e.attendees.remove(e.selected_attendee()),e.attendees().length>0?(e.selected_attendee(e.attendees()[0]),$("#remove-attendee").modal("hide")):Handshake.SPA.navigate(window.location)}));var e},t.prototype.registerFromWaitlistWithPayment=function(){return this.selected_attendee().update({registering:!0,send_payment_reminder:!0}),this.selected_attendee().save(),$("#register-from-wailtlist").modal("hide")},t.prototype.chooseProfile=function(){return this.chosenTab("profile")},t.prototype.chooseCharges=function(){return this.chosenTab("charges")},t.prototype.chooseSurveyResponses=function(){return this.chosenTab("survey_responses")},t.prototype.bulkToggleChecks=function(){return!this.allChecked()?this.picked_attendee_ids(_.map(this.attendees(),function(e){return e.id()})):this.picked_attendee_ids([]),!0},t.prototype.loadMoreAttendees=function(e){var t,s,i;if(null==e&&(e=!1),!this.loadingMoreAttendees()||e)return this.loadingMoreAttendees(!0),t=e?0:this.attendees().length,s={filter:this.filter,offset:t,query_limit:25},new Handshake.Attendees.Attendee({attendable_path:this.attendable.entity_path,attendable_id:this.attendable.id(),attendable_type:this.attendable.type}).index((i=this,function(t){var s;if(s=e?[]:i.attendees(),_.each(Handshake.Resource.resourcesFromArray(t.attendees),function(e){return s.push(e)}),i.attendees(s),i.loadingMoreAttendees(!1),i.moreToLoad(t.attendees.length===t.query_limit),i.attendees().length>0&&!i.selected_attendee())return i.select_attendee(i.attendees()[0])}),null,s)},t.prototype.select_attendee=function(e){return this.selected_attendee(e),this.selected_attendee().fetch((t=this,function(e){var s,i;return t.educationsView.items(Handshake.Resource.resourcesFromArray(e.educations)),t.workExperiencesView.items(Handshake.Resource.resourcesFromArray(e.work_experiences)),t.extraCurricularsView.items(Handshake.Resource.resourcesFromArray(e.extra_curriculars)),t.projectsView.items(Handshake.Resource.resourcesFromArray(e.projects)),t.externalLinksView.items(Handshake.Resource.resourcesFromArray(e.external_links)),t.organizationMembershipsView.items(Handshake.Resource.resourcesFromArray(e.organization_memberships)),t.skillsView.items(Handshake.Resource.resourcesFromArray(e.skills)),t.selected_attendee().user(Handshake.Resource.resourceFromObject(e.user)),t.show_profile_tab("Students"===e.user.user_type),"profile"!==t.chosenTab()||t.show_profile_tab()||t.chooseCharges(),s=e.charges?Handshake.Resource.resourcesFromArray(e.charges,Handshake.Charges.Charge):[],t.chargesView.charges(s),i=e.survey_response?[Handshake.Resource.resourceFromObject(e.survey_response)]:[],t.surveyResponsesView.survey_responses(i)}));var t},t.prototype.checkedInChanged=function(e){return e.save(),!0},t.prototype.registerFromWaitlist=function(e){return 0==+e.amount_due()?(e.update({registered:!0,registered_at:new Date}),e.save(),!0):$("#register-from-wailtlist").modal("show")},t.prototype.csv_download=function(){var e;return e=this.attendable.entity_path+"/attendees/csv_download.json",this.ajax_download_view.download_results(e)},t.prototype.resume_pdf_download=function(){return this.resume_download("pdf")},t.prototype.resume_zip_download=function(){return this.resume_download("zip")},t.prototype.resume_download=function(e){var t;return t=this.attendable.entity_path+"/attendees/resume_download.json?download_mode="+e,this.ajax_download_view.download_results(t)},t}(),Handshake.Attendees.SimpleAttendeesModal=function(){function t(t){this.attendable=t,this.loadMoreAttendees=e(this.loadMoreAttendees,this),this.showModal=e(this.showModal,this),this.attendees=ko.observableArray([]),this.loadingMoreAttendees=ko.observable(!1),this.moreToLoad=ko.observable(!0),this.hiddenCount=ko.observable(0),this.initialized=!1,this.page_start=0}return t.prototype.showModal=function(){return this.initialized||this.loadMoreAttendees(),$("#simple-attendees-modal").modal("show")},t.prototype.loadMoreAttendees=function(){var e,t;if(!this.loadingMoreAttendees())return this.loadingMoreAttendees(!0),e={simple_modal:!0,offset:this.attendees().length},new Handshake.Attendees.Attendee({attendable_path:this.attendable().entity_path,attendable_id:this.attendable().id(),attendable_type:this.attendable().type}).index((t=this,function(e){var s;return s=t.attendees(),_.each(Handshake.Resource.resourcesFromArray(e.attendees),function(e){return s.push(e)}),t.attendees(s),t.initialized=!0,t.loadingMoreAttendees(!1),t.moreToLoad(e.attendees.length===e.query_limit),t.hiddenCount(e.hidden_count)}),null,e)},t}(),Handshake.InviteAttendeesView=function(){function t(t){var s;this.props=t,this.redrawCharts=e(this.redrawCharts,this),this.inviteUsers=e(this.inviteUsers,this),this.searchCallback=e(this.searchCallback,this),this.count=ko.observable(),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback),this.searchable.pushHistoryOnSearchPerformed(!1),this.searchable.showPagination=!1,this.searchable.including_all_facets_in_searches(!0),s=Handshake.passed.current_user_type,this.use_students_university_index="Career Services"===s||"Admins"===s||"Mentors"===s,this.use_students_university_index?this.searchable.initialSetup("UniversityAttendeeInviteStudents"):this.searchable.initialSetup("AttendeeInviteStudents"),this.attendable=ko.observable(Handshake.Resource.resourceFromObject(this.props.attendable))}return t.prototype.searchCallback=function(e){var t,s;return this.count(e.total),t={majors:(_.find(e.filter_views.filter_views,function(e){return"majors"===e.type})||{options:[]}).options,school_years:(_.find(e.filter_views.filter_views,function(e){return"school_years"===e.type})||{options:[]}).options},setTimeout((s=this,function(){return s.redrawCharts(t)}),1e3)},t.prototype.inviteUsers=function(){var e,t;return e=this.searchable.searchParams(),this.searchable.query()&&(e.query=this.searchable.query()),this.attendable().sendInvites(e,(t=this,function(){return $("#attendee-invite").modal("hide"),window.location.href=t.attendable().entity_path}))},t.prototype.redrawCharts=function(e){return window.Handshake.Helpers.initPieChart($("#student_majors_chart"),e.majors,null),window.Handshake.Helpers.initPieChart($("#student_years_chart"),e.school_years,null)},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.AuthInformations={},Handshake.AuthInformations.AuthInformation=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({school_id:{},auth_type:{send:!0},ldap_port:{send:!0},ldap_host:{send:!0},ldap_user:{send:!0},ldap_pass:{send:!0},ldap_basedn:{send:!0},ldap_filter:{send:!0},ldap_verify_hostname:{send:!0},saml_sso:{send:!0},saml_name_id_format:{send:!0},saml_idp_cert_fingerprint:{send:!0},saml_stripped_identifier:{send:!0},saml_name_identifier:{send:!0},created_at:{},updated_at:{},host:{send:!0},cas_base:{send:!0},user_timeout:{send:!0},saml_issuer:{send:!0},saml_slo:{send:!0},name:{send:!0},description:{send:!0},hint:{send:!0},alternate:{send:!0},alternate_name:{send:!0},alternate_description:{send:!0},standard_auth_override:{send:!0},mode:{send:!0},saml_identifier_lookup_mode:{send:!0},requested_authn_context:{send:!0},use_dynamic_url:{send:!0}})}return e(s,t),s.type="AuthInformation",s.underscore="auth_information",s}(Handshake.Resource),Handshake.AuthInformationView=function(){function e(e){this.props=e,this.exit_sso_test_mode=s(this.exit_sso_test_mode,this),this.generate_test_mode_token=s(this.generate_test_mode_token,this),this.attributes_from_saml_metadata=s(this.attributes_from_saml_metadata,this),this.acknowledge_warning=s(this.acknowledge_warning,this),this.auth_information=Handshake.Resource.resourceFromObject(this.props.auth_information),this.disable_all_fields=ko.observable("Admins"!==Handshake.passed.current_user_type&&!Handshake.cookies.read("sso-edit-acknowledged",{user_scoped:!0})),this.metadata_url=ko.observable(),this.disable_unless_admin=ko.observable(this.disable_all_fields()||"Admins"!==Handshake.passed.current_user_type)}return e.prototype.acknowledge_warning=function(){return this.disable_all_fields(!1),Handshake.cookies.write("sso-edit-acknowledged",!0,{user_scoped:!0,permanent:!0})},e.prototype.attributes_from_saml_metadata=function(){return this.auth_information.ajax_call({type:"GET",method:"attributes_from_saml_metadata",on_member:!0,action:"attributes_from_saml_metadata",data:{metadata_url:this.metadata_url()},success:function(){return Handshake.Helpers.notifySuccess("Import successful! Click 'Update SSO Preferences' to save changes.")}})},e.prototype.generate_test_mode_token=function(){return this.auth_information.ajax_call({type:"POST",method:"generate_test_mode_token",on_member:!0,action:"generate_test_mode_token",success:function(){return window.location.reload()}})},e.prototype.exit_sso_test_mode=function(){return $.ajax({type:"POST",url:"/exit_sso_test_mode",success:function(){return Handshake.Helpers.notifySuccess("Test mode disabled")}})},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.BoothOptions={},Handshake.BoothOptions.BoothOption=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({description:{},career_fair_id:{},career_fair_session_id:{},name:{},price:{},count:{},taken_count:{},assigned_count:{},created_at:{},updated_at:{},created_by_id:{},updated_by_id:{},hidden:{},sort_order:{},included_representatives_count:{},maximum_additional_representatives_count:{},additional_representative_cost:{},additional_representative_disabled_for_virtual:{}}),this.all_taken=ko.computed((s=this,function(){return s.taken_count()>=s.count()}))}return t(i,s),i.type="BoothOption",i.underscore="booth_option",i.prototype.nested_route=function(){return"/career_fairs/"+this.career_fair_id()+"/"},i}(Handshake.Resource),Handshake.EditBoothOptionView=function(){function e(e){var t,s;this.props=e,this.booth_option=Handshake.Resource.resourceFromObject(this.props.booth_option),this.booth_option.included_representatives_count.subscribe((t=this,function(e){if(!(+e>0))return t.booth_option.maximum_additional_representatives_count(0)})),this.booth_option.maximum_additional_representatives_count.subscribe((s=this,function(e){if(!(+e>0))return s.booth_option.additional_representative_cost(0)}))}return e}(),Handshake.IndexBoothOptionsView=function(){function t(t){var s;this.props=t,this.reSort=e(this.reSort,this),this.career_fair_sessions=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.career_fair_sessions)),this.booth_options=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.booth_options)),_.each(this.career_fair_sessions(),(s=this,function(e){var t;return t=_.filter(s.booth_options(),function(t){return t.career_fair_session_id()===e.id()}),e.booth_options=ko.observableArray(t)}))}return t.prototype.reSort=function(e){var t,s;return s=[],_.each(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),(t=e.item).ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.BoothOptionsRegistrations={},Handshake.BoothOptionsRegistration=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({booth_option_id:{},representatives_count:{},contacts:{array:!0}})}return e(s,t),s.type="BoothOptionsRegistration",s.underscore="booth_options_registration",s}(Handshake.Resource),Handshake.EditBoothOptionsRegistrationsView=function(){function e(e){var t,i,n,o;this.props=e,this.registration_contact_select2_options=s(this.registration_contact_select2_options,this),this.booth_options_registration=new Handshake.BoothOptionsRegistration(this.props.booth_options_registration),this.contact_ids=ko.observable(_.map(this.booth_options_registration.contacts(),function(e){return e.id})),this.selected_booth_option=ko.computed((t=this,function(){return _.find(t.props.booth_options,function(e){return+e.id==+t.booth_options_registration.booth_option_id()})})),this.representatives_count_input_max=ko.computed((i=this,function(){return i.selected_booth_option()&&i.selected_booth_option().included_representatives_count>0?i.selected_booth_option().maximum_additional_representatives_count+i.selected_booth_option().included_representatives_count:100})),this.additional_representatives_count=ko.computed((n=this,function(){return n.selected_booth_option()&&n.selected_booth_option().included_representatives_count>0?Math.max(0,n.booth_options_registration.representatives_count()-n.selected_booth_option().included_representatives_count):0})),this.cost=ko.computed((o=this,function(){return o.selected_booth_option()&&o.booth_options_registration.representatives_count()&&o.booth_options_registration.representatives_count()>0?o.selected_booth_option().additional_representative_cost*o.additional_representatives_count():0}))}return e.prototype.registration_contact_select2_options=function(){return{placeholder:"Choose contacts...",initial_value:this.booth_options_registration.contacts,value:this.contact_ids,url:"/contacts/possible_contacts?employer_id="+this.props.employer_id(),dataFunction:this.contactSelect2DataFunction,removingFunction:this.contactSelect2RemovingFunction,maximum_selection_size:this.representatives_count_input_max()}},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Booths={},Handshake.Booths.Booth=function(s){function i(t){var s,n;this.edit_booth_identifier=e(this.edit_booth_identifier,this),this.edit_booth_number=e(this.edit_booth_number,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({career_fair_id:{},career_fair_session_id:{},registration_id:{send:!0,convert_undefined_to_null:!0},employer_id:{},employer_name:{},booth_option_id:{},booth_option_name:{},room_id:{send:!0,convert_undefined_to_null:!0},room_name:{},number:{send:!0},identifier:{send:!0}}),this.is_editing_booth_identifier=ko.observable(!1),this.identifier.subscribe((s=this,function(){if(Handshake.permissions.change_booth_identifier&&s.is_editing_booth_identifier()&&Handshake.permissions.change_booth_identifier())return s.save()})),this.booth_full_description=ko.computed((n=this,function(){return(n.identifier()?n.booth_option_name()+" "+n.identifier():n.booth_option_name())+(n.room_name()?" in "+n.room_name():"")}))}return t(i,s),i.type="Booth",i.underscore="booth",i.prototype.nested_route=function(){return"/career_fairs/"+this.career_fair_id()},i.prototype.edit_booth_number=function(){if(Handshake.permissions.change_booth_number())return this.is_editing_booth_number(!0)},i.prototype.edit_booth_identifier=function(){if(Handshake.permissions.change_booth_identifier())return this.is_editing_booth_identifier(!0)},i}(Handshake.Resource),Handshake.BoothFormView=function(){function t(t){this.props=t,this.data_function=e(this.data_function,this),this.registration_select2_options={placeholder:"Employer...",url:new Handshake.CareerFairs.CareerFair({id:this.props.career_fair_id}).member_route("booths/possible_registrations"),dataFunction:this.data_function,initial_value:this.props.registration,allowClear:!0,primary_property:"employer_name"},this.booth_room_select2_options={placeholder:"Room",url:"/rooms",primary_property:"full_name",initial_value:this.props.room,results_filter:function(e){return Handshake.Rooms.Results.group_by_building(e)}},this.booth_option_id=ko.observable(this.props.booth_option_id)}return t.prototype.data_function=function(e){return{query:e,simple_search:!0,booth_option_id:this.booth_option_id()}},t}(),Handshake.ManageBoothsView=function(){function t(t){var s;this.props=t,this.save=e(this.save,this),this.show_modal=e(this.show_modal,this),this.searchCallback=e(this.searchCallback,this),this.data_function=e(this.data_function,this),this.booth_room_select2_options=e(this.booth_room_select2_options,this),this.registration_select2_options=e(this.registration_select2_options,this),Handshake.permissions.change_booth_number=ko.observable(this.props.change_booth_number),Handshake.permissions.change_booth_identifier=ko.observable(this.props.change_booth_identifier),this.booths=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"booths",this.searchCallback),this.searchable.initialSetup("UniversityBooths"),this.selected_booth=ko.observable(),$("#edit-booth-modal").on("hide.bs.modal",(s=this,function(){return s.selected_booth().revert()}))}return t.prototype.registration_select2_options=function(){return{placeholder:"Employer...",url:new Handshake.CareerFairs.CareerFair({id:this.selected_booth().career_fair_id()}).member_route("booths/possible_registrations"),dataFunction:this.data_function,full_data:(e=this,function(t,s){return t||s?(e.selected_booth().registration_id(t.id),e.selected_booth().employer_name(t.employer_name)):{id:e.selected_booth().registration_id(),employer_name:e.selected_booth().employer_name()}}),allowClear:!0,primary_property:"employer_name"};var e},t.prototype.booth_room_select2_options=function(){return{placeholder:"Room",url:"/rooms",primary_property:"full_name",allowClear:!0,full_data:(e=this,function(t,s){return t||s?(e.selected_booth().room_id(t.id),e.selected_booth().room_name(t.full_name)):{id:e.selected_booth().room_id(),full_name:e.selected_booth().room_name()}}),results_filter:function(e){return Handshake.Rooms.Results.group_by_building(e)}};var e},t.prototype.data_function=function(e){return{query:e,simple_search:!0,booth_option_id:this.selected_booth().booth_option_id()}},t.prototype.searchCallback=function(e){return this.booths(Handshake.Resource.resourcesFromArray(e.results,Handshake.Booths.Booth))},t.prototype.show_modal=function(e){return this.selected_booth(e),$("#edit-booth-modal").modal("show")},t.prototype.save=function(){return this.selected_booth().save(function(){return Handshake.Helpers.notifySuccess("Booth updated"),$("#edit-booth-modal").modal("hide")})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.StudentBreakdown=function(){function t(t){var s;this.props=t,this.redrawCharts=e(this.redrawCharts,this),this.breakdownable=ko.observable(null),this.breakdownable(Handshake.Resource.resourceFromObject(this.props.breakdownable)),this.breakdownable().ajax_call({type:"GET",method:"breakdown",on_member:!0,action:"breakdown",success:(s=this,function(e){return s.redrawCharts(e)})})}return t.prototype.redrawCharts=function(e){if(e&&e.facets)return this.breadkown_details=e.facets,this.breadkown_details.organizations&&window.Handshake.Helpers.initPieChart($("#student_organizations_chart"),this.breadkown_details.organizations,null),this.breadkown_details.skill_names&&window.Handshake.Helpers.initPieChart($("#student_skills_chart"),this.breadkown_details.skill_names,null),this.breadkown_details.majors&&window.Handshake.Helpers.initPieChart($("#student_majors_chart"),this.breadkown_details.majors,null),this.breadkown_details.school_years?window.Handshake.Helpers.initPieChart($("#student_years_chart"),this.breadkown_details.school_years,null):void 0},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Buildings={},Handshake.Buildings.Building=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},school_id:{},location_name:{}})}return t(i,s),i.type="Building",i.underscore="building",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.EditBuildingView=function(){function e(e){var t;this.props=e,t={object_type:"building"},this.props.location&&(t.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(t)}return e}(),Handshake.ManageBuildingsView=function(){function t(t){this.props=t,this.searchCallback=e(this.searchCallback,this),this.buildings=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"buildings",this.searchCallback),
this.searchable.initialSetup("Building")}return t.prototype.searchCallback=function(e){return this.buildings(Handshake.Resource.resourcesFromArray(e,Handshake.Buildings.Building))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.BulkInvites={},Handshake.BulkInvites.BulkInvite=function(s){function i(t){this.send_invite=e(this.send_invite,this),i.__super__.constructor.call(this,t),this.attributes({created_by_id:{},institution_id:{},institution_type:{},bulk_invite_type:{},contacts_count:{},status:{}})}return t(i,s),i.type="BulkInvite",i.underscore="bulk_invite",i.prototype.send_invite=function(e){return this.ajax_call({type:"POST",method:"send_invite",on_member:!0,action:"send_invite",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.ShowBulkInvite=function(){function t(t){var s,i,n;this.props=t,this.send_invite_success=e(this.send_invite_success,this),this.send_invite=e(this.send_invite,this),this.showUnhideSchoolModal=e(this.showUnhideSchoolModal,this),this.checkForReadyStatus=e(this.checkForReadyStatus,this),this.bulk_invite=ko.observable(Handshake.Resource.resourceFromObject(this.props.bulk_invite,Handshake.BulkInvites.BulkInvite)),this.institution=this.props.institution,this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"School Hidden",safe_body_html:"Your school is currently hidden from employers. Would you like to unhide your school so employers can find you when registering?",confirm_button_text:"Yes, unhide my school",cancel_button_text:"No, keep my school hidden"}),"ready"!==(s=this.bulk_invite().status())&&"sent"!==s&&(this.readyCheck=setInterval((n=this,function(){return n.checkForReadyStatus(n.bulk_invite())}),5e3),$(document).bind("page:before-change",(i=this,function(){return clearInterval(i.readyCheck)})))}return t.prototype.checkForReadyStatus=function(e){return e.fetch(function(e){if("ready"===e.bulk_invite.status)return Handshake.SPA.reload()})},t.prototype.showUnhideSchoolModal=function(e){return this.confirmation_modal.show_modal((t=this,function(){return t.school=ko.observable(new Handshake.Schools.School(e)),t.school().unhide(function(){return Handshake.Helpers.notifySuccess("Your invite has been sent"),setTimeout(function(){return Handshake.SPA.reload()},1e3)})}),function(){return Handshake.Helpers.notifySuccess("Your invite has been sent"),setTimeout(function(){return Handshake.SPA.reload()},1e3)});var t},t.prototype.send_invite=function(){return this.bulk_invite().send_invite(this.send_invite_success)},t.prototype.send_invite_success=function(){return"employers"===this.bulk_invite().bulk_invite_type()&&"School"===this.bulk_invite().institution_type()&&this.institution.hidden?this.showUnhideSchoolModal(this.institution):(Handshake.Helpers.notifySuccess("Your invite has been sent"),setTimeout(function(){return Handshake.SPA.reload()},1e3))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.CalendarView=function(){function t(t,s){this.props=t,this.element=s,this.fetchCalendarDataSuccess=e(this.fetchCalendarDataSuccess,this),this.fetchCalendarData=e(this.fetchCalendarData,this),this.itemClick=e(this.itemClick,this),this.events=ko.observableArray([]),this.element.fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},eventLimitClick:"popover",defaultView:"month",height:700,events:this.fetchCalendarData,viewRender:this.viewRenderCallback,eventClick:this.itemClick,views:{month:{eventLimit:4,"default":!0}}})}return t.prototype.itemClick=function(e){var t;return e.url?window.location.href=e.url:(t=new e.type({id:e.id}),window.location.href=t.entity_path)},t.prototype.fetchCalendarData=function(e,t,s,i){var n,o;return Handshake.operations.add_worker(),n={start_date:e.format(),end_date:t.format(),looking_at_id:this.props.looking_at_id},$.ajax({type:"POST",url:"/calendars/fetch.json",dataType:"json",data:n,success:(o=this,function(e){return e.success?(o.fetchCalendarDataSuccess(e),i(o.events())):Handshake.Helpers.notifyError(e.error)}),complete:function(){return Handshake.operations.remove_worker()}})},t.prototype.fetchCalendarDataSuccess=function(e){var t,s,i,n,o,r;return o=[],n=Handshake.passed.current_user_id,e.events&&(o=_.map(e.events,function(e){return{title:e.name,start:e.start_date,end:e.end_date,allDay:!1,id:e.id,url:Handshake.Resource.resourceFromObject(e).entity_path,backgroundColor:Handshake.Helpers.calendarColor(0)[0],borderColor:Handshake.Helpers.calendarColor(0)[0],textColor:Handshake.Helpers.calendarColor(0)[1],type:Handshake.Events.Event}})),e.appointments&&n&&(s=_.map(e.appointments,function(e){return{title:(e.student_id===n?"Appointment with "+e.staff_member_name:"Appointment with "+e.student_name)+" ("+e.status+")",start:e.start_date,end:e.end_date,allDay:!1,id:e.id,url:Handshake.Resource.resourceFromObject(e).entity_path,backgroundColor:Handshake.Helpers.calendarColor(6)[0],borderColor:Handshake.Helpers.calendarColor(6)[0],textColor:Handshake.Helpers.calendarColor(6)[1],type:Handshake.Appointments.Appointment}}),o=o.concat(s)),e.applications&&(t=_.map(e.applications,function(e){var t;return t=Handshake.Resource.resourceFromObject({id:e.applicable_id,type:e.applicable_type}),{title:e.fancy_title+" ("+e.status+")",start:e.created_at,allDay:!1,id:e.id,url:t.entity_path,backgroundColor:Handshake.Helpers.calendarColor(4)[0],borderColor:Handshake.Helpers.calendarColor(4)[0],textColor:Handshake.Helpers.calendarColor(4)[1],type:Handshake.Applications.Application}}),o=o.concat(t)),e.interview_slots&&(r=_.map(e.interview_slots,function(e){var t,s;return s="Employers"===Handshake.passed.current_user_type?"Interview with "+e.student_name:e.fancy_title,t=new Handshake.InterviewSchedules.InterviewSchedule({id:e.interview_schedule_id}).entity_path,{title:s,start:e.start_date,end:e.end_date,allDay:!1,id:e.id,url:t,backgroundColor:Handshake.Helpers.calendarColor(5)[0],borderColor:Handshake.Helpers.calendarColor(5)[0],textColor:Handshake.Helpers.calendarColor(5)[1],type:Handshake.InterviewSlots.InterviewSlot}}),o=o.concat(r)),e.career_fair_sessions&&(i=_.map(e.career_fair_sessions,function(e){var t;return t=new Handshake.CareerFairs.CareerFair({id:e.career_fair_id}),{title:e.calendar_name,start:e.start_date_time,end:e.end_date_time,allDay:!1,id:e.id,url:t.entity_path,backgroundColor:Handshake.Helpers.calendarColor(3)[0],borderColor:Handshake.Helpers.calendarColor(3)[0],textColor:Handshake.Helpers.calendarColor(3)[1],type:Handshake.CareerFairSessions.CareerFairSession}}),o=o.concat(i)),this.events(o)},t}()}.call(this),function(){Handshake.EditCampusView=function(){function e(e){var t;this.props=e,t={object_type:"campus"},this.props.location&&(t.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(t)}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Cards={},Handshake.Cards.Card=function(){function e(e){var t,s;this.vm=e,this.vm.selector=ko.pureComputed((t=this,function(){if(t.vm.type)return"card-"+t.vm.type})),this.vm.safe_featured_html=ko.pureComputed((s=this,function(){return s.vm.featured?"Suggested by your school":"&nbsp;"}))}return e}(),Handshake.Cards.CardActions=function(){function e(e){this.vm=e}return e}(),Handshake.Cards.CardAlerts=function(){function e(e){this.vm=e}return e}(),Handshake.Cards.CardContent=function(){function e(e){this.vm=e,this.vm.description_length=this.vm.description_length||140,this.vm.location_length=this.vm.location_length||85}return e}(),Handshake.Cards.CardHeading=function(){function e(e){this.vm=e,this.vm.title_length=this.vm.title_length||50,this.vm.subtitle_length=this.vm.subtitle_length||65}return e}(),Handshake.Cards.CardPage=function(){function e(e){var t;this.props=e,this.vm=this.props.vm,this.index=ko.observable(this.vm.pager.add_page({validations:this.props.validations})),this.validations=this.props.validations,this.vm.is_current_page=(t=this,function(e){return t.vm.pager.current_page_index()===e})}return e}(),Handshake.Cards.CardPager=function(){function t(){var t,s;this.percent_complete=e(this.percent_complete,this),this.on_last_page=e(this.on_last_page,this),this.on_first_page=e(this.on_first_page,this),this.previous_page=e(this.previous_page,this),this.next_page=e(this.next_page,this),this.go_to_page_index=e(this.go_to_page_index,this),this.add_page=e(this.add_page,this),this.pages=ko.observableArray([]),this.current_page_index=ko.observable(0),this.event_emitter=$({}),this.total_pages=ko.computed((t=this,function(){return t.pages().length})),this.current_page_valid=ko.computed((s=this,function(){var e,t,i;return!(i=null!=(e=s.pages())&&null!=(t=e[s.current_page_index()])?t.validations:void 0)||_(i).every(function(e){if("function"==typeof e)return e.valid()})}))}return t.prototype.add_page=function(e){return this.pages.push(e),this.total_pages()-1},t.prototype.go_to_page_index=function(e){return this.current_page_index(e),this.emit_page_change_event()},t.prototype.next_page=function(){if(!this.on_last_page())return this.go_to_page_index(this.current_page_index()+1)},t.prototype.previous_page=function(){return this.on_first_page()?_.isFunction(this.previous_card)?this.previous_card():void 0:this.go_to_page_index(this.current_page_index()-1)},t.prototype.emit_page_change_event=function(){return this.event_emitter.trigger("card_page_change")},t.prototype.on_first_page=function(){return 0===this.current_page_index()},t.prototype.on_last_page=function(){return this.current_page_index()===this.total_pages()-1},t.prototype.percent_complete=function(){return(this.current_page_index()/this.total_pages()*100).toFixed()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.CareerCenters={},Handshake.CareerCenters.CareerCenter=function(s){function i(t){var s,n;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},school_id:{},description:{},available_for_events:{},available_for_interview_schedules:{},use_employer_deadline_date:{},logo_url:{},branding_image_url:{},logo:{send:!0},branding_image:{send:!0}}),this.logo_present=ko.computed((s=this,function(){return s.logo_url()&&-1===s.logo_url().indexOf("missing")})),this.branding_image_present=ko.computed((n=this,function(){return n.branding_image_url()&&-1===n.branding_image_url().indexOf("missing")}))}return t(i,s),i.type="CareerCenter",i.underscore="career_center",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.ShowCareerCenterView=function(){function t(t){this.props=t,this.changeImage=e(this.changeImage,this),this.setActiveCropView=e(this.setActiveCropView,this),this.career_center=ko.observable(Handshake.Resource.resourceFromObject(this.props.career_center)),this.logoCropView=new Handshake.UserImages.CropImageView(this.career_center(),"logo","logo",".crop-logo"),this.brandingImageCropView=new Handshake.UserImages.CropImageView(this.career_center(),"branding","branding_image",".branding-image"),this.active_crop_view=null,this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.changeImage)}return t.prototype.setActiveCropView=function(e){return this.active_crop_view=e},t.prototype.changeImage=function(e){return this.active_crop_view.changeImage(e)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.CareerFairItems={},Handshake.CareerFairItems.CareerFairItem=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({description:{},career_fair_id:{},career_fair_session_id:{},name:{},price:{},count:{},taken_count:{},created_at:{},updated_at:{},created_by_id:{},updated_by_id:{},hidden:{},sort_order:{}}),this.all_taken=ko.computed((s=this,function(){return s.count()&&s.taken_count()>=s.count()}))}return t(i,s),i.type="CareerFairItem",i.underscore="career_fair_item",i.prototype.nested_route=function(){return"/career_fairs/"+this.career_fair_id()+"/"},i}(Handshake.Resource),Handshake.EditCareerFairItemView=function(){function e(e){var t;this.session_type=ko.observable(e.session_type),this.session_id=ko.observable(e.session_id),this.show_session_options=ko.computed((t=this,function(){return"individual"===t.session_type()}))}return e}(),Handshake.IndexCareerFairItemsView=function(){function t(t){var s;this.props=t,this.reSort=e(this.reSort,this),this.props.career_fair_sessions.unshift({type:"CareerFairSession",id:null,display_name:"General Items"}),this.career_fair_sessions=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.career_fair_sessions)),this.career_fair_items=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.career_fair_items)),_.each(this.career_fair_sessions(),(s=this,function(e){var t;return t=_.filter(s.career_fair_items(),function(t){return t.career_fair_session_id()===e.id()}),e.career_fair_items=ko.observableArray(t)}))}return t.prototype.reSort=function(e){var t,s;return s=[],_.each(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),(t=e.item).ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.CareerFairSessions={},Handshake.CareerFairSessions.CareerFairSession=function(t){function s(e){var t,i,n,o,r,a;s.__super__.constructor.call(this,e),this.always_send_all_properties(!0),this.attributes({career_fair_id:{send:!0},name:{},identifier:{send:!0},display_name:{},start_date_time:{send:!0},end_date_time:{send:!0},moment_time_zone:{},booth_options:{array:!0,belongs_to:Handshake.BoothOptions.BoothOption},career_fair_items:{array:!0,belongs_to:Handshake.CareerFairItems.CareerFairItem},career_fair_session_industries:{array:!0},available_space:{},available_space_for_waitlist_students:{},attendee_form_required:{},external_link:{},career_fair_name:{},nametags_enabled:{},nametag_label_xml:{},map:{send:!0}}),this.smart_name=ko.computed((o=this,function(){var e;return e=Handshake.Helpers.startToEndSmart("day_short_date_time",o.start_date_time(),o.end_date_time(),o.moment_time_zone()),_.isEmpty(o.identifier())||(e=e+" - "+o.identifier()),e})),this.persisted_career_fair_session_industries=ko.observableArray(_.filter(null!=e?e.career_fair_session_industries:void 0,function(e){return!!e.id})),n=_.reduce(null!=e?e.career_fair_session_industries:void 0,function(e,t){return t.industry_id&&t.id&&(e[parseInt(t.industry_id,10)]=t),e},{}),this.persisted_industries_hash=ko.observable(n),i=_.map(null!=e?e.career_fair_session_industries:void 0,function(e){return{id:null!=e?e.industry_id:void 0,type:"Industry",name:null!=e?e.name:void 0}}),this.industries=ko.observableArray(i),this.industry_ids=ko.observableArray(_.map(i,function(e){return parseInt(e.id,10)})),t={id:-1,name:"ALL"},this.industries().length||(this.industry_ids(["-1"]),this.industries([t])),this.industry_select2_options={placeholder:"Choose industries...",initial_value:this.industries,value:this.industry_ids,dataFunction:function(e){return{query:e}},url:"/industries",results_filter:function(e){return e.unshift(t),_.uniq(e,"id")}},this.should_add_industry=(r=this,function(e){return-1!==(e=parseInt(e,10))&&!r.persisted_industries_hash().hasOwnProperty(e)}),this.should_destroy_industry=(a=this,function(e){var t;return t=parseInt(e.industry_id,10),!_.map(a.industry_ids(),function(e){return parseInt(e,10)}).includes(t)})}return e(s,t),s.type="CareerFairSession",s.underscore="career_fair_session",s}(Handshake.Resource),Handshake.CareerFairSessions.EditCareerFairSessionsView=function(){function e(e){var t,i,n,o;this.props=e,this.remove_session=s(this.remove_session,this),this.add_session=s(this.add_session,this),this.setDefaultStudentRegistrationStartDate=s(this.setDefaultStudentRegistrationStartDate,this),this.career_fair_sessions=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.career_fair_sessions)),this.destroyed_career_fair_sessions=ko.observableArray(),this.handshake_virtual_fair=ko.observable(!1),this.sessions_with_invalid_durations=ko.computed((t=this,function(){return _.map(t.career_fair_sessions(),function(e){return!!(e&&e.start_date_time()&&e.end_date_time())&&moment(e.end_date_time()).diff(moment(e.start_date_time()),"minutes")>t.DURATION_MINUTES_LIMIT})})),this.industryChange=(i=this,function(e,t){var s,n,o,r,a;return s={id:-1,name:"ALL"},o=t.val,a=t.target.attributes.session_index.value,"-1"!==o[o.length-1]&&o.length?(n=$(t.target).select2("data"),r=_.reject(n,function(e){return-1===e.id}),$(t.target).select2("data",r),i.career_fair_sessions()[a].industry_ids(_.map(r,function(e){return e.id}))):($(t.target).select2("data",[s]),i.career_fair_sessions()[a].industry_ids([]))}),this.startDateChange=(n=this,function(){return n.setDefaultStudentRegistrationStartDate()}),this.endDateChange=(o=this,function(e,t){if(o.handshake_virtual_fair())return $(".career_fair_student_registration_end").find("input").val(t.target.value).trigger("change")})}return e.prototype.DURATION_MINUTES_LIMIT=360,e.prototype.setDefaultStudentRegistrationStartDate=function(){var e,t,s,i,n,o,r;for(i=null,t=e=0,s=(n=this.career_fair_sessions()).length;e<s;t=++e)o=n[t],r=moment(o.start_date_time()),(null===i||i.valueOf()>r.valueOf())&&(i=r);if(i)return $(".career_fair_student_registration_start").find("input").val(i.subtract(moment.duration(1,"week")).format("YYYY-MM-DD hh:mm a")).trigger("change")},e.prototype.add_session=function(){return this.career_fair_sessions.push(new Handshake.CareerFairSessions.CareerFairSession)},e.prototype.remove_session=function(e){return this.career_fair_sessions.remove(e),e.isPersisted()&&this.destroyed_career_fair_sessions.push(e),this.setDefaultStudentRegistrationStartDate()},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.CareerFairs={},Handshake.CareerFairs.CareerFair=function(s){function i(t){var s,n,o;this.duplicate=e(this.duplicate,this),this.sendInvites=e(this.sendInvites,this),this.unpublish=e(this.unpublish,this),this.publish=e(this.publish,this),this.institution_path=e(this.institution_path,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},status:{send:!0},description:{send:!0},institution_id:{send:!0},institution_type:{send:!0},institution_id_type:{},institution_name:{},smart_logo:{},moment_time_zone:{},nametags_enabled:{send:!0},nametag_label_xml:{send:!0},start_date:{},end_date:{},career_fair_sessions:{array:!0,send:!0,belongs_to:Handshake.CareerFairSessions.CareerFairSession,nested_attribute:!0},career_fair_location_type_id:{},career_fair_host_type_id:{},user_id:{},user_name:{},student_description:{send:!0},employer_description:{send:!0},default_approval_message:{send:!0},welcome_student_email:{send:!0},employer_description_text:{},student_description_text:{},allow_all_majors:{},available_space:{},available_space_for_waitlist_students:{},hidden:{},attendee_form_required:{},external_link:{},location_name:{},approved_registrations_count:{},student_registration_start:{},student_registration_end:{},employer_registration_start:{},employer_registration_end:{},pending_registrations_count:{}}),this.name_display=ko.computed((s=this,function(){return""===s.name()||s.name()?s.name():"(no name)"})),this.nice_start_date=Handshake.TimeZoneHelper.dateTime("long_date_time",this.start_date(),Handshake.passed.current_user_time_zone),this.nice_end_date=Handshake.TimeZoneHelper.dateTime("long_date_time",this.end_date(),Handshake.passed.current_user_time_zone),this.start_to_end_time=Handshake.Helpers.startToEndSmartDates("very_short_date_time",this.start_date(),this.end_date(),Handshake.passed.current_user_time_zone,"-",{show_abbreviation:!0}),this.short_start_to_end_date_time=Handshake.Helpers.startToEnd("month_day_year_time",this.start_date(),this.end_date(),Handshake.passed.current_user_time_zone,"-",{show_abbreviation:!0}),this.available_space_for_waitlist=ko.computed((n=this,function(){var e;return e=_.filter(n.career_fair_sessions(),function(e){return!!e.available_space_for_waitlist_students()}),n.available_space_for_waitlist_students()||e.length>0})),this.published=ko.computed((o=this,function(){return"published"===o.status()}))}return t(i,s),i.type="CareerFair",i.underscore="career_fair",i.prototype.institution_path=function(){return this.institution_id()?new Handshake.Schools.School({id:this.institution_id()}).entity_path:null},i.prototype.publish=function(e){return this.ajax_call({type:"POST",method:"publish",on_member:!0,action:"publish",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.unpublish=function(e){return this.ajax_call({type:"POST",method:"unpublish",on_member:!0,action:"unpublish",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.sendInvites=function(e,t){return this.ajax_call({type:"POST",method:"send_invite",on_member:!0,action:"send_invite",data:e,success:function(e){if(t)return t(e)}})},i.prototype.duplicate=function(e){return this.ajax_call({type:"POST",method:"duplicate",on_member:!0,action:"duplicate",success:function(t){return e(t)}})},i}(Handshake.Resource),Handshake.EditCareerFairView=function(){function t(t,s){var i,n,o,r,a,c,l,u,h,_,d,p,m,f;this.props=t,this.element=s,this.submitFromView=e(this.submitFromView,this),this.confirmTransition=e(this.confirmTransition,this),this.editCareerFairSessionsView=new Handshake.CareerFairSessions.EditCareerFairSessionsView({career_fair_sessions:this.props.career_fair_sessions}),i={object_type:"career_fair"},this.props.location&&(i.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(i),this.contactModal=new Handshake.Contacts.CreateContactModal(void 0,ko.observable(void 0)),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.acceptingAllMajorRegistrations=ko.observableArray([]),this.career_fair=ko.observable(Handshake.Resource.resourceFromObject(this.props.career_fair)),this.career_fair_transition_confirmation_modal=new Handshake.CareerFairs.TransitionConfirmationModal,a=this.props.physical_location_type&&this.props.physical_location_type.id,c=this.props.virtual_location_type&&this.props.virtual_location_type.id,n=this.props.handshake_host_type&&this.props.handshake_host_type.id,r=Handshake.Resource.resourceFromObject(this.props.career_fair).career_fair_location_type_id(),this.selected_career_fair_location_type_id=ko.observable(r),o=Handshake.Resource.resourceFromObject(this.props.career_fair).career_fair_host_type_id(),this.selected_career_fair_host_type_id=ko.observable(o),this.is_physical=ko.computed((l=this,function(){return parseInt(l.selected_career_fair_location_type_id())===parseInt(a)})),this.is_virtual=ko.computed((u=this,function(){return parseInt(u.selected_career_fair_location_type_id())===parseInt(c)})),this.is_handshake_hosted=ko.computed((h=this,function(){return parseInt(h.selected_career_fair_host_type_id())===parseInt(n)})),this.is_physical()||(this.addLocationView.disabled(!0),$("#career-fair-student-limit input").prop("readonly",!0),$(".career_fair_nametags_enabled .checkbox input").prop("disabled",!0),$(".career_fair_nametag_label_xml textarea").prop("readonly",!0),this.is_handshake_hosted()&&this.editCareerFairSessionsView.handshake_virtual_fair(!0)),this.careerFairLocationTypeChange=(_=this,function(e,t){return _.selected_career_fair_location_type_id(parseInt($(t.target).val())),_.addLocationView.disabled(!_.is_physical()),_.is_physical()?($("#career-fair-student-limit input").prop("readonly",!1),$(".booth-map input").prop("readonly",!1),_.editCareerFairSessionsView.handshake_virtual_fair(!1),$(".career_fair_nametags_enabled .checkbox input").prop("disabled",!1),$(".career_fair_nametag_label_xml textarea").prop("readonly",!1)):($("#career-fair-student-limit :input").val(""),$("#career-fair-student-limit input").prop("readonly",!0),$(".booth-map input").val(""),$(".booth-map input").prop("readonly",!0),$(".career_fair_nametags_enabled .checkbox input").prop("checked",!1),$(".career_fair_nametag_label_xml textarea").val(""),$(".career_fair_nametags_enabled .checkbox input").prop("disabled",!0),$(".career_fair_nametag_label_xml textarea").prop("readonly",!0),_.addLocationView.location(new Handshake.Locations.Location({name:""})),_.is_virtual()&&_.is_handshake_hosted()?_.editCareerFairSessionsView.handshake_virtual_fair(!0):_.editCareerFairSessionsView.handshake_virtual_fair(!1))}),this.careerFairHostTypeChange=(d=this,function(e,t){return d.selected_career_fair_host_type_id(parseInt($(t.target).val())),d.is_virtual()&&d.is_handshake_hosted()?d.editCareerFairSessionsView.handshake_virtual_fair(!0):d.editCareerFairSessionsView.handshake_virtual_fair(!1)}),this.careerFairStudentDescriptionChange=function(e,t){var s;return s=t.target.value.split(/<a |<a target="_blank" /).join('<a target="_blank" '),$("#career_fair_student_description").val(s)},this.careerFairWelcomeStudentEmailChange=function(e,t){var s;return s=t.target.value.split(/<a |<a target="_blank" /).join('<a target="_blank" '),$("#career_fair_welcome_student_email").val(s)},this.careerFairEmployerDescriptionChange=function(e,t){var s;return s=t.target.value.split(/<a |<a target="_blank" /).join('<a target="_blank" '),$("#career_fair_employer_description").val(s)},this.careerFairWelcomeEmployerEmailChange=function(e,t){var s;return s=t.target.value.split(/<a |<a target="_blank" /).join('<a target="_blank" '),$("#career_fair_welcome_employer_email").val(s)},this.careerFairDefaultApprovalMessageChange=function(e,t){var s;return s=t.target.value.split(/<a |<a target="_blank" /).join('<a target="_blank" '),$("#career_fair_default_approval_message").val(s)},this.selectMajorGroupsView=new Handshake.MajorGroups.SelectMajorGroupsView({resource_type:"career_fair",parent_major_groups:ko.observableArray(this.props.parent_major_groups),selected_major_groups:ko.observableArray(this.props.selected_major_groups),selected_majors:ko.observableArray(this.props.selected_majors)}),this.character_count=ko.observable(this.props.career_fair.maximum_company_description_length||750),this.lorum_text=ko.computed((p=this,function(){var e,t,s,i;if(i="Lorem ipsum dolor sit amet, consectetur adipiscing elit. ",p.character_count()>5e3)i="Character length too large for preview";else{if(i.length<p.character_count()){for(t="",e=s=Math.ceil(p.character_count()/i.length);s<=1?e<=1:e>=1;s<=1?++e:--e)t+=i;i=t}i=i.slice(0,p.character_count())}return i})),this.career_fair_contact_select2_options={placeholder:"Contact",url:"/contacts",secondary_property:"email_address",initial_value:this.props.contact,allowClear:!0},this.career_fair_career_center_select2_options={placeholder:"Career Center",url:"/schools/"+this.career_fair().institution_id()+"/career_centers",initial_value:this.props.career_center,allowClear:!0},this.transitionToVirtualHandshake=(m=this,function(){var e,t;return t=parseInt(r)!==parseInt(m.selected_career_fair_location_type_id()),e=parseInt(o)!==parseInt(m.selected_career_fair_host_type_id()),m.is_virtual()&&m.is_handshake_hosted()&&(t||e)}),this.transitionVirtualHandshakeToExternal=(f=this,function(){var e;return e=parseInt(o)!==parseInt(f.selected_career_fair_host_type_id()),f.is_virtual()&&!f.is_handshake_hosted()&&e})}return t.prototype.confirmTransition=function(){var e,t,s;return(e=!!this.career_fair().id())&&this.transitionToVirtualHandshake()?this.career_fair_transition_confirmation_modal.show({title:"Transition Fair to Virtual Fair facilitated on Handshake",safe_body_html:"Transitioning a fair to virtual facilitated on Handshake will\nnotify "+this.props.approved_registrant_count+" approved registrants that\nthey must create their schedules. Are you sure you want to transition\nthis fair to virtual?",confirm_button_text:"Update Fair (kicks off notification to employers)",confirm:(s=this,function(){return s.submitFromView()})}):e&&this.transitionVirtualHandshakeToExternal()?this.career_fair_transition_confirmation_modal.show({title:"Transition to External Virtual Fair",safe_body_html:"Transitioning a fair to be facilitated externally will\nremove employers ability to create schedules and use\nHandshake video. Are you sure that you want to transition\nthis fair to be facilitated externally?",confirm_button_text:"Update Fair",confirm:(t=this,function(){return t.submitFromView()})}):this.submitFromView()},t.prototype.submitFromView=function(){var e,t;if(this.career_fair().isFieldChanged("allow_all_majors")&&!this.career_fair().allow_all_majors())return e={accepts_all_majors_only:!0},new Handshake.Registrations.Registration({career_fair_id:this.career_fair().id()}).index((t=this,function(e){return t.acceptingAllMajorRegistrations(Handshake.Resource.resourcesFromArray(e.results)),t.acceptingAllMajorRegistrations().length>0?t.showWarningModal():t.forceSubmit()}),null,e),!1;this.forceSubmit()},t.prototype.forceSubmit=function(){return this.hideWarningModal(),$("form",this.element).submit()},t.prototype.showWarningModal=function(){return $("#update-allow-all-majors-warning-modal").modal("show")},t.prototype.hideWarningModal=function(){if($("#update-allow-all-majors-warning-modal").length>0)return $("#update-allow-all-majors-warning-modal").modal("hide")},t}(),Handshake.ShowCareerFairView=function(){function t(t){var s,i,n,o,r;this.props=t,this.emailAttendeesModalConfirm=e(this.emailAttendeesModalConfirm,this),this.duplicateCareerFairSuccess=e(this.duplicateCareerFairSuccess,this),this.showAddInstitutionAttendee=e(this.showAddInstitutionAttendee,this),this.publish_item=e(this.publish_item,this),this.unpublish_item=e(this.unpublish_item,this),this.mouseout=e(this.mouseout,this),this.mouseover=e(this.mouseover,this),this.show_session_attendee_selection=e(this.show_session_attendee_selection,this),this.career_fair=ko.observable(Handshake.Resource.resourceFromObject(this.props.career_fair)),this.career_fair_sessions=Handshake.Resource.resourcesFromArray(this.props.career_fair_sessions),this.school_institution_attendees=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.school_institution_attendees)),this.moused_over=ko.observable(!1),this.unpublish_text=ko.observable("Published"),this.publish_text=ko.observable("Not Published"),this.props.attendable_enabled&&(this.attendUnattendView=new Handshake.AttendUnattendView(this.career_fair(),this.props.attendee,this.props.new_attendee_path),this.career_fair_session_attendee_views=ko.observableArray(),_.each(this.props.career_fair_session_attendee_data,(r=this,function(e){var t;return t=new Handshake.AttendUnattendView(Handshake.Resource.resourceFromObject(e.career_fair_session),e.attendee,e.new_attendee_path,r.props.survey_response_id),r.career_fair_session_attendee_views.push(t)}))),this.props.notes_enabled&&(this.notesPage=new Handshake.Notes.NotesView(this.career_fair(),!1)),this.props.pins_enabled&&(n=ko.observable(),this.props.pin&&n(new Handshake.Pins.Pin(this.props.pin)),this.createPinModal=new Handshake.Pins.CreateModalView(this.career_fair,n)),this.schoolInstitutionAttendeesList=new Handshake.InstitutionAttendees.InstitutionAttendeesList({attendable:this.career_fair(),institution_attendees:this.school_institution_attendees,institution_type:"School",consortia_exist:this.props.consortia_exist}),this.selectedInstitutionAttendeeView=ko.observable(this.schoolInstitutionAttendeesList),
this.contactModal=new Handshake.Contacts.ShowContactModal(this.props.contacts,this.props.can_show_contact),o=this.props.virtual_location_type&&this.props.virtual_location_type.id,s=this.props.handshake_host_type&&this.props.handshake_host_type.id,i=["All Invited or Registered or Checked In","All Invited","All Registered","All Checked In","Registered and Checked In","Invited but not Registered or Checked In","Registered and not Checked In"],this.career_fair().career_fair_location_type_id()===o&&this.career_fair().career_fair_host_type_id()===s&&i.push("Registered and no sessions"),this.email_attendees_props={handleConfirmClick:this.emailAttendeesModalConfirm,options:i}}return t.prototype.show_session_attendee_selection=function(){return $("#attendee-session-selection-modal").modal("show")},t.prototype.mouseover=function(){return this.moused_over(!0),this.unpublish_text("Unpublish"),this.publish_text("Publish Career Fair")},t.prototype.mouseout=function(){return this.moused_over(!1),this.unpublish_text("Published"),this.publish_text("Not Published")},t.prototype.unpublish_item=function(){return this.career_fair().unpublish()},t.prototype.publish_item=function(){return this.career_fair().publish()},t.prototype.showAddInstitutionAttendee=function(e){return Handshake.SPA.navigate(this.career_fair().entity_path+"/institution_attendees?institution_type="+e.institution_type())},t.prototype.duplicateCareerFair=function(){return this.career_fair().duplicate(this.duplicateCareerFairSuccess)},t.prototype.duplicateCareerFairSuccess=function(e){return $("#duplicate-confirmation-modal").modal("hide"),Handshake.SPA.navigate(new Handshake.CareerFairs.CareerFair(e.career_fair).edit_entity_path)},t.prototype.emailAttendeesModalConfirm=function(e){var t;return t=$.param({email_attendees_for_career_fair_id:this.career_fair().id(),selected_option:e}),Handshake.SPA.navigate("/mass_emails/new?"+t)},t}(),Handshake.CareerFairs.FilterCareerFairsView=function(){function t(t,s,i,n){var o;this.additionalCallback=s,this.searchCallback=e(this.searchCallback,this),this.items=ko.observableArray([]),this.templateName="CareerFair-template",this.searchable=new Handshake.Searchable($("#search-form",t),"career_fairs",this.searchCallback,t),this.searchable.pushHistoryOnSearchPerformed(!1),i||("Career Services"===(o=Handshake.passed.current_user_type)||"Admins"===o?this.searchable.initialSetup("UniversityCareerFairs",n):this.searchable.initialSetup("CareerFair",n))}return t.prototype.searchCallback=function(e){if(this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.CareerFairs.CareerFair)),this.additionalCallback)return this.additionalCallback(e)},t}(),Handshake.ManageCareerFairsView=function(){function t(t){var s,i;this.props=t,this.update_career_fair_favorites=e(this.update_career_fair_favorites,this),this.isInvitedToFair=e(this.isInvitedToFair,this),this.has_declined_registration=e(this.has_declined_registration,this),this.has_pending_registration=e(this.has_pending_registration,this),this.has_approved_registration=e(this.has_approved_registration,this),this.searchCallback=e(this.searchCallback,this),this.career_fairs=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"career_fairs",this.searchCallback),"Career Services"===(i=Handshake.passed.current_user_type)||"Admins"===i?this.searchable.initialSetup("UniversityCareerFairs"):this.searchable.initialSetup("CareerFair"),s={careerFairIds:this.career_fairs().map(function(e){return e.id})},this.props.registered_career_fair_session_ids&&(s.registeredCareerFairSessionIds=this.props.registered_career_fair_session_ids),this.career_fair_favorite_ids=ko.observable(this.props.career_fairs_favorites.map(function(e){return e.id})),this.react_props=ko.observable({entities:{favorites:this.props.career_fairs_favorites,careerFairs:this.career_fairs().map(function(e){return e.initial_prop})},page:s,updateCareerFairFavorites:this.update_career_fair_favorites})}return t.prototype.searchCallback=function(e){return this.props.render_in_react?setTimeout((t=this,function(){var s,i;return s=_.extend({},t.react_props().entities,{careerFairs:e.results}),i=_.extend({},t.react_props().page,{careerFairIds:e.results.map(function(e){return e.id})}),t.react_props(_.extend({},t.react_props(),{entities:s,page:i}))}),0):this.career_fairs(Handshake.Resource.resourcesFromArray(e.results,Handshake.CareerFairs.CareerFair));var t},t.prototype.has_approved_registration=function(e){return!!this.props.approved_registration_career_fair_ids&&_.contains(this.props.approved_registration_career_fair_ids,parseInt(e.id()))},t.prototype.has_pending_registration=function(e){return!!this.props.pending_registration_career_fair_ids&&_.contains(this.props.pending_registration_career_fair_ids,parseInt(e.id()))},t.prototype.has_declined_registration=function(e){return!!this.props.declined_registration_career_fair_ids&&_.contains(this.props.declined_registration_career_fair_ids,parseInt(e.id()))},t.prototype.isInvitedToFair=function(e){return!!e.hidden()&&(!!this.props.visited_hidden_career_fair_ids&&_.contains(this.props.visited_hidden_career_fair_ids,""+e.id()))},t.prototype.update_career_fair_favorites=function(e){return this.react_props(_.extend({},this.react_props(),{entities:_.extend({},this.react_props().entities,{favorites:e})})),this.career_fair_favorite_ids(e.map(function(e){return e.favoritable_id}))},t}(),Handshake.CareerFairs.Card=function(){function t(t){var s;this.props=t,this.datetime=e(this.datetime,this),this.set_alerts=e(this.set_alerts,this),this.details_url=e(this.details_url,this),s=this.details_url(),this.vm={type:"career-fair",featured:this.props.featured,heading_params:{date:this.props.card.start_date(),title:this.props.card.name(),title_path:s,subtitle:this.datetime()},content_params:{location_name:this.props.card.location_name(),alerts:[]},action_params:{actions:[{text:"View Details",url:s,"class":"btn-brand-alt-green"}]}},this.set_alerts()}return t.prototype.details_url=function(){return null!=this.props.employer_name?this.props.card.member_route("employers_list")+"?"+$.param({query:this.props.employer_name()}):this.props.card.entity_path},t.prototype.set_alerts=function(){var e,t;return e=1===(t=this.props.card.approved_registrations_count())?"company":"companies",this.vm.content_params.alerts.push({html_safe_content:t+" "+e+" registered","class":"success"})},t.prototype.datetime=function(){var e,t,s;return s=this.props.card.moment_time_zone(),t=this.props.card.start_date(),e=this.props.card.end_date(),Handshake.Helpers.startToEndSuccinct(t,e,s)},t}(),Handshake.CareerFairs.TransitionConfirmationModal=function(s){function i(){this.show=e(this.show,this),this.show_modal=e(this.show_modal,this),this.close_modal=e(this.close_modal,this),i.__super__.constructor.call(this,{confirm_button_text:ko.observable(""),title:ko.observable(""),safe_body_html:ko.observable("")})}return t(i,s),i.prototype.close_modal=function(e){if($(".career-fair-transition-confirmation-modal").modal("hide"),_.isFunction(e))return e()},i.prototype.show_modal=function(e,t){return this.confirm_callback=e,this.cancel_callback=t,$(".career-fair-transition-confirmation-modal").modal("show")},i.prototype.show=function(e){var t,s,i,n,o;return o=e.title,n=e.safe_body_html,i=e.confirm_button_text,s=e.confirm,t=e.cancel,this.confirm_button_text(i),this.title(o),this.safe_body_html(n),this.show_modal(s,t)},i}(Handshake.Application.ConfirmationModal)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.CareerPlans={},Handshake.CareerPlans.CareerPlan=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},status:{send:!0},photo:{send:!0},photo_url:{},school_path:{},school_id:{},student_screen:{send:!0,nested_attribute:!0,belongs_to:Handshake.StudentScreens.StudentScreen}}),this.photo_present=ko.computed((s=this,function(){return s.photo_url()}))}return t(i,s),i.type="CareerPlan",i.underscore="career_plan",i.prototype.nested_route=function(){return this.school_path()},i}(Handshake.Resource),Handshake.CareerPlans.SchoolYear=function(e){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{},status:{}}),this.update(e)}return t(s,e),s.type="SchoolYear",s.underscore="school_year",s}(Handshake.Resource),Handshake.CareerPlans.CareerPlanCategory=function(s){function i(t){var s;this.removePlanItem=e(this.removePlanItem,this),this.stopEditing=e(this.stopEditing,this),this.editName=e(this.editName,this),this.addPlanItem=e(this.addPlanItem,this),this.reSort=e(this.reSort,this),this.addPlanItemSuccess=e(this.addPlanItemSuccess,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},school_id:{},career_plan_id:{}}),this.placeholderText=ko.computed((s=this,function(){return"Add new "+s.name()+" Plan Item"})),this.editMode=ko.observable(!1),this.focusInput=ko.observable(!1),this.plan_items=ko.observableArray([]),this.new_plan_item=ko.observable(new Handshake.CareerPlans.PlanItem({career_plan_category_id:this.id()}))}return t(i,s),i.type="CareerPlanCategory",i.underscore="career_plan_category",i.underscore_plural="career_plan_categories",i.nested_methods=["index","create"],i.prototype.nested_route=function(){return"/career_plans/"+this.career_plan_id()},i.prototype.addPlanItemSuccess=function(e){return this.plan_items.push(new Handshake.CareerPlans.PlanItem(e.plan_item)),this.new_plan_item(new Handshake.CareerPlans.PlanItem({})),$("#plan-item-edit").modal("hide")},i.prototype.reSort=function(e){var t,s;return s=[],t=e.item,ko.utils.arrayForEach(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),t.ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},i.prototype.addPlanItem=function(e){return e.update({career_plan_category_id:this.id(),school_id:this.school_id(),career_plan_id:this.career_plan_id()}),e.create(this.addPlanItemSuccess)},i.prototype.editName=function(){return this.editMode(!0),this.focusInput(!0)},i.prototype.stopEditing=function(){return this.editMode(!1),this.save(),this.focusInput(!1)},i.prototype.removePlanItem=function(e){return e.destroy((t=this,function(){return t.plan_items.remove(e)}));var t},i}(Handshake.Resource),Handshake.CareerPlans.PlanItem=function(s){function i(t){this.destroyCompletion=e(this.destroyCompletion,this),this.createCompletion=e(this.createCompletion,this),this.createCompletionSuccess=e(this.createCompletionSuccess,this),this.updateServer=e(this.updateServer,this),this.saveFailure=e(this.saveFailure,this),this.saveSuccess=e(this.saveSuccess,this),this.revertAndHide=e(this.revertAndHide,this),this.completedForSchoolYear=e(this.completedForSchoolYear,this),this.nested_route=e(this.nested_route,this),this.toggleCompleted=e(this.toggleCompleted,this),i.__super__.constructor.call(this,t),this.attributes({content:{send:!0},description:{send:!0},safe_description_html:{},school_id:{},career_plan_id:{send:!0},career_plan_category_id:{send:!0},sort_order:{send:!0}}),this.plan_item_completions=ko.observableArray([]),this.plan_item_completions(Handshake.Resource.resourcesFromArray(t.plan_item_completions,Handshake.CareerPlans.PlanItemCompletion))}return t(i,s),i.type="PlanItem",i.underscore="plan_item",i.prototype.toggleCompleted=function(e){return this.completedForSchoolYear(e)?this.destroyCompletion(e):this.createCompletion(e)},i.prototype.nested_route=function(){return"/career_plans/"+this.career_plan_id()},i.prototype.completedForSchoolYear=function(e){return!!e&&_.find(this.plan_item_completions(),function(t){return t.school_year_id()===e.id()})},i.prototype.hideModal=function(){return $("#plan-item-edit").modal("hide")},i.prototype.revertAndHide=function(){return this.revert(),this.hideModal()},i.prototype.saveSuccess=function(){return this.hideModal()},i.prototype.saveFailure=function(e){return console.log(e)},i.prototype.updateServer=function(){return this.save(this.saveSuccess,this.saveFailure)},i.prototype.createCompletionSuccess=function(e){return this.plan_item_completions.push(new Handshake.CareerPlans.PlanItemCompletion(e.plan_item_completion)),Handshake.Helpers.notifySuccess("Career Plan Updated")},i.prototype.createCompletion=function(e){var t;return(t=new Handshake.CareerPlans.PlanItemCompletion({})).update({school_id:this.school_id(),career_plan_id:this.career_plan_id(),plan_item_id:this.id(),school_year_id:e.id()}),Handshake.passed.viewing_as_user_id&&t.update({user_id:Handshake.passed.viewing_as_user_id}),t.create(this.createCompletionSuccess)},i.prototype.destroyCompletion=function(e){var t,s;return(t=this.completedForSchoolYear(e))?(Handshake.passed.viewing_as_user_id&&t.update({user_id:Handshake.passed.viewing_as_user_id}),t.destroy((s=this,function(e){return e.success?(s.plan_item_completions.remove(t),Handshake.Helpers.notifySuccess("Completion Unchecked")):console.log("Failed to uncheck completion")}))):console.log("Could not find completion to uncheck")},i}(Handshake.Resource),Handshake.CareerPlans.PlanItemCompletion=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{},school_year_id:{send:!0},career_plan_id:{},plan_item_id:{send:!0},user_id:{send:!0}}),this.update(t)}return t(i,s),i.type="PlanItemCompletion",i.underscore="plan_item_completion",i.prototype.nested_route=function(){return"/plan_items/"+this.plan_item_id()},i}(Handshake.Resource),Handshake.CareerPlanItemsView=function(){function t(t,s){this.props=t,this.element=s,this.onEnter=e(this.onEnter,this),this.removeCategory=e(this.removeCategory,this),this.categoryAdded=e(this.categoryAdded,this),this.loadInitialPlanItems=e(this.loadInitialPlanItems,this),this.createOrUpdateItem=e(this.createOrUpdateItem,this),this.selectPlanItem=e(this.selectPlanItem,this),this.career_plan_categories=ko.observableArray([]),this.selected_plan_item=ko.observable(null),this.selected_category=ko.observable(null),this.career_plan=this.props.career_plan,this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.new_career_plan_category_view=new Handshake.CareerPlans.CreateCareerPlanCategoryView(this.categoryAdded,this.career_plan),this.career_plan_categories(Handshake.Resource.resourcesFromArray(this.props.career_plan_categories,Handshake.CareerPlans.CareerPlanCategory)),this.loadInitialPlanItems()}return t.prototype.selectPlanItem=function(e,t){return this.selected_category(t),this.selected_plan_item(e),$("#plan-item-edit").modal("show")},t.prototype.createOrUpdateItem=function(e){return e.isPersisted()?(e.updateServer(),!1):!!this.selected_category&&(this.selected_category().addPlanItem(e),!1)},t.prototype.loadInitialPlanItems=function(){return _.each(this.career_plan_categories(),(e=this,function(t){return t.plan_items(Handshake.Resource.resourcesFromArray(_.where(e.props.initial_plan_items,{career_plan_category_id:t.id()}),Handshake.CareerPlans.PlanItem))}));var e},t.prototype.categoryAdded=function(e){return this.career_plan_categories.push(e)},t.prototype.removeCategory=function(e){return e.destroy((t=this,function(s){if(s.success)return t.career_plan_categories.remove(e)}));var t},t.prototype.onEnter=function(e,t){return 13!==t.keyCode||(this.createOrUpdateItem(e),!1)},t}(),Handshake.CareerPlans.CreateCareerPlanCategoryView=function(){function t(t,s){this.addedCallback=t,this.career_plan=s,this.onEnter=e(this.onEnter,this),this.createCareerPlanCategory=e(this.createCareerPlanCategory,this),this.createCareerPlanCategorySuccess=e(this.createCareerPlanCategorySuccess,this),this.new_career_plan_category_name=ko.observable(""),this.new_career_plan_category_description=ko.observable("")}return t.prototype.createCareerPlanCategorySuccess=function(e){var t;return t=new Handshake.CareerPlans.CareerPlanCategory(e.career_plan_category),this.addedCallback(t),$("#edit-career-plan-category").modal("hide")},t.prototype.createCareerPlanCategory=function(){var e;return(e=new Handshake.CareerPlans.CareerPlanCategory({})).update({school_id:this.career_plan.school_id,career_plan_id:this.career_plan.id}),e.update({name:this.new_career_plan_category_name(),description:this.new_career_plan_category_description()}),e.create(this.createCareerPlanCategorySuccess),this.new_career_plan_category_name("")},t.prototype.onEnter=function(e,t){return 13!==t.keyCode||(this.createCareerPlanCategory(e),!1)},t}(),Handshake.CareerPlanCompletionsView=function(){function t(t,s){this.props=t,this.element=s,this.loadInitialPlanItems=e(this.loadInitialPlanItems,this),this.selectPlanItem=e(this.selectPlanItem,this),this.career_plan_categories=ko.observableArray([]),this.relevant_school_years=ko.observableArray([]),this.selected_plan_item=ko.observable(null),this.show_past_years=ko.observable(!1),this.career_plan_categories(Handshake.Resource.resourcesFromArray(this.props.career_plan_categories,Handshake.CareerPlans.CareerPlanCategory)),this.relevant_school_years(Handshake.Resource.resourcesFromArray(this.props.relevant_school_years,Handshake.CareerPlans.SchoolYear)),this.loadInitialPlanItems()}return t.prototype.selectPlanItem=function(e){if(e.safe_description_html())return this.selected_plan_item(e),$("#plan-item-info").modal("show")},t.prototype.loadInitialPlanItems=function(){return _.each(this.career_plan_categories(),(e=this,function(t){return t.plan_items(Handshake.Resource.resourcesFromArray(_.where(e.props.initial_plan_items,{career_plan_category_id:t.id()}),Handshake.CareerPlans.PlanItem))}));var e},t}(),Handshake.CareerPlans.CareerPlanPagedForm=function(s){function i(t,s){var n,o,r;this.career_plan=t,this.parent=s,this.cancel=e(this.cancel,this),this.saveChanges=e(this.saveChanges,this),this.finalizeAction=e(this.finalizeAction,this),this.unmount=e(this.unmount,this),i.__super__.constructor.call(this,ko.observable(this.career_plan)),this.career_plan.isNew()&&this.currentPage(0),this.finalizeText(this.career_plan.isPersisted()?"Save Changes":"Create"),this.showDeleteButton(this.career_plan.isPersisted()),this.onBasicsPage=ko.computed((n=this,function(){return 0===n.currentPage()})),this.onRequirementsPage=ko.computed((o=this,function(){return 1===o.currentPage()})),this.pageOptions.push(new Handshake.PagedForm.Page({index:0,name:"Basics",description:""})),this.pageOptions.push(new Handshake.PagedForm.Page({index:1,name:"Requirements",description:""})),this.reselectPage(),this.delete_path=ko.computed((r=this,function(){return r.career_plan.isNew()?"":r.career_plan.entity_path}))}return t(i,s),i.prototype.unmount=function(){return this.unmount_paged_form()},i.prototype.finalizeAction=function(){return this.parent.submit()},i.prototype.saveChanges=function(){return this.parent.submit()},i.prototype.cancel=function(){return this.parent.cancel()},i}(Handshake.PagedForm.View),Handshake.EditCareerPlanView=function(s){function i(t){var s;this.props=t,this.change_image=e(this.change_image,this),this.career_plan=new Handshake.CareerPlans.CareerPlan({id:this.props.career_plan_id,school_id:this.props.school_id,school_path:"/schools/"+this.props.school_id}),this.relevant_schools=ko.observableArray([]),this.parent_major_groups=ko.observableArray([]),this.selected_major_groups=ko.observableArray([]),this.selected_majors=ko.observableArray([]),this.paged_form_view=ko.observable(),i.__super__.constructor.call(this,{title:"",resource:this.career_plan,params:{data:{ajax:!0},success:(s=this,function(e){if(e.success)return s.career_plan.school_path("/schools/"+s.career_plan.school_id()),s.relevant_schools(Handshake.Resource.resourcesFromArray(e.relevant_schools)),s.parent_major_groups(e.parent_major_groups),e.selected_major_groups&&s.selected_major_groups(e.selected_major_groups),e.selected_majors&&s.selected_majors(e.selected_majors),s.paged_form_view(new Handshake.CareerPlans.CareerPlanPagedForm(s.career_plan,s))})}}),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.change_image),this.photoCropView=new Handshake.UserImages.CropImageView(this.career_plan,"large","photo",".large-image",!1)}return t(i,s),i.prototype.change_image=function(e){return this.photoCropView.changeImage(e)},i}(Handshake.ResourceForm)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Charges={},Handshake.Charges.Charge=function(s){function i(t){var s,n,o,r;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({content:{send:!0},created_at:{},user_id:{},user_name:{send:!0},user_photo_url:{},user_path:{},chargeable_path:{},amount:{send:!0},payment_method:{belongs_to:Handshake.PaymentMethods.PaymentMethod},external_customer_id:{send:!0},institution_id:{send:!0},institution_type:{send:!0},notes:{send:!0},cc_receipt_to_user:{send:!0},custom_message:{send:!0},user_institution_name:{},institution_name:{},credit_card_details:{},last_four_digits:{send:!0},card_type:{send:!0},status:{send:!0},manual:{send:!0}}),this.nice_title=ko.computed((s=this,function(){return s.institution_name()&&s.user_institution_name()!==s.institution_name()?s.institution_name()+" ("+s.user_name()+" on behalf of "+s.institution_name()+")":s.institution_name()?s.institution_name()+" ("+s.user_name()+")":s.user_name()+" (Unknown Institution)"})),this.nice_amount=ko.computed((n=this,function(){return Handshake.passed.currency_symbol+parseFloat(n.amount()).toFixed(2)})),this.nice_payment_method=ko.computed((o=this,function(){return o.payment_method().name()+" Payment"})),this.nice_created_at=ko.computed((r=this,function(){return Handshake.Helpers.straightDateTime(r.created_at())}))}return t(i,s),i.type="Charge",i.underscore="charge",i.prototype.nested_route=function(){return""+this.chargeable_path()},i}(Handshake.Resource),Handshake.Charges.ChargesView=function(){function e(e){this.charges=ko.observableArray([]),this.charges(Handshake.Resource.resourcesFromArray(e,Handshake.Charges.Charge))}return e}(),Handshake.Charges.ChargeForm=function(){function t(t){this.props=t,this.createSuccess=e(this.createSuccess,this),this.createCashnet=e(this.createCashnet,this),this.createTouchnet=e(this.createTouchnet,this),this.show_checkout=e(this.show_checkout,this),this.initialize_handler_if_needed=e(this.initialize_handler_if_needed,this),this.chargeable=this.props.chargeable,this.institution_id=this.props.institution_id,this.institution_type=this.props.institution_type,this.stripe_publishable_key=this.props.stripe_publishable_key,this.stripe_amount=this.props.stripe_amount,this.payment_processor=this.props.payment_processor,this.charge=new Handshake.Charges.Charge({chargeable_path:this.chargeable().entity_path})}return t.prototype.initialize_handler_if_needed=function(){var e;if(null==this.handler&&"Stripe"===this.payment_processor)return this.handler=StripeCheckout.configure({key:this.stripe_publishable_key,token:(e=this,function(t){var s;return e.charge=new Handshake.Charges.Charge({chargeable_path:e.chargeable().entity_path}),e.charge.update({external_customer_id:t.id,last_four_digits:t.card.last4,card_type:t.card.brand}),s={stripeToken:t.id},e.charge.create(e.createSuccess,null,s)})})},t.prototype.show_checkout=function(e,t){return this.initialize_handler_if_needed(),"Stripe"===this.payment_processor?(this.handler.open({name:"Pay Now",amount:this.stripe_amount,currency:Handshake.passed.default_currency.toLowerCase()}),t.preventDefault()):"Cashnet"===this.payment_processor?(this.charge=new Handshake.Charges.Charge({chargeable_path:this.chargeable().entity_path}),this.charge.update({status:"pending"}),this.charge.create(this.createCashnet)):"Touchnet"===this.payment_processor?(this.charge=new Handshake.Charges.Charge({chargeable_path:this.chargeable().entity_path}),this.charge.update({status:"pending"}),this.charge.create(this.createTouchnet)):void 0},t.prototype.createTouchnet=function(e){return Handshake.Helpers.notifySuccess("Redirecting to Touchnet."),function(e,t){var s;s=document.createElement("form"),document.body.appendChild(s),s.method=t,s.action=e,s.submit()}(e.redirect_url,"POST")},t.prototype.createCashnet=function(e){return Handshake.Helpers.notifySuccess("Redirecting to Cashnet."),window.location.href=e.redirect_url},t.prototype.createSuccess=function(){return Handshake.Helpers.notifySuccess("Payment successful."),window.location.reload()},t}(),Handshake.Charges.ManualChargeForm=function(){function t(t,s,i){this.createSuccess=e(this.createSuccess,this),this.submitCharge=e(this.submitCharge,this),this.set_chargeable=e(this.set_chargeable,this),this.charge=ko.observable(),t&&this.set_chargeable(t,s,i)}return t.prototype.set_chargeable=function(e,t,s){var i;return i=new Handshake.Charges.Charge({institution_id:t,institution_type:s,chargeable_path:e().entity_path,cc_receipt_to_user:!0,manual:!0}),this.charge(i)},t.prototype.submitCharge=function(){return this.charge().create(this.createSuccess)},t.prototype.createSuccess=function(){return Handshake.Helpers.notifySuccess("Payment successfully recorded."),window.location.reload()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.CheckinWaitingRoom=function(){function t(t){var s,i,n;this.props=t,this.show_status_warning_modal=e(this.show_status_warning_modal,this),this.start_appointment=e(this.start_appointment,this),this.check_drop_in_status_and_act=e(this.check_drop_in_status_and_act,this),this.remove_drop_in=e(this.remove_drop_in,this),this.search_callback=e(this.search_callback,this),this.notify_new_drop_in=e(this.notify_new_drop_in,this),this.searchable=new Handshake.Searchable($("#search-form"),"checkins",this.search_callback),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s||"Mentors"===s?this.searchable.initialSetup("UniversityDropIns"):this.searchable.initialSetup("DropIns"),this.searchable.pushHistoryOnSearchPerformed(!1),this.drop_ins=ko.observableArray(),this.selected_drop_in=ko.observable(),this.checked_in_scheduled_appointments=ko.observableArray(),this.last_drop_in_created_at=moment(),this.sound_enabled=ko.observable(!0),this.checkins_refresh_interval=setInterval((i=this,function(){return i.searchable.performSearchFromInterface()}),Handshake.passed.waiting_room_polling_frequency),$(document).bind("page:before-change",(n=this,function(){return clearInterval(n.checkins_refresh_interval)}))}return t.prototype.notify_new_drop_in=function(){var e,t,s;if(s=this.drop_ins().slice().sort(function(e,t){return moment(e.created_at())-moment(t.created_at())}),t=$(s).get(-1),moment(t.created_at())>this.last_drop_in_created_at&&(this.last_drop_in_created_at=moment(t.created_at()),e=$("#drop-in-chime")[0],this.sound_enabled()&&null!=e))return e.play()},t.prototype.search_callback=function(e){if(this.drop_ins(Handshake.Resource.resourcesFromArray(e.results)),this.drop_ins().length>0&&(this.notify_new_drop_in(),$("title").text("("+this.drop_ins().length+") Handshake")),e.scheduled_appointments)return this.checked_in_scheduled_appointments(Handshake.Resource.resourcesFromArray(e.scheduled_appointments))},t.prototype.remove_drop_in=function(e){if(confirm("Are you sure you want to remove this appointment"))return e.status("cancelled"),e.save((t=this,function(){return t.drop_ins.remove(e)}));var t},t.prototype.check_drop_in_status_and_act=function(e,t){return e.fetch((s=this,function(){return"pending"!==e.status()?s.show_status_warning_modal(e):s.start_appointment(e,t)}));var s},t.prototype.start_appointment=function(e,t){return e.update({status:"in_progress"}),e.save(function(){var s;return s="/appointments/new?drop_in_id="+e.id(),t.shiftKey?($("#status-warning-modal").modal("hide"),window.open(s,"_blank")):window.location.href=s})},t.prototype.show_status_warning_modal=function(e){return this.selected_drop_in(e),$("#status-warning-modal").modal("show")},t}(),Handshake.NestedCheckinPage=function(){function t(t){var s,i,n,o,r,a,c,l,u;for(this.props=t,this.relevant_room_name=e(this.relevant_room_name,this),this.unmount=e(this.unmount,this),this.kiosk_auto_focus_handler=e(this.kiosk_auto_focus_handler,this),this.cancel_checkin=e(this.cancel_checkin,this),this.cancel_selecting_attendable=e(this.cancel_selecting_attendable,this),this.create_walkin=e(this.create_walkin,this),this.selectWalkin=e(this.selectWalkin,this),this.selectAttendable=e(this.selectAttendable,this),this.setLabelText=e(this.setLabelText,this),this.printNametag=e(this.printNametag,this),this.perform_checkin_failure=e(this.perform_checkin_failure,this),this.perform_checkin_success=e(this.perform_checkin_success,this),this.perform_checkin=e(this.perform_checkin,this),this.reset_timeout=e(this.reset_timeout,this),this.get_attendables=e(this.get_attendables,this),this.get_attendable_types=e(this.get_attendable_types,this),this.select_attendable_type=e(this.select_attendable_type,this),this.checkin_to_attendable=e(this.checkin_to_attendable,this),this.getInputParams=e(this.getInputParams,this),this.checkInternetConnection=e(this.checkInternetConnection,this),this.select_appointment_category=e(this.select_appointment_category,this),this.select_appointment_type=e(this.select_appointment_type,this),this.filter_attendable=e(this.filter_attendable,this),this.attendables=ko.observableArray(),this.attendable_types=ko.observableArray(),this.registered_attendables=ko.observableArray(),this.selecting_attendable_type=ko.observable(!1),this.selected_attendable_type=ko.observable(),this.selectingAttendable=ko.observable(!1),this.selected_attendable=ko.observable(),this.connection_lost=ko.observable(!1),this.kiosk_placeholder=this.props.kiosk_placeholder,this.attendee=null,this.appointments=ko.observableArray(),this.searching=!1,this.selecting_appointment_type=ko.observable(!1),this.selecting_appointment_category=ko.observable(!1),this.showWalkin=ko.observable(!1),this.timeout_interval=null,this.internet_connection_interval=null,this.filtered_attendables=ko.observableArray(),this.attendable_query=ko.observable(),this.attendable_query.subscribe((r=this,function(e){var t;return t=new RegExp(e,"i"),r.filtered_attendables(_.select(r.attendables(),function(e){return r.filter_attendable(t,e)}))})),this.appointment_type_id=ko.observable(null),this.available_appointment_types=ko.observableArray([]),this.available_appointment_categories=ko.observableArray([]),this.user_input_value=ko.observable(""),this.office_location_id=getUrlVar("office_location_id",window.location),this.career_center_id=getUrlVar("career_center_id",window.location),this.column_css=ko.computed((a=this,function(){return 1===a.attendable_types().length?"col-md-6 col-md-offset-3":2===a.attendable_types().length?"col-md-6":3===a.attendable_types().length?"col-md-4":4===a.attendable_types().length?"col-lg-3 col-md-6":void 0})),this.props.attendable&&this.selected_attendable(Handshake.Resource.resourceFromObject(this.props.attendable)),this.emptyText=ko.computed((c=this,function(){return void 0===c.appointment_type_id()?"Please select an appointment type to see available time slots.":c.searching?void 0:"All available time slots have been taken."})),this.pretty_attendable_type=ko.computed((l=this,function(){return l.selected_attendable_type()?l.selected_attendable_type().replace("_"," ")+"s":""})),this.printerName="",this.labelXML="",s=0,i=(o=dymo.label.framework.getPrinters()).length;s<i;s++)if("LabelWriterPrinter"===(n=o[s]).printerType){this.printerName=n.name;break}this.internet_connection_interval=setInterval((u=this,function(){return u.checkInternetConnection()}),3e4),$(document).on("keydown",this.kiosk_auto_focus_handler)}return t.prototype.filter_attendable=function(e,t){switch(t.type){case"InterviewSchedule":return e.test(t.name())||e.test(this.relevant_room_name(t));case"CareerFairSession":return e.test(t.name())||e.test(t.career_fair_name())||e.test(t.identifier());case"Event":return e.test(t.name())||e.test(t.location_name())||e.test(t.description())}},t.prototype.select_appointment_type=function(e){return this.appointment_type_id(e.id),this.create_walkin()},t.prototype.select_appointment_category=function(e){return e.id&&this.available_appointment_types(_.filter(this.available_appointment_types(),function(t){
return null===t.id||_.contains(e.appointment_type_ids,t.id)})),this.selecting_appointment_category(!1),this.selecting_appointment_type(!0)},t.prototype.checkInternetConnection=function(){return $.ajax({url:"/checkins/ping",type:"GET",success:(t=this,function(){return t.connection_lost(!1)}),error:(e=this,function(t){if(0===t.status)return e.connection_lost(!0)})});var e,t},t.prototype.getInputParams=function(){var e,t,s;return t=new RegExp(this.props.card_regex),s=this.props.card_regex&&t.test(this.user_input_value())?(this.props.card_substring_regex&&(e=(t=new RegExp(this.props.card_substring_regex)).exec(this.user_input_value())),{user_card_input_value:e?e[1]:this.user_input_value()}):{user_input_value:this.user_input_value()},this.career_center_id&&(s.career_center_id=this.career_center_id),this.selected_attendable()&&"CareerFair"===this.selected_attendable().type&&(this.selected_attendable_type("career_fair"),s.selected_career_fair_id=this.selected_attendable().id()),s},t.prototype.checkin_to_attendable=function(){return this.selected_attendable().ajax_call({type:"POST",method:"checkins",on_member:!0,action:"checkins",data:this.getInputParams(),success:this.perform_checkin_success,failure:this.perform_checkin_failure})},t.prototype.select_attendable_type=function(e){return this.selected_attendable_type(e),this.get_attendables()},t.prototype.get_attendable_types=function(){return $.ajax({url:"/checkins/attendable_types_for_user",type:"POST",data:this.getInputParams(),success:(e=this,function(t){return t&&t.success?(e.attendable_types(t.attendable_types),t.show_walkin&&"false"!==getUrlVar("allow_drop_in",window.location.search)&&-1===e.attendable_types().indexOf("appointment")&&e.attendable_types.push("appointment"),e.selecting_attendable_type(!0)):t&&(Handshake.Helpers.notifyError(t.errors),e.cancel_checkin()),e.reset_timeout()})});var e},t.prototype.get_attendables=function(){var e,t;return(e=this.getInputParams()).attendable_type=this.selected_attendable_type(),$.ajax({url:"/checkins/attendables_for_user",type:"POST",data:e,success:(t=this,function(e){var s;return e&&e.success?t.selected_attendable()&&"CareerFair"===t.selected_attendable().type&&1===e.attendables.length?(t.selected_attendable(Handshake.Resource.resourceFromObject(e.attendables[0])),t.checkin_to_attendable()):(t.attendables(Handshake.Resource.resourcesFromArray(e.attendables)),t.filtered_attendables(t.attendables()),t.registered_attendables(Handshake.Resource.resourcesFromArray(e.registered_attendables)),"false"!==getUrlVar("allow_drop_in",window.location.search)&&(t.showWalkin(e.show_walkin),e.appointment_types&&e.appointment_types.length>0&&(t.available_appointment_types(e.appointment_types),t.available_appointment_types.push({name:"No Preference",description:"",id:null})),e.appointment_categories&&e.appointment_categories.length>0&&(t.available_appointment_categories(e.appointment_categories),s=e.appointment_categories.reduce(function(e,t){var s,i,n;for(s=0,i=(n=t.appointment_type_ids).length;s<i;s++)e[n[s]]=!0;return e},{}),e.appointment_types.filter(function(e){return!s[e.id]&&e.id}).length>0&&t.available_appointment_categories.push({name:"All Appointment Types",description:"",id:null}))),t.selecting_attendable_type(!1),t.selectingAttendable(!0)):e&&(Handshake.Helpers.notifyError(e.errors),t.cancel_checkin()),t.reset_timeout()})})},t.prototype.reset_timeout=function(){return clearInterval(this.timeout_interval),this.timeout_interval=setTimeout((e=this,function(){return e.cancel_checkin(),Handshake.Helpers.notifyError("Timed out.")}),3e4);var e},t.prototype.perform_checkin=function(e,t){if(!t||13===t.keyCode||"keyup"!==t.type)return this.selected_attendable()&&"CareerFair"===this.selected_attendable().type?this.get_attendables():this.selected_attendable()?this.checkin_to_attendable():(this.reset_timeout(),this.get_attendable_types())},t.prototype.perform_checkin_success=function(e){var t;if(e.success)return t="",this.selected_attendable()&&this.selected_attendable().nametags_enabled&&this.selected_attendable().nametags_enabled()?(this.labelXML=this.selected_attendable().nametag_label_xml()||"",e.attendee.user=e.user,this.attendee=Handshake.Resource.resourceFromObject(e.attendee),this.printNametag(),t="You have successfully checked in! Your name tag is now being printed."):t="You have successfully checked in!",e.message&&(t=e.message),Handshake.Helpers.notifySuccess(t),this.selected_attendable(null),this.cancel_checkin()},t.prototype.perform_checkin_failure=function(e){return this.user_input_value(""),0===e.status&&(this.connection_lost(!0),Handshake.Helpers.notifyError("Failed to checkin. Please make sure this device is connected to the internet.")),this.selected_attendable(null),this.cancel_checkin()},t.prototype.printNametag=function(){var e,t,s,i;return""===this.labelXML?(t=function(){return Handshake.Helpers.notifyError("No printer label configuration found! Please contact the event organizer.")},setTimeout(t,2e3),!1):(s=dymo.label.framework.openLabelXml(this.labelXML),e="",this.attendee.user().primary_education().end_date()&&(e=moment(this.attendee.user().primary_education().end_date()).format("MMM YY")),i=this.attendee.user().primary_education().major_names(),this.labelXML.match(/<TextObject>\s+<Name>Name<\/Name>/m)&&this.setLabelText(s,"Name",this.attendee.user().name()),this.labelXML.match(/<TextObject>\s+<Name>FirstName<\/Name>/m)&&this.setLabelText(s,"FirstName",this.attendee.user().calculated_first_name()),this.labelXML.match(/<TextObject>\s+<Name>LastName<\/Name>/m)&&this.setLabelText(s,"LastName",this.attendee.user().last_name()),this.labelXML.match(/<TextObject>\s+<Name>Major<\/Name>/m)&&this.setLabelText(s,"Major",""+i),this.labelXML.match(/<TextObject>\s+<Name>GradDate<\/Name>/m)&&this.setLabelText(s,"GradDate",e),this.labelXML.match(/<TextObject>\s+<Name>MajorGradDate<\/Name>/m)&&this.setLabelText(s,"MajorGradDate",i+" "+e),""===this.printerName?(t=function(){return Handshake.Helpers.notifyError("No printer found! Please plug in a Dymo label printer.")},setTimeout(t,2e3),!1):(s.print(this.printerName),!1))},t.prototype.setLabelText=function(e,t,s){return e.setObjectText(t,s||"")},t.prototype.selectAttendable=function(e){return this.selected_attendable(e),this.perform_checkin()},t.prototype.selectWalkin=function(){return this.available_appointment_types().length>0?(this.selectingAttendable(!1),this.available_appointment_categories().length>0?this.selecting_appointment_category(!0):this.selecting_appointment_type(!0)):this.create_walkin()},t.prototype.create_walkin=function(){var e,t,s;return e=this.getInputParams(),this.appointment_type_id()&&(e.appointment_type_id=this.appointment_type_id()),this.office_location_id&&(e.office_location_id=this.office_location_id),$.ajax({url:"/checkins/create_walkin_appointment",type:"POST",data:e,failure:this.perform_checkin_failure,success:(s=this,function(e){return e&&e.success?s.perform_checkin_success(e):e?Handshake.Helpers.notifyError(e.errors):void 0}),complete:(t=this,function(){return t.selectingAttendable(!1),t.selecting_appointment_type(!1)})})},t.prototype.cancel_selecting_attendable=function(){return this.selectingAttendable(!1),this.selecting_attendable_type(!this.selected_attendable()),this.selected_attendable_type(null)},t.prototype.cancel_checkin=function(){return this.user_input_value(""),this.props.attendable?this.selected_attendable(Handshake.Resource.resourceFromObject(this.props.attendable)):this.selected_attendable(null),this.selectingAttendable(!1),this.selecting_appointment_type(!1),this.selecting_appointment_category(!1),this.appointment_type_id(null),this.selected_attendable_type(null),this.selecting_attendable_type(!1),this.attendable_query(null),clearInterval(this.timeout_interval)},t.prototype.kiosk_auto_focus_handler=function(e){var t,s,i,n,o,r,a;if(i=["autosuggest-ajax-global-search"],(t=$(".checkin-input")).length>0)return r=""===t[0].value||t[0].value===this.kiosk_placeholder,n=32,s=13,a=e.keyCode!==n&&e.keyCode!==s,o=!_(i).contains($(document.activeElement).attr("id")),r&&o&&a?(t[0].value="",t.focus()):void 0},t.prototype.unmount=function(){return $(document).off("keydown",this.kiosk_auto_focus_handler),clearInterval(this.timeout_interval),clearInterval(this.internet_connection_interval)},t.prototype.relevant_room_name=function(e){var t,s,i;return i=e.interview_schedule_dates().sort(function(e,t){return Date.parse(e.date())-Date.parse(t.date())}),s=_.detect(i,function(e){return moment(e.date()).isSame(moment(),"day")||moment(e.date()).isAfter(moment(),"day")}),null!=(t=_.first(null!=s?s.rooms():void 0))?t.full_name():void 0},t}(),Handshake.CheckinsFullscreen=function(){function t(t){var s,i;this.props=t,this.goFullscreen=e(this.goFullscreen,this),this.hideFullscreenButton=e(this.hideFullscreenButton,this),this.showFullscreenButton=ko.observable(!0),s='To enter fullscreen mode click <a class="kiosk-toast-links" id="enter-fullscreen" href="#">here</a>.',fullscreenCapable()&&!Handshake.passed.current_user_id&&(toastr.info(s,{timeOut:3e5,closeButton:!0,tapToDismiss:!1}),$("body").on("click","#enter-fullscreen",(i=this,function(){return toastr.clear(),i.goFullscreen()})))}return t.prototype.hideFullscreenButton=function(){return this.showFullscreenButton(!1)},t.prototype.goFullscreen=function(){return this.showFullscreenButton(!1),launchIntoFullscreen()},t}(),Handshake.QrCodeModal=function(){function e(e){this.props=e,this.qr_code_react_modal_props={attendable:this.props.career_fair,attendableType:"careerFair",attendableId:this.props.career_fair.id,careerFairSessions:this.props.career_fair_sessions}}return e}(),Handshake.CheckinModal=function(){function t(t){var s;this.props=t,this.redirectToNewKiosk=e(this.redirectToNewKiosk,this),this.redirectToLegacyKiosk=e(this.redirectToLegacyKiosk,this),this.logoutViaSSO=e(this.logoutViaSSO,this),this.logoutViaLegacyCheckins=e(this.logoutViaLegacyCheckins,this),this.launchNewKiosk=e(this.launchNewKiosk,this),this.launchLegacyKiosk=e(this.launchLegacyKiosk,this),this.launchKiosk=e(this.launchKiosk,this),$(".kiosk-button").attr("data-toggle","modal").attr("role","button"),this.keep_logged_in=ko.observable(!1),this.allow_drop_in=ko.observable(!0),this.appointment_only=ko.observable(!1),this.generic_kiosk=$(".kiosk-button").length>0,this.office_locations=ko.observableArray(this.props.office_locations),this.office_location_id=ko.observable(),this.career_centers=ko.observableArray(this.props.career_centers),this.career_center_id=ko.observable(),this.checked_session=ko.observable(),null!=this.props.career_fair_sessions&&this.checked_session(this.props.career_fair_sessions[0].id),this.allow_all_sessions=ko.observable(!0),this.url=ko.computed((s=this,function(){return s.allow_all_sessions()?s.props.checkin_url:"/career_fair_sessions/"+s.checked_session()+"/checkins"}))}return t.prototype.launchKiosk=function(){return Handshake.passed.current_user_feature_flags["university-kiosk"]?this.launchNewKiosk():this.launchLegacyKiosk()},t.prototype.launchLegacyKiosk=function(){return this.keep_logged_in()?this.redirectToLegacyKiosk():(this.props.slo_url&&this.logoutViaSSO(),this.logoutViaLegacyCheckins())},t.prototype.launchNewKiosk=function(){return!this.keep_logged_in()&&this.props.slo_url&&this.logoutViaSSO(),$.ajax({url:"/kiosks",type:"POST",data:{allow_drop_in:this.allow_drop_in(),appointment_only:this.appointment_only(),attendable_url:this.url(),career_center_id:this.career_center_id(),logout_user:!this.keep_logged_in(),office_location_id:this.office_location_id()},success:(e=this,function(t){if(t.success)return e.redirectToNewKiosk(t.url)})});var e},t.prototype.logoutViaLegacyCheckins=function(){return $.ajax({url:"/checkins/logout_and_set_cookie",type:"POST",data:{attendable_url:this.url()},success:(e=this,function(){return e.redirectToLegacyKiosk()})});var e},t.prototype.logoutViaSSO=function(){return window.open(this.props.slo_url,"_blank")},t.prototype.redirectToLegacyKiosk=function(){var e;return(e={}).allow_drop_in=this.allow_drop_in(),this.office_location_id()&&(e.office_location_id=this.office_location_id()),this.career_center_id()&&(e.career_center_id=this.career_center_id()),window.location=this.url()+"?"+$.param(e)},t.prototype.redirectToNewKiosk=function(e){return window.location=e},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Comments={},Handshake.Comments.Comment=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({content:{send:!0},created_at:{},user_id:{},user_name:{send:!0},user_photo_url:{},user_path:{},commentable_path:{},commentable_type:{send:!0},commentable_id:{send:!0},visibility_level:{send:!0},fancy_status:{}})}return t(i,s),i.type="Comment",i.underscore="comment",i.prototype.nested_route=function(){return""+this.commentable_path()},i}(Handshake.Resource),Handshake.Comments.Activity=function(s){function i(t){var s,n,o;this.tagClass=e(this.tagClass,this),i.__super__.constructor.call(this,t),this.attributes({primary_object_id:{},primary_object_type:{},action:{},name:{},created_at:{},user_id:{},user_name:{},user_photo_url:{},user_path:{},smart_content:{}}),this.update(t),this.should_censor_user_name=ko.computed((s=this,function(){return"EmployerApproval"===s.primary_object_type()&&"decline"===s.action()&&"Employers"===Handshake.passed.current_user_type||"Posting"===s.primary_object_type()&&"decline"===s.action()&&"Employers"===Handshake.passed.current_user_type})),this.smart_name=ko.computed((n=this,function(){return n.user_id()?n.user_id()===Handshake.passed.current_user_id?"You":n.should_censor_user_name()?"A staff member":n.user_name():"System automatically"})),this.smart_text=ko.computed((o=this,function(){return o.smart_name()+" "+o.smart_content()}))}return t(i,s),i.type="Activity",i.underscore="activity",i.prototype.tagClass=function(){return"approve"===this.action()?"tag--success":"decline"===this.action()?"tag--danger":"reset"===this.action()?"tag--warning":"tag--primary"},i}(Handshake.Resource),Handshake.Comments.CommentsView=function(){function t(t,s,i){var n,o;(this.commentable=t,this.visibility_level=null!=s?s:"public",this.can_delete_comments=null!=i&&i,this.removeComment=e(this.removeComment,this),this.removeCommentSuccess=e(this.removeCommentSuccess,this),this.addComment=e(this.addComment,this),this.addCommentSuccess=e(this.addCommentSuccess,this),this.resetNewComment=e(this.resetNewComment,this),this.templateName=e(this.templateName,this),this.loadComments=e(this.loadComments,this),this.refreshCommentable=e(this.refreshCommentable,this),this.commentable)&&(this.comments=ko.observableArray([]),this.new_comment=ko.observable(),this.refreshCommentable(),this.commentable.subscribe((n=this,function(){if(n.commentable()&&n.commentable().isPersisted())return n.refreshCommentable()})),this.commentable()&&!this.commentable().isPersisted()&&this.commentable().isPersisted.subscribe((o=this,function(){if(o.commentable().isPersisted())return o.commentable().recalculate_entity_path(),o.refreshCommentable()})))}return t.prototype.refreshCommentable=function(){if(this.commentable()&&this.commentable().isPersisted()&&this.commentable().entity_path)return this.resetNewComment(),this.loadComments()},t.prototype.loadComments=function(){var e;return new Handshake.Comments.Comment({commentable_path:this.commentable().entity_path}).index((e=this,function(t){return e.comments(Handshake.Resource.resourcesFromArray(t.comments))}),null,{visibility_level:this.visibility_level})},t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.resetNewComment=function(){return this.commentable()?this.new_comment(new Handshake.Comments.Comment({commentable_path:this.commentable().entity_path})):this.new_comment(new Handshake.Comments.Comment({commentable_path:getPathName()})),this.new_comment().visibility_level(this.visibility_level)},t.prototype.addCommentSuccess=function(e){var t;return t=new Handshake.Comments.Comment(e.comment),this.comments.unshift(t),this.resetNewComment()},t.prototype.addComment=function(){return this.new_comment().create(this.addCommentSuccess)},t.prototype.removeCommentSuccess=function(){return this.comments.remove(comment)},t.prototype.removeComment=function(e){return e.destroy((t=this,function(){return t.comments.remove(e)}));var t},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.CommunicationTypes={},Handshake.CommunicationTypes.CommunicationType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{}})}return e(s,t),s.type="CommunicationType",s.underscore="communication_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Consortia={},Handshake.Consortia.Consortium=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0},description:{send:!0},school_ids:{send:!0,array:!0,convert_empty_to_blank:!0},school_names:{array:!0},primary_school_id:{send:!0},primary_school_name:{},email_domains:{send:!0,array:!0,convert_empty_to_blank:!0}})}return e(s,t),s.type="Consortium",s.underscore="consortium",s.underscore_plural="consortia",s}(Handshake.Resource),Handshake.IndexConsortiaView=function(){function e(e){this.props=e,this.consortia=ko.observableArray().trackHasItems(),this.consortia(Handshake.Resource.resourcesFromArray(this.props.consortia))}return e}(),Handshake.NewConsortiumView=function(){function e(e){this.props=e,this.possible_schools=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.possible_schools)),this.consortium=ko.observable(new Handshake.Consortia.Consortium(this.props.consortium)),this.form=ko.observable(new Handshake.ConsortiumForm(this.consortium))}return e}(),Handshake.EditConsortiumView=function(){function e(e){this.props=e,this.possible_schools=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.possible_schools)),this.consortium=ko.observable(new Handshake.Consortia.Consortium(this.props.consortium)),this.form=ko.observable(new Handshake.ConsortiumForm(this.consortium))}return e}(),Handshake.ConsortiumForm=function(){function e(e){this.submit=s(this.submit,this),this.submit_success=s(this.submit_success,this),this.destroy=s(this.destroy,this),this.cancel=s(this.cancel,this),this.deleteItem=s(this.deleteItem,this),this.addItem=s(this.addItem,this),this.schoolSelect2Options=s(this.schoolSelect2Options,this),this.consortium=e,this.new_domain=ko.observable("")}return e.prototype.schoolSelect2Options=function(e){return{url:"/schools",placeholder:"School...",full_data:function(t){return t?(e.primary_school_id(t.id),e.primary_school_name(t.name)):{id:e.primary_school_id(),name:e.primary_school_name()}},dataFunction:function(e){return{query:e,simple_search:!0}}}},e.prototype.addItem=function(){return this.consortium().email_domains.push(this.new_domain()),this.new_domain("")},e.prototype.deleteItem=function(e){return this.consortium().email_domains.remove(e)},e.prototype.cancel=function(){return Handshake.SPA.navigate("/consortia")},e.prototype.destroy=function(){if(!this.consortium().isNew())return this.consortium().destroy(function(){return Handshake.SPA.navigate("/consortia")})},e.prototype.submit_success=function(){return Handshake.SPA.navigate("/consortia")},e.prototype.submit=function(){return this.consortium().isNew()?this.consortium().create(this.submit_success):this.consortium().save(this.submit_success)},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.ContactJobs={},Handshake.ContactJobs.ContactJob=function(t){function s(e){var t,i,n;s.__super__.constructor.call(this,e),this.attributes({contact_id:{send:!0},contact_name:{},contact_institution_id_type:{},contact_institution_name:{},job_id:{send:!0},display_preference:{send:!0},email_qualified_application_packages:{send:!0},email_unqualified_application_packages:{send:!0},send_summary_when_expired:{send:!0}}),this.application_package_preference=ko.computed({read:(i=this,function(){return i.email_unqualified_application_packages()?"all":i.email_qualified_application_packages()?"qualified":"none"}),write:(t=this,function(e){return"all"===e?(t.email_qualified_application_packages(!0),t.email_unqualified_application_packages(!0)):"qualified"===e?(t.email_qualified_application_packages(!0),t.email_unqualified_application_packages(!1)):(t.email_qualified_application_packages(!1),t.email_unqualified_application_packages(!1))})}),this.email_application_packages=ko.observable(this.email_qualified_application_packages()||this.email_unqualified_application_packages()),this.email_application_packages.subscribe((n=this,function(e){return e?n.application_package_preference(n.previous_package_preference||"all"):(n.previous_package_preference=n.application_package_preference(),n.application_package_preference("none"))}))}return e(s,t),s.type="ContactJob",s.underscore="contact_job",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Contacts={},Handshake.Contacts.Contact=function(s){function i(t){this.send_invitation_email=e(this.send_invitation_email,this),i.__super__.constructor.call(this,t),this.attributes({employer_id:{send:!0},first_name:{send:!0},last_name:{send:!0},name:{},title:{send:!0},phone:{send:!0},cell_phone:{},fax:{},email_address:{send:!0},created_at:{},updated_at:{},institution_id:{},institution_type:{},employer_name:{},description:{},source_name:{},assigned_to_id:{},assigned_to_name:{},assigned_to_first_name:{},assigned_to_last_name:{}}),this.inviteSent=ko.observable(!1)}return t(i,s),i.type="Contact",i.underscore="contact",i.prototype.send_invitation_email=function(e,t){var s;if(confirm("Inviting this contact to join Handshake will email them a registration link that can be used to automatically associate their new account with this employer. Do you still want to invite this contact?"))return this.ajax_call({type:"POST",method:"send_invitation_email",on_member:!0,action:"send_invitation_email",data:e,success:(s=this,function(e){if(s.inviteSent(!0),_.isFunction(t))return t(e)})})},i}(Handshake.Resource),Handshake.EditContactView=function(){function t(t){var s;this.props=t,this.employerSelect2Options=e(this.employerSelect2Options,this),this.contactAssignedToSelect2Options=e(this.contactAssignedToSelect2Options,this),this.contact=ko.observable(Handshake.Resource.resourceFromObject(this.props.contact)),this.employer_id=this.contact().employer_id,this.employer_name=this.contact().employer_name,this.employer_name_typeahead_options={path:"/employers",params:{simple_search:!0,category:Handshake.Employers.Employer.type}},this.is_custom_employer=ko.observable(null===this.employer_id()&&null!==this.employer_name()),s={object_type:"contact"},this.props.location&&(s.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(s)}return t.prototype.contactAssignedToSelect2Options=function(){return{placeholder:"Assigned To...",url:"/users/career_services",simple_search:!1,allowClear:!0,secondary_property:"institution_managed_email",full_data:(e=this,function(t,s){return t||s?(e.contact().assigned_to_id(t?t.id:null),e.contact().assigned_to_name(t?t.name:null)):{id:e.contact().assigned_to_id(),name:e.contact().assigned_to_name()}})};var e},t.prototype.employerSelect2Options=function(){return{placeholder:"Employer...",url:"/employers",initial_value:{name:this.employer_name(),id:this.employer_id()},full_data:(e=this,function(t){return t?(e.employer_id(t.id),e.employer_name(t.name)):{id:e.employer_id(),name:e.employer_name()||""}}),dataFunction:function(e){return{query:e,simple_search:!0}},secondary_property:function(e){return e.location_name?e.id+" - "+e.location_name:e.id+" - Location N/A"}};var e},t}(),Handshake.ShowContactView=function(){function e(e){this.props=e,this.contact=ko.observable(Handshake.Resource.resourceFromObject(this.props.contact)),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.contact,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))})),this.props.notes_enabled&&(this.notesModal=new Handshake.Notes.NotesView(this.contact(),!0)),this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1,to_user_id:this.props.message_to_user_id})}return e}(),Handshake.Contacts.CreateContactModal=function(){function t(t,s){this.callback=t,this.employer_id=s,this.createContact=e(this.createContact,this),this.resetNewContact=e(this.resetNewContact,this),this.new_contact=ko.observable(),this.resetNewContact(),this.employer_id&&(this.new_contact().employer_id=this.employer_id),$.fn.modal.Constructor.prototype.enforceFocus=function(){return null}}return t.prototype.resetNewContact=function(){return this.new_contact(new Handshake.Contacts.Contact)},t.prototype.createContact=function(){return this.new_contact().create((e=this,function(t){return $("#add-contact").modal("hide"),e.resetNewContact(),e.callback&&e.callback(t),Handshake.Helpers.notifySuccess("Contact was successfully created")}));var e},t}(),Handshake.Contacts.ShowContactModal=function(){function t(t,s){this.setDisplayedContact=e(this.setDisplayedContact,this),this.contacts=t,this.can_show_contact=s,this.displayedContact=ko.observable()}return t.prototype.setDisplayedContact=function(e){return this.displayedContact(e)},t}(),Handshake.ManageContactsView=function(){function t(t){var s;this.props=t,this.inviteEmployerContactsSuccess=e(this.inviteEmployerContactsSuccess,this),this.massEmailContactsSuccess=e(this.massEmailContactsSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.contacts=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"contacts",this.searchCallback),this.searchable.bulkActions([{label:"Add Label",type:"simple",key_action:!0,bulk_action:"add_label",labellable_type:"Contact",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",key_action:!0,bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Contacts",type:"simple",key_action:!0,bulk_action:"mass_email_contacts",success:this.massEmailContactsSuccess},{label:"Invite Employer Contacts",type:"simple",bulk_action:"invite_employer_contacts",success:this.inviteEmployerContactsSuccess}]),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s?this.searchable.initialSetup("UniversityContact"):this.searchable.initialSetup("Contact")}return t.prototype.searchCallback=function(e){return this.contacts(Handshake.Resource.resourcesFromArray(e.results,Handshake.Contacts.Contact))},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.massEmailContactsSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path+"/edit"},t.prototype.inviteEmployerContactsSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.bulk_invite,Handshake.BulkInvites.BulkInvite).entity_path},t}(),Handshake.ContactMergeView=function(){function t(t){this.props=t,this.merge_contacts=e(this.merge_contacts,this),this.contactSelect2Options=e(this.contactSelect2Options,this),this.vm={from_contact_id:ko.observable(null),to_contact_id:ko.observable(null),i_know_what_im_doing:ko.observable(!1),contactSelect2Options:this.contactSelect2Options,merge_contacts:this.merge_contacts}}return t.prototype.contactSelect2Options=function(e,t){return{placeholder:e,value:t,url:"/contacts",primary_property:function(e){return e.name+" - "+e.email_address},secondary_property:function(e){return"contact at "+e.institution_name+" ("+e.institution_type+" #"+e.institution_id+")"}}},t.prototype.merge_contacts=function(){return(new Handshake.Contacts.Contact).ajax_call({type:"POST",method:"merge_contacts",action:"merge_contacts",on_member:!1,data:{from_contact_id:this.vm.from_contact_id(),to_contact_id:this.vm.to_contact_id()},success:(e=this,function(){return Handshake.Helpers.notifySuccess("Contacts successfully merged"),e.vm.from_contact_id(null)}),failure:function(e){if(!_.isArray(e.errors))return Handshake.Helpers.notifyError("Contact merge failed. See javascript console for details."),console.log(e.errors)}});var e},t}(),Handshake.Contacts.AddContactItem={resultDisplayValue:"<div class=\"select2-add-new-contact\">\n  <i class='fa fa-2x fa-plus-circle' aria-hidden='true'></i>\n  <p>Add New Contact</p>\n</div>",selectedDisplayValue:"Add New Contact",resetValueOnSelect:!0,onSelect:function(){return $("#add-contact").modal("show")}}}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.ContinuingEducationSchools={},Handshake.ContinuingEducationSchools.ContinuingEducationSchool=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({id:{},name:{},schools:{array:!0,belongs_to:Handshake.Schools.School},alma_maters_count:{}})}return e(s,t),s.type="ContinuingEducationSchool",s.underscore="continuing_education_school",s}(Handshake.Resource),Handshake.SearchContinuingEducationSchoolsView=function(){function e(e){this.props=e,this.searchCallback=s(this.searchCallback,this),this.items=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"continuing_education_schools",this.searchCallback),this.searchable.initialSetup("ContinuingEducationSchool")}return e.prototype.searchCallback=function(e){return this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.ContinuingEducationSchools.ContinuingEducationSchool))},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Conversations={},Handshake.Conversations.Conversation=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d,p,m,f,b,y,v,g,k,w;this.loadMessages=e(this.loadMessages,this),i.__super__.constructor.call(this,t),this.attributes({created_at:{},to_user_id:{send:!0},subject:{send:!0},message:{send:!0},conversations_users:{array:!0,belongs_to:Handshake.ConversationsUsers.ConversationsUser},internal_messages:{array:!0,belongs_to:Handshake.InternalMessages.InternalMessage}}),this.current_conversations_user=ko.computed((k=this,function(){return _.find(k.conversations_users(),function(e){return e.user_id()===Handshake.passed.current_user_id})})),
this.other_conversations_user=ko.computed((w=this,function(){return _.find(w.conversations_users(),function(e){return e.user_id()!==Handshake.passed.current_user_id})})),this.other_user_id=ko.observable(t.other_user_id||(null!=(s=this.other_conversations_user())&&null!=(n=s.user())?n.id():void 0)),this.other_user_archived=ko.observable(t.other_user_archived||(null!=(d=this.other_conversations_user())&&null!=(p=d.user())?p.disabled():void 0)),this.other_user_name=ko.observable(t.other_user_name||(null!=(m=this.other_conversations_user())&&null!=(f=m.user())?f.name():void 0)),this.other_user_institution_name=ko.observable(t.other_user_institution_name||(null!=(b=this.other_conversations_user())&&null!=(y=b.user())?y.institution_name():void 0)),this.other_user_institution_path=ko.observable(t.other_user_institution_path||(null!=(v=this.other_conversations_user())&&null!=(g=v.user())?g.institution_path():void 0)),this.other_user_photo=ko.observable(t.other_user_photo||(null!=(o=this.other_conversations_user())&&null!=(r=o.user())?r.user_photo_url():void 0)),this.other_user_path=ko.observable(t.other_user_path||(null!=(a=this.other_conversations_user())&&null!=(c=a.user())?c.entity_path:void 0)),this.other_user_type=ko.observable(t.other_user_type||(null!=(l=this.other_conversations_user())&&null!=(u=l.user())?u.user_type():void 0)),this.has_unread=ko.observable(t.has_unread||(null!=(h=this.current_conversations_user())?h.unread_messages():void 0)),this.display_message=ko.observable(""),t.last_message?(this.last_message=new Handshake.InternalMessages.InternalMessage(t.last_message),this.display_message(this.last_message.user_name()+": "+this.last_message.message_text())):this.last_message={}}return t(i,s),i.type="Conversation",i.underscore="conversation",i.prototype.loadMessages=function(){return new Handshake.InternalMessages.InternalMessage({conversation_id:this.id()}).index((e=this,function(t){return e.has_unread(!1),e.internal_messages(Handshake.Resource.resourcesFromArray(t.internal_messages))}));var e},i}(Handshake.Resource),Handshake.Conversations.ConversationView=function(){function t(){var t,s;this.sendMessage=e(this.sendMessage,this),this.sendMessageSuccess=e(this.sendMessageSuccess,this),this.reset_new_message=e(this.reset_new_message,this),this.conversation=ko.observable(),this.new_message=ko.observable(),this.member_of_conversation=ko.computed((t=this,function(){return null!=t.conversation()&&_.some(t.conversation().conversations_users(),function(e){return e.user_id()===Handshake.passed.current_user_id})})),this.newMentorshipPath=ko.computed((s=this,function(){return s.conversation()?new Handshake.Mentorships.Mentorship({school_id:Handshake.passed.current_user_institution_id}).base_route("new")+"/new?student_id="+s.conversation().other_user_id()+"&mentor_id="+Handshake.passed.current_user_id:""}))}return t.prototype.reset_new_message=function(){return this.new_message(new Handshake.InternalMessages.InternalMessage({conversation_id:this.conversation().id()}))},t.prototype.sendMessageSuccess=function(e){return this.conversation().internal_messages.unshift(new Handshake.InternalMessages.InternalMessage(e.internal_message)),this.reset_new_message()},t.prototype.sendMessage=function(){return $("#conversation-new-message").trigger("change"),this.new_message().create(this.sendMessageSuccess)},t}(),Handshake.Conversations.CreateConversationView=function(){function t(t){var s;this.options=t,this.switchUser=e(this.switchUser,this),this.createConversation=e(this.createConversation,this),this.createConversationSuccess=e(this.createConversationSuccess,this),this.new_conversation_to_user_id=ko.observable(""),this.new_conversation_to_user_name=ko.observable(""),this.new_conversation_default_subject=Handshake.passed.current_user_calculated_first_name+" from "+Handshake.passed.current_user_institution_name+" has sent you a message on Handshake",this.new_conversation_subject=ko.observable(""),this.new_conversation_message=ko.observable(""),this.new_conversation=ko.observable(),this.alert_message=ko.observable(),this.alert_level=ko.observable(),this.alert_css=ko.computed((s=this,function(){if(s.alert_level())return"alert alert-"+s.alert_level()})),this.options.to_user_id&&this.new_conversation_to_user_id(this.options.to_user_id),this.options.body&&this.new_conversation_message(this.options.body),this.options.alert_message&&this.alert_message(this.options.alert_message),this.options.alert_level&&this.alert_level(this.options.alert_level),this.message_modal_title=ko.observable("Send Message"),$.fn.modal.Constructor.prototype.enforceFocus=function(){return null},this.new_conversation(new Handshake.Conversations.Conversation({}))}return t.prototype.createConversationSuccess=function(e){var t;if($("#send-message").modal("hide"),this.new_conversation_subject(""),this.new_conversation_message(""),t=this.options.success_callback,_.isFunction(t)&&t(),0===$("#to-user-id").length)return this.options.redirect_after_sending?window.location.href=new Handshake.Conversations.Conversation(e.conversation).entity_path:($("#send-message").modal("hide"),Handshake.Helpers.notifySuccess("Message was successfully sent."),this.new_conversation(new Handshake.Conversations.Conversation({})))},t.prototype.createConversation=function(){var e;return e=this.new_conversation_subject().length>0?this.new_conversation_subject():this.new_conversation_default_subject,this.new_conversation().update({to_user_id:this.new_conversation_to_user_id(),message:this.new_conversation_message(),subject:e}),this.new_conversation().create(this.createConversationSuccess)},t.prototype.switchUser=function(e,t){return this.new_conversation_to_user_id(e),this.message_modal_title("Send Message to "+t)},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.ConversationsUsers={},Handshake.ConversationsUsers.ConversationsUser=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({conversation_id:{},user_id:{},archived:{},favorited:{},sent_message:{},received_message:{},unread_messages:{},user:{belongs_to:Handshake.Users.User}})}return e(s,t),s.type="ConversationsUser",s.underscore="conversations_user",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.ConversionTrackers={},Handshake.ConversionTrackers.ConversionTracker=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({facebook_code:{send:!0},twitter_code:{send:!0},facebook_value:{send:!0},facebook_currency:{send:!0}})}return e(s,t),s.type="ConversionTrackers",s.underscore="conversion_tracker",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty,i=[].slice;Handshake.CoreSchools={},Handshake.CoreSchools.addMoreSchoolsOption={resultDisplayValue:"<div class='add-more-schools'>\n  <div class='plus-sign'>\n    <i class='fa fa-3x fa-plus-circle' aria-hidden='true'></i>\n  </div>\n  <p>Add More Schools</p>\n</div>",selectedDisplayValue:"Add More Schools",resetValueOnSelect:!0,onSelect:function(){return window.open("/user_core_schools/new")}},Handshake.CoreSchools.coreSchoolsSelect2Options={resultFormatFunction:Handshake.Helpers.logoFormatSelection,lastElement:Handshake.CoreSchools.addMoreSchoolsOption},Handshake.CoreSchools.UserCoreSchool=function(s){function i(t){this.destroy_by_lookup=e(this.destroy_by_lookup,this),i.__super__.constructor.call(this,t),this.attributes({id:{send:!0},user_id:{send:!0},school_id:{send:!0}})}return t(i,s),i.type="UserCoreSchool",i.underscore="user_core_school",i.prototype.destroy_by_lookup=function(e){return this.ajax_call({type:"POST",method:"destroy_by_lookup",on_member:!1,action:"destroy_by_lookup",data:{user_core_school:{user_id:this.user_id(),school_id:this.school_id()}},success:e})},i}(Handshake.Resource),Handshake.CoreSchoolView=function(){function t(t){var s;this.props=t,this.add_school=e(this.add_school,this),this.notify_user_added=e(this.notify_user_added,this),this.not_yet_approved_message=e(this.not_yet_approved_message,this),this.automatically_approved_message=e(this.automatically_approved_message,this),this.already_approved_message=e(this.already_approved_message,this),this.declined_message=e(this.declined_message,this),this.school=this.props.school,this.declined=this.props.declined,this.connected=ko.observable(!1),this.user_core_school=new Handshake.CoreSchools.UserCoreSchool({user_id:Handshake.passed.current_user_id,school_id:this.school.id}),this.connected.subscribe((s=this,function(e){if(e)return s.props.core_school_ids.push(s.props.school.id)}))}return t.prototype.declined_message=function(){return this.props.employer_name+" has already been declined by "+this.props.school.name+", please contact support if you have any questions."},t.prototype.already_approved_message=function(){return"Good news! "+this.props.employer_name+" is already approved to recruit at "+this.props.school.name+". We've added it to Your Schools"},t.prototype.automatically_approved_message=function(){return"Good news! "+this.props.employer_name+" has been automatically approved to recruit at "+this.props.school.name+". We've added it to Your Schools."},t.prototype.not_yet_approved_message=function(){return"Great! We've sent an approval request to "+this.props.school.name+" and added it to Your Schools"},t.prototype.notify_user_added=function(e){return e.already_approved?Handshake.Helpers.notifySuccess(this.already_approved_message()):e.auto_approved?Handshake.Helpers.notifySuccess(this.automatically_approved_message()):Handshake.Helpers.notifySuccess(this.not_yet_approved_message())},t.prototype.add_school=function(){if(!this.connected())return this.connected(!0),this.user_core_school.create(this.notify_user_added)},t}(),Handshake.ChooseCoreSchoolView=function(){function t(t){var s,i,n,o,r,a;this.props=t,this.create_school_views=e(this.create_school_views,this),this.consortium_school_confirm_add=e(this.consortium_school_confirm_add,this),this.handle_consortium_school=e(this.handle_consortium_school,this),this.connect_and_filter_ids=e(this.connect_and_filter_ids,this),this.add_all_schools=e(this.add_all_schools,this),this.add_school=e(this.add_school,this),this.consortium_distribution_schools_for_school=e(this.consortium_distribution_schools_for_school,this),this.search_submit=e(this.search_submit,this),this.is_declined=e(this.is_declined,this),this.search_data=e(this.search_data,this),this.select_previous=e(this.select_previous,this),this.school_name=ko.observable(),this.order_options=Handshake.Schools.orderOptions,this.size_options=Handshake.Schools.getSizeOptions(this.props.institution_sizes),this.region_options=Handshake.Schools.getRegions(this.props.regions),this.selected_region_options=ko.observableArray(this.region_options.concat([])),this.rank_options=Handshake.Schools.rankOptions,this.selected_rank_options=ko.observableArray([]),this.searching=ko.observable(!1),this.schools=ko.observableArray(),this.previously_interacted_schools=ko.observableArray(),this.all_region_options_selected=ko.pureComputed((i=this,function(){return 0===_(i.region_options).difference(i.selected_region_options()).length})),s=_.debounce(this.search_submit,500),this.confirmation_modal=new Handshake.Schools.AutoRequestConsortiaModal,this.school_group_confirmation_modal=new Handshake.Schools.AutoRequestSchoolGroupModal,this.location_view=new Handshake.SearchLocations.View(s),this.selected_region_options.subscribe(s),this.location_view.locations.subscribe(s),this.selected_rank_options.subscribe(s),this.previously_interacted_present=ko.pureComputed((n=this,function(){return n.previously_interacted_schools().length>0})),this.display_other_schools_text=ko.pureComputed((o=this,function(){return o.previously_interacted_schools().length>0&&o.schools().length>0})),this.no_results=ko.pureComputed((r=this,function(){return 0===r.previously_interacted_schools().length&&0===r.schools().length&&!r.searching()})),this.select_previous_text=ko.pureComputed((a=this,function(){return"Select all ("+a.previously_interacted_schools().length+")"})),this.search_submit()}return t.prototype.select_previous=function(){var e,t;return e=_(this.previously_interacted_schools()).map(function(e){return e.connected(!0),e.school.id}),$.post("/user_core_schools/bulk_create",{school_ids:e},(t=this,function(e){var s;if(e.success)return s=t.previously_interacted_schools().length,Handshake.Helpers.notifySuccess(t.success_message(s))}))},t.prototype.success_message=function(e){return"Successfully added "+e+" "+Handshake.Helpers.pluralizeString("school",e,"s")+" to Your Schools"},t.prototype.search_data=function(){var e,t;return t=_(this.selected_region_options()).map(function(e){return e.value}),e=_(this.selected_rank_options()).map(function(e){return e.value}),{query:this.school_name(),not_ids:this.props.core_school_ids,regions:t,ranks:e,locations:this.location_view.getValues()}},t.prototype.is_declined=function(e){return _.contains(this.props.declined_school_ids,e)},t.prototype.search_submit=function(){return this.searching(!0),$.post("/employer_onboardings/choose_school",this.search_data(),(e=this,function(t){var s,i,n;if(e.searching(!1),t.success)return s=[],n=[],i=e.create_school_views(t.schools),_(i).forEach(function(t){return _.contains(e.props.previously_interacted_school_ids,t.school.id)?s.push(t):n.push(t)}),e.schools(n),e.previously_interacted_schools(s)}));var e},t.prototype.consortium_distribution_schools_for_school=function(e){var t;return(null!=(t=this.props.consortia_school_information[e.id])?t.consortium_distribution_schools:void 0)||[]},t.prototype.add_school=function(e){var t,s,i,n,o;if(!e.connected())return i=_.reduce(this.props.suggested_school_information[e.school.id],function(e,t){return _.union(e,t.suggested_schools)},[]),i=_(i).uniq(function(e){return e.id}),s=[],n=[],t=this.props.core_school_ids,_(i).each(function(i){if(e.school.id!==i.id)return _.contains(t,i.id)?s.push(i):n.push(i)}),this.consortium_distribution_schools_for_school(e.school).length>0?this.handle_consortium_school(e):i.length>0?this.school_group_confirmation_modal.show({selected_school:e.school,suggested_schools:n,selected_schools:s,removing:!1,confirm:(o=this,function(){var t,s,i;return e.connected(!0),i=[],_(n).each(function(e){var t;return(t=_([].concat(o.previously_interacted_schools(),o.schools())).detect(function(t){return t.school.id===e.id}))?t.connected(!0):i.push(e)}),t=o.create_school_views(i,!0),ko.utils.arrayPushAll(o.schools,t),s=_(n.concat([e.school])).map(function(e){return e.id}),$.post("/user_core_schools/bulk_create",{school_ids:s},function(e){var t;if(e.success)return t=s.length,Handshake.Helpers.notifySuccess(o.success_message(t))})}),cancel:function(){return e.add_school()}}):e.add_school()},t.prototype.add_all_schools=function(){var e,t,s;return e=[154,451,72,200,809,604],t=i.call(this.connect_and_filter_ids(this.previously_interacted_schools(),e)).concat(i.call(this.connect_and_filter_ids(this.schools(),e))),$.post("/user_core_schools/bulk_create",{school_ids:t},(s=this,function(e){var i;return e.success?(i=t.length,Handshake.Helpers.notifySuccess(s.success_message(i))):Handshake.Helpers.notifyError("Sorry, something went wrong.  Please try again later.")}))},t.prototype.connect_and_filter_ids=function(e,t){var s,i,n,o;for(s=[],i=0,n=e.length;i<n;i++)o=e[i],_.contains(t,o.school.id)||(o.connected(!0),s.push(o.school.id));return s},t.prototype.handle_consortium_school=function(e){var t,s;return t=this.props.consortia_school_information[e.school.id],this.confirmation_modal.show({consortia_information:t,confirm:(s=this,function(){return s.consortium_school_confirm_add(e)})})},t.prototype.consortium_school_confirm_add=function(e){var t,s,i,n,o,r;return s=e.school,e.connected(!0),n=[],_(this.consortium_distribution_schools_for_school(s)).each((o=this,function(e){var t;return(t=_([].concat(o.previously_interacted_schools(),o.schools())).detect(function(t){return t.school.id===e.id}))?t.connected(!0):n.push(e)})),t=this.create_school_views(n,!0),ko.utils.arrayPushAll(this.schools,t),i=_(this.consortium_distribution_schools_for_school(s).concat([s])).map(function(e){return e.id}),$.post("/user_core_schools/bulk_create",{school_ids:i},(r=this,function(e){var t;if(e.success)return t=i.length,Handshake.Helpers.notifySuccess(r.success_message(t))}))},t.prototype.create_school_views=function(e,t){return null==t&&(t=!1),_(e).map((s=this,function(e){var i;return(i=new Handshake.CoreSchoolView({school:e,employer_name:s.props.employer_name,declined:s.is_declined(e.id),core_school_ids:s.props.core_school_ids})).connected(t),i}));var s},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Courses={},Handshake.Courses.Course=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},name:{send:!0},code:{send:!0}})}return t(i,s),i.type="Course",i.underscore="course",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.Courses.CoursesView=function(s){function i(t){this.props=t,this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),this.initFormWidgets=e(this.initFormWidgets,this),i.__super__.constructor.call(this,this.props.courses,this.props)}return t(i,s),i.prototype.initFormWidgets=function(){},i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.Courses.Course(e)},i.prototype.validateFields=function(){return!0},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.CustomJobInterestOptions={},Handshake.CustomJobInterestOptions.CustomJobInterestOption=function(s){function i(t){var s;this.finishEditing=e(this.finishEditing,this),this.preview_destroy=e(this.preview_destroy,this),this.edit=e(this.edit,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},school_id:{send:!0}}),this.editing=ko.observable(!1),this.tempName=ko.observable(""),this.editing.subscribe((s=this,function(e){if(!e&&s.tempName()!==s.name())return s.name(s.tempName()),s.save(function(){return Handshake.Helpers.notifySuccess("Option updated")})}))}return t(i,s),i.type="CustomJobInterestOption",i.underscore="custom_job_interest_option",i.prototype.edit=function(){return this.tempName(this.name()),this.editing(!0)},i.prototype.preview_destroy=function(e){return this.ajax_call({type:"POST",method:"preview_destroy",on_member:!0,action:"preview_destroy",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.finishEditing=function(e){return 13===e.keyCode?(this.editing(!1),!1):27!==e.keyCode||(this.tempName(this.name()),this.editing(!1),!1)},i}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.CustomJobInterests={},Handshake.CustomJobInterests.CustomJobInterest=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({user_id:{send:!0},custom_job_interest_option_id:{send:!0},custom_job_interest_option:{belongs_to:Handshake.CustomJobInterestOptions.CustomJobInterestOption}})}return e(s,t),s.type="CustomJobInterest",s.underscore="custom_job_interest",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.NewsFeed=function(){function t(){this.loadActivityFeed=e(this.loadActivityFeed,this),this.fetchFeed=e(this.fetchFeed,this),this.feedDelay=e(this.feedDelay,this),this.scroll_handler=e(this.scroll_handler,this),this.unmount=e(this.unmount,this),this.safe_activities_html=ko.observable(""),this.timestamp=ko.observable(moment().utc().unix()),this.requestTimes=[],this.makingRequest=!1,this.loadActivityFeed(),$(window).on("scroll",this.scroll_handler)}return t.prototype.unmount=function(){return $(window).off("scroll",this.scroll_handler)},t.prototype.scroll_handler=function(){if(!this.makingRequest&&0!==this.timestamp())return $(window).scrollTop()+$(window).height()>$(document).height()-200?this.loadActivityFeed():void 0},t.prototype.feedDelay=function(){var e,t;return t=10,e=moment().seconds(),_.size(_.filter(this.requestTimes,function(s){return e-s.seconds()<t}))>=10?1e3:0},t.prototype.fetchFeed=function(){var e,t,s;return Handshake.operations.add_worker(),e={timestamp:this.timestamp()},$.getJSON("/feed_items",e,(s=this,function(e){var t;return e.success?null==e.content?(t="Welcome to Handshake! This feed will show actions your coworkers and employer contacts\ntake in the system, as they happen.",s.safe_activities_html("<div class='text-center well well-sm no-more-activities'>"+t+"</div>")):(s.safe_activities_html(""+s.safe_activities_html()+e.content),s.timestamp(moment(e.timestamp).utc().unix()),0===s.timestamp()?s.safe_activities_html(s.safe_activities_html()+"<div class='text-center well well-sm no-more-activities'>No more activities</div>"):void 0):Handshake.Helpers.notifyError("Failed to load activity feed items")})).always((t=this,function(){return Handshake.operations.remove_worker(),t.requestTimes.push(moment()),t.makingRequest=!1}))},t.prototype.loadActivityFeed=function(e){if(null==e&&(e=!1),!this.makingRequest&&(e||0!==this.timestamp()))return this.makingRequest=!0,setTimeout(this.fetchFeed,this.feedDelay())},t}(),Handshake.GenericDashboardView=function(){function t(){this.unmount=e(this.unmount,this),"Career Services"!==Handshake.passed.current_user_type&&"Mentors"!==Handshake.passed.current_user_type||(this.newsFeed=new Handshake.NewsFeed)}return t.prototype.unmount=function(){if(this.newsFeed)return this.newsFeed.unmount()},t}(),Handshake.LoneStudentDashboardView=function(){function t(){var t,s,i;this.request_access_to_school=e(this.request_access_to_school,this),this.institutionId=ko.observable(),this.handshakeManagedInstitution=ko.observable(),this.schoolEmailDomains=ko.observable(),this.disableRequestButton=ko.computed((t=this,function(){return!t.institutionId()||t.handshakeManagedInstitution()})),this.emailRequirementDisclaimer=ko.computed((s=this,function(){if(s.schoolEmailDomains())return"This school requires students to register with a school email address (@"+s.schoolEmailDomains().join(", @")+")."})),this.school_select2_options=(i=this,function(){return{placeholder:"School...",url:"/schools",infinite_scroll:!0,full_data:function(e){return e?(i.institutionId(e.id),i.handshakeManagedInstitution(e.handshake_managed),i.schoolEmailDomains(e.email_domains)):(i.institutionId(null),i.handshakeManagedInstitution(null),i.schoolEmailDomains(null))},dataFunction:function(e,t){return{query:e,simple_search:!0,page:t,show_handshake_managed:!1}}}})}return t.prototype.request_access_to_school=function(){return new Handshake.EmailActions.EmailAction({institution_id:this.institutionId()}).create(function(){return window.location.reload()})},t}(),Handshake.CareerInterestsDashboardView=function(){function t(t){var s,i,n,o,r,a,c;this.props=t,this.reset_career_interests=e(this.reset_career_interests,this),this.save=e(this.save,this),this.remove_job_role=e(this.remove_job_role,this),this.remove_location=e(this.remove_location,this),this.location_selected=e(this.location_selected,this),this.location_display_name=e(this.location_display_name,this),this.user_job_function_ids=e(this.user_job_function_ids,this),this.user_industry_ids=e(this.user_industry_ids,this),this.user_interested_locations=e(this.user_interested_locations,this),this.user_interested_job_role_ids=e(this.user_interested_job_role_ids,this),this.user_interested_job_roles=e(this.user_interested_job_roles,this),this.user_custom_job_interest_option_ids=e(this.user_custom_job_interest_option_ids,this),this.user_graduate_program_option_ids=e(this.user_graduate_program_option_ids,this),this.user_post_graduation_option_ids=e(this.user_post_graduation_option_ids,this),this.user_goal_option_ids=e(this.user_goal_option_ids,this),this.user_intent_option_types=e(this.user_intent_option_types,this),this.user=Handshake.Resource.resourceFromObject(this.props.user),o=(o=this.user.self_reported_graduation_date()||this.user.primary_education().end_date())?moment(o).toDate():Handshake.Helpers.defaultNextGraduationDate(),s={place_types:["(cities)"],placeholder:"Enter any city in the world...",disable_custom_input:!0,location_changed_callback:this.location_selected},this.vm={user:this.user,intent_options:this.props.intent_options,goal_options:this.props.goal_options,post_graduation_options:this.props.post_graduation_options,graduate_program_options:this.props.graduate_program_options,custom_question_prompt:this.props.custom_question_prompt,custom_job_interest_options:this.props.custom_job_interest_options,industry_categories:this.props.industry_categories,job_functions:this.props.job_functions,job_role_select2_options:this.job_role_select2_options,selected_intent_option_types:ko.observableArray(this.user_intent_option_types()),selected_goal_option_ids:ko.observableArray(this.user_goal_option_ids()),selected_post_graduation_option_ids:ko.observableArray(this.user_post_graduation_option_ids()),selected_graduate_program_option_ids:ko.observableArray(this.user_graduate_program_option_ids()),selected_job_roles:ko.observableArray(this.user_interested_job_roles()),selected_locations:ko.observableArray(this.user_interested_locations()),selected_custom_job_interest_option_ids:ko.observableArray(this.user_custom_job_interest_option_ids()),selected_industry_ids:ko.observableArray(this.user_industry_ids()),selected_job_function_ids:ko.observableArray(this.user_job_function_ids()),graduation_month:ko.observable(o.getMonth()),graduation_year:ko.observable(o.getFullYear()),months:_.map(moment.months(),function(e,t){return{id:t,name:e}}),years:this.get_years(),location_display_name:this.location_display_name,remove_job_role:this.remove_job_role,remove_location:this.remove_location,addLocationView:new Handshake.Locations.AddLocationView(s),save:this.save,reset_career_interests:this.reset_career_interests},i=_(this.props.post_graduation_options).find(function(e){return"Graduate School"===e.name}),n=i&&i.id,this.vm.graduate_school_selected=ko.computed((r=this,function(){return _(r.vm.selected_post_graduation_option_ids()).contains(n)})),this.vm.job_role_select2_options={url:"/job_roles",results_property:"job_roles",resetAfterSelection:!0,results_filter:(c=this,function(e){var t;return t=c.vm.selected_job_roles().map(function(e){return e.id()}),e.filter(function(e){return-1===t.indexOf(e.id)})}),full_data:(a=this,function(e){return e?a.vm.selected_job_roles.push(Handshake.Resource.resourceFromObject(e)):{id:0,name:"Enter any job role..."}})}}return t.prototype.user_intent_option_types=function(){return _(this.user.interests()).reduce(function(e,t){return"EmploymentType"!==t.interesting_type()&&"JobType"!==t.interesting_type()||e.push(t.interesting_name()),e},[])},t.prototype.user_goal_option_ids=function(){return _(this.user.user_goals()).map(function(e){return e.goal_option_id()})},t.prototype.user_post_graduation_option_ids=function(){return _(this.user.post_graduation_interests()).map(function(e){return e.post_graduation_option_id()})},t.prototype.user_graduate_program_option_ids=function(){return _(this.user.graduate_program_interests()).map(function(e){return e.graduate_program_option_id()})},t.prototype.user_custom_job_interest_option_ids=function(){return _(this.user.custom_job_interests()).map(function(e){return e.custom_job_interest_option_id()})},t.prototype.user_interested_job_roles=function(){return _(this.user.interests()).reduce(function(e,t){return"JobRole"===t.interesting_type()&&e.push(t.interesting()),e},[])},t.prototype.user_interested_job_role_ids=function(){return _(this.user.interests()).reduce(function(e,t){return"JobRole"===t.interesting_type()&&e.push(t.interesting_id()),e},[])},t.prototype.user_interested_locations=function(){return _(this.user.interests()).reduce(function(e,t){return"Location"===t.interesting_type()&&e.push(t.interesting()),e},[])},t.prototype.user_industry_ids=function(){return _(this.user.interests()).reduce(function(e,t){return"Industry"===t.interesting_type()&&e.push(t.interesting_id()),e},[])},t.prototype.user_job_function_ids=function(){return _(this.user.interests()).reduce(function(e,t){return"JobFunction"===t.interesting_type()&&e.push(t.interesting_id()),e},[])},t.prototype.get_years=function(){var e,t;return e=(new Date).getFullYear(),t=this.props.is_alumni?_.range(e-60,e+1):_.range(e,e+7),_.map(t,function(e){return{id:e,name:e}})},t.prototype.location_display_name=function(e){var t,s;return(t=e.name())||(t=e.city(),e.state()&&(t+=", "+e.state()),e.country()&&(t+=", "+e.country())),s=e.zipcode(),endsWith(t,s+", USA")?t.slice(0,-5-s.length):endsWith(t,", USA")?t.slice(0,-5):t},t.prototype.location_selected=function(e){if($("#location_name").val(""),null!=e.name()&&null!=e.latitude()&&!_(this.vm.selected_locations()).some(function(t){return t.name()===e.name()}))return this.vm.selected_locations.push(e)},t.prototype.remove_location=function(e){return this.vm.selected_locations.remove(e)},t.prototype.remove_job_role=function(e){return this.vm.selected_job_roles.remove(e)},t.prototype.save=function(){var e,t,s,i,n,o,r,a,c,l,u;return _([["user_goal","user_goals","goal_option"],["post_graduation_interest","post_graduation_interests","post_graduation_option"],["graduate_program_interest","graduate_program_interests","graduate_program_option"],["custom_job_interest","custom_job_interests","custom_job_interest_option"]]).each((i=this,function(e){var t,s,n;return t=e[0],s=e[1],n=e[2],_(i.user[s]()).each(function(e){if(!_(i.vm["selected_"+n+"_ids"]()).contains(e[n+"_id"]()))return e.markAsDestroyed()}),_(i.vm["selected_"+n+"_ids"]()).each(function(e){var o;if(!_(i["user_"+n+"_ids"]()).contains(e))return(o={})[n+"_id"]=e,i.user[s].push(Handshake.Resource.resourceFromObject(o,Handshake.Resource.classFromUnderscore(t)))})})),e=_(this.vm.selected_intent_option_types()).partition(function(e){return"Full-Time"===e||"Part-Time"===e}),t=e[0],s=e[1],_(this.user.interests()).each((n=this,function(e){var i,o;if(o=e.interesting_type(),i=e.interesting_id(),!("Industry"===o&&_(n.vm.selected_industry_ids()).contains(i)||"JobFunction"===o&&_(n.vm.selected_job_function_ids()).contains(i)||"JobRole"===o&&_(n.vm.selected_job_roles()).some(function(t){return t.name()===e.interesting_name()})||"Location"===o&&_(n.vm.selected_locations()).some(function(t){return t.name()===e.interesting().name()})||"EmploymentType"===o&&_(t).contains(e.interesting_name())||"JobType"===o&&("Job"===e.interesting_name()&&t.length>0||"Job"!==e.interesting_name()&&_(s).contains(e.interesting_name()))))return e.markAsDestroyed()})),_(this.vm.selected_industry_ids()).each((o=this,function(e){if(!_(o.user_industry_ids()).contains(e))return o.user.interests.push(new Handshake.Interests.Interest({interesting_type:"Industry",interesting_id:e}))})),_(this.vm.selected_job_function_ids()).each((r=this,function(e){if(!_(r.user_job_function_ids()).contains(e))return r.user.interests.push(new Handshake.Interests.Interest({interesting_type:"JobFunction",interesting_id:e}))})),_(this.vm.selected_job_roles()).each((a=this,function(e){if(!_(a.user_interested_job_role_ids()).contains(e.id()))return a.user.interests.push(new Handshake.Interests.Interest({interesting_type:"JobRole",interesting_id:e.id()}))})),_(this.vm.selected_locations()).each((c=this,function(e){if(!_(c.user_interested_locations()).some(function(t){return t.name()===e.name()}))return c.user.interests.push(new Handshake.Interests.Interest({user_id:c.user_id,
interesting_type:e.type,interesting:_.extend(e.getJSON(),{type:e.type})}))})),_(t).each((l=this,function(e){if(!_(l.user_intent_option_types()).some(function(t){return t===e}))return l.user.interests.push(new Handshake.Interests.Interest({user_id:l.user_id,interesting_type:"EmploymentType",interesting_id:_(l.vm.intent_options).findWhere({type:e}).employment_type_id}))})),_(s).each((u=this,function(e){if(!_(u.user_intent_option_types()).some(function(t){return t===e})&&"Job"!==e)return u.user.interests.push(new Handshake.Interests.Interest({user_id:u.user_id,interesting_type:"JobType",interesting_id:_(u.vm.intent_options).findWhere({type:e}).job_type_id}))})),t.length>0&&!(_(this.user_intent_option_types()).contains("Full-Time")||_(this.user_intent_option_types()).contains("Part-Time"))&&this.user.interests.push(new Handshake.Interests.Interest({user_id:this.user_id,interesting_type:"JobType",interesting_id:_(this.vm.intent_options).findWhere({name:"Full-Time Job"}).job_type_id})),this.user.self_reported_graduation_date(moment.tz([Number(this.vm.graduation_year()),Number(this.vm.graduation_month()),1],Handshake.passed.current_user_time_zone).format()),this.vm.user.save(function(e){return e.success?window.location.href.indexOf("ref=postings-quick-filters")>-1?(Handshake.Helpers.notifySuccess("Career interests updated. Redirecting you back to job search."),window.location.href="/postings"):Handshake.Helpers.notifySuccess("Thanks for updating your Career Interests. You can always edit / refine your interests here."):Handshake.Helpers.notifyError(e.errors)})},t.prototype.reset_career_interests=function(){return this.user.ajax_call({type:"POST",method:"reset_career_interests",on_member:!0,action:"reset_career_interests",success:(e=this,function(){return e.vm.selected_intent_option_types([]),e.vm.selected_goal_option_ids([]),e.vm.selected_post_graduation_option_ids([]),e.vm.selected_graduate_program_option_ids([]),e.vm.selected_job_roles([]),e.vm.selected_locations([]),e.vm.selected_custom_job_interest_option_ids([]),e.vm.selected_industry_ids([]),e.vm.selected_job_function_ids([]),Handshake.Helpers.notifySuccess("Career Interests have been reset")})});var e},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.DigestEmails={},Handshake.DigestEmails.DigestEmail=function(s){function i(t){this.send_emails=e(this.send_emails,this),i.__super__.constructor.call(this,t),this.attributes({name:{},description:{},status:{},created_at:{}})}return t(i,s),i.type="DigestEmail",i.underscore="digest_email",i.prototype.send_emails=function(e){if(confirm("Are you sure you want to send a the digest email to all users? Once sent, it cannot be stopped"))return this.ajax_call({type:"POST",method:"send_emails",on_member:!0,action:"send_emails",success:function(t){if(Handshake.Helpers.notifySuccess("The digest email has been kicked off! A worker is running. It may take time to go through each user."),_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.DigestEmailView=function(){function t(t){this.props=t,this.sendDigestEmails=e(this.sendDigestEmails,this),this.digest_email=ko.observable(Handshake.Resource.resourceFromObject(this.props.digest_email)),this.notesModal=new Handshake.Notes.NotesView(this.digest_email(),!0)}return t.prototype.sendDigestEmails=function(){return this.digest_email().send_emails()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Discount=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({career_fair_id:{send:!0},name:{send:!0},description:{send:!0},amount:{send:!0},one_off:{send:!0},created_by_name:{},created_at:{}}),this.display_name=ko.computed((s=this,function(){var e,t,i;return t=Handshake.Helpers.numberWithCommas(parseFloat(s.amount()).toFixed(2)),i=s.name()+" ($"+t+")",s.one_off()&&null!=s.created_by_name()&&(e=Handshake.TimeZoneHelper.dateTime("very_short_date_time",s.created_at(),Handshake.passed.current_user_time_zone),i+=" - created by "+s.created_by_name()+" on "+e),i}))}return t(i,s),i.type="Discount",i.underscore="discount",i.prototype.nested_route=function(){return"/career_fairs/"+this.career_fair_id()},i}(Handshake.Resource),Handshake.OneOffDiscountModal=function(){function t(t){var s,i;this.props=t,this.create_discount=e(this.create_discount,this),s=this.props,this.registration=s.registration,this.discounts_applied=s.discounts_applied,this.create_discount_success=s.create_discount_success,this.total_cost=ko.observable(this.registration.total_cost),this.charges_paid=ko.observable(this.registration.charges_paid),this.amount_due=ko.computed((i=this,function(){return Math.max(0,i.total_cost()-i.discounts_applied()-i.charges_paid())})),this.discount=ko.observable(new Handshake.Discount({career_fair_id:this.registration.career_fair_id,name:"One-off Discount",description:"A one-off discount added for registration "+this.registration.id,amount:0,one_off:!0}))}return t.prototype.create_discount=function(){return this.discount().create(this.create_discount_success),this.discount(new Handshake.Discount({career_fair_id:this.registration.career_fair_id,name:"One-off Discount",description:"A one-off discount added for registration "+this.registration.id,amount:0,one_off:!0}))},t.prototype.close=function(){return $("#one-off-discount-modal").modal("hide")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.DistributedEmployers={},Handshake.DistributedEmployers.DistributedEmployer=function(s){function i(t){this.createMergeRecord=e(this.createMergeRecord,this),this.fetchStats=e(this.fetchStats,this),this.loadEmployers=e(this.loadEmployers,this),i.__super__.constructor.call(this,t),this.employer_stats=ko.observableArray(),this.last_loaded_employer_id=0,this.remaining_employers_count=ko.observable(0),this.attributes({name:{},status:{send:!0},allowed_employers_count:{send:!0},employers:{array:!0},employer_names:{array:!0},employer_merge_statuses:{array:!0},email_domain_names:{array:!0}})}return t(i,s),i.type="DistributedEmployer",i.underscore="distributed_employer",i.prototype.loadEmployers=function(){return this.ajax_call({type:"GET",method:"employers",on_member:!0,action:"employers",data:{last_loaded_id:this.last_loaded_employer_id},success:(e=this,function(t){if(_(t.employers).map(function(t){return e.employer_stats.push({employer:t,loaded:ko.observable(!1)})}),e.remaining_employers_count(t.count_left),t.employers.length>0)return e.last_loaded_employer_id=t.employers[t.employers.length-1].id})});var e},i.prototype.fetchStats=function(e){return this.ajax_call({type:"GET",method:"employer_stats",on_member:!0,action:"employer_stats",data:{employer_id:e},success:(t=this,function(s){var i;return i=_(t.employer_stats()).find(function(t){return t.employer.id===e}),$.extend(i,s.stats),i.loaded(!0)})});var t},i.prototype.createMergeRecord=function(e,t){return new Handshake.EmployerMerges.EmployerMerge({distributed_employer_id:this.id(),to_employer_id:e,from_employer_ids:t}).create(function(){return Handshake.Helpers.notifySuccess("Merged employer record successfully created")})},i}(Handshake.Resource),Handshake.DistributedEmployersView=function(){function t(t){this.props=t,this.search_callback=e(this.search_callback,this),this.distributed_employers=ko.observableArray(),this.searchable=new Handshake.Searchable($("#search-form"),"distributed_employers",this.search_callback),this.searchable.initialSetup("DistributedEmployers")}return t.prototype.search_callback=function(e){return this.distributed_employers(Handshake.Resource.resourcesFromArray(e.results))},t}(),Handshake.ShowDistributedEmployerView=function(){function t(t){var s,i,n,o,r;this.props=t,this.distributedEmployerAllowedCountChange=e(this.distributedEmployerAllowedCountChange,this),this.distributedEmployerStatusChange=e(this.distributedEmployerStatusChange,this),this.showNotesView=e(this.showNotesView,this),this.selectEmployer=e(this.selectEmployer,this),this.selectEmployerMerge=e(this.selectEmployerMerge,this),this.clearNewMerge=e(this.clearNewMerge,this),this.createMergeRecord=e(this.createMergeRecord,this),this.destroyMergeRecord=e(this.destroyMergeRecord,this),this.currentItem=ko.observable(),this.distributedEmployer=Handshake.Resource.resourceFromObject(this.props.distributed_employer),this.distributedEmployer.loadEmployers({last_loaded_id:1}),this.employerMerges=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.employer_merges)),this.employerMergeViews=ko.observableArray([]),_.each(this.employerMerges(),(s=this,function(e){var t;return t=new Handshake.Comments.CommentsView(ko.observable(e)),s.employerMergeViews.push(t)})),this.fromEmployerIds=ko.observableArray(),this.toEmployerId=ko.observableArray(),this.toEmployerName=ko.computed((i=this,function(){var e;return e=[],_.each(i.distributedEmployer.employer_stats(),function(t){if(-1!==i.toEmployerId.indexOf(t.employer.id+""))return e.push(t.employer.name)}),e})),this.fromEmployerNames=ko.computed((n=this,function(){var e;return e=[],_.each(n.distributedEmployer.employer_stats(),function(t){if(-1!==_.indexOf(n.fromEmployerIds(),t.employer.id+""))return e.push(t.employer.name)}),e})),this.notesPage=new Handshake.Notes.NotesView(this.distributedEmployer,!1,!1),this.onNotesPage=ko.computed((o=this,function(){return o.currentItem()===o.notesPage})),this.editingStatus=ko.observable(!1),this.distributedEmployerStatusTag=ko.computed((r=this,function(){return"approved"===r.distributedEmployer.status()?"tag--success":"declined"===r.distributedEmployer.status()?"tag--danger":"pending"===r.distributedEmployer.status()?"tag--warning":void 0})),this.editingAllowedCount=ko.observable(!1),this.currentItem(this.notesPage)}return t.prototype.destroyMergeRecord=function(e){return e.destroy(function(){return Handshake.Helpers.notifySuccess("The employer merge record was destroyed"),window.location.reload()})},t.prototype.createMergeRecord=function(){return this.distributedEmployer.createMergeRecord(this.toEmployerId()[0],this.fromEmployerIds()),window.location.reload()},t.prototype.clearNewMerge=function(){return this.fromEmployerIds([]),this.toEmployerId([])},t.prototype.selectEmployerMerge=function(e){return this.currentItem(e)},t.prototype.selectEmployer=function(e){return e.loaded()||this.distributedEmployer.fetchStats(e.employer.id),this.currentItem(e)},t.prototype.showNotesView=function(){return this.currentItem(this.notesPage)},t.prototype.distributedEmployerStatusChange=function(){return this.distributedEmployer.save(),this.editingStatus(!1)},t.prototype.distributedEmployerAllowedCountChange=function(){return this.distributedEmployer.save(),this.editingAllowedCount(!1)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Divisions={},Handshake.Divisions.Division=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({employer_id:{send:!0},name:{send:!0},code:{send:!0},id:{send:!0}})}return t(i,s),i.type="Division",i.underscore="division",i.prototype.nested_route=function(){return"/employers/"+this.employer_id()},i}(Handshake.Resource),Handshake.DivisionsView=function(){function t(t){this.props=t,this.updateDivisionSuccess=e(this.updateDivisionSuccess,this),this.updateDivision=e(this.updateDivision,this),this.updateDivisionModal=e(this.updateDivisionModal,this),this.removeDivision=e(this.removeDivision,this),this.addDivision=e(this.addDivision,this),this.addDivisionSuccess=e(this.addDivisionSuccess,this),this.employer_id=this.props.employer_id,this.divisions=ko.observableArray([]),this.new_division_name=ko.observable(""),this.new_division_code=ko.observable(""),this.division_to_update={},this.updated_division_name=ko.observable(""),this.updated_division_code=ko.observable(""),this.divisions(Handshake.Resource.resourcesFromArray(this.props.divisions,Handshake.Divisions.Division))}return t.prototype.addDivisionSuccess=function(e){return this.divisions.push(new Handshake.Divisions.Division(e.division)),this.new_division_name(""),this.new_division_code("")},t.prototype.addDivision=function(){return new Handshake.Divisions.Division({employer_id:this.employer_id,name:this.new_division_name(),code:this.new_division_code()}).create(this.addDivisionSuccess)},t.prototype.removeDivision=function(e){return e.destroy((t=this,function(){return t.divisions.remove(e)}));var t},t.prototype.updateDivisionModal=function(e){return this.item=e,this.updated_division_name(this.item.name()),this.updated_division_code(this.item.code()),this.division_to_update=this.item},t.prototype.updateDivision=function(){var e,t,s;if(t=this.division_to_update.name(),e=this.division_to_update.code(),0!==this.updated_division_name().trim().length)if(this.updated_division_name().trim().length>255)Handshake.Helpers.notifyError("Name is too long (maximum is 255 characters)");else{if(!(this.updated_division_code().trim().length>255))return this.division_to_update.update({name:this.updated_division_name().trim(),code:this.updated_division_code().trim()}),this.division_to_update.save(this.updateDivisionSuccess,(s=this,function(){return s.division_to_update.update({name:t,code:e})}));Handshake.Helpers.notifyError("Code is too long (maximum is 255 characters)")}else Handshake.Helpers.notifyError("Name can't be blank")},t.prototype.updateDivisionSuccess=function(){return this.updated_division_name(""),this.updated_division_code(""),this.division_to_update={},$("#edit-division-modal").modal("hide")},t}(),$(function(){var e,t,s,i,n,o,r,a,c;return s=$("#update-division-name"),t=$("#update-division-code"),e=$("#btn-submit-division"),c="",a="",n=function(){return e.removeClass("disabled")},i=function(){return e.addClass("disabled")},r=function(e,t){return e.trim()!==c||t.trim()!==a},o=function(){var e,o;return o=s.val(),e=t.val(),r(o,e)?n():i()},s.on("input",function(){return o()}),t.on("input",function(){return o()}),$("#edit-division-modal").on("show.bs.modal",function(){return c=s.val(),a=t.val(),i()}),$("#edit-division-modal").on("hide.bs.modal",function(){return c="",a="",i()})})}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.DocumentTypes={},Handshake.DocumentTypes.DocumentType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0},behavior_identifier:{send:!1}})}return e(s,t),s.type="DocumentType",s.underscore="document_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Documents={},Handshake.Documents.Document=function(s){function i(t){var s,n,o,r;this.nested_route=e(this.nested_route,this),this.hasPdf=e(this.hasPdf,this),this.canParse=e(this.canParse,this),this.parsedDataPresent=e(this.parsedDataPresent,this),this.parseError=e(this.parseError,this),this.checkStatus=e(this.checkStatus,this),this.importResume=e(this.importResume,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},name:{send:!0},fancy_name:{},user_name:{},pdf_file_name:{},document_file_name:{send:!0},document_content_type:{send:!0},simple_type:{},document_type_id:{},document_type:{belongs_to:Handshake.DocumentTypes.DocumentType},document:{send:!0},status:{send:!0},fancy_status:{},created_at:{},updated_at:{},resume_parsings_last:{belongs_to:Handshake.ResumeParsings.ResumeParsing},applications:{array:!0,belongs_to:Handshake.Applications.Application},conversion_error:{},pdf_validity_checked_at:{},"public":{send:!0},document_updated_at:{send:!0},active_application_count:{},document_feedback_preference:{send:!0}}),this.resumeParsing=ko.observable(),this.importing=ko.observable(!1),this.fancy_name=ko.computed((s=this,function(){return s.name()?s.name():"(no name)"})),this.info_span=ko.computed((n=this,function(){return n.document_type().name()+" - Uploaded "+n.fancy_status()+" - "})),this.approvalText=ko.computed(function(){return"Approve Document"}),this.displayStatus=ko.computed((o=this,function(){switch(o.status()){case"pending":return"Pending";case"approved":return null!=o.document_feedback_preference&&"feedback_only"===o.document_feedback_preference().status?"Reviewed":"Approved";case"declined":return null!=o.document_feedback_preference?"Changes Required":"Declined";case"changes_suggested":return"Changes Suggested";case"exempt":return"Exempt"}})),this.statusBootstrapClass=ko.computed((r=this,function(){switch(r.status()){case"pending":return"warning";case"approved":return"success";case"declined":return"danger";case"changes_suggested":case"exempt":return"info"}}))}return t(i,s),i.type="Document",i.underscore="document",i.prototype.importResume=function(){return this.importing(!0),this.resumeParsing(new Handshake.ResumeParsings.ResumeParsing({user_id:this.user_id(),document_id:this.id()})),this.resumeParsing().create((e=this,function(){return setTimeout(e.checkStatus,2e3)}));var e},i.prototype.checkStatus=function(){return this.resumeParsing().fetch((e=this,function(){return"added"===e.resumeParsing().aasm_state()?window.location.href=e.resumeParsing().entity_path:"error"!==e.resumeParsing().aasm_state()?setTimeout(e.checkStatus,2e3):"error"===e.resumeParsing().aasm_state()?(e.importing(!1),Handshake.Helpers.notifyError("There was an error parsing your resume")):void 0}));var e},i.prototype.parseError=function(){var e,t,s;return s=moment(this.resume_parsings_last().created_at())<moment(this.updated_at()),t="error"===this.resume_parsings_last().aasm_state(),e=!(!this.resumeParsing()||"error"!==this.resumeParsing().aasm_state()),!s&&t||e},i.prototype.parsedDataPresent=function(){return"error"!==this.resume_parsings_last().aasm_state()&&this.resume_parsings_last().id()},i.prototype.canParse=function(){var e;return"Resume"===this.document_type().behavior_identifier()&&-1===(null!=(e=this.document_content_type())?e.indexOf("image/"):void 0)&&(!this.parseError()&&(!this.resume_parsings_last().id()||moment(this.resume_parsings_last().created_at())<moment(this.updated_at())))},i.prototype.hasPdf=function(){return"PDF"===this.simple_type()||!!this.pdf_file_name()&&!this.conversion_error()},i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.EditDocumentView=function(){function t(t){var s,i;this.props=t,this.on_document_change=e(this.on_document_change,this),this.unmount=e(this.unmount,this),this.submit=e(this.submit,this),this.before_submit=e(this.before_submit,this),this.submit_public_resume=e(this.submit_public_resume,this),this.document=Handshake.Resource.observableResourceFromObject(this.props.document),this.document_file_type=ko.observable(void 0),this.document_with_ie_9=ko.observable(!1),this.document_type_id=ko.observable(this.document().document_type_id()+""),s=_.extend(this.props,{document_type_id:this.document_type_id,document:this.document,submit_callback:this.submit_public_resume}),this.public_resume_warning_modal=new Handshake.PublicResumeWarning(s),this.change_public_resume=ko.observable(!1),this.document_s3_key=ko.observable(),this.document_is_pdf=ko.computed((i=this,function(){return"application/pdf"===i.document_file_type()})),$("#document_document").on("change",this.on_document_change)}return t.prototype.submit_public_resume=function(){return this.change_public_resume(!0),this.submit()},t.prototype.before_submit=function(){return this.public_resume_warning_modal.should_show_warning()?this.public_resume_warning_modal.show_modal():this.submit(),!1},t.prototype.submit=function(){var e;return $("#document_document").length>0&&$("#document_document")[0].files.length>0?new Handshake.FileUploader({file_input:$("#document_document"),record:this.document(),attachment_name:"document",success:(e=this,function(t){return e.document_s3_key(t),e.change_public_resume(!0),$("#document_document").val(null),$("form").submit()}),error:function(e){return Handshake.Helpers.notifyError("Error uploading file: "+e.join(", "))}}).upload():$("form").submit()},t.prototype.unmount=function(){return $("#document_document").off("change",this.on_document_change)},t.prototype.on_document_change=function(){var e;return(e=$("#document_document")[0].files)?e[0]?this.document_file_type(e[0].type):this.document_file_type(void 0):this.document_with_ie_9(!0)},t}(),Handshake.PublicResumeWarning=function(){function t(t){this.props=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.submit=e(this.submit,this),this.should_show_warning=e(this.should_show_warning,this),this.modal_element=$("#public-resume-warning-modal"),this.document=ko.observable(),null!=this.props.document&&this.document(this.props.document())}return t.prototype.should_show_warning=function(){return null!=this.props.public_resume_id&&(parseInt(this.props.document_type_id())===this.props.resume_type_id&&this.document()["public"]()&&(this.document().isNew()||this.document().id()!==this.props.public_resume_id))},t.prototype.submit=function(){return this.props.submit_callback(this.document())},t.prototype.show_modal=function(){return this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}(),Handshake.ShowDocumentView=function(){function e(e){var t;this.props=e,this.document=ko.observable(Handshake.Resource.resourceFromObject(this.props.document)),setTimeout((t=this,function(){var e;return $("#pdf_container").empty(),e=t.document().entity_path+"/download_pdf",$("#pdf_container").append("<object type='application/pdf' data='"+e+"' style='width: 100%; height: 800px;'></object>")}),1),this.props.comments_enabled&&(this.commentsView=new Handshake.Comments.CommentsView(this.document))}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Downloads={},Handshake.Downloads.Download=function(s){function i(t){var s;this.download_path=e(this.download_path,this),i.__super__.constructor.call(this,t),this.one_call_at_a_time(!1),this.attributes({file_file_size:{},token:{},worker_message:{},status:{}}),this.document_ready=ko.computed((s=this,function(){return"building"!==s.status()}))}return t(i,s),i.type="Download",i.underscore="download",i.prototype.download_path=function(){return this.entity_path+"?token="+this.token()},i}(Handshake.Resource),Handshake.Downloads.AjaxBulkDownloadView=function(){function t(){this.download_results=e(this.download_results,this),this.checkDownloadReady=e(this.checkDownloadReady,this),this.bulkActionSuccess=e(this.bulkActionSuccess,this),this.download=ko.observable(void 0)}return t.prototype.bulkActionSuccess=function(e){return this.download(new Handshake.Downloads.Download(e.download)),$("#download-wait-modal").modal("show"),setTimeout(this.checkDownloadReady,1e3)},t.prototype.checkDownloadReady=function(){return this.download().fetch((e=this,function(){if(!e.download().document_ready())return setTimeout(e.checkDownloadReady,3e3)}));var e},t.prototype.download_results=function(e,t){return null==t&&(t={}),Handshake.operations.add_worker(),$.ajax({url:e,type:"POST",data:JSON.stringify({extra_data:t}),contentType:"application/json",dataType:"json",success:(s=this,function(e){return e.success?s.bulkActionSuccess(e):Handshake.Helpers.notifyError(e.error)}),error:function(e){if(422===e.status)return Handshake.Helpers.notifyError("You do not have permission to perform this bulk action.")},complete:function(){return Handshake.operations.remove_worker()}});var s},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.DropIns={},Handshake.DropIns.DropIn=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({appointment_type_name:{},created_at:{},office_location_name:{},school_id:{},user_id:{},user_name:{},status:{send:!0}}),this.fancy_title=ko.computed((s=this,function(){return s.appointment_type_name()?s.user_name()+": "+s.appointment_type_name():s.user_name()}))}return t(i,s),i.type="DropIn",i.underscore="drop_in",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Educations={},Handshake.Educations.Education=function(s){function i(t){var s,n,o,r,a,c,l,u,h;this.nested_route=e(this.nested_route,this),this.toggleHiddenField=e(this.toggleHiddenField,this),this.fieldVisible=e(this.fieldVisible,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({user_id:{send:!0},start_date:{send:!0},end_date:{send:!0},currently_attending:{send:!0},school_id:{send:!0,sender:(n=this,function(e){return n.is_custom_school()?null:e})},school_name:{send:!0},school_path:{},college_id:{send:!0,sender:(s=this,function(e){return s.is_custom_school()?null:e})},college_name:{send:!0},department_gpa:{send:!0},cumulative_gpa:{send:!0},education_level_id:{send:!0},education_level_name:{},description:{send:!0},majors:{array:!0},major_names:{},major_ids:{send:!0,array:!0,convert_empty_to_blank:!0},minors:{array:!0},minor_names:{},minor_ids:{send:!0,array:!0,convert_empty_to_blank:!0},hidden_fields:{send:!0,array:!0,convert_empty_to_blank:!0},primary:{send:!0},locked_fields_overridden:{}}),this.start_date_formatted=ko.computed({read:(r=this,function(){return Handshake.Helpers.toMonthPicker(r.start_date())}),write:(o=this,function(e){return o.start_date(Handshake.Helpers.fromMonthPicker(e))})}),this.end_date_formatted=ko.computed({read:(c=this,function(){return Handshake.Helpers.toMonthPicker(c.end_date())}),write:(a=this,function(e){return a.end_date(Handshake.Helpers.fromMonthPicker(e))})}),this.start_to_end_date_fancy=ko.computed((l=this,function(){return Handshake.Helpers.startToEndMonthsFancy(l.start_date(),l.end_date())})),this.majors.subscribe((u=this,function(e){return u.major_names(_.map(e,function(e){return e.name}).join(", ")),u.major_ids(_.map(e,function(e){return e.id}))})),this.majors(this.majors()),this.minors.subscribe((h=this,function(e){return h.minor_names(_.map(e,function(e){return e.name}).join(", ")),h.minor_ids(_.map(e,function(e){return e.id}))})),this.minors(this.minors()),this.is_custom_school=ko.observable(null===this.school_id()&&null!==this.school_name())}return t(i,s),i.type="Education",i.underscore="education",i.prototype.fieldVisible=function(e){return!!this[e]()&&("Career Services"===Handshake.passed.current_user_type||Handshake.passed.current_user_id===this.user_id()||"Employers"===Handshake.passed.current_user_type&&-1===this.hidden_fields().indexOf(e))},i.prototype.toggleHiddenField=function(e){return-1===this.hidden_fields().indexOf(e)?this.hidden_fields.push(e):this.hidden_fields.remove(e)},i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.Educations.EducationsView=function(s){function i(t){var s;this.props=t,this.school_lock_tooltip=e(this.school_lock_tooltip,this),this.should_lock=e(this.should_lock,this),this.saveItem=e(this.saveItem,this),this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),this.minorSelect2Options=e(this.minorSelect2Options,this),this.majorSelect2Options=e(this.majorSelect2Options,this),this.schoolSelect2Options=e(this.schoolSelect2Options,this),this.collegeSelect2Options=e(this.collegeSelect2Options,this),this.current_user_type=this.props.current_user_type||Handshake.passed.current_user_type,this.user_institution_id=this.props.user_institution_id||Handshake.passed.current_user_institution_id,this.student_preference=this.props.student_preference,this.school_name_typeahead_options={path:"/continuing_education_schools",dataKey:"results"},this.isResumeParsing=this.props.is_resume_parsing,this.can_edit_primary_school=ko.computed((s=this,function(){return s.current_user_type&&"Admins"===s.current_user_type})),i.__super__.constructor.call(this,this.props.educations,this.props)}return t(i,s),i.prototype.collegeSelect2Options=function(e){return{allowClear:!0,placeholder:"College...",url:function(){return"/schools/"+e.school_id()+"/colleges"},initial_value:{name:e.college_name(),id:e.college_id()},full_data:function(t,s){return t||s?(e.college_id(t?t.id:null),e.college_name(t?t.name:null)):{id:e.college_id(),name:e.college_name()}},dataFunction:function(t){return{query:t,simple_search:!0,school_id:e.school_id()}}}},i.prototype.schoolSelect2Options=function(e){return{placeholder:"School...",url:"/schools",initial_value:{name:e.school_name(),id:e.school_id()},full_data:function(t){return t?(e.school_id(t.id),e.school_name(t.name)):{id:e.school_id(),name:e.school_name()}},dataFunction:function(e){return{query:e,category:Handshake.Schools.School.type,simple_search:!0}}}},i.prototype.majorSelect2Options=function(e){return{placeholder:"Choose majors...",initial_value:e.majors,url:"/majors",full_data:e.majors,dataFunction:function(t){return e.is_custom_school()?{query:t,simple_search:!0}:{school_id:e.school_id(),query:t,simple_search:!0}}}},i.prototype.minorSelect2Options=function(e){return{placeholder:"Choose minors...",initial_value:e.minors,url:"/minors",full_data:e.minors,dataFunction:function(t){return e.is_custom_school()?{query:t,simple_search:!0}:{school_id:e.school_id(),query:t,simple_search:!0}}}},i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.Educations.Education(e)},i.prototype.validateFields=function(){return!0},i.prototype.saveItem=function(e){if(!this.isResumeParsing)return i.__super__.saveItem.apply(this,arguments);e.is_editing(!1)},i.prototype.should_lock=function(e,t){return ko.computed((s=this,function(){return!e.locked_fields_overridden()&&(!s.current_user_type||!s.student_preference||!s.student_preference()||"Students"===s.current_user_type&&e.primary()&&s.student_preference()[t]())}));var s},i.prototype.school_lock_tooltip=function(e){return ko.computed((t=this,function(){return e.school_id()===t.user_institution_id?"The school on your primary education cannot be edited":"This field cannot be edited on primary educations. If you would like it changed, please contact Handshake support."}));var t},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.EmailActions={},Handshake.EmailActions.EmailAction=function(s){function i(t){this.ignore=e(this.ignore,this),this.reject=e(this.reject,this),this.approve=e(this.approve,this),this.fetch_details=e(this.fetch_details,this),this.institution_path=e(this.institution_path,this),this.requester_path=e(this.requester_path,this),i.__super__.constructor.call(this,t),this.attributes({requester_id:{},requester_name:{},requester_email:{},
requester_is_confirmed:{},institution_id:{send:!0},institution_type:{},institution_name:{},created_at:{},action:{},token:{},status:{},request:{},warning:{},properties:{},details:{},user_request_additional_info_response:{},user_request_additional_info_label:{}}),this.nice_created_at=Handshake.Helpers.straightDate(this.created_at())}return t(i,s),i.type="EmailAction",i.underscore="email_action",i.prototype.requester_path=function(){return this.requester_id()?new Handshake.Users.User({id:this.requester_id()}).entity_path:null},i.prototype.institution_path=function(){return this.institution_id()?Handshake.Resource.resourceFromObject({id:this.institution_id(),type:this.institution_type()}).entity_path:null},i.prototype.fetch_details=function(e){return this.ajax_call({type:"GET",method:"details",on_member:!0,action:"details",success:function(t){if(e&&_.isFunction(e))return e(t)}})},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(e&&_.isFunction(e))return e(t)}})},i.prototype.reject=function(e){return this.ajax_call({type:"POST",method:"reject",on_member:!0,action:"reject",success:function(t){if(e&&_.isFunction(e))return e(t)}})},i.prototype.ignore=function(e){return this.ajax_call({type:"POST",method:"ignore",on_member:!0,action:"ignore",success:function(t){if(e&&_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.EmailActionsIndex=function(){function t(t){var s,i;this.props=t,this.ignoreEmailAction=e(this.ignoreEmailAction,this),this.rejectEmailAction=e(this.rejectEmailAction,this),this.approveEmailAction=e(this.approveEmailAction,this),this.loadMore=e(this.loadMore,this),this.refresh=e(this.refresh,this),this.chooseFacet=e(this.chooseFacet,this),this.chooseScope=e(this.chooseScope,this),this.getLabelForFacet=e(this.getLabelForFacet,this),this.getLabelForScope=e(this.getLabelForScope,this),this.selectEmailAction=e(this.selectEmailAction,this),this.email_actions=ko.observableArray([]),this.selected_email_action=ko.observable(),this.loadingMore=ko.observable(!1),this.moreToLoad=ko.observable(!0),this.currentScope=ko.observable("waiting"),this.scopes=ko.observable({}),this.scopesList=ko.computed((s=this,function(){var e;return(e=_.pairs(s.scopes())).push(["All",0]),e})),this.currentFacet=ko.observable("All"),this.facets=ko.observable({}),this.facetList=ko.computed((i=this,function(){var e;return(e=_.pairs(i.facets())).unshift(["All",0]),e})),this.refresh()}return t.prototype.selectEmailAction=function(e){return this.selected_email_action(e),$("#email-action-details-modal").modal("show")},t.prototype.getLabelForScope=function(e){return"All"===e[0]?"All":window.capitalizeString(e[0])},t.prototype.getLabelForFacet=function(e){return"All"===e[0]?"All":window.capitalizeString(e[0])},t.prototype.chooseScope=function(e){return this.currentScope(e[0]),this.currentFacet("All"),this.refresh()},t.prototype.chooseFacet=function(e){return this.currentFacet(e[0]),this.refresh()},t.prototype.refresh=function(){return this.email_actions([]),this.loadMore()},t.prototype.loadMore=function(){var e,t;return this.loadingMore(!0),Handshake.operations.add_worker(),e={scope:this.currentScope(),current_count:this.email_actions().length},this.currentFacet()&&"All"!==this.currentFacet()&&(e.current_facet=this.currentFacet()),$.getJSON("/email_actions.json",e,(t=this,function(e){var s;return t.loadingMore(!1),Handshake.operations.remove_worker(),e.success?(t.scopes(e.scopes),t.facets(e.facets),s=t.email_actions(),_.each(e.email_actions,function(e){return s.push(Handshake.Resource.resourceFromObject(e))}),t.email_actions(s),t.moreToLoad(e.more_to_load)):(bugsnagClient.notify("Failed to download user requests on email_actions path."),Handshake.Helpers.notifyError("Failed to download user requests."))}))},t.prototype.approveEmailAction=function(e){return e.approve(function(){return Handshake.Helpers.notifySuccess("User was successfully approved.")})},t.prototype.rejectEmailAction=function(e){return e.reject(function(){return Handshake.Helpers.notifySuccess("User was successfully declined.")})},t.prototype.ignoreEmailAction=function(e){return e.ignore((t=this,function(){return t.email_actions.remove(e),Handshake.Helpers.notifySuccess("User was successfully ignored.")}));var t},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.EmailTemplates={},Handshake.EmailTemplates.EmailTemplate=function(s){function i(t){this.previewWithBody=e(this.previewWithBody,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},user_id:{send:!0},school_id:{send:!0},template:{send:!0}}),this.update(t),this.template_preview=ko.observable()}return t(i,s),i.type="EmailTemplate",i.underscore="email_template",i.prototype.previewWithBody=function(e){return this.ajax_call({type:"POST",method:"template_preview",on_member:!0,action:"template_preview",data:{body:e},success:(t=this,function(e){return t.template_preview(e.template_preview_html)})});var t},i}(Handshake.Resource),Handshake.EmailTemplateView=function(){function t(){this.wysihtml5_options=e(this.wysihtml5_options,this),this.template=ko.observable(),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView}return t.prototype.wysihtml5_options=function(){return{wysihtml5_options:{toolbar:{html:!0,insert_variable_dropdown:{body:"Body",institution_name:"School Name",institution_logo_url:"School Logo"}}},on_load:function(){return $('a[data-wysihtml5-command="openInsertVariable"]').on("click",function(e){return $(e.target).closest(".dropdown").toggleClass("open"),!1}),$('a[data-wysihtml5-command="insertVariable"]').on("click",function(e){var t,s;return s=$(e.target).closest(".wysihtml5-toolbar").siblings("textarea").data("wysihtml5"),t=$(e.target).attr("data-wysihtml5-command-value"),s.editor.toolbar.execCommand("insertHTML","{{ "+t+" }}")})}}},t}(),Handshake.EmailTemplates.TemplateSelectorView=function(){function t(t,s,i){var n;this.templateSelected=s,this.refresh=e(this.refresh,this),this.selectTemplate=e(this.selectTemplate,this),this.mass_email=ko.observable(t),this.email_templates=ko.observableArray([]),this.selectedTemplate=ko.observable(),this.email_templates(Handshake.Resource.resourcesFromArray(i,Handshake.EmailTemplates.EmailTemplate)),this.selectedTemplate(this.email_templates()[0]),this.mass_email().email_template_id()||this.selectTemplate(this.email_templates()[0]),_.each(this.email_templates(),(n=this,function(e){if(e.id()===n.mass_email().email_template_id())return n.selectedTemplate(e)}))}return t.prototype.selectTemplate=function(e){if(e)return e.template_preview(""),this.selectedTemplate(e),e.previewWithBody(this.mass_email().body(),this.mass_email().id()),this.templateSelected(e)},t.prototype.refresh=function(){return this.selectTemplate(this.selectedTemplate())},t}(),Handshake.EmailTemplatePreviewContainer=function(){function e(e){this.vm=e}return e}(),Handshake.EmailTemplatePreview=function(){function e(e){this.vm=e,$(".js-auto-resize-iframe").on("load",function(e){return window.Handshake.Helpers.iframe_onload(e)})}return e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.EmployerAlums={},Handshake.EmployerAlums.EmployerAlum=function(t){function s(e){var t,i,n;s.__super__.constructor.call(this,e),this.attributes({first_name:{},last_name:{},position_title:{},graduation_year:{},testimonial:{},photo:{},employer:{},employer_id:{},school:{},school_name:{},school_id:{},major:{},major_id:{},status:{},major_group_ids:{array:!0},major_groups:{array:!0}}),this.full_name=ko.computed((t=this,function(){return t.first_name()+" "+t.last_name()})),this.short_graduation_year=ko.computed((i=this,function(){if(i.graduation_year())return"'"+i.graduation_year().toString().slice(-2)})),this.sub_info=ko.computed((n=this,function(){if(n.major()&&n.short_graduation_year()&&n.school())return n.major().name+", "+n.school().name+" "+n.short_graduation_year()}))}return e(s,t),s.type="EmployerAlum",s.underscore="employer_alum",s}(Handshake.Resource),Handshake.EditEmployerAlumView=function(){function e(e){var t,s;this.employer_alum=Handshake.Resource.resourceFromObject(e.employer_alum),this.vm={custom_school:ko.observable(e.custom_school)},this.school_select2_options=(t=this,function(){return{placeholder:UNSAFE__i18n.t("alma_mater")+"...",url:"/schools",initial_value:t.employer_alum.school,infinite_scroll:!0,id_function:function(e){return e.name},dataFunction:function(e,t){return{query:e,finished:!0,page:t}},results_property:"results"}}),this.major_select2_options=(s=this,function(){return{placeholder:"Alum "+UNSAFE__i18n.t("major")+"...",url:"/majors",initial_value:s.employer_alum.major,infinite_scroll:!0,dataFunction:function(e,t){return{query:e,finished:!0,page:t}},results_property:"results"}}),this.major_groups_select2_options=function(){return{placeholder:UNSAFE__i18n.t("major")+" groups to target..."}}}return e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.EmployerApprovalPreferences={},Handshake.EmployerApprovalPreferences.EmployerApprovalPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({role_ids:{send:!0,array:!0,convert_empty_to_blank:!0},auto_approve_jobs:{send:!0},auto_approve_interview_schedules:{send:!0}})}return e(s,t),s.type="EmployerApprovalPreference",s.underscore="employer_approval_preference",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.EmployerApprovals={},Handshake.EmployerApprovals.EmployerApproval=function(s){function i(t){var s,n;this.all_possible_roles=e(this.all_possible_roles,this),this.reset=e(this.reset,this),this.setInProgress=e(this.setInProgress,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.assigned_to_path=e(this.assigned_to_path,this),this.destroy_user_core_school=e(this.destroy_user_core_school,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{send:!0},employer_id:{send:!0},employer:{belongs_to:Handshake.Employers.Employer},school:{belongs_to:Handshake.Schools.School},auto_approve_jobs:{send:!0},auto_approve_interview_schedules:{send:!0},role_names:{array:!0},status:{send:!0},fancy_status:{},assigned_to_id:{send:!0},assigned_to_name:{},assigned_to_first_name:{},assigned_to_last_name:{},assigned_to_email:{},role_ids:{send:!0,array:!0,convert_empty_to_blank:!0},created_at:{}}),this.readable_status=ko.computed((s=this,function(){return"in_progress"===s.status()?"in progress":s.status()})),this.tooltip_text=ko.computed((n=this,function(){return"pending"===n.status()?n.employer().name()+" has requested to recruit at "+n.school().name()+". We'll notify you via e-mail once the school staff has approved you.":null}))}return t(i,s),i.type="EmployerApproval",i.underscore="employer_approval",i.POST_INTERVIEW_SCHEDULES_ROLE_TOOLTIP="Employers need to be able to post jobs in order to post interview schedules",i.prototype.destroy_user_core_school=function(){return new Handshake.CoreSchools.UserCoreSchool({user_id:Handshake.passed.current_user_id,school_id:this.school_id()}).destroy_by_lookup(function(){return Handshake.SPA.reload()})},i.prototype.assigned_to_path=function(){return this.assigned_to_id()?new Handshake.Users.User({id:this.assigned_to_id()}).entity_path:null},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.setInProgress=function(e){return this.ajax_call({type:"POST",method:"set_in_progress",on_member:!0,action:"set_in_progress",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.all_possible_roles=function(e){return this.ajax_call({type:"GET",method:"all_possible_roles",on_member:!1,action:"all_possible_roles",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.EmployerApprovals.EmployerApprovalFormView=function(){function t(t){var s,i,n,o,r;this.chooseStatusFromButton=e(this.chooseStatusFromButton,this),this.launchModal=e(this.launchModal,this),this.conditionalSaveAndViewNext=e(this.conditionalSaveAndViewNext,this),this.save=e(this.save,this),this.employerApprovalAssignedToSelect2Options=e(this.employerApprovalAssignedToSelect2Options,this),this.stopEditing=e(this.stopEditing,this),this.startEditing=e(this.startEditing,this),this.finish_setup=e(this.finish_setup,this),this.set_checked_variables=e(this.set_checked_variables,this),this.employer=t.employer,this.employer_approval=t.employer_approval,this.employer_approval_roles=t.employer_approval_roles,this.next_employer_approval_path=t.next_employer_approval_path,this.employer_approval_preference=t.employer_approval_preference,this.show_user_feedback_modal=ko.observable(!1),this.view_next_when_finished=ko.observable(!1),this.isEditing=ko.observable(!1),this.defaults_applied=ko.observable(!1),this.save_text=ko.computed((s=this,function(){return"declined"===s.employer_approval().status()?"Save Declined":"approved"===s.employer_approval().status()?"Save Approved":"Save"})),this.save_css=ko.computed((i=this,function(){return"declined"===i.employer_approval().status()?"btn btn-danger":"approved"===i.employer_approval().status()?"btn btn-success":"btn btn-primary"})),this.post_jobs_role_id=ko.computed((n=this,function(){var e;return(e=_.find(n.employer_approval_roles(),function(e){return"Post Jobs"===e.name}))?e.id:null})),this.post_interview_schedules_role_id=ko.computed((o=this,function(){var e;return null!=(e=_.find(o.employer_approval_roles(),function(e){return"Post Interview Schedules"===e.name}))?e.id:void 0})),this.post_jobs_checked=ko.observable(!1),this.create_interview_schedules_checked=ko.observable(!1),this.employer_approval().role_ids.subscribe(this.set_checked_variables),this.set_checked_variables(),this.employer_select2_options={placeholder:"Employer...",initial_value:this.employer(),value:this.employer_approval().employer_id,url:"/employers"},t.finish_setup_observable()?this.finish_setup():t.finish_setup_observable.subscribe((r=this,function(){if(t.finish_setup_observable())return r.finish_setup()}))}return t.prototype.set_checked_variables=function(){return _.contains(this.employer_approval().role_ids(),this.post_jobs_role_id())?this.post_jobs_checked(!0):this.employer_approval_roles()&&(this.post_jobs_checked(!1),this.employer_approval().auto_approve_jobs(!1),this.employer_approval().role_ids.remove(this.post_interview_schedules_role_id())),_.contains(this.employer_approval().role_ids(),this.post_interview_schedules_role_id())?this.create_interview_schedules_checked(!0):this.employer_approval_roles()?(this.create_interview_schedules_checked(!1),this.employer_approval().auto_approve_interview_schedules(!1)):void 0},t.prototype.finish_setup=function(){var e;if(this.collapsed=ko.observable(!0),this.initial_collapsed=!0,"approved"!==this.employer_approval().status()&&(this.initial_collapsed=!1,this.collapsed(!1),this.isEditing(this.employer_approval().isPersisted()&&"Career Services"===Handshake.passed.current_user_type)),e="pending"===this.employer_approval().status()&&0===this.employer_approval().role_ids().length,this.employer_approval_preference&&this.employer_approval_preference()&&e&&(this.employer_approval_preference().role_ids instanceof Array&&this.employer_approval().role_ids(this.employer_approval_preference().role_ids),this.employer_approval().auto_approve_jobs(this.employer_approval_preference().auto_approve_jobs),this.employer_approval().auto_approve_interview_schedules(this.employer_approval_preference().auto_approve_interview_schedules),this.defaults_applied(!0)),this.employer_approval().isNew())return this.employer_approval().status("approved")},t.prototype.startEditing=function(){return this.isEditing(!0)},t.prototype.stopEditing=function(){return this.employer_approval().revert(),this.isEditing(!1)},t.prototype.employerApprovalAssignedToSelect2Options=function(e){return{placeholder:"Assigned To...",url:"/users/career_services",simple_search:!1,allowClear:!0,secondary_property:"institution_managed_email",full_data:function(t,s){return t||s?(e.assigned_to_id(null!=t.id?t.id:null),e.assigned_to_name(null!=t.name?t.name:null)):{id:e.assigned_to_id(),name:e.assigned_to_name()}}}},t.prototype.save=function(e){var t,s;return null==e&&(e=null),this.employer_approval().isPersisted()?this.employer_approval().save((s=this,function(){if(s.defaults_applied(!1),Handshake.Helpers.notifySuccess("Employer approval successfully updated."),_.isFunction(e))return e()})):this.employer_approval().create((t=this,function(){if(t.defaults_applied(!1),"Career Services"===Handshake.passed.current_user_type?Handshake.Helpers.notifySuccess("Employer approval successfully created."):Handshake.Helpers.notifySuccess("School access successfully requested."),_.isFunction(e))return e()})),this.isEditing(!1),this.show_user_feedback_modal(!0)},t.prototype.conditionalSaveAndViewNext=function(){return this.save((e=this,function(){if(e.view_next_when_finished())return window.location.href=e.next_employer_approval_path()}));var e},t.prototype.launchModal=function(){return this.show_user_feedback_modal(!0),this.view_next_when_finished(!0)},t.prototype.chooseStatusFromButton=function(e,t){return this.employer_approval().status($(t.target).val())},t}(),Handshake.EmployerApprovalsView=function(){function t(t){var s,i;this.props=t,this.assignToCurrentUser=e(this.assignToCurrentUser,this),this.setInProgressEmployerApproval=e(this.setInProgressEmployerApproval,this),this.resetEmployerApproval=e(this.resetEmployerApproval,this),this.destroyEmployerApproval=e(this.destroyEmployerApproval,this),this.bulkEmployerApprovalActionSuccess=e(this.bulkEmployerApprovalActionSuccess,this),this.massEmailEmployersSuccess=e(this.massEmailEmployersSuccess,this),this.bulkRemoveRolesSuccess=e(this.bulkRemoveRolesSuccess,this),this.bulkAddRolesSuccess=e(this.bulkAddRolesSuccess,this),this.bulkUpdateRolesCancel=e(this.bulkUpdateRolesCancel,this),this.bulkUpdateRolesConfirm=e(this.bulkUpdateRolesConfirm,this),this.bulkRemoveRolesSelect=e(this.bulkRemoveRolesSelect,this),this.bulkAddRolesSelect=e(this.bulkAddRolesSelect,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.show_user_feedback_modal=ko.observable(!1),this.items=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"employer_approvals",this.searchCallback),"Career Services"===Handshake.passed.current_user_type&&(s=[{label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"Employer",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess}],this.props.can_manage_employer_approvals&&(s.push({label:"Add Roles",type:"simple",bulk_action:"add_employer_approval_roles",select_action:this.bulkAddRolesSelect,confirm_action:this.bulkUpdateRolesConfirm,cancel_action:this.bulkUpdateRolesCancel,success:this.bulkAddRolesSuccess}),s.push({label:"Remove Roles",type:"simple",bulk_action:"remove_employer_approval_roles",select_action:this.bulkRemoveRolesSelect,confirm_action:this.bulkUpdateRolesConfirm,cancel_action:this.bulkUpdateRolesCancel,success:this.bulkRemoveRolesSuccess})),s.push({label:"Send Email To Associated Contacts",type:"simple",key_action:!0,bulk_action:"mass_email_associated_contacts",success:this.massEmailEmployersSuccess}),this.props.can_approve_employer_approvals&&s.push({label:"Approve Employers",type:"simple",key_action:!0,bulk_action:"approve_employer_approvals",success:this.bulkEmployerApprovalActionSuccess}),this.props.can_decline_employer_approvals&&s.push({label:"Decline Employers",type:"simple",key_action:!0,bulk_action:"decline_employer_approvals",success:this.bulkEmployerApprovalActionSuccess}),this.props.use_new_mass_emails||s.push({label:"Send Email to Students About Employers",type:"simple",bulk_action:"mass_email_about_items",success:this.massEmailEmployersSuccess}),this.searchable.bulkActions(s)),"Admins"===Handshake.passed.current_user_type&&this.searchable.bulkActions([{label:"Decline Employers",type:"simple",bulk_action:"decline_employer_approvals",success:this.bulkEmployerApprovalActionSuccess}]),i=Handshake.passed.current_user_type,Handshake.passed.current_user_feature_flags,"Career Services"===i||"Admins"===i?this.searchable.initialSetup("UniversityEmployerApproval"):this.searchable.initialSetup("EmployerApproval")}return t.prototype.searchCallback=function(e){return this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.EmployerApprovals.EmployerApproval)),$(".employer-flag-warning").tooltip()},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.bulkAddRolesSelect=function(){return this.searchable.bulkUpdateRolesModal.show_modal("add"),!1},t.prototype.bulkRemoveRolesSelect=function(){return this.searchable.bulkUpdateRolesModal.show_modal("remove"),!1},t.prototype.bulkUpdateRolesConfirm=function(){return this.searchable.bulkUpdateRolesModal.confirm(),!1},t.prototype.bulkUpdateRolesCancel=function(){return this.searchable.bulkUpdateRolesModal.show_modal()},t.prototype.bulkAddRolesSuccess=function(){return Handshake.Helpers.notifySuccess("Successfully added roles.")},t.prototype.bulkRemoveRolesSuccess=function(){return Handshake.Helpers.notifySuccess("Successfully removed roles.")},t.prototype.massEmailEmployersSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.bulkEmployerApprovalActionSuccess=function(){return setTimeout((e=this,function(){return e.searchable.performSearch(),e.show_user_feedback_modal(!0)}),2e3);var e},t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.destroyEmployerApproval=function(e){return e.destroy((t=this,function(){return t.items.remove(e)}));var t},t.prototype.resetEmployerApproval=function(e){return e.reset()},t.prototype.setInProgressEmployerApproval=function(e){return e.setInProgress(function(){var t;return t=e.assigned_to_id()===Handshake.passed.current_user_id?" and assigned to you.":".",Handshake.Helpers.notifySuccess("Employer set to 'In Progress'"+t)})},t.prototype.assignToCurrentUser=function(e){return e.assigned_to_id(Handshake.passed.current_user_id),e.save(function(){return Handshake.Helpers.notifySuccess("Employer assigned to you.")})},t}(),Handshake.EmployerApprovals.BulkUpdateRolesModal=function(){function t(t){var s,i,n,o,r,a;this.searchable=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.confirm=e(this.confirm,this),this.load_roles=e(this.load_roles,this),this.action=ko.observable(""),this.modal_element=$("#bulk-update-roles-modal"),this.employer_approval_roles=ko.observableArray([]),this.disable_post_interview_schedules=ko.observable(!1),this.disable_auto_approve_jobs=ko.observable(!1),this.disable_auto_approve_interview_schedules=ko.observable(!1),this.selected_role_ids=ko.observableArray([]),this.auto_approve_jobs=ko.observable(!1),this.auto_approve_interview_schedules=ko.observable(!1),this.post_jobs_role_id=ko.computed((s=this,function(){var e;return(e=_.find(s.employer_approval_roles(),function(e){return"Post Jobs"===e.name}))?e.id:null})),this.post_interview_schedules_role_id=ko.computed((i=this,function(){var e;return null!=(e=_.find(i.employer_approval_roles(),function(e){return"Post Interview Schedules"===e.name}))?e.id:void 0})),this.previous_post_interview_schedules=!1,this.previous_auto_approve_jobs=!1,this.previous_auto_approve_interview_schedules=!1,this.selected_role_ids.subscribe((n=this,function(e){var t,s;return s=_.contains(e,n.post_jobs_role_id()),t=_.contains(e,n.post_interview_schedules_role_id()),"add"===n.action()?(n.disable_post_interview_schedules(!s),n.disable_auto_approve_jobs(!s),n.disable_auto_approve_interview_schedules(!s||!t)):"remove"===n.action()?(n.disable_auto_approve_interview_schedules(s||t),n.disable_auto_approve_jobs(s),n.disable_post_interview_schedules(s)):void 0})),this.disable_post_interview_schedules.subscribe((o=this,function(e){if("add"===o.action())return o.selected_role_ids.remove(o.post_interview_schedules_role_id());if("remove"===o.action())if(e){if(o.previous_post_interview_schedules=_.contains(o.selected_role_ids(),o.post_interview_schedules_role_id()),!o.previous_post_interview_schedules)return o.selected_role_ids.push(o.post_interview_schedules_role_id())}else if(!o.previous_post_interview_schedules)return o.selected_role_ids.remove(o.post_interview_schedules_role_id())})),this.disable_auto_approve_jobs.subscribe((r=this,function(e){return"add"===r.action()?r.auto_approve_jobs(!1):"remove"===r.action()?e?(r.previous_auto_approve_jobs=r.auto_approve_jobs(),r.auto_approve_jobs(!0)):r.auto_approve_jobs(r.previous_auto_approve_jobs):void 0})),this.disable_auto_approve_interview_schedules.subscribe((a=this,function(e){return"add"===a.action()?a.auto_approve_interview_schedules(!1):"remove"===a.action()?e?(a.previous_auto_approve_interview_schedules=a.auto_approve_interview_schedules(),a.auto_approve_interview_schedules(!0)):a.auto_approve_interview_schedules(a.previous_auto_approve_interview_schedules):void 0}))}return t.prototype.load_roles=function(e){var t;return null==e&&(e=null),0===this.employer_approval_roles().length?(new Handshake.EmployerApprovals.EmployerApproval).all_possible_roles((t=this,function(s){if(t.employer_approval_roles(s.roles),_.isFunction(e))return e()})):_.isFunction(e)?e():void 0},t.prototype.confirm=function(){return this.hide_modal(),this.searchable.performBulkAction({selected_role_ids:this.selected_role_ids(),auto_approve_jobs:this.auto_approve_jobs(),auto_approve_interview_schedules:this.auto_approve_interview_schedules()})},t.prototype.show_modal=function(e){return null==e&&(e=null),this.load_roles((t=this,function(){return e&&(t.action(e),t.disable_post_interview_schedules(!1),t.disable_auto_approve_jobs(!1),t.disable_auto_approve_interview_schedules(!1),t.selected_role_ids([]),t.auto_approve_jobs(!1),t.auto_approve_interview_schedules(!1)),t.modal_element.modal("show")}));var t},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.EmployerFlags={},Handshake.EmployerFlags.EmployerFlag=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({school:{belongs_to:Handshake.Schools.School},employer_id:{},reason_explanation:{},message:{},created_at:{}}),this.formatted_created_at=ko.computed((s=this,function(){return Handshake.TimeZoneHelper.dateTime("short_date_time",s.created_at(),Handshake.passed.current_user_time_zone)}))}return t(i,s),i.type="EmployerFlag",i.underscore="employer_flag",i.prototype.nested_route=function(){return"/employers/"+this.employer_id()},i}(Handshake.Resource),Handshake.EmployerFlagsIndex=function(){function t(t){var s,i;this.props=t,this.select_employer=e(this.select_employer,this),this.toggle_show_archived=e(this.toggle_show_archived,this),this.load_more_employers=e(this.load_more_employers,this),this.employers=ko.observableArray([]),this.selected_employer=ko.observable(),this.selected_employer_flags=ko.observableArray([]),this.query=ko.observable(""),this.more_to_load=ko.observable(!0),this.loading_more_employers=ko.observable(!1),this.show_archived=ko.observable(!1),this.timeout=null,this.query.subscribe((s=this,function(){return s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(function(){return s.load_more_employers(!0)},300)})),this.show_archived.subscribe((i=this,function(){return i.load_more_employers(!0)})),this.load_more_employers()}return t.prototype.load_more_employers=function(e){var t,s,i;if(null==e&&(e=!1),!this.loading_more_employers()||e)return this.loading_more_employers(!0),t=e?0:this.employers().length,s={archived:this.show_archived(),query:this.query(),offset:t,query_limit:20},$.getJSON("/employers/flagged_employers",s,(i=this,function(t){var s;return s=(s=e?[]:i.employers()).concat(Handshake.Resource.resourcesFromArray(t.employers)),i.employers(s),i.employers().length>0?i.selected_employer()&&!e||i.select_employer(i.employers()[0]):(i.selected_employer(null),i.selected_employer_flags([])),i.more_to_load(t.more_to_load),i.loading_more_employers(!1)}))},t.prototype.toggle_show_archived=function(){return this.show_archived(!this.show_archived())},t.prototype.select_employer=function(e){var t,s;return this.selected_employer(e),this.selected_employer_flags([]),t={archived:this.show_archived()},this.selected_employer().get_employer_flags(t,(s=this,function(e){return s.selected_employer_flags(Handshake.Resource.resourcesFromArray(e.employer_flags))}))},t}(),Handshake.EmployerFlagFormView=function(){function t(t){var s,i,n,o,r;this.props=t,this.employerFlagSelect2DataFunction=e(this.employerFlagSelect2DataFunction,this),this.employer={id:this.props.employer_id,name:this.props.employer_name},this.employer_id=ko.observable(this.props.employer_id),this.employer_name=ko.observable(this.props.employer_name),this.employer_id.subscribe((s=this,function(){return s.employer_user(null)})),this.selected_value=ko.observable(this.props.reason),this.selected_value.subscribe((i=this,function(){return i.employer_user(null),i.employer_user_name(null)})),this.show_user_form=ko.computed((n=this,function(){return"fraud"===n.selected_value()&&"Students"!==Handshake.passed.current_user_type})),this.employer_user=ko.observable(this.props.employer_user_id),this.employer_user_name=ko.observable(this.props.employer_user_name),this.employer_select2_options={placeholder:"Employer...",url:"/employers",initial_value:{id:this.props.employer_id,name:this.props.employer_name},full_data:(o=this,function(e){return e?(o.employer_id(e.id),o.employer_name(e.name)):{id:o.employer_id(),name:o.employer_name()}})},this.employer_user_select2_options={placeholder:"Find user...",url:"/users/employer_users",initial_value:{id:this.props.employer_user_id,name:this.props.employer_user_name},dataFunction:this.employerFlagSelect2DataFunction,allowClear:!0,full_data:(r=this,function(e){return e?(r.employer_user(e.id),r.employer_user_name(e.name)):{id:r.employer_user(),name:r.employer_user_name()}})}}return t.prototype.employerFlagSelect2DataFunction=function(e){return{query:e,simple_search:!0,institution_id:this.employer_id()}},t}()}.call(this),function(){var e=function(e,t){
return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.EmployerMerges={},Handshake.EmployerMerges.EmployerMerge=function(s){function i(t){this.start_status_polling=e(this.start_status_polling,this),this.dry_run=e(this.dry_run,this),this.run=e(this.run,this),this.cancel=e(this.cancel,this),this.mark_as_ready=e(this.mark_as_ready,this),this.send_warning=e(this.send_warning,this),i.__super__.constructor.call(this,t),this.attributes({distributed_employer_id:{send:!0},to_employer_id:{send:!0},from_employer_ids:{send:!0,array:!0},informed_user_ids:{array:!0},completed_at:{},status:{},created_at:{},created_by_name:{},from_employers:{belongs_to:Handshake.Employers.Employer,array:!0},to_employer:{belongs_to:Handshake.Employers.Employer},merge_errors:{},silent:{send:!0},warn_on_silent:{}}),"running"===t.status&&this.start_status_polling()}return t(i,s),i.type="EmployerMerge",i.underscore="employer_merge",i.prototype.nested_route=function(){return"/distributed_employers/"+this.distributed_employer_id()},i.prototype.send_warning=function(e){if(confirm("Are you sure you want to send a warning email to all users at these employers?"))return this.ajax_call({type:"POST",method:"send_warning",on_member:!0,action:"send_warning",success:function(t){if(Handshake.Helpers.notifySuccess("The relevant users warned."),_.isFunction(e))return e(t)}})},i.prototype.mark_as_ready=function(e){return this.ajax_call({type:"POST",method:"mark_as_ready",on_member:!0,action:"mark_as_ready",success:function(t){if(Handshake.Helpers.notifySuccess("Merge record is now ready to be run."),_.isFunction(e))return e(t)}})},i.prototype.cancel=function(e){return this.ajax_call({type:"POST",method:"cancel",on_member:!0,action:"cancel",success:function(t){if(Handshake.Helpers.notifySuccess("Merge record successfully cancelled."),_.isFunction(e))return e(t)}})},i.prototype.run=function(e){var t,s;if(t="Are you sure you want to run this? After running, the from_employers will be deleted.",this.silent()?(t+=" Users will not be notified because the silent option was selected.",this.warn_on_silent()&&(t+="\n\n\n!!! WARNING !!!\n\nMore than one of these employers has staff members associated with it, and the silent option was selected. Some users will be moved to a different employer or have new staff members join their employer and they will not be notified that this has happened.")):t+=" Users will be notified that it happened via email.",confirm(t))return this.save((s=this,function(){return s.ajax_call({type:"POST",method:"run",on_member:!0,action:"run",success:function(t){if(Handshake.Helpers.notifySuccess("Employer merge process started."),s.start_status_polling(),_.isFunction(e))return e(t)}})}))},i.prototype.dry_run=function(e){var t;if(confirm("Are you sure you want to run this? After running, errors for the employer merge will be saved."))return this.save((t=this,function(){return t.ajax_call({type:"POST",method:"dry_run",on_member:!0,action:"dry_run",success:function(s){if(Handshake.Helpers.notifySuccess("Employer merge dry run process started."),t.start_status_polling(),_.isFunction(e))return e(s)}})}))},i.prototype.start_status_polling=function(){return this.status_poller=setInterval((e=this,function(){return e.ajax_call({type:"GET",method:"status",on_member:!0,action:"status",success:function(){if("running"!==e.status()&&"dry_running"!==e.status()&&clearInterval(e.status_poller),"completed"===e.status()&&(Handshake.Helpers.notifySuccess("Employer merge #"+e.id()+" is complete."),window.location.reload()),"waiting"===e.status())return Handshake.Helpers.notifySuccess("Employer merge dry run process is complete.")}})}),5e3);var e},i}(Handshake.Resource)}.call(this),function(){Handshake.EmployerNewsEdit=function(){function e(){}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.EmployerOnboarding={},Handshake.EmployerOnboarding.request_access_at_employer=function(e){return window.location.href="/employer_onboardings/request_employer_access/"+e.id()},Handshake.NewCompanyFormView=function(){function t(t){var s,i;this.props=t,this.change_image=e(this.change_image,this),this.setActiveCropView=e(this.setActiveCropView,this),this.submit=e(this.submit,this),this.active_crop_view=null,this.employer=new Handshake.Employers.Employer(this.props.employer||{}),this.employer.email.extend({validate:{name:"email",validations:{},resource:this.employer}}),this.vm={employer:this.employer,logo_crop_view:new Handshake.UserImages.CropImageView(this.employer,"logo","logo",".crop-logo",!1,null,{add_image_class:"btn-primary"}),branding_image_crop_view:new Handshake.UserImages.CropImageView(this.employer,"branding","branding_image",".branding-image",!1,null,{add_image_class:"btn-primary"}),submit:this.submit,employer_profile_preview_params:{name:ko.pureComputed((i=this,function(){return i.employer.name()||"Company Name"})),image_url:ko.pureComputed((s=this,function(){return s.employer.logo_url()}))}},this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.change_image),this.addLocationView=new Handshake.Locations.AddLocationView({location:this.employer.location,object_type:"employer",hide_map:!0,place_types:["(cities)"]})}return t.prototype.submit=function(){return $.when($.Deferred((s=this,function(e){var t;return null!=(t=s.employer.logo_url())?new Handshake.FileUploader({record:s.employer,attachment_name:"logo",success:function(t){return e.resolve(t)},error:function(t){return e.reject(t)}}).upload(t):e.resolve()})),$.Deferred((t=this,function(e){var s;return null!=(s=t.employer.branding_image_url())?new Handshake.FileUploader({record:t.employer,attachment_name:"branding_image",success:function(t){return e.resolve(t)},error:function(t){return e.reject(t)}}).upload(s):e.resolve()}))).done((e=this,function(t,s){return e.employer.logo_s3_key(t),e.employer.branding_image_s3_key(s),e.employer.create(function(){return window.location.href="/employer_onboardings/connect_with_schools"})})).fail(function(e,t){return Handshake.Helpers.notifyError(_.compact(_.flatten([e,t])).join(", "))});var e,t,s},t.prototype.setActiveCropView=function(e){return this.active_crop_view=e},t.prototype.change_image=function(e){return this.active_crop_view.changeImage(e)},t}(),Handshake.EmployerOnboardingHeader=function(){function t(t){var s,i,n,o;this.step=t,this.next=e(this.next,this),this.clear_selected_employer=e(this.clear_selected_employer,this),this.select_employer=e(this.select_employer,this),this.selected_employer=ko.observable(null),this.selected_schools=ko.observableArray([]),this.step_title=ko.computed((s=this,function(){return 3===s.step?"Step 3 of 4 - Join Company":"Step 4 of 4 - "+UNSAFE__i18n.t("connect_with_schools")})),this.selected_text=ko.computed((i=this,function(){var e;return 3!==i.step?(e=Handshake.Helpers.pluralizeString(UNSAFE__i18n.t("schools_selected"),i.selected_schools().length,"s"),i.selected_schools().length+" "+e+" selected"):i.selected_employer()?"You've selected "+i.selected_employer().name():void 0})),this.next_disabled=ko.computed((n=this,function(){if(3===n.step)return{disabled:!n.selected_employer()}})),this.next_text=ko.computed((o=this,function(){return 3===o.step?"Next: "+UNSAFE__i18n.t("connect_to_schools"):"Next: Finish"}))}return t.prototype.select_employer=function(e){return this.selected_employer(e)},t.prototype.clear_selected_employer=function(){return this.selected_employer(null)},t.prototype.next=function(){return 3===this.step?window.location.href="/employer_onboardings/request_employer_access/"+this.selected_employer().id():this.select_schools_submit()},t}(),Handshake.EmployerConnectWithSchools=function(s){function i(t){var s,n,o,r,a;this.props=t,this.select_schools_submit=e(this.select_schools_submit,this),this.search_form_data=e(this.search_form_data,this),this.query_schools=e(this.query_schools,this),this.search_submit=e(this.search_submit,this),this.school_selected=e(this.school_selected,this),this.clear_all_click=e(this.clear_all_click,this),this.deselect_all_schools=e(this.deselect_all_schools,this),this.select_all_schools=e(this.select_all_schools,this),this.remove_school=e(this.remove_school,this),this.add_school=e(this.add_school,this),this.toggle_school_selected=e(this.toggle_school_selected,this),this.select_invite_school=e(this.select_invite_school,this),this.set_schools=e(this.set_schools,this),i.__super__.constructor.call(this,4),this.vm={searching:ko.observable(!1),schools:ko.observableArray(),selected_schools:this.selected_schools,school_name:ko.observable(),my_selected_only:ko.observable(!1),toggle_school_selected:this.toggle_school_selected,select_all_schools:this.select_all_schools,deselect_all_schools:this.deselect_all_schools,school_selected:this.school_selected,search_submit:this.search_submit,select_schools_submit:this.select_schools_submit,select_schools_submitted:ko.observable(!1),order_options:Handshake.Schools.orderOptions,rank_options:Handshake.Schools.rankOptions,size_options:Handshake.Schools.getSizeOptions(this.props.school_sizes),region_options:Handshake.Schools.getRegions(this.props.regions)},this.vm.selected_rank_options=ko.observableArray([]),this.vm.selected_region_options=ko.observableArray(this.vm.region_options.concat([])),this.vm.search_results=ko.computed((n=this,function(){return n.vm.my_selected_only()?n.vm.selected_schools():n.vm.schools()||[]})),this.vm.all_region_options_selected=ko.pureComputed((o=this,function(){return 0===_(o.vm.region_options).difference(o.vm.selected_region_options()).length})),this.vm.show_select_all=ko.computed((r=this,function(){var e;return((null!=(e=r.vm.school_name())?e.length:void 0)>0||!r.vm.all_region_options_selected())&&r.vm.schools().length>0})),s=_.debounce(this.search_submit,500),this.confirmation_modal=new Handshake.Schools.AutoRequestConsortiaModal,this.school_group_confirmation_modal=new Handshake.Schools.AutoRequestSchoolGroupModal,this.location_view=new Handshake.SearchLocations.View(s),this.vm.selected_rank_options.subscribe(s),this.vm.selected_region_options.subscribe(s),this.location_view.locations.subscribe(s),this.vm.selected_schools.subscribe((a=this,function(){if(0===a.vm.selected_schools().length)return a.vm.my_selected_only(!1)})),this.set_schools()}return t(i,s),i.prototype.set_schools=function(){return this.query_schools((e=this,function(t){return e.vm.schools(t.schools||[]),e.select_invite_school()}));var e},i.prototype.select_invite_school=function(){var e,t,s,i,n,o;if(this.props.invited_by_school)return s=null,i=_(this.vm.schools()).find((o=this,function(e,t){if(e.id===o.props.invited_by_school.id)return s=t,!0}))||this.props.invited_by_school,null!==s&&this.vm.schools.splice(s,1),this.vm.schools.unshift(i),this.vm.selected_schools.push(i),n=this.props.consortia_school_information[i.id],t=_(this.vm.schools()).select(function(e){return _(null!=n?n.consortium_distribution_schools:void 0).findWhere({id:e.id})}),e=this.vm.selected_schools().concat(t),this.vm.selected_schools(_(e).uniq(function(e){return e.id}))},i.prototype.toggle_school_selected=function(e){var t;return t=null,_(this.vm.selected_schools()).find(function(s,i){if(s.id===e.id)return t=i,!0}),null===t?this.add_school(e):this.remove_school(e,t)},i.prototype.add_school=function(e){var t,s,i,n,o,r,a,c;return s=this.props.consortia_school_information[e.id],t=(null!=s?s.consortium_distribution_schools:void 0)||[],o=_.reduce(this.props.suggested_school_information[e.id],function(e,t){return _.union(e,t.suggested_schools)},[]),o=_(o).uniq(function(e){return e.id}),n=[],r=[],i=_.map(this.vm.selected_schools(),function(e){return e.id}),_(o).each(function(t){if(e.id!==t.id)return _.contains(i,t.id)?n.push(t):r.push(t)}),0===t.length&&0===r.length?this.vm.selected_schools.push(e):t.length>0?this.confirmation_modal.show({consortia_information:s,removing:!1,confirm:(c=this,function(){var s,i;return(s=c.vm.selected_schools().concat(t)).push(e),i=_(t).select(function(e){return!_(c.vm.schools()).findWhere({id:e.id})}),c.vm.schools(c.vm.schools().concat(i)),c.vm.selected_schools(_(s).uniq(function(e){return e.id}))})}):r.length>0?(this.vm.selected_schools.push(e),this.school_group_confirmation_modal.show({selected_school:e,suggested_schools:r,selected_schools:n,removing:!1,confirm:(a=this,function(){var e,t;return e=a.vm.selected_schools().concat(r),t=_(r).select(function(e){return!_(a.vm.schools()).findWhere({id:e.id})}),a.vm.schools(a.vm.schools().concat(t)),a.vm.selected_schools(_(e).uniq(function(e){return e.id}))})})):void 0},i.prototype.remove_school=function(e,t){var s,i;return 0===((null!=(s=this.props.consortia_school_information[e.id])?s.consortium_distribution_schools:void 0)||[]).length?this.vm.selected_schools.splice(t,1):this.confirmation_modal.show({consortia_information:s,removing:!0,confirm:(i=this,function(){return i.vm.selected_schools.remove(function(t){return _(s.consortium_distribution_schools).findWhere({id:t.id})||e.id===t.id})})})},i.prototype.select_all_schools=function(){var e;return e=this.vm.selected_schools().concat(this.vm.schools()),this.vm.selected_schools(_(e).uniq(function(e){return e.id}))},i.prototype.deselect_all_schools=function(){return this.vm.selected_schools.removeAll()},i.prototype.clear_all_click=function(){if(confirm("Are you sure you want to clear all selected schools?"))return this.deselect_all_schools()},i.prototype.school_selected=function(e){return _(this.vm.selected_schools()).findWhere({id:e.id})},i.prototype.search_submit=function(){return this.query_schools((e=this,function(t){return e.vm.schools(t.schools||[])}));var e},i.prototype.query_schools=function(e){var t,s;return this.vm.searching(!0),t=$.post("/employer_onboardings/choose_school",this.search_form_data()),clearTimeout(this.search_timeout),this.search_timeout=setTimeout((s=this,function(){return t.then(function(t){return s.vm.searching(!1),e(t)})}),"test"===Handshake.passed.environment_name?0:1e3)},i.prototype.search_form_data=function(){var e,t;return t=_(this.vm.selected_region_options()).map(function(e){return e.value}),e=_(this.vm.selected_rank_options()).map(function(e){return e.value}),{query:this.vm.school_name(),regions:t,ranks:e,locations:this.location_view.getValues()}},i.prototype.select_schools_submit=function(){var e,t;return this.vm.select_schools_submitted(!0),e={school_ids:_(this.vm.selected_schools()).map(function(e){return e.id})},$.post("/employer_onboardings/connect_with_schools",e,(t=this,function(e){return e.success?window.location.href="/":(t.vm.select_schools_submitted(!1),Handshake.Helpers.notifyError(e.errors))}))},i}(Handshake.EmployerOnboardingHeader),Handshake.EmployerOnboardingChooseEmployer=function(e){function s(e){this.props=e,s.__super__.constructor.call(this,3),this.employers=Handshake.Resource.resourcesFromArray(this.props.employers)}return t(s,e),s.prototype.request_access_at_employer=Handshake.EmployerOnboarding.request_access_at_employer,s}(Handshake.EmployerOnboardingHeader),Handshake.EmployerOnboardingFindEmployer=function(s){function i(t){var s,n;this.props=t,this.update_search_fields=e(this.update_search_fields,this),this.similar_results_returned=e(this.similar_results_returned,this),i.__super__.constructor.call(this,3),this.employer=new Handshake.Employers.Employer,this.employer.one_call_at_a_time(!1),this.search_box=ko.observable(""),this.search_box.subscribe(this.update_search_fields),this.results=ko.observableArray().trackHasItems(),this.show_explanation=ko.observable(!0),this.searching=ko.observable(!1),this.show_results=ko.computed((s=this,function(){return!s.searching()&&!s.show_explanation()})),this.safe_results_html=ko.computed((n=this,function(){var e;return"Showing <b>"+(e=n.results().length)+"</b> "+Handshake.Helpers.pluralizeString("result",e,"s")}))}return t(i,s),i.prototype.find_employers=function(){var e,t;return this.show_explanation(!1),this.searching(!0),e=this.employer.find_similar(),clearTimeout(this.search_timeout),this.search_timeout=setTimeout((t=this,function(){return e.then(t.similar_results_returned)}),"test"===Handshake.passed.environment_name?0:1e3)},i.prototype.similar_results_returned=function(e){return this.searching(!1),this.results(Handshake.Resource.resourcesFromArray(e.matched_employers,Handshake.Employers.Employer))},i.prototype.update_search_fields=function(e){return this.employer.name(e),this.employer.email(e),this.employer.website(e)},i.prototype.request_access_at_employer=Handshake.EmployerOnboarding.request_access_at_employer,i}(Handshake.EmployerOnboardingHeader)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.EmployerRegistrations={},Handshake.EmployerRegistrations.EmployerRegistration=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({first_name:{send:!0,validations:{presence:!0}},last_name:{send:!0,validations:{presence:!0}},email_address:{send:!0,validations:{presence:!0}},password:{send:!0,validations:{presence:!0}},country_code:{send:!0,error_prefix:"Country",validations:{presence:!0}},eu_gdpr_subject:{send:!0},agreed_to_tos:{send:!0},agreed_to_marketing:{send:!0},password_confirmation:{send:!0,validations:{presence:!0}},office_phone_number:{send:!0,error_prefix:"Phone number",validations:{presence:!0}},job_title:{send:!0,validations:{presence:!0}},username:{send:!0},parent_major_group_ids:{send:!0,array:!0},alma_maters:{belongs_to:Handshake.AlmaMaters.AlmaMater,nested_attribute:!0,array:!0,send:!0},tz_offset:{send:!0},tz_observes_dst:{send:!0},employer_invite_token:{send:!0},linked_account_password:{send:!0,validations:{presence:!0}},third_party_recruiter:{send:!0}})}return e(s,t),s.type="EmployerRegistration",s.underscore="employer_registration",s}(Handshake.Resource),Handshake.EmployerRegistrationFormView=function(){function e(e){var t,i,n,o,r,a,c;this.props=e,this.submit_linked_account_password=s(this.submit_linked_account_password,this),this.go_to_sign_up=s(this.go_to_sign_up,this),this.go_to_additional_info=s(this.go_to_additional_info,this),this.go_to_linked_account_password=s(this.go_to_linked_account_password,this),n=_.extend({},this.props.employer_registration,{alma_maters:[]},{parent_major_group_ids:_(this.props.employer_registration.parent_major_group_ids).map(function(e){return e.toString()})},{tz_offset:window.Handshake.TimeZoneHelper.browserTimeZoneOffset(!0)},{tz_observes_dst:window.Handshake.TimeZoneHelper.browserTimeZoneObservesDST(!0)}),this.employer_registration=new Handshake.EmployerRegistrations.EmployerRegistration(n),this.modal_submitted=ko.observable(!1),this.modal_submitted_for_third_party=ko.observable(!1),this.country_options=this.props.country_options,this.country_options.unshift({}),this.eu_country_codes=this.props.eu_country_codes,this.vm={employer_registration:this.employer_registration,third_party_accepted:ko.observable(!1),on_sign_up:ko.observable(!0),on_linked_account_password:ko.observable(!1),on_additional_info:ko.observable(!1),generic_email_address:ko.observable(!1),major_groups_valid:ko.observable(!0),parent_major_groups:ko.observableArray(),graduation_year_options:ko.observableArray(),submit_sign_up:this.submit_sign_up,submit_additional_info:this.submit_additional_info,create_account:this.create_account,check_generic_email:this.check_generic_email,go_to_linked_account_password:this.go_to_linked_account_password,go_to_sign_up:this.go_to_sign_up,go_to_additional_info:this.go_to_additional_info,existing_user_type:ko.observable(""),submit_linked_account_password:this.submit_linked_account_password,almaMatersFormView:new Handshake.AlmaMatersFormView({alma_maters:this.employer_registration.alma_maters}),show_eeoc_and_nace:ko.observable(!1)},t=["employer-registration-form"],Handshake.passed.should_show_sidebar_content_in_employer_registration||(this.employer_registration_classes=t.push("employer-registration-full-width")),this.vm.show_third_party_selection_error=ko.pureComputed((o=this,function(){if(o.modal_submitted())return null===o.vm.employer_registration.third_party_recruiter()})),this.vm.show_third_party_acceptance_error=ko.pureComputed((r=this,function(){if(r.modal_submitted_for_third_party()&&r.vm.employer_registration.third_party_recruiter())return!r.vm.third_party_accepted()})),this.third_party_recruiter_modal_completed=ko.computed((a=this,function(){return!1===a.vm.employer_registration.third_party_recruiter()||a.vm.employer_registration.third_party_recruiter()&&a.vm.third_party_accepted()})),this.vm.employer_registration.eu_gdpr_subject=ko.computed((c=this,function(){return _.contains(c.eu_country_codes,c.vm.employer_registration.country_code())})),(i=Handshake.cookies.read("registration_default_values",{user_scoped:!1}))&&(this.vm.employer_registration.email_address(i.email_address),this.vm.employer_registration.first_name(i.first_name),this.vm.employer_registration.last_name(i.last_name),this.vm.go_to_additional_info())}return e.prototype.go_to_linked_account_password=function(){return this.vm.on_linked_account_password(!0),this.vm.on_additional_info(!1),this.vm.on_sign_up(!1)},e.prototype.go_to_additional_info=function(){return this.vm.on_additional_info(!0),this.vm.on_linked_account_password(!1),this.vm.on_sign_up(!1)},e.prototype.go_to_sign_up=function(){return this.vm.on_sign_up(!0),this.vm.on_linked_account_password(!1),this.vm.employer_registration.linked_account_password(""),this.vm.on_additional_info(!1)},e.prototype.submit_sign_up=function(){var e,t;return(e={ajax:!0})[this.employer_registration.underscore]=this.employer_registration.getJSON(),this.employer_registration.ajax_call({type:"POST",method:"valid",action:"valid",data:e,success:(t=this,function(e){return e.prompt_for_linked_account_password?(t.vm.existing_user_type(e.existing_user_type),t.vm.go_to_linked_account_password()):e.sso_redirect_url?(Handshake.Helpers.notifyInfo("Your employer requires that you log in through Single Sign-On. You will be redirected shortly."),window.setTimeout(function(){return Handshake.SPA.navigate(e.sso_redirect_url)},3e3)):t.vm.go_to_additional_info()})})},e.prototype.submit_linked_account_password=function(){if(this.employer_registration.linked_account_password.force_validation())return this.submit_sign_up()},e.prototype.submit_additional_info=function(){if(this.vm.show_eeoc_and_nace(this.can_show_nace_references()),this.vm.employer_registration.agreed_to_tos(!1),this.vm.employer_registration.agreed_to_marketing(!this.employer_registration.eu_gdpr_subject()),this.set_major_group_validity(),this.vm.major_groups_valid())return this.display_code_of_conduct_modal()},e.prototype.set_major_group_validity=function(){return this.vm.major_groups_valid(this.employer_registration.parent_major_group_ids().length>0)},e.prototype.display_code_of_conduct_modal=function(){return $("#code-of-conduct-modal").modal("show")},e.prototype.hide_code_of_conduct_modal=function(){return $("#code-of-conduct-modal").modal("hide")},e.prototype.create_account=function(){var e;if((this.modal_submitted(!0),!this.vm.show_third_party_selection_error())&&(this.modal_submitted_for_third_party(!0),!this.vm.show_third_party_acceptance_error()))return this.employer_registration.create(function(){return Handshake.SPA.navigate("/")},(e=this,function(){return e.hide_code_of_conduct_modal()}))},e.prototype.check_generic_email=function(){return $.post("/generic_email",{email:this.employer_registration.email_address()},(e=this,function(t){return e.vm.generic_email_address(t.is_generic)}));var e},e.prototype.can_show_nace_references=function(){if(this.vm.employer_registration)return"USA"===this.vm.employer_registration.country_code()},e}(),Handshake.AlmaMatersFormView=function(){function e(e){var t,i;this.props=e,this.remove_alma_mater=s(this.remove_alma_mater,this),this.add_alma_mater=s(this.add_alma_mater,this),this.alma_mater_value=s(this.alma_mater_value,this),this.handle_alma_mater_change=s(this.handle_alma_mater_change,this),this.form_name=s(this.form_name,this),this.alma_maters=ko.observableArray(this.props.alma_maters()),this.destroyed_alma_maters=ko.observableArray(),this.valid_alma_maters=ko.computed((t=this,function(){return _.filter(t.alma_maters(),function(e){return null!=e.continuing_education_school_id()||e.isPersisted()||!_.isEmpty(e.continuing_education_school_name())})})),this.vm={alma_maters:this.alma_maters,add_alma_mater:this.add_alma_mater,remove_alma_mater:this.remove_alma_mater,form_name:this.form_name,destroyed_alma_maters:this.destroyed_alma_maters,valid_alma_maters:this.valid_alma_maters,alma_mater_autosuggest_props:(i=this,function(e){return{resultsField:"results",path:"/continuing_education_schools",loadOnFocus:!0,handleChange:i.handle_alma_mater_change(e),value:i.alma_mater_value(e)}}),graduation_year_options:ko.observableArray()},0===this.alma_maters().length&&this.add_alma_mater(),this.set_graduation_year_options()}return e.prototype.form_name=function(e,t,s){return null==s&&(s=!1),s&&(e+=this.alma_maters().length),"user[alma_maters_attributes]["+e+"]["+t+"]"},e.prototype.handle_alma_mater_change=function(e){return function(t,s){return s?(e.continuing_education_school_id(s.id),e.continuing_education_school_name(s.name)):{id:e.continuing_education_school_id(),name:e.continuing_education_school_name()}}},e.prototype.alma_mater_value=function(e){var t;return"number"==typeof(t=e.continuing_education_school_id())&&t>=0?{id:e.continuing_education_school_id(),name:e.continuing_education_school_name()}:null},e.prototype.add_alma_mater=function(){return this.alma_maters.push(new Handshake.AlmaMaters.AlmaMater)},e.prototype.remove_alma_mater=function(e){if(this.alma_maters.remove(e),e.isPersisted()&&this.destroyed_alma_maters.push(e),0===this.alma_maters().length)return this.add_alma_mater()},e.prototype.set_graduation_year_options=function(){var e,t;return e=(new Date).getFullYear(),_(50).times((t=this,function(s){return t.vm.graduation_year_options.push(e-s)}))},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Employers={},Handshake.Employers.Employer=function(s){function i(t){var s,n,o,r,a,c;this.get_employer_flags=e(this.get_employer_flags,this),this.find_similar=e(this.find_similar,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},description:{send:!0},text_description:{},institution_type_id:{send:!0},institution_type:{belongs_to:Handshake.InstitutionTypes.InstitutionType},institution_size_id:{error_prefix:"Institution size",send:!0},institution_size:{belongs_to:Handshake.InstitutionSizes.InstitutionSize},location:{send:!0,belongs_to:Handshake.Locations.Location,nested_attribute:!0},logo_url:{},recognizable_logo_url:{},location_name:{},industry_id:{error_prefix:"Industry",send:!0},industry:{belongs_to:Handshake.Industries.Industry},favorite_path:{},website:{send:!0},email:{send:!0},email_domain:{},phone:{send:!0},employer_flags_count:{},roles:{array:!0},aliases:{array:!0},duns_number:{send:!0},branding_image:{},logo:{},recognizable_logo:{send:!0},branding_image_url:{},auto_approve_staff:{},invite_token:{},trust_score:{},approved_employer_approvals_count:{},declined_employer_approvals_count:{},private_phone:{send:!0},pitch:{send:!0},linkedin_url:{send:!0},facebook_url:{send:!0},twitter_url:{send:!0},glassdoor_url:{send:!0},instagram_url:{send:!0},generic_email_domain:{},distributed_employer_id:{send:!0},distributed_employer_name:{},email_domain_names:{array:!0},logo_s3_key:{send:!0},branding_image_s3_key:{send:!0},interviews_on_campus:{},on_campus_employment_school_id:{send:!0},on_campus_employment_school_name:{send:!0},featured_job_id:{send:!0},featured_job_title:{},featured_job_approved_postings_count:{}}),this.trust_score_css=ko.computed((s=this,function(){var e;switch(e=s.trust_score(),!1){case!(e>80):return"high";case!(e>65):return"good";case!(e>50):return"medium";default:return"low"}})),this.branding_image_present=ko.computed((n=this,function(){return n.branding_image_url()&&-1===n.branding_image_url().indexOf("missing")})),this.logo_present=ko.computed((o=this,function(){return o.logo_url()&&-1===o.logo_url().indexOf("default_institution")})),this.recognizable_logo_present=ko.computed((r=this,function(){return r.recognizable_logo_url()&&-1===r.recognizable_logo_url().indexOf("default_institution")})),this.flag_warning=ko.computed((a=this,function(){var e;return e=1===a.employer_flags_count()?"":"s","This employer has been flagged "+a.employer_flags_count()+" time"+e+". Please use extra caution when dealing with this employer"})),this.location_details=ko.computed((c=this,function(){var e;return e=[],c.location_name()&&e.push(c.location_name()),c.website()&&e.push(c.website()),e.join(" | ")}))}return t(i,s),i.type="Employer",i.underscore="employer",i.prototype.find_similar=function(e){var t,s;return s=this.getJSON(!1),(t={})[this.underscore]=s,this.ajax_call({type:"POST",method:"find_similar",on_member:!1,action:"find_similar",data:t,success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.get_employer_flags=function(e,t){return this.ajax_call({type:"GET",method:"employer_flags",on_member:!0,action:"employer_flags",data:e,success:function(e){if(_.isFunction(t))return t(e)}})},i}(Handshake.Resource),Handshake.SearchEmployersView=function(){function t(t){var s;this.props=t,this.update_employer_favorites=e(this.update_employer_favorites,this),this.is_interviewing=e(this.is_interviewing,this),this.is_favorite=e(this.is_favorite,this),this.employer_is_in_progress=e(this.employer_is_in_progress,this),this.employer_is_declined=e(this.employer_is_declined,this),this.employer_is_pending=e(this.employer_is_pending,this),this.employer_is_approved=e(this.employer_is_approved,this),this.searchCallback=e(this.searchCallback,this),this.items=ko.observableArray([]),this.approved_employer_ids=ko.observableArray([]),this.pending_employer_ids=ko.observableArray([]),this.declined_employer_ids=ko.observableArray([]),this.in_progress_employer_ids=ko.observableArray([]),this.favorite_employer_ids=ko.observable(this.props.favorite_employer_ids),this.react_props=ko.observable({entities:{employers:[],favorites:this.props.employer_favorites},updateEmployerFavorites:this.update_employer_favorites}),this.searchable=new Handshake.Searchable($("#search-form"),"employers",this.searchCallback),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s||"Mentors"===s?this.searchable.initialSetup("UniversityEmployers"):this.searchable.initialSetup("Employer"),this.searchable.showPerPageOption(!0)}return t.prototype.searchCallback=function(e){return this.props.render_in_react?setTimeout((t=this,function(){var s;return s=_.extend({},t.react_props().entities,{employers:e.results}),t.react_props(_.extend({},t.react_props(),{entities:s}))}),0):(this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.Employers.Employer)),this.approved_employer_ids(e.approved_employer_ids||[]),this.pending_employer_ids(e.pending_employer_ids||[]),this.declined_employer_ids(e.declined_employer_ids||[]),this.in_progress_employer_ids(e.in_progress_employer_ids||[]));var t},t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.employer_is_approved=function(e){return _.contains(this.approved_employer_ids(),parseInt(e.id()))},t.prototype.employer_is_pending=function(e){return _.contains(this.pending_employer_ids(),parseInt(e.id()))},t.prototype.employer_is_declined=function(e){return _.contains(this.declined_employer_ids(),parseInt(e.id()))},t.prototype.employer_is_in_progress=function(e){return _.contains(this.in_progress_employer_ids(),parseInt(e.id()))},t.prototype.is_favorite=function(e){return!!this.props.favorite_employer_ids&&_.contains(this.props.favorite_employer_ids,parseInt(e.id()))},t.prototype.is_interviewing=function(e){return!!this.props.interviewing_employer_ids&&_.contains(this.props.interviewing_employer_ids,parseInt(e.id()))},t.prototype.update_employer_favorites=function(e){
return this.react_props(_.extend({},this.react_props(),{entities:_.extend({},this.react_props().entities,{favorites:e})})),this.favorite_employer_ids(e.map(function(e){return e.favoritable_id}))},t}(),Handshake.EditEmployerView=function(){function t(t){var i,n,o;this.props=t,this.updateImage=e(this.updateImage,this),this.changeImage=e(this.changeImage,this),this.setActiveCropView=e(this.setActiveCropView,this),this.confirmChangeInterviewsOnCampus=e(this.confirmChangeInterviewsOnCampus,this),this.submit=e(this.submit,this),this.deleteItem=e(this.deleteItem,this),this.addItem=e(this.addItem,this),this.existing_employers=ko.observableArray([]),this.employer=ko.observable(new Handshake.Employers.Employer(this.props.employer)),this.new_alias=ko.observable(),i={object_type:"employer"},this.props.location&&(i.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(i),this.distributed_employer_select2={url:"/distributed_employers",primary_property:"name",results_property:"results",value:this.employer.distributed_employer_id,initial_value:{id:this.employer().distributed_employer_id(),name:this.employer().distributed_employer_name()},allowClear:!0},this.on_campus_employment_school_select2={placeholder:UNSAFE__i18n.t("school_capitalized")+"...",url:"/schools",initial_value:{name:this.employer().on_campus_employment_school_name(),id:this.employer().on_campus_employment_school_id()},allowClear:!0},this.featured_job_select2={url:"/jobs",dataFunction:function(e){return{query:e,status:["approved"],has_approved_posting:!0,simple_search:!0}},resultFormatFunction:s,selectionFormatFunction:s,initial_value:{title:this.employer().featured_job_title(),id:this.employer().featured_job_id(),approved_postings_count:this.employer().featured_job_approved_postings_count()},allowClear:!0},this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Warning",safe_body_html:"You are changing the default setting for all users at your company. Please ensure you have notified them of this change and that it follows the best practices of your team"}),this.brandingImageCropView=new Handshake.UserImages.CropImageView(this.employer(),"branding","branding_image",".branding-image",!1,(n=this,function(e){return n.updateImage(e,"branding_image")})),this.logoCropView=new Handshake.UserImages.CropImageView(this.employer(),"logo","logo",".crop-logo",!1,(o=this,function(e){return o.updateImage(e,"logo")})),this.recognizableLogoCropView=new Handshake.UserImages.CropImageView(this.employer(),"logo","recognizable_logo",".crop-logo"),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.changeImage),this.active_crop_view=null}var s;return s=function(e){var t,s;return s=(t=e.approved_postings_count)+" "+Handshake.Helpers.pluralizeString("school",t,"s"),"#"+e.id+": "+e.title+" ("+s+")"},t.prototype.addItem=function(){return this.employer().aliases.push(this.new_alias()),this.new_alias("")},t.prototype.deleteItem=function(e){return this.employer().aliases.remove(e)},t.prototype.submit=function(){return this.employer().find_similar((e=this,function(t){return t.matched_employers.length>0?(e.existing_employers(Handshake.Resource.resourcesFromArray(t.matched_employers)),e.showSimilarEmployersPrompt()):e.force_submit()}));var e},t.prototype.force_submit=function(){return $("#new_employer").submit()},t.prototype.showSimilarEmployersPrompt=function(){return $("#similar-employers-prompt").modal("show")},t.prototype.confirmChangeInterviewsOnCampus=function(){return this.employer().isFieldChanged("interviews_on_campus")?this.confirmation_modal.show_modal(function(){return $("form.edit_employer").submit()}):$("form.edit_employer").submit()},t.prototype.setActiveCropView=function(e){return this.active_crop_view=e},t.prototype.changeImage=function(e){return this.active_crop_view.changeImage(e)},t.prototype.updateImage=function(e,t){var s;return null===e?this.employer().ajax_call({type:"POST",method:"update_image",on_member:!0,action:"update_image",data:{image_type:t,remove:!0}}):new Handshake.FileUploader({record:this.employer(),attachment_name:t,success:(s=this,function(i){return s.employer().ajax_call({type:"POST",method:"update_image",on_member:!0,action:"update_image",data:{image_type:t,s3_key:i},success:function(){return s.employer()[t+"_url"](e)}})}),error:function(e){return Handshake.Helpers.notifyError("Error updating image: "+e.join(", "))}}).upload(e)},t}(),Handshake.ManageEmployerStaffView=function(){function t(t){this.props=t,this.sendInvitationEmail=e(this.sendInvitationEmail,this),this.addExistingStaffMember=e(this.addExistingStaffMember,this),this.employer=ko.observable(Handshake.Resource.resourceFromObject(this.props.employer)),this.contacts=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.contacts)),this.existingStaffMemberEmail=ko.observable(""),this.invite_modal=new Handshake.InviteLinkModal({root_url:this.props.root_url,employer:this.employer})}return t.prototype.addExistingStaffMember=function(){return $.ajax({type:"POST",url:"/employers/"+this.employer().id()+"/add_existing_staff_member",dataType:"json",data:{email_address:this.existingStaffMemberEmail()},success:function(e){return e.success?window.location.reload():Handshake.Helpers.notifyError(e.errors[0])}})},t.prototype.sendInvitationEmail=function(e){return e.send_invitation_email({employer_id:this.employer().id()},(t=this,function(){return Handshake.Helpers.notifySuccess("Successfully invited "+e.name()+" to join "+t.employer().name()+" by Email.")}));var t},t}(),Handshake.ShowEmployerView=function(){function t(t){var s,i,n,o;this.props=t,this.updateImage=e(this.updateImage,this),this.changeImage=e(this.changeImage,this),this.setActiveCropView=e(this.setActiveCropView,this),this.employer=ko.observable(Handshake.Resource.resourceFromObject(this.props.employer)),null!=this.props.employer_approval&&(this.employer_approval=ko.observable(Handshake.Resource.resourceFromObject(this.props.employer_approval)),this.employerApprovalFormView=new Handshake.EmployerApprovals.EmployerApprovalFormView({employer:this.employer,employer_approval:this.employer_approval,employer_approval_roles:ko.observableArray(this.props.employer_approval_roles),next_employer_approval_path:ko.observable(this.props.next_employer_approval_path),employer_approval_preference:ko.observable(this.props.employer_approval_preference),finish_setup_observable:ko.observable(!0)})),this.employer_flags=ko.observableArray(this.props.employer_flags),this.employer_flag_path=ko.observable(this.props.employer_flag_path),this.trust_score_tips=ko.observableArray(this.props.trust_score_tips),this.props.pins_enabled&&(s=ko.observable(),this.props.pin&&s(new Handshake.Pins.Pin(this.props.pin)),this.createPinModal=new Handshake.Pins.CreateModalView(this.employer,s)),this.job_data=this.props.job_data,this.relevant_postings=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.relevant_postings)),this.relevant_interviews=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.relevant_interviews)),this.upcoming_events=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.upcoming_events)),this.relevant_career_fairs=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.relevant_career_fairs)),this.labelView=new Handshake.Labels.LabelView({labellable:this.employer,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))}),this.commentsView=new Handshake.Comments.CommentsView(this.employer_approval,"staff"),this.show_create_a_job=ko.computed((i=this,function(){return"Admins"===Handshake.passed.current_user_type||"Career Services"===Handshake.passed.current_user_type&&i.employer_approval().isPersisted()&&"approved"===i.employer_approval().status()&&-1===i.employer_approval().changed_props.indexOf("status")})),this.brandingImageCropView=new Handshake.UserImages.CropImageView(this.employer(),"branding","branding_image",".branding-image",!1,(n=this,function(e){return n.updateImage(e,"branding_image")})),this.logoCropView=new Handshake.UserImages.CropImageView(this.employer(),"logo","logo",".crop-logo",!1,(o=this,function(e){return o.updateImage(e,"logo")})),this.recognizableLogoCropView=new Handshake.UserImages.CropImageView(this.employer(),"logo","recognizable_logo",".crop-logo"),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.changeImage),this.active_crop_view=null,this.invite_modal=new Handshake.InviteLinkModal({root_url:Handshake.passed.root_url,employer:this.employer})}return t.prototype.setActiveCropView=function(e){return this.active_crop_view=e},t.prototype.changeImage=function(e){return this.active_crop_view.changeImage(e)},t.prototype.updateImage=function(e,t){var s;return null===e?this.employer().ajax_call({type:"POST",method:"update_image",on_member:!0,action:"update_image",data:{image_type:t,remove:!0}}):new Handshake.FileUploader({record:this.employer(),attachment_name:t,success:(s=this,function(i){return s.employer().ajax_call({type:"POST",method:"update_image",on_member:!0,action:"update_image",data:{image_type:t,s3_key:i},success:function(){return s.employer()[t+"_url"](e)}})}),error:function(e){return Handshake.Helpers.notifyError("Error updating image: "+e.join(", "))}}).upload(e)},t}(),Handshake.InviteLinkModal=function(){function t(t){var s;this.props=t,this.generateNewInviteToken=e(this.generateNewInviteToken,this),this.employer=this.props.employer,this.invite_url=ko.computed((s=this,function(){return s.props.root_url+"employer_registrations/new?employer_invite_token="+s.employer().invite_token()}))}return t.prototype.generateNewInviteToken=function(){return this.employer().ajax_call({type:"POST",on_member:!0,action:"generate_new_invite_token",method:"generate_new_invite_token",success:(e=this,function(t){return e.employer().invite_token(t.token)})});var e},t}(),Handshake.Employers.Card=function(){function e(e){var t,s,i,n,o;this.props=e,s=ko.computed((n=this,function(){return n.props.card.logo_present()?n.props.card.logo_url():""})),t=ko.computed((o=this,function(){return ko.unwrap(o.props.card.pitch)||ko.unwrap(o.props.card.description)})),this.vm={type:"employer",featured:this.props.featured,heading_params:{title:this.props.card.name,title_path:this.props.card.entity_path,subtitle:null!=(i=this.props.card.industry())?i.name:void 0,avatar_params:{image_url:s,name:this.props.card.name}},content_params:{description:t,description_length:200},action_params:{actions:[{text:"View Employer Profile",url:this.props.card.entity_path,"class":"btn-brand-blue"}]}}}return e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.EmploymentTypes={},Handshake.EmploymentTypes.EmploymentType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{}})}return e(s,t),s.type="EmploymentType",s.underscore="employment_type",s}(Handshake.Resource)}.call(this),function(){Handshake.EvaluationFormView=function(){function e(e){var t,s;this.props=e,this.on_behalf_of=ko.observable(this.props.on_behalf_of),this.selected_user=ko.observable(this.props.selected_user_type),this.is_school=this.props.is_school,this.student_name=this.props.student_name,this.display_student=ko.computed((t=this,function(){return!t.is_school||t.on_behalf_of()===t.student_name||"student"===t.selected_user()})),this.display_employer=ko.computed((s=this,function(){return!s.is_school||s.on_behalf_of()&&s.on_behalf_of()!==s.student_name})),this.employer_take_survey_view=new Handshake.TakeSurveyView({survey_id:this.props.employer_survey_id,selector:".employer-survey-view",token:getUrlParams().employer_survey_token||this.props.employer_survey_token}),this.props.employer_survey_response&&this.employer_take_survey_view.survey_response(Handshake.Resource.resourceFromObject(this.props.employer_survey_response)),this.student_take_survey_view=new Handshake.TakeSurveyView({survey_id:this.props.student_survey_id,selector:".student-survey-view",token:getUrlParams().student_survey_token||this.props.student_survey_token}),this.props.student_survey_response&&this.student_take_survey_view.survey_response(Handshake.Resource.resourceFromObject(this.props.student_survey_response))}return e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.EventPreferences={},Handshake.EventPreferences.EventPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({approval_message:{send:!0},request_survey_id:{send:!0},request_survey_name:{},default_invoice_message:{send:!0}})}return e(s,t),s.type="EventPreference",s.underscore="event_preference",s}(Handshake.Resource),Handshake.EditEventPreferencesView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.event_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.event_preference)),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.survey_select2_options={placeholder:"Choose Survey",url:"/surveys",allowClear:!0,initial_value:{id:this.event_preference().request_survey_id(),name:this.event_preference().request_survey_name()}}}return e.prototype.cancel=function(){return this.event_preference().revert()},e.prototype.submit=function(){return this.event_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.EventTypes={},Handshake.EventTypes.EventType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0}})}return e(s,t),s.type="EventType",s.underscore="event_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Events={},Handshake.Events.Event=function(s){function i(t){var s,n,o,r,a,c,l,u,h;this.reset=e(this.reset,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.sendInvites=e(this.sendInvites,this),this.popover_content=e(this.popover_content,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},moment_time_zone:{send:!0},start_date:{send:!0},end_date:{send:!0},description:{send:!0},image:{send:!0},image_url:{},host_id:{send:!0},attending_employer_names:{},host_type:{},host_id_type:{},host_name:{},host_logo_url:{},host_logo_feed_item_url:{},host_path:{},nametags_enabled:{send:!0},nametag_label_xml:{send:!0},owner_id:{send:!0},owner_id_type:{},owner_name:{},owner_logo_url:{},owner_logo_feed_item_url:{},owner_path:{},contact_id:{send:!0},contact_name:{},contact_ids:{send:!0,array:!0},event_type_id:{send:!0},event_type:{belongs_to:Handshake.EventTypes.EventType},location_name:{},available_space:{},registered_count:{},status:{send:!0},responder_name:{},created_by_name:{},fancy_status:{},attendee_form_required:{},is_virtual_event:{},external_link:{send:!0},virtual_link:{send:!0},location_latitude:{},location_longitude:{},student_registration_start:{send:!0},student_registration_end:{send:!0},career_center_id:{send:!0},invite_only:{send:!0},room_id:{send:!0},attendee_limit:{send:!0},student_cost:{send:!0},attendable_survey_id:{send:!0},welcome_student_email:{send:!0},location:{belongs_to:Handshake.Locations.Location,nested_attribute:!0,send:!0},request_survey_response:{belongs_to:Handshake.SurveyResponses.SurveyResponse,nested_attribute:!0,send:!0},conversion_tracker:{belongs_to:Handshake.ConversionTrackers.ConversionTracker,nested_attribute:!0,send:!0},employer_cost:{send:!0},event_type_name:{},school_institution_attendee_statuses:{array:!0},created_at:{},updated_at:{},"public":{send:!0},available_space_for_waitlist_students:{}}),this.nice_start_date=Handshake.TimeZoneHelper.dateTime("long_date",this.start_date(),this.moment_time_zone()),this.compact_start_date_time=Handshake.TimeZoneHelper.dateTime("month_day_year_time",this.start_date(),this.moment_time_zone()),this.start_to_end_time=ko.computed((s=this,function(){return Handshake.Helpers.startToEndTime(s.start_date(),s.end_date(),s.moment_time_zone())})),this.has_approved_schools=ko.computed((n=this,function(){return _.any(n.school_institution_attendee_statuses(),function(e){return"approved"===e.split("-")[2]})})),this.nice_slots_remaining=ko.computed((o=this,function(){return null===o.available_space()?"":1===o.available_space()?"1 slot remaining":o.available_space()+" slots remaining"})),this.multi_day=ko.computed((r=this,function(){return Handshake.Helpers.straightDate(r.start_date())!==Handshake.Helpers.straightDate(r.end_date())})),this.image_present=ko.computed((a=this,function(){return!!a.image_url()&&-1===a.image_url().indexOf("missing.png")})),this.owner_logo_present=ko.computed((c=this,function(){return!!c.owner_logo_url()&&-1===c.owner_logo_url().indexOf("default_institution")})),this.image_or_fallback_url=ko.computed((l=this,function(){return l.image_present()?l.image_url():l.owner_logo_present()?l.owner_logo_url():l.host_logo_url()})),this.new_event_message_campaign_path=ko.pureComputed((u=this,function(){return u.entity_path+"/message_campaigns/new"})),this.in_student_registration_period=ko.pureComputed((h=this,function(){var e;return e=moment(),null==h.student_registration_start()&&null==h.student_registration_end()||(null==h.student_registration_start()?e.isBefore(h.student_registration_end()):null==h.student_registration_end()?e.isAfter(h.student_registration_start()):e.isBetween(h.student_registration_start(),h.student_registration_end()))})),this.public_event_approved_options={html:!0,placement:"left",animation:!1,hide_on_click_outside:!0,content:this.popover_content(!0)},this.public_event_options={html:!0,placement:"left",animation:!1,hide_on_click_outside:!0,content:this.popover_content(!1)}}return t(i,s),i.type="Event",i.underscore="event",i.prototype.popover_content=function(e){return"<div class='"+"applications-key-action-popover"+"' style='width:250px'>"+(e?"<span>This event is also accessible to any student with a direct link to the event.</span>":"<span>\nThis is a public event. While it will not be listed or discoverable at "+Handshake.passed.current_user_institution_name+"\nunless approved, it will still be accessible to anyone with a direct link.\n</span>")+"</div>"},i.prototype.sendInvites=function(e,t){return this.ajax_call({type:"POST",method:"send_invite",on_member:!0,action:"send_invite",data:e,success:function(e){if(t)return t(e)}})},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.Events.LargePreview=function(){function e(e){this.event=e.event}return e}(),Handshake.Events.SlotsRemaining=function(){function e(e){this.vm=e}return e}(),Handshake.EditEventView=function(){function t(t){var s,i,n,o,r,a,c,l,u;this.props=t,this.save=e(this.save,this),this.set_survey_for_career_center=e(this.set_survey_for_career_center,this),this.change_image=e(this.change_image,this),this.setActiveCropView=e(this.setActiveCropView,this),this.load_career_centers=e(this.load_career_centers,this),this.image_changed=ko.observable(!1),this.event=Handshake.Resource.resourceFromObject(this.props.event),this.event.location(new Handshake.Locations.Location(this.props.location)),this.event.conversion_tracker(new Handshake.ConversionTrackers.ConversionTracker(this.props.conversion_tracker)),this.host_time_zone=ko.observable(null),this.career_centers=ko.observableArray(),this.original_career_center_id=this.props.event.career_center_id,this.original_survey_id=null!=(n=this.props.request_survey_response)?n.survey_id:void 0,this.original_survey_response_id=null!=(o=this.props.request_survey_response)?o.id:void 0,this.takeSurveyView=new Handshake.TakeSurveyView({survey_response_id:this.original_survey_response_id}),this.show_survey=ko.observable(!!this.original_survey_response_id),this.event.request_survey_response=this.takeSurveyView.survey_response,this.event.event_type_id()&&this.event.event_type_id(this.event.event_type_id().toString()),i=this.props.event_types,this.is_virtual_event=ko.computed((r=this,function(){var e,t;return!!(t=r.event.event_type_id())&&(e=_.find(i,function(e){return e.id===+t}))&&"Virtual Session"===e.name})),this.showVirtualEventsUpdate=ko.computed((a=this,function(){return a.is_virtual_event()})),!this.event.id()&&this.props.contacts&&this.props.contacts.length&&this.event.contact_ids([this.props.contacts[0].id]),this.event.host_id()&&this.load_career_centers(),this.event.host_id.subscribe((c=this,function(){if(c.event.host_id())return c.event.career_center_id(null),new Handshake.Schools.School({id:c.event.host_id()}).fetch(function(e){return c.event.moment_time_zone(e.school.moment_time_zone),c.host_time_zone(e.school.time_zone)}),c.load_career_centers()})),this.event.career_center_id.subscribe(this.set_survey_for_career_center),this.event_host_typeahead_options={path:"/employers/approved_schools",params:{permission:"post_events"}},s={object_type:"event",location:this.event.location},this.addLocationView=new Handshake.Locations.AddLocationView(s),this.props.room&&this.addLocationView.disabled(!0),this.host_school_select2_options={placeholder:"Host School...",url:"/employers/approved_core_schools",value:this.event.host_id,allowClear:!0,dataFunction:function(e){return{query:e,simple_search:!0,permission:"post_events"}}},$.extend(this.host_school_select2_options,Handshake.CoreSchools.coreSchoolsSelect2Options),this.career_center_select2_options={placeholder:"Career Center"},this.event_room_select2_options={placeholder:"Room",url:"/rooms",allowClear:!0,primary_property:"full_name",initial_value:this.props.room,on_change:(l=this,function(e){return l.addLocationView.disabled(!!e)}),results_filter:function(e){return Handshake.Rooms.Results.group_by_building(e)}},this.contactModal=new Handshake.Contacts.CreateContactModal(void 0,ko.observable(void 0)),this.event_contact_select2_options={placeholder:"Choose contacts...",initial_value:this.props.contacts,value:this.event.contact_ids,url:"/contacts",secondary_property:"email_address"},this.image_view_active=!1,this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.change_image),this.image_crop_view=new Handshake.UserImages.CropImageView(this.event,"logo","image",".crop-logo",!1),this.event.image.subscribe((u=this,function(){return u.image_changed(!0)}))}return t.prototype.load_career_centers=function(){var e,t,s;return e=new Handshake.CareerCenters.CareerCenter({school_id:this.event.host_id()}),t={},"Employers"===Handshake.passed.current_user_type&&(t={available_for_events:!0}),e.index((s=this,function(e){return s.career_centers(e),1===s.career_centers().length?s.event.career_center_id(s.career_centers()[0].id):s.set_survey_for_career_center(s.event.career_center_id())}),null,t)},t.prototype.setActiveCropView=function(){return this.image_view_active=!0},t.prototype.change_image=function(e){return this.image_view_active?(this.image_crop_view.changeImage(e),this.image_view_active=!1):this.userImageUploadView.defaultSaveImage(e)},t.prototype.add_hour=function(e){var t,s;return t=e.substr(0,2),((s=parseInt(t)+1)<10?"0":"")+s},t.prototype.set_survey_for_career_center=function(e){var t,s,i,n,o;return e?e.toString()===(null!=(s=this.original_career_center_id)?s.toString():void 0)?this.original_survey_response_id?((null!=(i=this.takeSurveyView.survey_response())?i.id():void 0)!==this.original_survey_response_id&&this.takeSurveyView.fetch_survey_response(this.original_survey_response_id),this.show_survey(!0)):(this.show_survey(!1),this.takeSurveyView.build_survey_response(null)):(o=null!=(t=_(this.career_centers()).find(function(t){return t.id.toString()===e.toString()}))?t.event_request_survey_id:void 0)?(o!==(null!=(n=this.takeSurveyView.survey())?n.id():void 0)&&(o===this.original_survey_id?this.takeSurveyView.fetch_survey_response(this.original_survey_response_id):this.takeSurveyView.build_survey_response(o,Handshake.passed.current_user_id)),this.show_survey(!0)):(this.show_survey(!1),this.takeSurveyView.build_survey_response(null)):(this.show_survey(!1),this.takeSurveyView.build_survey_response(null))},t.prototype.save=function(){var e,t,s;return(null!=(e=this.event.request_survey_response())?e.survey_id():void 0)||this.event.request_survey_response(null),this.event.isPersisted()?this.event.save((s=this,function(){return Handshake.Helpers.notifySuccess("Event was successfully updated."),Handshake.SPA.navigate(s.event.member_route())})):this.event.create((t=this,function(){return Handshake.Helpers.notifySuccess("Event was successfully created."),Handshake.SPA.navigate(t.event.member_route())}))},t}(),Handshake.Events.AddAttendeeView=function(){function t(t,s){this.event=t,this.registered_attendees_count=s,this.choose_student=e(this.choose_student,this),this.user_id=ko.observable(),this.add_attendee_select2_options={placeholder:"Add an attendee...",url:"/students?simple_search=true",value:this.user_id,on_change:this.choose_student,secondary_property:"institution_managed_email"}}return t.prototype.choose_student=function(){var e;return new Handshake.Attendees.Attendee({attendable_id:this.event.id(),attendable_type:this.event.type,user_id:this.user_id()}).create((e=this,function(){return e.user_id(""),Handshake.Helpers.notifySuccess("The user has been registered for this event."),e.event.fetch()}))},t}(),Handshake.ManageEventsView=function(){function t(t){var s;this.props=t,this.institutionAttendeeOrEvent=e(this.institutionAttendeeOrEvent,this),this.waitlistSpaceAvailable=e(this.waitlistSpaceAvailable,this),this.resetEvent=e(this.resetEvent,this),this.declineEvent=e(this.declineEvent,this),this.approveEvent=e(this.approveEvent,this),this.eventStatus=e(this.eventStatus,this),this.massEmailEventsSuccess=e(this.massEmailEventsSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.events=ko.observableArray([]),this.institution_attendees=ko.observableArray(),this.can_approve_events=this.props.can_approve_events,this.searchable=new Handshake.Searchable($("#search-form"),"events",this.searchCallback),"Career Services"===(s=Handshake.passed.current_user_type)&&this.searchable.bulkActions([{label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"Event",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Students About Events",type:"simple",key_action:!0,bulk_action:"mass_email_about_items",success:this.massEmailEventsSuccess}]),"Career Services"===s||"Admins"===s?this.searchable.initialSetup("UniversityManageEvents"):this.searchable.initialSetup("ManageEvents")}return t.prototype.searchCallback=function(e){return this.institution_attendees(Handshake.Resource.resourcesFromArray(e.institution_attendees)),this.events(Handshake.Resource.resourcesFromArray(e.results,Handshake.Events.Event))},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.massEmailEventsSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.eventStatus=function(e){var t;return null!=(t=this.institutionAttendeeOrEvent(e))?t.status():void 0},t.prototype.approveEvent=function(e){return this.institutionAttendeeOrEvent(e).approve()},t.prototype.declineEvent=function(e){return this.institutionAttendeeOrEvent(e).decline()},t.prototype.resetEvent=function(e){return this.institutionAttendeeOrEvent(e).reset()},t.prototype.waitlistSpaceAvailable=function(e){return this.institutionAttendeeOrEvent(e)&&this.institutionAttendeeOrEvent(e).available_space_for_waitlist_students},t.prototype.institutionAttendeeOrEvent=function(e){return e.host_id_type()!==Handshake.passed.current_user_institution_id_type?_.find(this.institution_attendees(),function(t){return t.attendable_id()===e.id()&&"Event"===t.attendable_type()}):e},t}(),Handshake.Events.FilterEventsView=function(){function t(t,s,i,n){var o;this.additionalCallback=s,this.searchCallback=e(this.searchCallback,this),this.items=ko.observableArray([]),this.templateName="Event-template",this.searchable=new Handshake.Searchable($("#search-form",t),"events",this.searchCallback,t),this.searchable.pushHistoryOnSearchPerformed(!1),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"asc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"Date",field:"start_date",sort_direction:"asc"},{label:"Name",field:"name.case_insensitive_sorting",sort_direction:"asc"},{label:"Owner Name",field:"owner_name.case_insensitive_sorting",sort_direction:"asc"}]),i||("Career Services"===(o=Handshake.passed.current_user_type)||"Admins"===o?this.searchable.initialSetup("UniversityManageEvents",n):this.searchable.initialSetup("Event",n))}return t.prototype.searchCallback=function(e){if(this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.Events.Event)),this.additionalCallback)return this.additionalCallback(e)},t}(),Handshake.ShowEventView=function(){function t(t){var s,i;this.props=t,this.emailAttendeesModalConfirm=e(this.emailAttendeesModalConfirm,this),this.cancelEventModalConfirm=e(this.cancelEventModalConfirm,this),this.csv_download=e(this.csv_download,this),this.showAddInstitutionAttendee=e(this.showAddInstitutionAttendee,this),this.openAttendeesModal=e(this.openAttendeesModal,this),this.institutionAttendeeOrEvent=e(this.institutionAttendeeOrEvent,this),this.resetEvent=e(this.resetEvent,this),this.declineEvent=e(this.declineEvent,this),this.approveEvent=e(this.approveEvent,this),this.fancyStatus=e(this.fancyStatus,this),this.eventStatus=e(this.eventStatus,this),this.event=ko.observable(Handshake.Resource.resourceFromObject(this.props.event)),this.registered_attendees_count=ko.observable(this.props.registered_attendees_count),this.school_institution_attendees=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.school_institution_attendees)),this.employer_institution_attendees=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.employer_institution_attendees)),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.event,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))})),this.props.notes_enabled&&(this.notesModal=new Handshake.Notes.NotesView(this.event(),!0)),this.props.comments_enabled&&(this.commentsView=new Handshake.Comments.CommentsView(this.event,null,this.props.can_delete_comments)),
this.props.staff_comments_enabled&&(this.staff_tile_collapsed=ko.observable(!0),this.staff_tile_initial_collapsed=!0,"pending"===this.eventStatus(this.event())()&&(this.staff_tile_initial_collapsed=!1,this.staff_tile_collapsed(!1)),this.staffCommentsView=new Handshake.Comments.CommentsView(this.event,"staff")),this.props.employer_payment_required&&(this.institution_attendee=ko.observable(Handshake.Resource.resourceFromObject(this.props.institution_attendee)),this.chargeForm=new Handshake.Charges.ChargeForm({chargeable:this.institution_attendee,stripe_publishable_key:this.props.stripe_publishable_key,stripe_amount:this.props.stripe_amount,payment_processor:this.props.payment_processor})),this.props.pins_enabled&&(s=ko.observable(),this.props.pin&&s(new Handshake.Pins.Pin(this.props.pin)),this.createPinModal=new Handshake.Pins.CreateModalView(this.event,s)),this.props.attendable_enabled&&(this.attendUnattendView=new Handshake.AttendUnattendView(this.event(),this.props.attendee,this.props.new_attendee_path)),this.props.add_attendees_enabled&&(this.addAttendeeView=new Handshake.Events.AddAttendeeView(this.event(),this.registered_attendees_count)),this.schoolInstitutionAttendeesList=new Handshake.InstitutionAttendees.InstitutionAttendeesList({attendable:this.event(),institution_attendees:this.school_institution_attendees,institution_type:"School",consortia_exist:this.props.consortia_exist}),this.employerInstitutionAttendeesList=new Handshake.InstitutionAttendees.InstitutionAttendeesList({attendable:this.event(),institution_attendees:this.employer_institution_attendees,institution_type:"Employer",consortia_exist:!1}),this.simpleAttendeesModal=new Handshake.Attendees.SimpleAttendeesModal(this.event),this.selectedInstitutionAttendeeView=ko.observable(this.schoolInstitutionAttendeesList),this.registered_attendees_count.subscribe((i=this,function(){return i.simpleAttendeesModal.initialized=!1})),this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,this.event_show_sidebar_props={handleConfirmClick:this.emailAttendeesModalConfirm,handleCancelResponse:this.cancelEventModalConfirm,options:["All Invited or Registered or Checked In","All Invited","All Registered","All Checked In","Registered and Checked In","Invited but not Registered or Checked In","Registered and not Checked In"],eventId:this.event().id(),eventStatus:this.event().status(),ownerType:this.event().owner_id_type().split("-")[1],attendingEmployersCount:this.event().attending_employer_names().length,virtualEventType:this.event().is_virtual_event(),enableQrCodeButton:!1},this.event_show_sidebar_with_qr_props={handleConfirmClick:this.emailAttendeesModalConfirm,handleCancelResponse:this.cancelEventModalConfirm,options:["All Invited or Registered or Checked In","All Invited","All Registered","All Checked In","Registered and Checked In","Invited but not Registered or Checked In","Registered and not Checked In"],eventId:this.event().id(),eventStatus:this.event().status(),ownerType:this.event().owner_id_type().split("-")[1],attendingEmployersCount:this.event().attending_employer_names().length,virtualEventType:this.event().is_virtual_event(),enableQrCodeButton:!0},this.email_attendees_props={handleConfirmClick:this.emailAttendeesModalConfirm,options:["All Invited or Registered or Checked In","All Invited","All Registered","All Checked In","Registered and Checked In","Invited but not Registered or Checked In","Registered and not Checked In"]}}return t.prototype.eventStatus=function(e){return this.institutionAttendeeOrEvent(e).status},t.prototype.fancyStatus=function(e){var t;switch((t=this.institutionAttendeeOrEvent(e)).status()){case"pending":return"Requested "+Handshake.Helpers.whenInWords(t.created_at());case"approved":return"Approved "+Handshake.Helpers.whenInWords(t.updated_at());case"declined":return"Declined "+Handshake.Helpers.whenInWords(t.updated_at());case"cancelled":return"Cancelled "+Handshake.Helpers.whenInWords(t.updated_at());default:throw new Error("status unknown")}},t.prototype.approveEvent=function(e){return this.institutionAttendeeOrEvent(e).approve()},t.prototype.declineEvent=function(e){return this.institutionAttendeeOrEvent(e).decline()},t.prototype.resetEvent=function(e){return this.institutionAttendeeOrEvent(e).reset()},t.prototype.institutionAttendeeOrEvent=function(e){var t;return e.host_id_type()!==Handshake.passed.current_user_institution_id_type&&"Admins"!==Handshake.passed.current_user_type?(t=this.school_institution_attendees().concat(this.employer_institution_attendees()),_.find(t,function(t){return t.attendable_id()===e.id()&&"Event"===t.attendable_type()&&t.institution_id_type()===Handshake.passed.current_user_institution_id_type})):e},t.prototype.openAttendeesModal=function(){return this.simpleAttendeesModal.showModal()},t.prototype.showAddInstitutionAttendee=function(e){return Handshake.SPA.navigate(this.event().entity_path+"/institution_attendees?institution_type="+e.institution_type())},t.prototype.csv_download=function(){var e;return e=this.event().entity_path+"/attendees/csv_download.json",this.ajax_download_view.download_results(e)},t.prototype.cancelEventModalConfirm=function(){return Handshake.SPA.navigate("/events")},t.prototype.emailAttendeesModalConfirm=function(e){var t;return t=$.param({event_id:this.event().id(),selected_option:e}),Handshake.SPA.navigate("/mass_emails/new?"+t)},t}(),Handshake.Events.Card=function(){function t(t){this.props=t,this.datetime=e(this.datetime,this),this.in_registration_period=e(this.in_registration_period,this),this.set_alerts=e(this.set_alerts,this),this.vm={type:"event",featured:this.props.featured,heading_params:{date:this.props.card.start_date(),title:this.props.card.name(),title_path:this.props.card.entity_path,subtitle:this.datetime()},content_params:{location_name:this.props.card.location_name(),alerts:[]},action_params:{actions:[{text:"View Details",url:this.props.card.entity_path,"class":"btn-brand-alt-green"}]}},this.set_alerts()}return t.prototype.set_alerts=function(){if(this.in_registration_period())return this.vm.content_params.alerts.push({html_safe_content:"Registrations open!","class":"success"})},t.prototype.in_registration_period=function(){var e,t,s;return!this.props.card.student_registration_start()||(s=moment(),t=moment(this.props.card.student_registration_start()),e=moment(this.props.card.student_registration_end()),s.isBetween(t,e))},t.prototype.datetime=function(){var e,t,s;return s=this.props.card.moment_time_zone(),t=this.props.card.start_date(),e=this.props.card.end_date(),Handshake.Helpers.startToEndSuccinct(t,e,s)},t}(),Handshake.Events.List=function(){function t(){var t;this.events_grouped_by_day=e(this.events_grouped_by_day,this),this.vm={events_loaded:ko.observable(!1),events:[],my_events:[]},$.getJSON("/events",{cache:!1,qualified_only:!0},(t=this,function(e){var s,i,n;return s=Handshake.Resource.resourcesFromArray(e.events),(i=Handshake.Resource.resourcesFromArray(e.my_events)).length&&(n=_.first(i),t.vm.my_events.push(n),t.decorate_events_with_attendance(s,i),_.forEach(i,function(e){return e.attending=!0}),s=_.filter(s,function(e){return e.id()!==n.id()||e.name()!==n.name()})),t.vm.events=t.events_grouped_by_day(s,i),t.vm.events_loaded(!0)}))}return t.prototype.events_grouped_by_day=function(e){var t;return e.length?(t=4,_.toArray(_.groupBy(e,function(e){return moment(e.start_date()).format("YYYY-MM-DD")})).slice(0,t)):[]},t.prototype.decorate_events_with_attendance=function(e,t){return _.map(e,function(e){return e.attending=_.some(t,function(t){return t.id()===e.id()&&t.type===e.type})})},t}(),Handshake.Events.DaysPreview=function(){function t(t){this.events_date=e(this.events_date,this),this.format_date=e(this.format_date,this),this.day_search_link=e(this.day_search_link,this),this.vm={events:t.events,highlight:t.highlight,max_events_per_day:3,format_date:this.format_date,day_search_link:this.day_search_link,event_time:this.event_time,multi_day_length:this.multi_day_length}}return t.prototype.day_search_link=function(){var e;return e="YYYY-MM-DD","/events/search?start_date="+this.format_date(e)+"&end_date="+this.events_date().add(1,"day").format(e)},t.prototype.event_time=function(e){var t;return t=Handshake.Helpers.startToEndSmartDates("very_short_date_time",e.start_date(),e.end_date(),e.moment_time_zone()),ko.unwrap(e.multi_day)?this.multi_day_length(e)+" day event - "+t:t},t.prototype.multi_day_length=function(e){return Math.ceil(moment(e.end_date()).diff(moment(e.start_date()),"days",!0))},t.prototype.format_date=function(e){return this.events_date().format(e)},t.prototype.events_date=function(){return moment(new Date(this.vm.events[0].start_date()))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Experiences={},Handshake.Experiences.Experience=function(s){function i(t){var s,n;this.complete=e(this.complete,this),this.begin=e(this.begin,this),this.reset=e(this.reset,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),i.__super__.constructor.call(this,t),this.attributes({created_by_id:{send:!0},student_id:{send:!0},status:{send:!0},student_name:{send:!0},student_first_name:{},student_last_name:{},employer_id:{send:!0,convert_undefined_to_null:!0},employer_name:{send:!0,convert_undefined_to_null:!0},school_id:{send:!0},school_name:{send:!0},job_id:{send:!0,convert_undefined_to_null:!0},job_title:{send:!0,convert_undefined_to_null:!0},token:{},term_id:{send:!0},term_name:{},supervisor_name:{send:!0},supervisor_email:{send:!0},supervisor_phone:{send:!0},supervisor_title:{send:!0},department:{send:!0},industry_id:{send:!0},start_date:{send:!0},end_date:{send:!0},currently_active:{send:!0},job_type_id:{send:!0},employment_type_id:{send:!0},salary:{send:!0},pay_period:{send:!0},description:{send:!0},address:{send:!0},location_name:{send:!0},employer_phone:{send:!0},employer_email_address:{send:!0},offer_accepted:{send:!0},offer_date:{send:!0},acceptance_date:{send:!0},nice_end_date:{},nice_start_date:{},job_type_name:{},nice_job_type:{},survey_response_id:{},experience_template_id:{},experience_template_name:{},student_evaluation_count:{},approver_evaluation_count:{}}),this.tagClass=ko.computed((s=this,function(){return"approved"===s.status()?"tag--success":"ongoing"===s.status()||"completed"===s.status()?"tag--info":"pending"===s.status()||"being_approved"===s.status()?"tag--warning":"declined"===s.status()||"needs_review"===s.status()?"tag--danger":""})),this.nice_status=ko.computed((n=this,function(){return"being_approved"===n.status()?"being approved":"needs_review"===n.status()?"needs review":n.status()}))}return t(i,s),i.type="Experience",i.underscore="experience",i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.begin=function(e){return this.ajax_call({type:"POST",method:"begin",on_member:!0,action:"begin",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.complete=function(e){return this.ajax_call({type:"POST",method:"complete",on_member:!0,action:"complete",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.ShowExperienceView=function(s){function i(t,s){var n,o,r,a,c,l;this.props=t,this.element=s,this.send_evaluation_requests=e(this.send_evaluation_requests,this),this.populateSupervisor=e(this.populateSupervisor,this),this.createContact=e(this.createContact,this),i.__super__.constructor.call(this),this.experience=ko.observable(new Handshake.Experiences.Experience(this.props.experience)),n=0,this.pageOptions.push(new Handshake.TabbedPage.Page(n,"Details","Student, supervisor, employer and job details.")),this.detailsIndex=n,n+=1,this.pageOptions.push(new Handshake.TabbedPage.Page(n,"Comments and Activity","View activity and public comments.")),this.commentsIndex=n,n+=1,this.pageOptions.push(new Handshake.TabbedPage.Page(n,"Learning Objectives","The objectives the student should be accomplishing during this experience.")),this.learningObjectivesIndex=n,n+=1,this.props.approvals_enabled?(this.pageOptions.push(new Handshake.TabbedPage.Page(n,"Approvals","Manage the approval process for this experience.")),this.approvalsIndex=n):this.approvalsIndex=void 0,n+=1,this.props.notes_enabled&&(this.pageOptions.push(new Handshake.TabbedPage.Page(n,"Notes","Take and view notes with coworkers.")),this.notesPage=new Handshake.Notes.NotesView(this.experience(),!1),this.notesIndex=n,n+=1),this.onDetailsPage=ko.computed((o=this,function(){return o.currentPage()===o.detailsIndex})),this.onCommentsPage=ko.computed((r=this,function(){return r.currentPage()===r.commentsIndex})),this.onLearningObjectivesPage=ko.computed((a=this,function(){return a.currentPage()===a.learningObjectivesIndex})),this.onApprovalsPage=ko.computed((c=this,function(){return c.currentPage()===c.approvalsIndex})),this.onNotesPage=ko.computed((l=this,function(){return l.currentPage()===l.notesIndex})),this.request_evaluations_modal=new Handshake.Experiences.RequestEvaluationsModal,this.existing_contact_for_supervisor=ko.observable(new Handshake.Contacts.Contact(this.props.contact_for_supervisor)),this.contactModal=new Handshake.Contacts.CreateContactModal(this.createContact,this.experience().employer_id),this.commentsView=new Handshake.Comments.CommentsView(this.experience),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.experience,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels)),hide_when_empty:"Students"===Handshake.passed.current_user_type})),this.props.approvals_enabled&&(this.approvalsView=new Handshake.InternshipApprovals.InternshipApprovalsView(this,this.props.internship_approvals)),this.learningObjectivesView=new Handshake.LearningObjectives.ListView(this.props.experience),this.reselectPage()}return t(i,s),i.prototype.createContact=function(e){if(this.experience().supervisor_email()===e.contact.email_address)return this.existing_contact_for_supervisor(new Handshake.Contacts.Contact(e.contact))},i.prototype.populateSupervisor=function(){return this.experience().supervisor_name()&&(this.contactModal.new_contact().first_name(this.experience().supervisor_name().split(" ")[0]),this.contactModal.new_contact().last_name(this.experience().supervisor_name().split(" ")[1])),this.contactModal.new_contact().email_address(this.experience().supervisor_email()),this.contactModal.new_contact().phone(this.experience().supervisor_phone()),this.contactModal.new_contact().title(this.experience().supervisor_title())},i.prototype.send_evaluation_requests=function(){var e,t;return(e={ids:[this.experience().id()]}).bulk_action="request_experience_evaluations",e.confirmed=!0,e.extra_data=this.request_evaluations_modal.extra_data(),Handshake.operations.add_worker(),$.ajax({url:"/bulk_actions/perform",type:"POST",data:JSON.stringify(e),contentType:"application/json",dataType:"json",success:function(e){return e.success?Handshake.Helpers.notifySuccess("Requests successfully sent."):Handshake.Helpers.notifyError(e.error)},error:function(e){if(422===e.status)return Handshake.Helpers.notifyError("You do not have permission to perform this bulk action.")},complete:(t=this,function(){return Handshake.operations.remove_worker(),t.request_evaluations_modal.hide_modal()})})},i}(Handshake.TabbedPage.View),Handshake.Experiences.RequestEvaluationsModal=function(){function t(){this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.extra_data=e(this.extra_data,this),this.modal_element=$("#request-evaluations-modal"),this.send_to_approvers=ko.observable(!1),this.send_to_students=ko.observable(!1),this.send_to_self=ko.observable(!1),this.message=ko.observable(""),this.employer_survey_id=ko.observable(null),this.student_survey_id=ko.observable(null),this.survey_select2_options={placeholder:"Choose Survey",url:"/surveys",allowClear:!0}}return t.prototype.extra_data=function(){return{send_to_approvers:this.send_to_approvers(),send_to_students:this.send_to_students(),send_to_self:this.send_to_self(),message:this.message(),employer_survey_id:this.employer_survey_id(),student_survey_id:this.student_survey_id()}},t.prototype.show_modal=function(){return this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}(),Handshake.ExperiencesView=function(){function t(t){var s,i;this.props=t,this.request_evaluations_success=e(this.request_evaluations_success,this),this.cancel_request_evaluation=e(this.cancel_request_evaluation,this),this.confirm_mass_email_contacts_requester=e(this.confirm_mass_email_contacts_requester,this),this.select_request_evaluations=e(this.select_request_evaluations,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.send_evaluation_requests=e(this.send_evaluation_requests,this),this.searchCallback=e(this.searchCallback,this),this.experiences=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"experiences",this.searchCallback),this.searchable.bulkActions([{label:"Add Label",type:"simple",key_action:!0,bulk_action:"add_label",labellable_type:"Experience",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",key_action:!1,bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Request Evaluations",type:"simple",key_action:!0,bulk_action:"request_experience_evaluations",select_action:this.select_request_evaluations,confirm_action:this.confirm_mass_email_contacts_requester,cancel_action:this.cancel_request_evaluation,success:this.request_evaluations_success},{label:"Download CSV With Approvers",type:"simple",key_action:!1,bulk_action:"download_experiences_with_approvers",select_action:(i=this,function(){return i.searchable.ajax_download_results(null,null,{include_approvers:!0}),!1}),confirm_action:function(){return{}},cancel_action:function(){return{}},success:function(){return{}}},{label:"Download CSV With Evaluations",type:"simple",key_action:!1,bulk_action:"download_experiences_with_evaluations",select_action:(s=this,function(){return s.searchable.ajax_download_results(null,null,{include_evaluations:!0}),!1}),confirm_action:function(){return{}},cancel_action:function(){return{}},success:function(){return{}}},{label:"Send Email to Approvers",type:"simple",key_action:!1,bulk_action:"mass_email_experience_approvers",success:function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path}},{label:"Send Email to Students",type:"simple",key_action:!1,bulk_action:"mass_email_experience_students",success:function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path}}]),this.searchable.initialSetup("UniversityExperience"),this.request_evaluations_modal=new Handshake.Experiences.RequestEvaluationsModal}return t.prototype.searchCallback=function(e){return this.experiences(Handshake.Resource.resourcesFromArray(e.results))},t.prototype.send_evaluation_requests=function(){return this.request_evaluations_modal.hide_modal(),this.searchable.performBulkAction(this.request_evaluations_modal.extra_data())},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.select_request_evaluations=function(){return this.request_evaluations_modal.show_modal(),!1},t.prototype.confirm_mass_email_contacts_requester=function(){return this.send_evaluation_requests(),!1},t.prototype.cancel_request_evaluation=function(){return this.request_evaluations_modal.show_modal()},t.prototype.request_evaluations_success=function(){return Handshake.Helpers.notifySuccess("Requests successfully sent.")},t}(),Handshake.ExperienceFormView=function(){function t(t,s){var i,n,o,r,a,c,l,u;this.props=t,this.element=s,this.generateNewToken=e(this.generateNewToken,this),this.setEmployerLocation=e(this.setEmployerLocation,this),this.jobDataFunction=e(this.jobDataFunction,this),this.experience=new Handshake.Experiences.Experience(this.props.experience),this.is_custom_employer=ko.observable(!this.props.experience.employer_id&&this.props.experience.employer_name),this.is_custom_job=ko.observable(!this.props.experience.job_id&&this.props.experience.job_title),this.is_custom_employer.subscribe((n=this,function(){if(n.is_custom_employer())return n.experience.employer_id(null)})),this.is_custom_job.subscribe((o=this,function(){return o.is_custom_job()?o.experience.job_id(null):o.experience.job_title(null)})),this.similar_experiences=ko.observableArray([]),i={object_type:"experience"},this.props.location&&(i.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(i),this.employer_evaluation_url=ko.computed((r=this,function(){return r.experience.entity_url+"/evaluations/public?token="+r.experience.token()})),this.survey_present=this.props.experience_survey_id,this.survey_present&&(this.takeSurveyView=new Handshake.TakeSurveyView({redirectOnSubmit:!1,redirectToIndex:!1,use_finish_button:!1,survey_id:this.props.experience_survey_id,resource_type:"experience",selector:".survey-view"}),this.props.survey_response&&this.takeSurveyView.survey_response(Handshake.Resource.resourceFromObject(this.props.survey_response)),this.survey_response_json=ko.computed((a=this,function(){return $.extend(a.takeSurveyView.survey_response().getJSON(!1),{id:a.takeSurveyView.survey_response().id()})}))),this.employer_select2_options={placeholder:"Select an employer",allowClear:!0,url:"/employers",full_data:(c=this,function(e){return e?(c.experience.employer_id(e.id),c.experience.employer_name(e.name),c.experience.job_id(null),c.experience.job_title(null),e.location&&e.location_name?c.setEmployerLocation({name:e.location_name}):void 0):{id:c.experience.employer_id(),name:c.experience.employer_name()}})},this.student_select2_options={placeholder:"Select a student",initial_value:this.props.student,url:"/students",value:this.experience.student,secondary_property:"institution_managed_email"},this.term_select2_options={placeholder:"Select a term",results_property:"results",url:"/schools/"+this.experience.school_id()+"/terms",full_data:(l=this,function(e){return e?(l.experience.term_id(e.id),l.experience.term_name(e.name)):{id:l.experience.term_id(),name:l.experience.term_name()}})},this.job_select2_options={placeholder:"Select a job",url:"/postings",allowClear:!0,full_data:(u=this,function(e){return e?(u.experience.job_title(e.job_name),u.experience.job_id(e.job_id),u.experience.employer_name(e.employer_name),u.is_custom_employer(!1),u.experience.employer_id(e.employer_id),e.employer_location_name?u.setEmployerLocation({name:e.employer_location_name}):void 0):{id:u.experience.job_id(),job_name:u.experience.job_title()}}),primary_property:"job_name",secondary_property:function(e){return e.employer_location_name?e.employer_name+" - "+e.employer_location_name:e.employer_name},dataFunction:this.jobDataFunction}}return t.prototype.jobDataFunction=function(e){return{simple_search:!0,query:e,employer_id:this.experience.employer_id()}},t.prototype.setEmployerLocation=function(e){return e.name?this.addLocationView.location(new Handshake.Locations.Location(e)):"undefined"!=typeof bugsnagClient&&null!==bugsnagClient?bugsnagClient.notify({errorClass:"MissingParameter",errorMessage:"Called setEmployerLocation without a name parameter",groupingHash:"called setEmployerLocation without a name parameter",metaData:{locationParams:e}}):void 0},t.prototype.generateNewToken=function(){return this.experience.ajax_call({type:"POST",on_member:!0,action:"regenerate_token",method:"regenerate_token",success:(e=this,function(t){return e.experience.token(t.token)})});var e},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.ExternalFeeds={},Handshake.ExternalFeeds.ExternalFeed=function(s){function i(t){this.regenerateToken=e(this.regenerateToken,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},token:{},category:{send:!0},status:{send:!0},version:{send:!0},saved_search:{send:!0,nested_attribute:!0,belongs_to:Handshake.SavedSearches.SavedSearch}})}return t(i,s),i.type="ExternalFeed",i.underscore="external_feed",i.prototype.regenerateToken=function(){if(confirm("This will change the public link, removing access for everyone who currently has the link. Are you sure?"))return this.ajax_call({type:"POST",method:"regenerate_token",on_member:!0,action:"regenerate_token",success:(e=this,function(t){return e.update(t.external_feed),Handshake.Helpers.notifySuccess("Updated successfully")})});var e},i}(Handshake.Resource),Handshake.ExternalFeedView=function(s){function i(t){var s,n,o,r,a;this.props=t,this.postSelectPage=e(this.postSelectPage,this),this.selectFinalizePage=e(this.selectFinalizePage,this),this.selectFilterPage=e(this.selectFilterPage,this),this.selectSetupPage=e(this.selectSetupPage,this),this.getSavedSearch=e(this.getSavedSearch,this),this.searchCallback=e(this.searchCallback,this),this.saveChanges=e(this.saveChanges,this),this.unmount=e(this.unmount,this),this.external_feed=ko.observable(new Handshake.ExternalFeeds.ExternalFeed(this.props.external_feed)),i.__super__.constructor.call(this,this.external_feed),(s=this.props.saved_search)&&(s=new Handshake.SavedSearches.SavedSearch(s)),this.filterJobs=new Handshake.Postings.FilterPostingsView($("#job-filter"),this.searchCallback,!1,s),this.filterEvents=new Handshake.Events.FilterEventsView($("#event-filter"),this.searchCallback,!1,s),this.filterCareerFairs=new Handshake.CareerFairs.FilterCareerFairsView($("#career-fairs-filter"),this.searchCallback,!1,s),this.relevantFilterView=ko.computed((n=this,function(){return"jobs"===n.external_feed().category()?n.filterJobs:"events"===n.external_feed().category()?n.filterEvents:"career_fairs"===n.external_feed().category()?n.filterCareerFairs:void 0})),this.finalizeText(null),this.onSetupPage=ko.computed((o=this,function(){return 0===o.currentPage()})),this.onFilterPage=ko.computed((r=this,function(){return 1===r.currentPage()})),this.onFinalizePage=ko.computed((a=this,function(){return 2===a.currentPage()})),this.showDeleteButton(!0),this.pageOptions.push(new Handshake.PagedForm.Page({index:0,name:"Setup",description:"Fill out the name, choose a category, and manage other details."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:1,name:"Filter",description:"Set up your filters."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:2,name:"Finalize",description:"Publish and reset your access tokens."})),this.reselectPage()}return t(i,s),i.prototype.unmount=function(){return this.unmount_paged_form()},i.prototype.saveChanges=function(){return this.relevantFilterView()&&this.external_feed().saved_search(this.getSavedSearch()),this.external_feed().save(function(){return Handshake.Helpers.notifySuccess("Feed saved successfully.")})},i.prototype.searchCallback=function(){if(this.filterJobs.searchable.setupFinished&&this.filterEvents.searchable.setupFinished&&this.filterCareerFairs.searchable.setupFinished)return this.external_feed().markAsChanged("search")},i.prototype.getSavedSearch=function(){return this.relevantFilterView().searchable.getSavedSearch()},i.prototype.selectSetupPage=function(){return this.selectPage(this.pageOptions()[0])},i.prototype.selectFilterPage=function(){return this.selectPage(this.pageOptions()[1])},i.prototype.selectFinalizePage=function(){return this.selectPage(this.pageOptions()[2])},i.prototype.postSelectPage=function(){},i}(Handshake.PagedForm.View),Handshake.ManageExternalFeedsView=function(){function t(t){this.props=t,this.searchCallback=e(this.searchCallback,this),this.external_feeds=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"external_feeds",this.searchCallback),this.searchable.initialSetup("ManageExternalFeeds")}return t.prototype.searchCallback=function(e){return this.external_feeds(Handshake.Resource.resourcesFromArray(e,Handshake.ExternalFeeds.ExternalFeed))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.ExternalLinks={},Handshake.ExternalLinks.ExternalLink=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},name:{send:!0},description:{send:!0},student_id:{send:!0},student_name:{send:!0},student_path:{},external_url:{send:!0},better_url:{}}),this.form_id_prefix=this.id()||"new"}return t(i,s),i.type="ExternalLink",i.underscore="external_link",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.ExternalLinks.ExternalLinksView=function(s){function i(t){this.props=t,this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),this.initFormWidgets=e(this.initFormWidgets,this),i.__super__.constructor.call(this,this.props.external_links,this.props)}return t(i,s),i.prototype.initFormWidgets=function(){},i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.ExternalLinks.ExternalLink(e)},i.prototype.validateFields=function(){return!0},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.ExtraCurriculars={},Handshake.ExtraCurriculars.ExtraCurricular=function(s){function i(t){var s,n,o,r,a;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({user_id:{send:!0},start_date:{send:!0},end_date:{send:!0},currently_active:{send:!0},description:{send:!0},activity_name:{send:!0},position_name:{send:!0}}),this.start_date_formatted=ko.computed({read:(n=this,function(){return Handshake.Helpers.toMonthPicker(n.start_date())}),write:(s=this,function(e){return s.start_date(Handshake.Helpers.fromMonthPicker(e))})}),this.end_date_formatted=ko.computed({read:(r=this,function(){return Handshake.Helpers.toMonthPicker(r.end_date())}),write:(o=this,function(e){return o.end_date(Handshake.Helpers.fromMonthPicker(e))})}),this.start_to_end_date_fancy=ko.computed((a=this,function(){return Handshake.Helpers.startToEndMonthsFancy(a.start_date(),a.end_date())}))}return t(i,s),i.type="ExtraCurricular",i.underscore="extra_curricular",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.ExtraCurriculars.ExtraCurricularsView=function(s){function i(t){this.props=t,this.validateFields=e(this.validateFields,this),
this.buildNewItem=e(this.buildNewItem,this),this.extra_curricular_activities_typeahead_options={path:"/extra_curricular_activities",params:{simple_search:!0}},this.extra_curricular_positions_typeahead_options={path:"/extra_curricular_positions",params:{simple_search:!0}},i.__super__.constructor.call(this,this.props.extra_curriculars,this.props)}return t(i,s),i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.ExtraCurriculars.ExtraCurricular(e)},i.prototype.validateFields=function(){return!0},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Favorites={},Handshake.Favorites.Favorite=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},user_id:{},favoritable_id:{send:!0},favoritable_type:{},favoritable_path:{},status:{},created_at:{},updated_at:{}})}return t(i,s),i.type="Favorite",i.underscore="favorite",i.prototype.nested_route=function(){return""+this.favoritable_path()},i}(Handshake.Resource),Handshake.FollowButtonComponent=function(){function e(e){this.followUnfollowView=new Handshake.FollowUnfollowView(e.favoritable,e.favorite,e.use_favorite_text)}return e}(),Handshake.FollowButtonView=function(){function e(e){this.props=e,this.followUnfollowView=new Handshake.FollowUnfollowView(ko.observable(Handshake.Resource.resourceFromObject(this.props.favoritable)),this.props.favorite?ko.observable(Handshake.Resource.resourceFromObject(this.props.favorite)):ko.observable(),this.props.use_favorite_text)}return e}(),Handshake.FollowUnfollowView=function(){function t(t,s,i){var n;this.favoritable=null!=t?t:null,this.favorite=null!=s?s:null,this.use_favorite_text=null!=i&&i,this.follow_item=e(this.follow_item,this),this.unfollow_item=e(this.unfollow_item,this),this.mouseout=e(this.mouseout,this),this.mouseover=e(this.mouseover,this),this.text={follow:this.use_favorite_text?UNSAFE__i18n.t("favorite"):"Follow",following:this.use_favorite_text?UNSAFE__i18n.t("favorited"):"Following",unfollow:this.use_favorite_text?UNSAFE__i18n.t("unfavorite"):"Unfollow"},this.moused_over=ko.observable(!1),this.unfollow_text=ko.observable(this.text.following),this.follow_text=ko.computed((n=this,function(){return n.text.follow+" "+n.favoritable().underscore.replace("_"," ")}))}return t.prototype.mouseover=function(){return this.moused_over(!0),this.unfollow_text(this.text.unfollow)},t.prototype.mouseout=function(){return this.moused_over(!1),this.unfollow_text(this.text.following)},t.prototype.unfollow_item=function(){return this.favorite().destroy((e=this,function(){return e.favorite(null)}));var e},t.prototype.follow_item=function(){var e,t;return(e=new Handshake.Favorites.Favorite({favoritable_path:this.favoritable().entity_path})).update({favoritable_id:this.favoritable().id(),favoritable_type:this.favoritable().type}),e.create((t=this,function(){return t.favorite(e)}))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.FileUploader=function(){function t(t){var s,i;this.upload_to_s3=e(this.upload_to_s3,this),this.upload=e(this.upload,this),this.file_input=null!=(s=t.file_input)?s:$('<div style="display: none" />').appendTo("body"),this.record=t.record,this.record instanceof Handshake.Resource?(this.record_type=this.record.type,this.record_id=this.record.id(),this.record_is_resource=!0):(this.record_type=this.record.type,this.record_id=this.record.id),this.attachment_name=t.attachment_name,this.success_callback=t.success||function(){},this.error_callback=t.error||function(){},this.progress_callback=t.progress||function(){},this.before_upload_callback=t.before_upload||function(){},t.upload_on_select&&($(this.file_input).off("change"),$(this.file_input).on("change",(i=this,function(){return i.upload()})))}return t.prototype.upload=function(e){var t,s,i,n;if(this.before_upload_callback(),null==e){if((t=$(this.file_input)[0].files).length<1)return void this.error_callback(["No file selected"]);if(t.length>1)return void this.error_callback(["Multiple files selected; only single files are supported"]);e=t[0]}return _.isString(e)&&(s=e.split(";")[0].split(":")[1],(e=new Blob([e],{type:s})).name="data"),$.ajax({type:"GET",url:"/file_uploads/s3_policy",data:{record_type:this.record_type,record_id:this.record_id,attachment_name:this.attachment_name,file:_(e).pick("name","size","type")},success:(n=this,function(t){return t.success?n.upload_to_s3(e,t.url,t.form_data):n.error_callback(t.errors||["Error uploading file"])}),error:(i=this,function(e,t,s){var n;return n=s||"Error uploading file",i.error_callback([n])})})},t.prototype.upload_to_s3=function(e,t,s){var i,n,o;return $(this.file_input).fileupload({url:t,type:"POST",autoUpload:!1,replaceFileInput:!1,formData:s,paramName:"file",dataType:"XML",done:(o=this,function(t,s){var i;return i=$(s.jqXHR.responseXML).find("Key").text(),o.success_callback(i,e)}),fail:(n=this,function(e,t){var s;return s=t.errorThrown||"Error uploading file",n.error_callback([s])}),progressall:(i=this,function(e,t){return i.progress_callback(t.loaded/t.total*100)})}).fileupload("send",{files:[e]})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationRecipients={},Handshake.FirstDestinationRecipientShowView=function(){function e(e){this.props=e}return e}(),Handshake.FirstDestinationRecipients.FirstDestinationRecipient=function(s){function i(t){var s,n,o;this.unarchive=e(this.unarchive,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{},email_address:{},delivered_at:{},latest_first_destination_response_status:{},latest_first_destination_response_type_name:{},internal_status:{},all_major_names:{array:!0},user:{belongs_to:Handshake.Users.User}}),this.pretty_latest_first_destination_response_status=ko.computed((n=this,function(){if(n.latest_first_destination_response_status())return n.latest_first_destination_response_status().replace(/_/g," ")})),this.user_name_or_email_address=ko.computed((o=this,function(){return o.user().isPersisted()?o.user().name():o.email_address()})),this.profile_path=null!=(s=this.user())?s.entity_path:void 0}return t(i,s),i.type="FirstDestinationRecipient",i.underscore="first_destination_recipient",i.prototype.unarchive=function(e,t,s){return this.ajax_call({type:"POST",method:"unarchive",action:"unarchive",on_member:!0,data:s,success:e,failure:t})},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationResponses={},Handshake.FirstDestinationResponses.FirstDestinationResponse=function(s){function i(t){var s,n,o,r,a;this.has_accepted_offer=e(this.has_accepted_offer,this),this.relevant_employment_categories=e(this.relevant_employment_categories,this),this.save=e(this.save,this),i.__super__.constructor.call(this,t),this.one_call_at_a_time(!1),this.attributes({first_destination_recipient_id:{send:!0},status:{send:!0},first_destination_response_type_name:{},first_destination_response_type_id:{send:!0,error_prefix:"Response type",validations:{presence:!0}},employment_type_id:{send:!0,error_prefix:"Employment type",validations:{presence:!0}},employment_type_name:{},employment_category_id:{send:!0,error_prefix:"Employment category",validations:{presence:!0}},other_employment_category_name:{send:!0,validations:{presence:{validate_if:(s=this,function(){return s.employment_category_name()&&"Other"===s.employment_category_name()})}}},employment_category_name:{},compensation_bonus:{send:!0,validations:{numericality:{only_integer:!0}}},compensation_other:{send:!0,validations:{numericality:{only_integer:!0}}},compensation_salary:{send:!0,validations:{numericality:{only_integer:!0}}},compensation_currency:{send:!0},pay_schedule_id:{send:!0,error_prefix:"Pay schedule"},pay_schedule_name:{},found_through_handshake:{send:!0,validations:{presence:!0}},fellowship_name:{send:!0,validations:{presence:!0}},location:{belongs_to:Handshake.Locations.Location,nested_attribute:!0,send:!0},job_position_name:{send:!0,validations:{presence:!0}},job_function_id:{send:!0,error_prefix:"Job function",validations:{presence:!0}},job_function_name:{},employer_id:{send:!0,error_prefix:"Employer",validations:{presence:!0}},employer_name:{send:!0,validations:{presence:!0}},offer_date:{send:!0,validations:{date:!0,presence:!0}},continuing_education_school_name:{send:!0,validations:{presence:!0}},organization_id:{send:!0,error_prefix:UNSAFE__i18n.t("organization"),validations:{presence:!0}},organization_name:{send:!0,error_prefix:UNSAFE__i18n.t("organization"),validations:{presence:!0}},accept_date:{send:!0,validations:{date:{on_or_before:moment().endOf("day")},presence:!0}},start_date:{send:!0,validations:{date:!0,presence:!0}},question_history:{array:!0,send:!0},application_id:{send:!0,error_prefix:"Application",validations:{presence:!0}},majors:{array:!0},major_ids:{send:!0,array:!0,convert_empty_to_blank:!0},primary_major:{},primary_major_id:{send:!0,error_prefix:UNSAFE__i18n.t("major"),validations:{presence:!0}},primary_major_category:{send:!0},primary_college_id:{send:!0},continuing_education_major_name:{send:!0,error_prefix:UNSAFE__i18n.t("major"),validations:{presence:!0}},continuing_education_education_level_id:{send:!0,error_prefix:"Education level",validations:{presence:!0}},continuing_education_education_level_name:{},military_branch_id:{send:!0,error_prefix:"Military branch",validations:{presence:!0}},military_branch_name:{},military_rank_id:{send:!0,error_prefix:"Military rank",validations:{presence:!0}},military_rank_name:{},not_seeking_option_id:{send:!0,error_prefix:"Not seeking option",validations:{presence:!0}},not_seeking_option_name:{send:!0},education_level_id:{send:!0,error_prefix:"Education level",validations:{presence:!0}},education_level_name:{},graduation_date:{send:!0,validations:{date:!0,presence:!0,format:{"with":/^\d{4}\-\d{1,2}\-\d{1,2}/}}},email_address:{send:!0,validations:{presence:!0,format:"email"}},first_destination_recipient_user_id:{},survey_id:{},survey_response_id:{send:!0},seeking_option_id:{send:!0,error_prefix:"Seeking option",validations:{presence:!0}},seeking_option_name:{},employer_industry_id:{send:!0,error_prefix:"Employer industry",validations:{presence:!0}},employer_industry_name:{},employed_during_education:{send:!0,validations:{presence:!0}},specialization:{send:!0},knowledge_source:{send:!0},knowledge_response:{send:!0},is_fellowship:{send:!0},authorized_to_work_in_us:{send:!0,validations:{presence:!0}},starting_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage},survey_response:{belongs_to:Handshake.SurveyResponses.SurveyResponse,nested_attribute:!0,send:!0},first_destination_survey_id:{},is_internship:{send:!0,validations:{presence:!0}},status_at_graduation:{send:!0},first_destination_response_job_offers:{belongs_to:Handshake.FirstDestinationResponses.FirstDestinationResponseJobOffer,send:!0,nested_attribute:!0,array:!0},graduate_concentration:{send:!0},graduate_specialty_major:{},graduate_specialty_major_id:{send:!0},graduate_specialty_major_name:{send:!0},graduate_program_months:{send:!0},graduate_program_type:{send:!0},graduate_authorized_to_work_in_united_states:{send:!0},years_of_professional_experience:{send:!0},latest_response_confirmed:{send:!0},changed_company:{send:!0},changed_level:{send:!0},changed_function:{send:!0},changed_industry:{send:!0},changed_geography:{send:!0},facilitation_type:{send:!0},save_work_experience_to_profile:{send:!0}}),this.location_invalid=ko.computed((n=this,function(){var e,t;return null!=(e=n.location())&&null!=(t=e.city.errors())?t.length:void 0})),this.is_custom_continuing_education_school=ko.observable(!1),this.using_first_destination_resources_controller=ko.observable(!1),this.using_first_destination_resources_controller.subscribe((o=this,function(e){return e?(o.custom_create_url="/first_destination_surveys/"+o.first_destination_survey_id()+"/first_destination_resources/create_first_destination_response",o.custom_save_url="/first_destination_surveys/"+o.first_destination_survey_id()+"/first_destination_resources/update_first_destination_response"):(o.custom_save_url=null,o.custom_create_url=null)})),this.currency_display=ko.computed((r=this,function(){return"USD"===r.compensation_currency()?"$":r.compensation_currency()||"$"})),this.work_experience_id=null,this.starting_survey_page_or_null=ko.computed((a=this,function(){var e;if(null!=(e=a.starting_survey_page())?e.isPersisted():void 0)return a.starting_survey_page()}))}return t(i,s),i.type="FirstDestinationResponse",i.underscore="first_destination_response",i.prototype.save=function(e,t,s,n){var o,r,a,c,l;return null==n&&(n={}),r=this.question_history(),"Career Services"===Handshake.passed.current_user_type&&this.question_history(this.cache.latestData.question_history),c=this,a=function(t){if("Career Services"===Handshake.passed.current_user_type&&c.question_history(r),t.work_experience&&t.work_experience.id&&(c.work_experience_id=t.work_experience.id),e)return e(t)},l=this,o=function(e){if("Career Services"===Handshake.passed.current_user_type&&l.question_history(r),t)return t(e)},this.using_first_destination_resources_controller()?i.__super__.save.call(this,a,o,s,_(n).extend({first_destination_response_id:this.id()})):i.__super__.save.call(this,a,o,s,n)},i.prototype.relevant_employment_categories=function(){var e,t,s,i;return t=$.Deferred(),s=$.getJSON("/employment_categories"),e=["Masters","Doctorate","Postdoctoral Studies"],new Handshake.Users.User({id:this.first_destination_recipient_user_id()}).ajax_call({type:"GET",method:"educations",on_member:"true",action:"educations",success:(i=this,function(n){return s.then(function(s){var o,r;return o=_(n.educations).pluck("education_level_name"),r=_.intersection(e,o).length,t.resolve(_(s.employment_categories).filter(function(e){switch(!1){case"Faculty Tenure"!==e.name:return r&&"Full-Time"===i.employment_type_name();case"Faculty Non-Tenure"!==e.name:return r;case"Fellowship"!==e.name:return"Students"!==Handshake.passed.current_user_type;default:return!0}}))})})}),t},i.prototype.statistics=function(e,t){var s,i;return null==t&&(t={}),s=$.Deferred(),i=this.using_first_destination_resources_controller()?"/first_destination_surveys/"+this.first_destination_survey_id()+"/first_destination_resources":null,this.ajax_call({type:"GET",method:"response_statistics",on_member:!0,url:i,action:"response_statistics",data:_(t).extend({first_destination_response_id:this.id(),stats:e}),no_error_tracking:!0,success:function(e){return s.resolve(e)}}),s},i.prototype.has_accepted_offer=function(e){return _.reduce(this.first_destination_response_job_offers(),function(t,s){return"accepted"===s.status()&&s!==e?t+1:t},0)>0},i}(Handshake.Resource),Handshake.FirstDestinationResponses.FirstDestinationResponseJobOffer=function(e){function s(e){var t,i,n;s.__super__.constructor.call(this,e),this.attributes({status:{send:!0},job_position_name:{send:!0,validations:{presence:!0}},employed_during_education:{send:!0,validations:{presence:!0}},is_internship:{send:!0,validations:{presence:!0}},accept_date:{send:!0,validations:{date:{on_or_before:moment().endOf("day")}}},offer_date:{send:!0,validations:{date:{on_or_before:moment().endOf("day")},presence:!0}},start_date:{send:!0,validations:{date:!0}},end_date:{send:!0,validations:{date:!0}},compensation_bonus:{send:!0,validations:{presence:{validate_if:(t=this,function(){return t.status()&&"accepted"===t.status()&&t.employment_type_name()&&"Full-Time"===t.employment_type_name()})},numericality:{only_integer:!0}}},compensation_salary:{send:!0,validations:{numericality:{only_integer:!0}}},compensation_other:{send:!0,validations:{numericality:{only_integer:!0}}},compensation_currency:{send:!0},facilitation_type:{send:!0},first_destination_response_id:{send:!0},employer_id:{send:!0},employer_name:{send:!0,validations:{presence:!0}},industry_id:{send:!0,validations:{presence:!0}},industry_name:{},employment_type_id:{send:!0},employment_type_name:{},job_function_id:{send:!0,validations:{presence:!0}},job_function_name:{},pay_schedule_id:{send:!0},pay_schedule_name:{},location:{belongs_to:Handshake.Locations.Location,nested_attribute:!0,send:!0}}),this.location_invalid=ko.computed((i=this,function(){var e,t;return null!=(e=i.location())&&null!=(t=e.city.errors())?t.length:void 0})),this.currency_display=ko.computed((n=this,function(){return"USD"===n.compensation_currency()?"$":n.compensation_currency()||"$"}))}return t(s,e),s.type="FirstDestinationResponseJobOffer",s.underscore="first_destination_response_job_offer",s}(Handshake.Resource),Handshake.FirstDestinationResponseShowView=function(){function t(t){var s;this.props=t,this.build_job_offer_answer_view_model=e(this.build_job_offer_answer_view_model,this),this.build_answer_view_model=e(this.build_answer_view_model,this),this.first_destination_survey=Handshake.Resource.resourceFromObject(this.props.first_destination_survey),this.first_destination_response=Handshake.Resource.resourceFromObject(this.props.first_destination_response),s=["status","employer_name","industry_name","location","employment_type_name","job_position_name","employed_during_education","job_function_name","is_internship","compensation_salary","compensation_bonus","compensation_other","start_date","accept_date","offer_date","end_date","facilitation_type","compensation_currency"],this.vm={visible_fields:this.get_visible_fields(),build_answer_view_model:this.build_answer_view_model,build_job_offer_answer_view_model:this.build_job_offer_answer_view_model,first_destination_response:this.first_destination_response,job_offer_fields:s},this.props.work_experience&&(this.work_experience_start_date=moment(this.props.work_experience.start_date),this.work_experience_current_position=this.props.work_experience.current_position,this.vm.work_experience_copy=Handshake.Helpers.copyForWorkExperienceTenure(this.work_experience_start_date,this.work_experience_current_position),this.vm.work_experience_location=this.props.work_experience_location_display_name),this.props.create_work_experience&&$.ajax({url:"/first_destination_responses/"+this.first_destination_response.id()+"/create_work_experience",type:"POST",success:function(){return Handshake.Helpers.notifySuccess("Your work experience has been added to your profile"),window.location="/"}}),this.props.make_profile_public&&$.ajax({url:"/users/"+this.first_destination_response.first_destination_recipient_user_id()+"/preferences",type:"PUT",data:{user_preferences:{profile_visibility:"employers"}},success:function(){return Handshake.Helpers.notifySuccess("Your profile is now public and visible to employers"),window.location="/"}})}return t.prototype.closeMakeProfilePublic=function(){return $(".make-profile-public").addClass("hidden")},t.prototype.get_visible_fields=function(){var e,t;return e="undergraduate"===this.first_destination_survey.survey_type()?["first_destination_response_type_name"]:["status_at_graduation"],t=function(){if("undergraduate"===this.first_destination_survey.survey_type())switch(this.first_destination_response.first_destination_response_type_name()){case"Working":return null!==this.first_destination_response.authorized_to_work_in_us()?["is_fellowship","fellowship_name","employment_type_name","employment_category_name","found_through_handshake","employer_name","location","employer_industry_name","compensation_salary","compensation_bonus","compensation_other","job_position_name","job_function_name","authorized_to_work_in_us","employed_during_education","offer_date","accept_date","start_date","is_internship"]:["is_fellowship","fellowship_name","employment_type_name","employment_category_name","found_through_handshake","employer_name","location","employer_industry_name","compensation_salary","compensation_bonus","compensation_other","job_position_name","job_function_name","employed_during_education","offer_date","accept_date","start_date","is_internship"];case"Continuing Education":return["is_fellowship","fellowship_name","continuing_education_school_name","location","continuing_education_major_name","continuing_education_education_level_name"];case"Volunteering":return["employer_name","location","job_position_name","job_function_name","offer_date","accept_date","start_date"];case"Military":return["military_branch_name","military_rank_name","specialization","location","compensation_salary","offer_date","accept_date","start_date"];case"Still Looking":return["seeking_option_name"];case"Not Seeking":return["not_seeking_option_name"]}else switch(this.first_destination_response.status_at_graduation()){case"looking":return[];case"not_looking":switch(this.first_destination_response.first_destination_response_type_name()){case"Continuing Education":return["first_destination_response_type_name","is_fellowship","fellowship_name","continuing_education_school_name","location","continuing_education_major_name","continuing_education_education_level_name"];case"Volunteering":return["first_destination_response_type_name","employer_name","location","job_position_name","job_function_name","offer_date","accept_date","start_date"];case"Military":return["first_destination_response_type_name","military_branch_name","military_rank_name","specialization","location","compensation_salary","offer_date","accept_date","start_date"];case"Company Sponsored or Already Employed":case"Starting a New Business as an Owner/Founder":return["first_destination_response_type_name","employer_name","employer_industry_name","location"];case"Postponing Job Search":return["first_destination_response_type_name"];case"Not Seeking for Other Reasons":return["first_destination_response_type_name","not_seeking_option_name"]}break;case"received_offer":return[];case"starting_business":return["employer_name","employer_industry_name","location"];case"left_workforce":switch(this.first_destination_response.first_destination_response_type_name()){case"Continuing Education":return["first_destination_response_type_name","is_fellowship","fellowship_name","continuing_education_school_name","location","continuing_education_major_name","continuing_education_education_level_name"];case"Volunteering":return["first_destination_response_type_name","employer_name","location","job_position_name","job_function_name","offer_date","accept_date","start_date"];case"Military":return["first_destination_response_type_name","military_branch_name","military_rank_name","specialization","location","compensation_salary","offer_date","accept_date","start_date"];case"Postponing Job Search":case"Unemployed":return["first_destination_response_type_name"];case"Not Seeking for Other Reasons":return["first_destination_response_type_name","not_seeking_option_name"]}break;case"employed":return["employment_type_name","employment_category_name","employer_name","location","employer_industry_name","found_through_handshake","job_position_name","job_function_name","compensation_salary","compensation_bonus","compensation_other","offer_date","accept_date","start_date","facilitation_type","employed_during_education","changed_company","changed_level","changed_function","changed_industry","changed_geography"];case"unemployed":return[]}}.call(this),e.concat(t)},t.prototype.build_answer_view_model=function(e){return{name:"first-destination-response-answer",params:{key:e,response:this.first_destination_response,survey:this.first_destination_survey,compensation_graph_marker:this.props.compensation_graph_marker}}},t.prototype.build_job_offer_answer_view_model=function(e,t){return{name:"first-destination-response-answer",params:{key:t,response:e,survey:this.first_destination_survey,compensation_graph_marker:this.props.compensation_graph_marker}}},t}(),Handshake.FirstDestinationResponses.Answer=function(){function t(t){var s;this.props=t,this.changed_geography=e(this.changed_geography,this),this.changed_industry=e(this.changed_industry,this),this.changed_function=e(this.changed_function,this),this.changed_level=e(this.changed_level,this),this.changed_company=e(this.changed_company,this),this.facilitation_type=e(this.facilitation_type,this),this.is_internship=e(this.is_internship,this),this.employed_during_education=e(this.employed_during_education,this),this.industry_name=e(this.industry_name,this),this.status=e(this.status,this),this.seeking_option_name=e(this.seeking_option_name,this),this.not_seeking_option_name=e(this.not_seeking_option_name,this),this.specialization=e(this.specialization,this),this.military_rank_name=e(this.military_rank_name,this),this.military_branch_name=e(this.military_branch_name,this),this.continuing_education_education_level_name=e(this.continuing_education_education_level_name,this),this.continuing_education_major_name=e(this.continuing_education_major_name,this),this.continuing_education_school_name=e(this.continuing_education_school_name,this),this.fellowship_name=e(this.fellowship_name,this),this.is_fellowship=e(this.is_fellowship,this),this.end_date=e(this.end_date,this),this.start_date=e(this.start_date,this),this.accept_date=e(this.accept_date,this),this.offer_date=e(this.offer_date,this),this.job_function_name=e(this.job_function_name,this),this.compensation_other=e(this.compensation_other,this),this.compensation_bonus=e(this.compensation_bonus,this),this.compensation_salary=e(this.compensation_salary,this),this.authorized_to_work_in_us=e(this.authorized_to_work_in_us,this),this.is_internship=e(this.is_internship,this),this.employed_during_education=e(this.employed_during_education,this),this.employer_industry_name=e(this.employer_industry_name,this),this.job_position_name=e(this.job_position_name,this),this.location=e(this.location,this),this.employer_name=e(this.employer_name,this),this.found_through_handshake=e(this.found_through_handshake,this),this.employment_category_name=e(this.employment_category_name,this),this.employment_type_name=e(this.employment_type_name,this),this.first_destination_response_type_name=e(this.first_destination_response_type_name,this),this.status_at_graduation=e(this.status_at_graduation,this),s=ko.unwrap(this.props.response[this.props.key]),this.survey=this.props.survey,this.params_factory=new Handshake.FirstDestinationSurveyContent.ResponseGraphParamsFactory({response:this.props.response,first_destination_response_type_name:this.props.response.first_destination_response_type_name}),this.vm={skip:ko.observable(!1),graph:ko.observable(),question:ko.observable(""),answer:ko.observable("Loading...")},"function"==typeof this[this.props.key]&&this[this.props.key](s)}return t.prototype.status_at_graduation=function(e){return this.vm.question("What is your status at graduation?"),"looking"===e?this.vm.answer("I am looking for a job"):"received_offer"===e?this.vm.answer("I have received a job offer"):"not_looking"===e?this.vm.answer("I am NOT looking for a job"):"left_workforce"===e?this.vm.answer("Left the Workforce"):"starting_business"===e?this.vm.answer("Starting a New Business as an Owner/Founder"):"employed"===e?this.vm.answer("Employed"):this.vm.answer(e||"N/A")},t.prototype.first_destination_response_type_name=function(e){return"undergraduate"===this.survey.survey_type()&&this.vm.graph(this.params_factory.response_types()),this.vm.question("What are you primarily doing immediately after graduation?"),this.vm.answer(e||"N/A")},t.prototype.employment_type_name=function(e){if(this.vm.question("How many hours are you working?"),this.vm.answer(e||"N/A"),"undergraduate"===this.survey.survey_type())return $.getJSON("/employment_types",(t=this,function(e){var s;return s={employment_types:e.employment_types},t.vm.graph(t.params_factory.employment_types(s))}));var t},t.prototype.employment_category_name=function(e){if(this.vm.question("What best describes your employment?"),"Other"===e?this.vm.answer(e+" - "+this.props.response.other_employment_category_name()):this.vm.answer(e||"N/A"),"undergraduate"===this.survey.survey_type())return this.props.response.relevant_employment_categories().then((t=this,function(e){var s;return s={employment_categories:e},t.vm.graph(t.params_factory.employment_categories(s))}));var t},t.prototype.found_through_handshake=function(e){return this.vm.question("Did you find your job through Handshake?"),this.vm.answer(e?"Yes":"No")},t.prototype.employer_name=function(e){var t;return t={donut_graph_title:"working/going to work here",bar_graph_title:"Employers at your institution"},"FirstDestinationResponseJobOffer"!==this.props.response.type&&"undergraduate"===this.survey.survey_type()&&this.vm.graph(this.params_factory.employers(t)),this.vm.question("Who is your employer?"),this.vm.answer(e||"N/A")},t.prototype.location=function(e){var t,s;if(s="What city is this position located in?","FirstDestinationResponseJobOffer"!==this.props.response.type&&"undergraduate"===this.survey.survey_type()){switch(t={},this.props.response.first_destination_response_type_name()){case"Working":t.donut_graph_title="working/going to work here",t.bar_graph_title="work locations for students in your class";break;case"Military":t.donut_graph_title="serving here",t.bar_graph_title="locations for students in your class";break;case"Volunteering":t.donut_graph_title="volunteering here",t.bar_graph_title="locations for students in your class";break;case"Continuing Education":s="What city is this institution located in?",t.donut_graph_title="studying here",t.bar_graph_title="locations for students in your class"}this.vm.graph(this.params_factory.locations(t))}return this.vm.question(s),this.vm.answer(e.name()?e.name():"N/A")},t.prototype.job_position_name=function(e){return this.vm.question("What is your position?"),this.vm.answer(e||"N/A")},t.prototype.employer_industry_name=function(e){return this.vm.question("What industry is your employer in?"),this.vm.answer(e||"N/A")},t.prototype.employed_during_education=function(e){return this.vm.question("Were you already working in this position during "+UNSAFE__i18n.t("school")+"?"),this.vm.answer(e?"Yes":"No")},t.prototype.is_internship=function(e){return this.vm.question("Is this an internship?"),this.vm.answer(e?"Yes":"No")},t.prototype.authorized_to_work_in_us=function(e){return this.vm.question("Are you authorized to work permanently in the U.S.?"),this.vm.answer(e?"Yes":"No")},t.prototype.compensation_salary=function(e){return this.vm.question("How are you compensated?"),e?this.vm.answer("$"+Number(e).toFixed(2)+" paid as "+this.props.response.pay_schedule_name()):this.vm.answer("Did not answer"),function(){switch(this.props.response.pay_schedule_name()){case"Hourly Wage":return 40*e*52;case"Monthly Stipend":return 12*e;default:return e}}.call(this)},t.prototype.compensation_bonus=function(e){return this.vm.question("Are you guaranteed a first year bonus?"),this.vm.answer(+e?"$"+Number(e).toFixed(2):"No")},t.prototype.compensation_other=function(e){return this.vm.question("Do you have any other guaranteed compensation?"),this.vm.answer(+e?"$"+Number(e).toFixed(2):"No")},t.prototype.job_function_name=function(e){return this.vm.question("What were you hired to do?"),this.vm.answer(e||"N/A")},t.prototype.offer_date=function(e){return this.vm.question("When did you get this offer?"),this.vm.answer(e?moment(e).format("MMMM Do, YYYY"):"N/A")},t.prototype.accept_date=function(e){var t;return t={not_enough_data:ko.observable()},"FirstDestinationResponseJobOffer"!==this.props.response.type&&"undergraduate"===this.survey.survey_type()&&this.vm.graph(this.params_factory.accept_date(t)),this.vm.question("When did you accept this offer?"),this.vm.answer(e?moment(e).format("MMMM Do, YYYY"):"N/A")},t.prototype.start_date=function(e){return this.vm.question("When is/was your starting date?"),this.vm.answer(e?moment(e).format("MMMM Do, YYYY"):"N/A")},t.prototype.end_date=function(e){return this.vm.question("Does this position have an end date?"),this.vm.answer(e?moment(e).format("MMMM Do, YYYY"):"N/A")},t.prototype.is_fellowship=function(e){return this.vm.skip(!e),
this.vm.question("Is this a fellowship?"),this.vm.answer(e?"Yes":"No")},t.prototype.fellowship_name=function(e){return this.vm.skip(!e),this.vm.question("Which fellowship?"),this.vm.answer(e||"N/A")},t.prototype.continuing_education_school_name=function(e){var t;return t={donut_graph_title:"continuing their education here",bar_graph_title:"institutions for students in your class"},"undergraduate"===this.survey.survey_type()&&this.vm.graph(this.params_factory.schools(t)),this.vm.question("What's the name of the institution?"),this.vm.answer(e||"N/A")},t.prototype.continuing_education_major_name=function(e){var t;return t={donut_graph_title:"in the same major",bar_graph_title:"majors of study for students in your class"},"undergraduate"===this.survey.survey_type()&&this.vm.graph(this.params_factory.majors(t)),this.vm.question("What will you be studying?"),this.vm.answer(e||"N/A")},t.prototype.continuing_education_education_level_name=function(e){var t;return t={donut_graph_title:"pursuing the same degree",bar_graph_title:"degrees for students in your class"},"undergraduate"===this.survey.survey_type()&&this.vm.graph(this.params_factory.degrees(t)),this.vm.question("What's the degree you're pursuing?"),this.vm.answer(e||"N/A")},t.prototype.military_branch_name=function(e){var t;return t={military_branches:ko.observableArray()},"undergraduate"===this.survey.survey_type()&&($.getJSON("/military_branches",function(e){return t.military_branches(e.military_branches)}),this.vm.graph(this.params_factory.military_branches(t))),this.vm.question("Which service branch are you joining?"),this.vm.answer(e||"N/A")},t.prototype.military_rank_name=function(e){var t;return t={military_ranks:ko.observableArray()},"undergraduate"===this.survey.survey_type()&&($.getJSON("/military_ranks",function(e){return t.military_ranks(e.military_ranks)}),this.vm.graph(this.params_factory.military_ranks(t))),this.vm.question("What is your rank?"),this.vm.answer(e||"N/A")},t.prototype.specialization=function(e){return this.vm.question("What is your specialization?"),this.vm.answer(e||"None")},t.prototype.not_seeking_option_name=function(e){return this.vm.question("What are you doing while you are not actively seeking a job?"),this.vm.answer(e||"N/A")},t.prototype.seeking_option_name=function(e){return this.vm.question("Are you looking for continuing education or employment?"),this.vm.answer(e||"N/A")},t.prototype.status=function(e){var t;return this.vm.question("What is the status of your job offer?"),t={pending:"Pending",accepted:"Accepted",rejected:"Rejected"},this.vm.answer(t[e])},t.prototype.industry_name=function(e){return this.vm.question("What industry is your employer in?"),this.vm.answer(e||"N/A")},t.prototype.employed_during_education=function(e){return this.vm.question("Were you already working in this position during "+UNSAFE__i18n.t("school")+"?"),this.vm.answer(e?"Yes":"No")},t.prototype.is_internship=function(e){return this.vm.question("Is this an internship?"),this.vm.answer(e?"Yes":"No")},t.prototype.facilitation_type=function(e){var t;return this.vm.question("Do you believe "+UNSAFE__i18n.t("school")+"-facilitated or graduate-facilitated activities helped prepare you most for the accepted job offer?"),t={school_facilitated_conversion_of_internship:UNSAFE__i18n.t("school_capitalized")+" Facilitated - Conversion of Internship",school_facilitated_scheduled_interviews:UNSAFE__i18n.t("school_capitalized")+" Facilitated - Scheduled Interview",school_facilitated_school_career_center_job_posting:UNSAFE__i18n.t("school_capitalized")+" Facilitated - Career Center Job Posting",school_facilitated_career_center_activity:UNSAFE__i18n.t("school_capitalized")+" Facilitated - Career Center Activity",graduate_facilitated_conversion_of_internship:"Graduate Facilitated - Conversion of Internship",graduate_facilitated_personal_contact:"Graduate Facilitated - Personal Contact",graduate_facilitated_online_posting:"Graduate Facilitated - Online Posting",graduate_facilitated_other:"Graduate Facilitated - Other",school_facilitated_alumni_network:UNSAFE__i18n.t("school_capitalized")+" Related / Alumni Network",school_facilitated_recruiting:UNSAFE__i18n.t("school_capitalized")+" Posting / Recruiting Activity",graduate_facilitated_employer:"Current / Former Employer",graduate_facilitated_headhunter:"Executive Search Firm/Headhunter",graduate_facilitated_own_network:"Graduate\u2019s Own Network",graduate_facilitated_external_job_posting:"External Job Posting",school_facilitated_network:UNSAFE__i18n.t("school_capitalized")+" Network / Resources"},this.vm.answer(t[e]||"")},t.prototype.changed_company=function(e){return this.vm.question("Did you change companies since you started this program?"),this.vm.answer(e?"Yes":"No")},t.prototype.changed_level=function(e){return this.vm.question("Did you change levels since you started this program?"),this.vm.answer(e?"Yes":"No")},t.prototype.changed_function=function(e){return this.vm.question("Did you change functions since you started this program?"),this.vm.answer(e?"Yes":"No")},t.prototype.changed_industry=function(e){return this.vm.question("Did you change industries since you started this program?"),this.vm.answer(e?"Yes":"No")},t.prototype.changed_geography=function(e){return this.vm.question("Did you change geographies since you started this program?"),this.vm.answer(e?"Yes":"No")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.FirstDestinationSurveyContent={},Handshake.FirstDestinationSurveyContent.PostingResults=function(){function e(e){this.props=e,this.vm=this.props}return e}(),Handshake.FirstDestinationSurveyContent.DonutBarGraph=function(){function e(e){var t,s;this.props=e,t=ko.computed((s=this,function(){if(s.props.bar_graph_data().length&&_.isNumber(s.props.donut_graph_count())&&_.isNumber(s.props.donut_graph_total()))return s.props.donut_graph_label()})),this.vm={donut_graph_params:{id:"donut-"+this.props.id,count:this.props.donut_graph_count,total:this.props.donut_graph_total,label:this.props.donut_graph_label,title:this.props.donut_graph_title},bar_graph_params:{id:"bar-"+this.props.id,data:this.props.bar_graph_data,title:this.props.bar_graph_title},graphs_visible:t,not_enough_data:this.props.not_enough_data}}return e}(),Handshake.FirstDestinationSurveyContent.BarGraph=function(){function t(t){var s;this.props=t,this.resize_graph=e(this.resize_graph,this),this.generate=e(this.generate,this),this.select_bar=e(this.select_bar,this),this.draw_graph=e(this.draw_graph,this),this.dispose=e(this.dispose,this),this.graph_visible=ko.pureComputed((s=this,function(){var e;if(s.props.selected_bar())return null!=(e=s.props.data())?e.length:void 0})),this.graph_visible.extend({notify:"always"}),this.vm={graph_id:this.props.id,graph_visible:this.graph_visible,not_enough_data:this.props.not_enough_data,selected_bar:this.props.selected_bar,title:this.props.title},this.subscription=this.graph_visible.subscribe(this.draw_graph),setTimeout(this.draw_graph,0)}return t.prototype.dispose=function(){var e;return null!=(e=this.graph)&&e.destroy(),this.subscription.dispose()},t.prototype.draw_graph=function(){var e,t,s;if(this.graph_visible())return e=this.prepare_categories(this.props.data()),t=this.prepare_data(this.props.data()),s=this.generate_lines(this.props.data()),this.graph?(this.graph.load({columns:t}),this.graph.internal.loadConfig({axis:{y:{tick:{values:_(s).map(function(e){return e.value})}}},grid:{y:{lines:s}}})):(this.graph=this.generate(e,s,t),this.resize_graph()),this.props.selected_bar()?this.select_bar(this.props.selected_bar()):void 0},t.prototype.prepare_data=function(e){if(e)return[["data1"].concat(_(e).map(function(e){return e.value}))]},t.prototype.prepare_categories=function(e){if(e)return _(e).map(function(e){return e.name})},t.prototype.generate_lines=function(e){var t,s,i,n,o;if(e)return i=[{value:0}],o=3,n=_(e).max(function(e){return e.value}),s=n.value,t=s/o,_(o).times(function(){return i.push({value:s}),s-=t}),i},t.prototype.select_bar=function(e){var t,s,i,n;if(this.props.data().length)return s=_(this.props.data()).pluck("name"),n=_(s).indexOf(e),i=(t=d3.selectAll("#"+this.props.id+" .c3-bar")).filter(function(e,t){return t===n}),t.classed("selected",!1),i.classed("selected",!0)},t.prototype.generate=function(e,t,s){return c3.generate({bindto:document.getElementById(this.props.id),data:{columns:s,colors:{data1:"#0055cc"},classes:{data1:"bar-chart-bar"},type:"bar",labels:{format:{data1:d3.format("%")}}},axis:{x:{type:"category",categories:e,height:30,tick:this.x_tick_attributes()},y:{tick:{format:d3.format("%"),values:_(t).map(function(e){return e.value}),show:!1},padding:{top:20}}},grid:{lines:{front:!1},y:{lines:t}},interaction:{enabled:!1},tooltip:{show:!1},legend:{show:!1},padding:{left:50,right:30,top:50,bottom:15},bar:{radius:4},onresize:this.resize_graph})},t.prototype.x_tick_attributes=function(){switch(!1){case!Handshake.Helpers.on_xs_screen():return{multiline:!1,rotate:20,width:null};case!Handshake.Helpers.on_sm_screen():return{multiline:!0,rotate:0,width:90};default:return{multiline:!0,rotate:0,width:120}}},t.prototype.resize_graph=function(){return this.graph.resize({height:$("#"+this.props.id).parent().parent().parent().height(),width:$("#"+this.props.id).parent().parent().parent().width()}),this.graph.internal.loadConfig({axis:{x:{tick:this.x_tick_attributes()}}})},t}(),Handshake.FirstDestinationSurveyContent.RotatedBarGraph=function(){function t(t){var s,i;this.props=t,this.generate=e(this.generate,this),this.draw_graph=e(this.draw_graph,this),this.dispose=e(this.dispose,this),s=ko.computed((i=this,function(){return i.props.data().length})),this.vm={graph_id:this.props.id,graph_visible:s,bars_count:ko.observable(0),title:ko.unwrap(this.props.title)},this.subscription=this.props.data.subscribe(this.draw_graph),setTimeout(this.draw_graph,0)}return t.prototype.dispose=function(){var e;return null!=(e=this.graph)&&e.destroy(),this.subscription.dispose()},t.prototype.draw_graph=function(e){var t,s;if(null==e&&(e=this.props.data()),e.length)return t=this.prepare_categories(e),s=this.prepare_data(e),this.vm.bars_count(e.length),this.graph?this.graph.load({columns:s}):this.graph=this.generate(s,t)},t.prototype.prepare_data=function(e){if(e)return[["data1"].concat(_(e).map(function(e){return e.value}))]},t.prototype.prepare_categories=function(e){var t;if(e)return _(e).map((t=this,function(e){return t.truncate_title(e.name)}))},t.prototype.truncate_title=function(e){var t,s;return t=30,e.length<=t?e:(s=e.split("").splice(0,t)," "===_(s).last()&&s.pop(),s.join("")+"...")},t.prototype.generate=function(e,t){return c3.generate({bindto:document.getElementById(this.props.id),size:{height:120},data:{columns:e,colors:{data1:"#0055cc"},classes:{data1:"bar-chart-bar"},type:"bar",labels:!0},bar:{radius:4,width:25},axis:{rotated:!0,x:{type:"category",categories:t,tick:{outer:!1}},y:{show:!1}},interaction:{enabled:!1},tooltip:{show:!1},legend:{show:!1},padding:{top:0,right:10,left:130}})},t}(),Handshake.FirstDestinationSurveyContent.DonutGraph=function(){function t(t){var s,i,n;this.props=t,this.generate=e(this.generate,this),this.draw_graph=e(this.draw_graph,this),this.dispose=e(this.dispose,this),s=ko.pureComputed((i=this,function(){var e,t,s;if(e=ko.unwrap(i.props.count),s=ko.unwrap(i.props.total),t=ko.unwrap(i.props.label),_.isNumber(e)&&_.isNumber(s)&&t)return[[t,e],["other",s]]})),this.vm={graph_id:this.props.id,count:this.props.count,label:this.props.label,title:ko.unwrap(this.props.title)},this.subscription=s.subscribe(this.draw_graph),setTimeout((n=this,function(){return n.draw_graph(s())}),0)}return t.prototype.dispose=function(){var e;return null!=(e=this.graph)&&e.destroy(),this.subscription.dispose()},t.prototype.draw_graph=function(e){if(e)return this.graph?(this.graph.load({columns:e}),d3.select("#"+this.props.id+" .c3-chart-arcs-title").text(this.props.count())):this.graph=this.generate(e)},t.prototype.generate=function(e){return c3.generate({bindto:document.getElementById(this.props.id),size:{height:120},data:{columns:e,color:(s=this,function(e,t){return t===s.props.label()?"#0055cc":"transparent"}),type:"donut"},donut:{expand:!1,title:this.props.count(),label:{show:!1},width:9},interaction:{enabled:!1},legend:{show:!1},tooltip:{show:!1},oninit:(t=this,function(){var e;return e=d3.svg.arc().innerRadius(50).outerRadius(52).startAngle(0).endAngle(7),d3.select("#"+t.props.id+" .c3-chart-arcs").append("path").attr("d",e).style("fill","#0055cc").style("stroke","none")})});var t,s},t}(),Handshake.FirstDestinationSurveyContent.CompensationGraph=function(){function t(t){var s,i;this.props=t,this.draw_graph=e(this.draw_graph,this),this.selected_point_from_percentile=e(this.selected_point_from_percentile,this),this.remove_compensation_marker=e(this.remove_compensation_marker,this),this.set_compensation_marker=e(this.set_compensation_marker,this),this.set_percentile=e(this.set_percentile,this),this.dispose=e(this.dispose,this),this.graph_visible=ko.computed((i=this,function(){return!i.props.not_enough_data()&&_.isNumber(i.props.percentile())})),this.vm={graph_visible:this.graph_visible,not_enough_data:this.props.not_enough_data,title:this.props.title,icon:this.props.icon},this.subscription=this.props.percentile.subscribe(this.set_percentile),s=(new Handshake.FirstDestinationSurveyContent.BellCurveDataFactory).data,this.graph=this.draw_graph(s),this.set_percentile(this.props.percentile())}return t.prototype.dispose=function(){var e;return this.remove_compensation_marker(),null!=(e=this.graph)&&e.destroy(),this.subscription.dispose()},t.prototype.set_percentile=function(e){var t;return this.graph.internal.config.data_selection_enabled=!0,_.isNumber(e)?(t=this.selected_point_from_percentile(e),this.graph.select(["curve"],[t],!0)):this.graph.unselect(["curve"],_(this.graph.selected()).pluck("x")),this.graph.internal.config.data_selection_enabled=!1},t.prototype.set_compensation_marker=function(e,t){var s,i,n,o,r;return this.remove_compensation_marker(),Handshake.Helpers.on_sm_screen()?(n=20,o=16.5):(n=30,o=25),s=t?$(t):$(".c3-selected-circle"),r=45,(i=$("<img id='compensation-graph-marker' src='"+this.props.icon+"'>")).css({top:s[0].getBBox().y+(r-n),left:s[0].getBBox().x-o/2,position:"absolute",width:o,height:n}),$("#compensation-graph").append(i)},t.prototype.remove_compensation_marker=function(){return $("#compensation-graph-marker").remove()},t.prototype.selected_point_from_percentile=function(e){var t,s,i,n,o;return i=(o=function(){switch(!1){case!(e<10):return[0,0,10];case!(e<25):return[20,10,25];case!(e<75):return[40,25,75];case!(e<90):return[60,75,90];case!(e>=90):return[80,90,100]}}())[0],n=o[1],s=o[2],t=(e-n)/(s-n),i+Math.round(100*t/5)},t.prototype.draw_graph=function(e){var t;return t=_.debounce(this.set_compensation_marker,50),c3.generate({bindto:"#compensation-graph",padding:{bottom:0},data:{columns:[e],type:"area-spline",colors:{curve:"#0c72bf"},onselected:this.set_compensation_marker},regions:[{axis:"x",start:40,end:60,"class":"region"}],point:{r:0,select:{r:0}},axis:{y:{show:!1,max:.5,min:0,padding:{bottom:0,top:0}},x:{show:!1,padding:{right:3,left:3}}},grid:{x:{lines:[{value:20,text:"10th %","class":"vertical-line"},{value:40,text:"25th %","class":"vertical-line"},{value:60,text:"75th %","class":"vertical-line"},{value:80,text:"90th %","class":"vertical-line"}]}},legend:{show:!1},tooltip:{show:!1},padding:{left:0,right:0,bottom:-8,top:40},onresize:t})},t}(),Handshake.FirstDestinationSurveyContent.BellCurveDataFactory=function(){function e(){var e,t,s,i,n,o;for(this.data=["curve"],e=function(e,t,s){var i;return i=e-t,Math.exp(-i*i/(2*s*s))/(Math.sqrt(2*Math.PI)*s)},[],i=10,[],n=5,o=1.5,t=1.5,s=0;s<i;)this.data.push(e(s,n,o)*t),s+=.1}return e}(),Handshake.FirstDestinationSurveyContent.ResponseGraphParamsFactory=function(){function t(t){this.props=t,this.accept_date=e(this.accept_date,this),this.compensation=e(this.compensation,this),this.job_functions=e(this.job_functions,this),this.degrees=e(this.degrees,this),this.majors=e(this.majors,this),this.schools=e(this.schools,this),this.employers=e(this.employers,this),this.locations=e(this.locations,this),this.military_ranks=e(this.military_ranks,this),this.military_branches=e(this.military_branches,this),this.employment_categories=e(this.employment_categories,this),this.employment_types=e(this.employment_types,this),this.response_types=e(this.response_types,this),this.add_answer_to_data=e(this.add_answer_to_data,this),this.get_graph_data=e(this.get_graph_data,this),this.response=this.props.response,this.graph_data=ko.observableArray(this.props.data),this.not_enough_data=ko.observable(!1)}return t.prototype.get_graph_data=function(e){var t,s,i;return i=this,t=function(t){return t?i.response.statistics(e,{query:t}).then(function(e){if(s.not_enough_data(e.not_enough_data),!e.not_enough_data)return s.donut_label("student"),s.donut_count(e.statistics.count),s.donut_total(e.statistics.total_count),s.bar(e.statistics.top)}):(s.not_enough_data(!1),s.donut_count(null),s.donut_total(null),s.donut_label(""),void s.bar([]))},s={not_enough_data:ko.observable(),donut_count:ko.observable(),donut_total:ko.observable(),donut_label:ko.observable(),bar:ko.observableArray(),fetch:t}},t.prototype.add_answer_to_data=function(e){var t,s;if(e&&"in_progress"===this.response.status())return s=_(this.graph_data()).reduce(function(e,t){return t.total+e},1),t=_(this.graph_data()).map(function(t){var i,n;return i=t.total,e===t.name&&(i+=1),n=i/s,_.extend({},t,{name:t.name,value:n,total:t.total})}),this.graph_data(t)},t.prototype.response_types=function(){var e,t,s;return this.response.statistics("response_types").then((t=this,function(s){return t.not_enough_data(s.not_enough_data),t.graph_data(s.statistics),t.add_answer_to_data(e())})),(e=ko.computed((s=this,function(){return s.props.response.is_fellowship()?"Fellowship":s.props.first_destination_response_type_name()}))).subscribe(this.add_answer_to_data),{name:"first-destination-response-bar-graph",params:{id:"response-types-graph",data:this.graph_data,selected_bar:e,not_enough_data:this.not_enough_data,title:"Primary post-graduation activity for students at your institution"}}},t.prototype.employment_types=function(e){var t,s,i,n,o,r,a;return n=ko.observable(),i={query:this.response.is_fellowship()?"is_fellowship":null},this.response.statistics("employment_types",i).then((o=this,function(e){var i,n;return o.not_enough_data(e.not_enough_data),o.graph_data(null!=(i=e.statistics)?i.employment_type_counts:void 0),s(null!=(n=e.statistics)?n.working_percent:void 0),o.add_answer_to_data(t())})),t=ko.computed((r=this,function(){var t;if((t=ko.unwrap(e.employment_types)).length&&r.response.employment_type_id())return _(t).findWhere({id:r.response.employment_type_id()}).name})),a=this,s=function(e){return a.response.is_fellowship()?n("Type of employment for the "+e+"% of students in working fellowships at your institution"):n("Type of employment for the "+e+"% of working students at your institution")},t.subscribe(this.add_answer_to_data),{name:"first-destination-response-bar-graph",params:{id:"employment-types-graph",data:this.graph_data,selected_bar:t,not_enough_data:this.not_enough_data,title:n}}},t.prototype.employment_categories=function(e){var t,s,i,n,o,r,a,c,l;return o=ko.observable(),n={query:this.response.is_fellowship()?"is_fellowship":null},this.response.statistics("employment_categories",n).then((r=this,function(e){var n,o;return r.not_enough_data(e.not_enough_data),s(null!=(n=e.statistics)?n.employment_category_counts:void 0),i(null!=(o=e.statistics)?o.working_percent:void 0),r.add_answer_to_data(t())})),t=ko.computed((a=this,function(){var t,s;if((t=ko.unwrap(e.employment_categories)).length&&a.response.employment_category_id()&&(s=_(t).findWhere({id:a.response.employment_category_id()})))return s.name})),c=this,i=function(e){return c.response.is_fellowship()?o("Employment category for the "+e+"% of students in working fellowships at your institution"):o("Employment category for the "+e+"% of working students at your institution")},l=this,s=function(t){var s,i;if(t)return s=_(t).filter(function(t){return _(ko.unwrap(e.employment_categories)).findWhere({name:t.name})}),i=_(s).reduce(function(e,t){return e+t.total},0),s=_(s).map(function(e){return e.value=e.total/i,e}),l.graph_data(s)},t.subscribe(this.add_answer_to_data),{name:"first-destination-response-bar-graph",params:{id:"employment-categories-graph",data:this.graph_data,selected_bar:t,not_enough_data:this.not_enough_data,title:o}}},t.prototype.military_branches=function(e){var t,s,i;return t=ko.computed((s=this,function(){if(e.military_branches().length&&s.response.military_branch_id())return _(e.military_branches()).findWhere({id:s.response.military_branch_id()}).name})),this.response.statistics("military_branches").then((i=this,function(e){return i.not_enough_data(e.not_enough_data),i.graph_data(e.statistics),i.add_answer_to_data(t())})),t.subscribe(this.add_answer_to_data),{name:"first-destination-response-bar-graph",params:{id:"military-branches-graph",data:this.graph_data,selected_bar:t,not_enough_data:this.not_enough_data,title:"Military branches served by students at your institution"}}},t.prototype.military_ranks=function(e){var t,s,i;return t=ko.computed((s=this,function(){if(e.military_ranks().length&&s.response.military_rank_id())return _(e.military_ranks()).findWhere({id:s.response.military_rank_id()}).name})),this.response.statistics("military_ranks").then((i=this,function(e){return i.not_enough_data(e.not_enough_data),i.graph_data(e.statistics),i.add_answer_to_data(t())})),t.subscribe(this.add_answer_to_data),{name:"first-destination-response-bar-graph",params:{id:"military-ranks-graph",data:this.graph_data,selected_bar:t,not_enough_data:this.not_enough_data,title:"Military rank for students at your institution"}}},t.prototype.locations=function(e){var t,s;return t=this.get_graph_data("locations"),this.response.location.subscribe(function(e){return e.city.subscribe(t.fetch)}),t.fetch(null!=(s=this.response.location())?s.city():void 0),{name:"first-destination-response-donut-bar-graph",params:{id:"locations-graph",not_enough_data:t.not_enough_data,donut_graph_count:t.donut_count,donut_graph_total:t.donut_total,donut_graph_label:t.donut_label,donut_graph_title:e.donut_graph_title,bar_graph_data:t.bar,bar_graph_title:e.bar_graph_title}}},t.prototype.employers=function(e){var t;return t=this.get_graph_data("employers"),this.response.employer_name.subscribe(t.fetch),t.fetch(this.response.employer_name()),{name:"first-destination-response-donut-bar-graph",params:{id:"employers-graph",not_enough_data:t.not_enough_data,donut_graph_count:t.donut_count,donut_graph_total:t.donut_total,donut_graph_label:t.donut_label,donut_graph_title:e.donut_graph_title,bar_graph_data:t.bar,bar_graph_title:e.bar_graph_title}}},t.prototype.schools=function(e){var t;return t=this.get_graph_data("schools"),this.response.continuing_education_school_name.subscribe(t.fetch),t.fetch(this.response.continuing_education_school_name()),{name:"first-destination-response-donut-bar-graph",params:{id:"schools-graph",not_enough_data:t.not_enough_data,donut_graph_count:t.donut_count,donut_graph_total:t.donut_total,donut_graph_label:t.donut_label,donut_graph_title:e.donut_graph_title,bar_graph_data:t.bar,bar_graph_title:e.bar_graph_title}}},t.prototype.majors=function(e){var t;return t=this.get_graph_data("majors"),this.response.continuing_education_major_name.subscribe(t.fetch),t.fetch(this.response.continuing_education_major_name()),{name:"first-destination-response-donut-bar-graph",params:{id:"majors-graph",not_enough_data:t.not_enough_data,donut_graph_count:t.donut_count,donut_graph_total:t.donut_total,donut_graph_label:t.donut_label,donut_graph_title:e.donut_graph_title,bar_graph_data:t.bar,bar_graph_title:e.bar_graph_title}}},t.prototype.degrees=function(e){var t;return t=this.get_graph_data("degrees"),this.response.continuing_education_education_level_id.subscribe(t.fetch),t.fetch(this.response.continuing_education_education_level_id()),{name:"first-destination-response-donut-bar-graph",params:{id:"degrees-graph",not_enough_data:t.not_enough_data,donut_graph_count:t.donut_count,donut_graph_total:t.donut_total,donut_graph_label:t.donut_label,donut_graph_title:e.donut_graph_title,bar_graph_data:t.bar,bar_graph_title:e.bar_graph_title}}},t.prototype.job_functions=function(e){var t;return t=this.get_graph_data("job_functions"),this.response.job_function_id.subscribe(t.fetch),t.fetch(this.response.job_function_id()),{name:"first-destination-response-donut-bar-graph",params:{not_enough_data:t.not_enough_data,donut_graph_count:t.donut_count,donut_graph_total:t.donut_total,donut_graph_label:t.donut_label,donut_graph_title:e.donut_graph_title,bar_graph_data:t.bar,bar_graph_title:e.bar_graph_title}}},t.prototype.compensation=function(e){return{name:"first-destination-response-compensation-graph",params:{percentile:e.percentile,not_enough_data:e.not_enough_data,title:"Salary distribution for "+this.props.response.first_destination_response_type_name()+" students at your institution",icon:e.icon}}},t.prototype.accept_date=function(){var e,t,s,i,n,o,r;return i=ko.observable(),e=ko.observableArray(),t=ko.computed((n=this,function(){var e,t;if(n.response.accept_date()&&(null!=(t=n.graph_data())?t.length:void 0))return e=moment.utc(n.response.accept_date()),_(n.graph_data()).find(function(t){var s,i;return i=moment.utc(t.range[0]).startOf("day"),s=moment.utc(t.range[1]).endOf("day"),e.isSameOrAfter(i)&&e.isSameOrBefore(s)}).name})),o=this,s=function(e){return"Military"===o.response.first_destination_response_type_name()?i("Military position acceptance date for students at your institution"):"Volunteering"===o.response.first_destination_response_type_name()?i("Volunteer position acceptance date for students at your institution"):o.response.is_fellowship()?i("Job acceptance date for the "+e+"% of students in working fellowships at your institution"):i("Job acceptance date for the "+e+"% of working students at your institution")},this.response.statistics("accept_date").then((r=this,function(i){var n,o,a;return r.not_enough_data(i.not_enough_data),r.graph_data(null!=(n=i.statistics)?n.accept_date_counts:void 0),s(null!=(o=i.statistics)?o.working_percent:void 0),e(_(null!=(a=i.statistics)?a.accept_date_counts:void 0).map(function(e){return e.range})),r.add_answer_to_data(t())})),t.subscribe(this.add_answer_to_data),{name:"first-destination-response-bar-graph",params:{id:"accept-date-graph",data:this.graph_data,selected_bar:t,not_enough_data:this.not_enough_data,title:i}}},t}(),Handshake.FirstDestinationSurveyContent.GraphPlaceholder=function(){function e(e){var t;this.props=e,t=ko.computed(function(){var e,t;return t=window.location.pathname.split("/"),e=parseInt(_(t).last()),"first_destination_responses"===t[1]&&!_.isNaN(e)}),this.vm={not_enough_data:this.props.not_enough_data,on_results_page:t}}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].indexOf||function(e){for(var t=0,s=this.length;t<s;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){function s(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},i={}.hasOwnProperty;Handshake.FirstDestinationSurveySubmissionView=function(){function s(t){var s,i,n,o,r,a,c,l;this.props=t,this.job_offer_attributes_are_valid=e(this.job_offer_attributes_are_valid,this),this.attributes_are_valid=e(this.attributes_are_valid,this),this.get_next_page=e(this.get_next_page,this),this.survey_or_results=e(this.survey_or_results,this),this.first_destination_response_type_name=e(this.first_destination_response_type_name,this),this.reset_secondary_content_component=e(this.reset_secondary_content_component,this),this.set_secondary_content_component=e(this.set_secondary_content_component,this),this.set_graph=e(this.set_graph,this),this.format_dates=e(this.format_dates,this),this.finish_loading=e(this.finish_loading,this),this.start_loading=e(this.start_loading,this),this.set_page=e(this.set_page,this),this.set_job_offer_index=e(this.set_job_offer_index,this),this.push_history=e(this.push_history,this),this.on_popstate=e(this.on_popstate,this),this.at_end_of_survey=e(this.at_end_of_survey,this),this.watch_for_validation_changes=e(this.watch_for_validation_changes,this),this.hide_save_warning=e(this.hide_save_warning,this),this.show_save_warning=e(this.show_save_warning,this),this.save_as_latest_response=e(this.save_as_latest_response,this),this.dont_save_as_latest_response=e(this.dont_save_as_latest_response,this),this.save_response=e(this.save_response,this),this.save_and_redirect=e(this.save_and_redirect,this),this.submit=e(this.submit,this),this.skip_to_staff_only=e(this.skip_to_staff_only,this),this.last_question=e(this.last_question,this),this.skip=e(this.skip,this),this.go_back=e(this.go_back,this),this.unmount=e(this.unmount,this),this.exit_survey=e(this.exit_survey,this),this.initialize_survey=e(this.initialize_survey,this),this.show_save_work_experience_to_profile=e(this.show_save_work_experience_to_profile,this),this.decorate_first_destination_response_types=e(this.decorate_first_destination_response_types,this),this.setup_salary_information_validations=e(this.setup_salary_information_validations,this),this.initialize=e(this.initialize,this),this.checkInternetConnection=e(this.checkInternetConnection,this),this.route_for_first_destination_resource=e(this.route_for_first_destination_resource,this),this.current_page=ko.observable(),this.initialized=ko.observable(!1),this.loading=ko.observable(!1),this.is_invalid=ko.observable(!1),this.question_component=ko.observable(),this.primary_content_component=ko.observable(),this.secondary_content_component=ko.observable(),this.response=new Handshake.FirstDestinationResponses.FirstDestinationResponse(this.props.first_destination_response),this.response.latest_response_confirmed(!this.props.latest_response_present),this.response.using_first_destination_resources_controller(!this.props.disable_first_destination_resources_controller),this.survey=new Handshake.FirstDestinationSurveys.FirstDestinationSurvey(this.props.first_destination_survey),this.job_offer_index=ko.observable(),this.survey.salary_information_required()&&this.setup_salary_information_validations(),this.show_pre_survey_page=ko.observable("unsubmitted"===this.response.status()||"Career Services"===Handshake.passed.current_user_type&&!this.props.kiosk_mode),this.first_destination_response_types=ko.observableArray(),this.first_destination_graduation_statuses=ko.observableArray(),this.survey_pages=_(Handshake.FirstDestinationSurveyPages).map(function(e){return e.slug}),s=[Handshake.FirstDestinationSurveyPages.JobFoundThroughHandshake.slug],i=[Handshake.FirstDestinationSurveyPages.VolunteerEmployer.slug,Handshake.FirstDestinationSurveyPages.ContinuingEducation.slug,Handshake.FirstDestinationSurveyPages.MilitaryBranch.slug],this.skip_button_shown=!1,$(window).on("popstate",this.on_popstate),this.connection_lost=ko.observable(!1),this.internet_connection_interval=null,this.props.kiosk_mode&&(this.internet_connection_interval=setInterval((n=this,function(){return n.checkInternetConnection()}),3e4)),this.vm={initialized:this.initialized,loading:this.loading,question_component:this.question_component,current_page:this.current_page,submit:this.submit,skip_to_staff_only:this.skip_to_staff_only,go_back:this.go_back,skip:this.skip,response:this.response,show_pre_survey_page:this.show_pre_survey_page,primary_content_component:this.primary_content_component,secondary_content_component:this.secondary_content_component,student_name:this.props.student_name,preferred_name:this.props.preferred_name,last_name:this.props.last_name,school_logo:this.props.school_logo,school_name:this.props.school_name,survey_name:this.survey.name(),survey_type:this.survey.survey_type(),kiosk_mode:this.props.kiosk_mode,logged_out_single_response:this.props.logged_out_single_response,kiosk_mode_survey_id:this.props.kiosk_mode_survey_id,latest_response_present:this.props.latest_response_present,show_save_warning:this.show_save_warning,hide_save_warning:this.hide_save_warning,show_save_work_experience_to_profile:this.show_save_work_experience_to_profile,enable_fds_survey_types:Handshake.passed.current_user_feature_flags["fds-survey-types"],show_back_button:ko.computed((l=this,function(){return l.response.question_history().length>1})),show_skip_to_staff_only_button:ko.computed((c=this,function(){
return"Career Services"===Handshake.passed.current_user_type&&!c.props.kiosk_mode&&c.current_page()!==Handshake.FirstDestinationSurveyPages.StaffOnly.slug})),show_footer:ko.computed((a=this,function(){return("submitted"!==a.response.status()||"Career Services"===Handshake.passed.current_user_type&&!a.props.kiosk_mode)&&"take-survey"!==a.current_page()})),show_next_button:ko.computed((r=this,function(){return!_(s).contains(r.current_page())})),show_skip_button:ko.computed((o=this,function(){return o.skip_button_shown=o.skip_button_shown||"undergraduate"!==o.survey.survey_type()&&"Students"===Handshake.passed.current_user_type&&(o.current_page()===Handshake.FirstDestinationSurveyPages.Employer.slug&&("full_time_mba"===o.survey.survey_type()||"specialty_masters"===o.survey.survey_type())||_(i).contains(o.current_page())),o.skip_button_shown})),pre_survey_props:{response:this.response,initialize_survey:this.initialize_survey,route_for_first_destination_resource:this.route_for_first_destination_resource,education_levels:this.props.education_levels,student_name:this.props.student_name,user_logged_in:this.props.user_logged_in,needs_to_agree_to_tos:this.props.needs_to_agree_to_tos,kiosk_mode:this.props.kiosk_mode,logged_out_single_response:this.props.logged_out_single_response,kiosk_mode_survey_id:this.props.kiosk_mode_survey_id,token_param:this.props.token_param,source_email_date_id:this.props.source_email_date_id,mass_email_id:this.props.mass_email_id,school_id:this.survey.school_id()},graduate_pre_survey_props:{response:this.response,initialize_survey:this.initialize_survey,route_for_first_destination_resource:this.route_for_first_destination_resource,education_levels:this.props.education_levels,student_name:this.props.student_name,user_logged_in:this.props.user_logged_in,needs_to_agree_to_tos:this.props.needs_to_agree_to_tos,kiosk_mode:this.props.kiosk_mode,kiosk_mode_survey_id:this.props.kiosk_mode_survey_id,logged_out_single_response:this.props.logged_out_single_response,token_param:this.props.token_param,source_email_date_id:this.props.source_email_date_id,mass_email_id:this.props.mass_email_id,survey_type:this.survey.survey_type,school_id:this.survey.school_id(),university_email_tld:this.props.university_email_tld},question_props:{response:this.response,job_offer_index:this.job_offer_index,user_logged_in:this.props.user_logged_in,kiosk_mode:this.props.kiosk_mode,logged_out_single_response:this.props.logged_out_single_response,kiosk_mode_survey_id:this.props.kiosk_mode_survey_id,survey:this.survey,submit:this.submit,go_back:this.go_back,set_page:this.set_page,is_invalid:this.is_invalid,start_loading:this.start_loading,finish_loading:this.finish_loading,format_dates:this.format_dates,set_graph:this.set_graph,set_job_offer_index:this.set_job_offer_index,set_secondary_content_component:this.set_secondary_content_component,first_destination_response_types:this.first_destination_response_types,first_destination_graduation_statuses:this.first_destination_graduation_statuses,first_destination_response_type_name:this.first_destination_response_type_name,applications_count:this.props.applications_count,applications:this.props.applications||[],not_seeking_option_icons:this.props.not_seeking_option_icons,military_branch_icons:this.props.military_branch_icons,employment_category_icons:this.props.employment_category_icons,employment_type_icons:this.props.employment_type_icons,seeking_option_icons:this.props.seeking_option_icons,compensation_graph_marker:this.props.compensation_graph_marker,save_and_redirect:this.save_and_redirect,favorite_jobs:this.props.favorite_jobs,route_for_first_destination_resource:this.route_for_first_destination_resource,disable_first_destination_resources_controller:this.props.disable_first_destination_resources_controller,school_name:this.props.school_name,work_experience_id:this.props.work_experience_id}},this.initialize()}return s.prototype.route_for_first_destination_resource=function(e){return this.props.disable_first_destination_resources_controller?"/"+e:"/first_destination_surveys/"+this.survey.id()+"/first_destination_resources/"+e},s.prototype.checkInternetConnection=function(){return $.ajax({url:"/checkins/ping",type:"GET",success:(t=this,function(){return t.connection_lost(!1)}),error:(e=this,function(t){if(0===t.status)return e.connection_lost(!0)})});var e,t},s.prototype.initialize=function(){var e,t,s;if(this.props.kiosk_mode&&$(document).ajaxError((s=this,function(e,t){return 0===t.readyState?s.connection_lost(!0):s.connection_lost(!1)})),null!=(t=this.props.first_destination_response_types)?t.length:void 0)return Handshake.passed.should_show_fellowship_in_fds&&this.props.first_destination_response_types.splice(4,0,{id:"Fellowship",name:"Fellowship",icon_url:null}),e=this.decorate_first_destination_response_types(this.props.first_destination_response_types),this.first_destination_response_types(e),this.first_destination_graduation_statuses(this.props.first_destination_graduation_statuses),this.show_pre_survey_page()||this.initialize_survey(),this.initialized(!0)},s.prototype.setup_salary_information_validations=function(){var e,t;return t={name:"compensation_salary",resource:this.response,validations:{presence:!0,numericality:{only_integer:!0}}},this.response.compensation_salary.extend({validate:t}),e={name:"pay_schedule_id",resource:this.response,validations:{presence:!0}},this.response.pay_schedule_id.extend({validate:e})},s.prototype.decorate_first_destination_response_types=function(e){return _(e).map((t=this,function(e){var s;return e.icon_url=null!=(s=_(t.props.first_destination_response_type_icons).findWhere({name:e.name}))?s.icon_url:void 0,e}));var t},s.prototype.show_save_work_experience_to_profile=function(){return!!this.props.show_save_work_experience_to_profile_enabled&&["Working","Volunteering","Fellowship"].indexOf(this.first_destination_response_type_name())>-1},s.prototype.initialize_survey=function(){var e;return this.last_question()&&("Career Services"!==Handshake.passed.current_user_type||this.props.kiosk_mode)?this.set_page(this.last_question()):(e=Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType.slug,"undergraduate"!==this.survey.survey_type()&&(e=Handshake.FirstDestinationSurveyPages.StatusAtGraduation.slug),this.set_page(e),this.response.question_history.push(e),this.response.save()),this.show_pre_survey_page(!1)},s.prototype.exit_survey=function(){return window.location="/first_destination_surveys/"+this.props.kiosk_mode_survey_id+"/kiosk"},s.prototype.unmount=function(){return $(window).off("popstate",this.on_popstate),clearInterval(this.internet_connection_interval)},s.prototype.go_back=function(e){return null==e&&(e=!0),this.response.changed_props([]),this.response.question_history.pop(),this.start_loading(),this.last_question()||bugsnagClient.notify("FirstDestinationResponse.question_history was empty when trying to navigate back.",{severity:"info"}),this.response.save((t=this,function(){return t.set_page(t.last_question()||FirstDestinationResponseType.slug,e)}));var t},s.prototype.skip=function(){return this.save_and_redirect("results",!1)},s.prototype.last_question=function(){return _.last(this.response.question_history())},s.prototype.skip_to_staff_only=function(){return this.save_and_redirect(Handshake.FirstDestinationSurveyPages.StaffOnly.slug,!0)},s.prototype.submit=function(e){var t;if(null==e&&(e=!0),t=this.get_next_page())return this.start_loading(),this.save_and_redirect(t,e);this.watch_for_validation_changes()},s.prototype.save_and_redirect=function(e,s){var i,n,o,r;return this.at_end_of_survey(e)?"Career Services"!==Handshake.passed.current_user_type||this.props.kiosk_mode||!this.vm.latest_response_present&&"submitted"===this.response.status()?(("Career Services"!==Handshake.passed.current_user_type||this.props.kiosk_mode)&&this.response.status("submitted"),this.save_response(e,s)):(this.finish_loading(),void this.show_save_warning()):(i=[Handshake.FirstDestinationSurveyPages.JobOfferStatus.slug,Handshake.FirstDestinationSurveyPages.JobOfferEmployer.slug,Handshake.FirstDestinationSurveyPages.JobOfferEmploymentType.slug,Handshake.FirstDestinationSurveyPages.JobOfferInformation.slug,Handshake.FirstDestinationSurveyPages.JobOfferCompensation.slug,Handshake.FirstDestinationSurveyPages.JobOfferFacilitationType.slug],this.last_question()!==e&&t.call(i,e)<0?this.response.question_history.push(e):t.call(i,e)>=0&&(n=e+"~"+this.job_offer_index(),this.response.question_history.push(n)),this.response.save((r=this,function(){return r.set_page(e,s)}),(o=this,function(){return o.response.question_history.pop(),o.finish_loading()})))},s.prototype.save_response=function(e,t){return"Career Services"===Handshake.passed.current_user_type&&this.response.markAsChanged("latest_response_confirmed"),this.response.save((i=this,function(){var s;return i.props.user_logged_in&&!i.props.kiosk_mode?(s=i.response.entity_path+"?hide_submit_another_response=true",i.response.work_experience_id&&(s+="&work_experience_id="+i.response.work_experience_id),Handshake.SPA.navigate(s)):i.set_page(e,t)}),(s=this,function(){return s.response.status("in_progress"),s.finish_loading()}));var s,i},s.prototype.dont_save_as_latest_response=function(){return this.response.latest_response_confirmed(!1),this.save_response()},s.prototype.save_as_latest_response=function(){return this.response.latest_response_confirmed(!0),this.save_response()},s.prototype.show_save_warning=function(){return $("#save-warning-modal").modal("show")},s.prototype.hide_save_warning=function(){return $("#save-warning-modal").modal("hide")},s.prototype.watch_for_validation_changes=function(){var e,t,s,i,n;return i=this,e=function(){if(i.get_next_page())return i.is_invalid(!1),_(s).invoke("dispose")},t=function(){return setTimeout(e,0)},(s=[]).push(this.response.changed_props.subscribe(t)),s.push(this.response.location.subscribe(t)),this.response.first_destination_response_job_offers&&_.each(this.response.first_destination_response_job_offers(),(n=this,function(e,i){return s.push(n.response.first_destination_response_job_offers()[i].changed_props.subscribe(t)),s.push(n.response.first_destination_response_job_offers()[i].location().changed_props.subscribe(t))})),this.is_invalid(!0)},s.prototype.at_end_of_survey=function(e){return"results"===e},s.prototype.on_popstate=function(e){var t,s,i,n,o;if(t=e.originalEvent,!window.is_ie9&&(null!=(s=t.state)&&null!=(i=s.data)?i.fds:void 0)&&null!==(null!=(n=t.state)&&null!=(o=n.data)?o.index:void 0))return-1===this.response.question_history().indexOf(t.state.data.index)?this.submit(!1):this.go_back(!1)},s.prototype.push_history=function(e){var t,s,i;if(!window.is_ie9)return t=_.extend({},history.state,{data:{fds:!0,pushStateOverridden:!0,index:e}}),(null!=(s=history.state)&&null!=(i=s.data)?i.fds:void 0)?history.pushState(t,e,""):history.replaceState(t,e,"")},s.prototype.set_job_offer_index=function(e){return this.job_offer_index(e)},s.prototype.set_page=function(e,t){var s,i,n,o;return null==t&&(t=!0),n=e,"job-offer"===e.slice(0,"job-offer".length)&&(s=(o=e.split("~"))[0],i=parseInt(o[1],10),n=s,isNaN(i)||this.set_job_offer_index(i)),this.current_page(n),t&&this.push_history(this.current_page()),this.reset_secondary_content_component(),this.question_component("first-destination-response-"+n)},s.prototype.start_loading=function(){return this.loading(!0)},s.prototype.finish_loading=function(){return this.loading(!1)},s.prototype.format_dates=function(){var e;if(e="YYYY-MM-DD",moment(this.vm.response.start_date()).isValid()&&this.vm.response.start_date(moment(this.vm.response.start_date()).format(e)),moment(this.vm.response.offer_date()).isValid()&&this.vm.response.offer_date(moment(this.vm.response.offer_date()).format(e)),moment(this.vm.response.accept_date()).isValid())return this.vm.response.accept_date(moment(this.vm.response.accept_date()).format(e))},s.prototype.set_graph=function(e,t){var s;if(null==t&&(t={}),"undergraduate"===this.survey.survey_type()&&this.graph_type!==e){if(this.graph_type=e,e)return s=new Handshake.FirstDestinationSurveyContent.ResponseGraphParamsFactory({response:this.response,first_destination_response_type_name:this.first_destination_response_type_name}),this.primary_content_component(s[e](t));this.primary_content_component(void 0)}},s.prototype.set_secondary_content_component=function(e){return this.secondary_content_component(e)},s.prototype.reset_secondary_content_component=function(){return this.secondary_content_component(void 0)},s.prototype.first_destination_response_type_name=function(){var e,t,s;return t=this.vm.question_props.first_destination_response_types(),s=this.vm.response.first_destination_response_type_id(),null!=(e=_(t).findWhere({id:s}))?e.name:void 0},s.prototype.survey_or_results=function(){return"Career Services"!==Handshake.passed.current_user_type||this.props.kiosk_mode||this.current_page()===Handshake.FirstDestinationSurveyPages.StaffOnly.slug?this.vm.response.survey_id()?Handshake.FirstDestinationSurveyPages.TakeSurvey.slug:!this.props.kiosk_mode&&this.props.user_logged_in&&this.vm.response.seeking_option_id()&&"Employment"===this.vm.response.seeking_option_name()&&"Career Services"!==Handshake.passed.current_user_type?Handshake.FirstDestinationSurveyPages.Postings.slug:Handshake.FirstDestinationSurveyPages.Results.slug:Handshake.FirstDestinationSurveyPages.StaffOnly.slug},s.prototype.get_next_page=function(){var e,t,s,i;switch(this.current_page()){case Handshake.FirstDestinationSurveyPages.StatusAtGraduation.slug:if(!this.vm.response.status_at_graduation())return;switch(this.vm.response.status_at_graduation()){case"received_offer":return Handshake.FirstDestinationSurveyPages.JobOfferList.slug;case"looking":return this.survey_or_results();case"not_looking":case"left_workforce":return Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType.slug;case"starting_business":return Handshake.FirstDestinationSurveyPages.Employer.slug;case"employed":return Handshake.FirstDestinationSurveyPages.EmploymentType.slug;case"unemployed":return this.survey_or_results()}break;case Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType.slug:if(!this.vm.response.first_destination_response_type_id()&&!this.vm.response.is_fellowship())return;if(this.vm.response.is_fellowship())return Handshake.FirstDestinationSurveyPages.FellowshipType.slug;switch(this.first_destination_response_type_name()){case"Working":return Handshake.FirstDestinationSurveyPages.EmploymentType.slug;case"Continuing Education":return Handshake.FirstDestinationSurveyPages.ContinuingEducation.slug;case"Volunteering":return Handshake.FirstDestinationSurveyPages.VolunteerEmployer.slug;case"Military":return Handshake.FirstDestinationSurveyPages.MilitaryBranch.slug;case"Still Looking":return Handshake.FirstDestinationSurveyPages.StillLooking.slug;case"Not Seeking":return Handshake.FirstDestinationSurveyPages.NotSeeking.slug;case"Company Sponsored or Already Employed":case"Starting a New Business as an Owner/Founder":return Handshake.FirstDestinationSurveyPages.Employer.slug;case"Postponing Job Search":case"Unemployed":case"Not Seeking for Other Reasons":return this.survey_or_results();default:return}break;case Handshake.FirstDestinationSurveyPages.EmploymentType.slug:if(!this.attributes_are_valid(["employment_type_id"]))return;return this.vm.response.is_fellowship()&&this.vm.question_props.applications_count>0?Handshake.FirstDestinationSurveyPages.JobFoundThroughHandshake.slug:this.vm.response.is_fellowship()||"part_time_mba"===this.survey.survey_type()?Handshake.FirstDestinationSurveyPages.Employer.slug:Handshake.FirstDestinationSurveyPages.EmploymentCategory.slug;case Handshake.FirstDestinationSurveyPages.EmploymentCategory.slug:if(e=["employment_category_id","other_employment_category_name"],!this.attributes_are_valid(e))return;return this.vm.question_props.applications_count>0?Handshake.FirstDestinationSurveyPages.JobFoundThroughHandshake.slug:Handshake.FirstDestinationSurveyPages.Employer.slug;case Handshake.FirstDestinationSurveyPages.JobFoundThroughHandshake.slug:if(!this.attributes_are_valid(["found_through_handshake"]))return;if(this.vm.response.found_through_handshake()&&!this.attributes_are_valid(["application_id"]))return;return Handshake.FirstDestinationSurveyPages.Employer.slug;case Handshake.FirstDestinationSurveyPages.Employer.slug:if(!this.attributes_are_valid(["employer_name","employer_industry_id","location"]))return;return"full_time_mba"===this.survey.survey_type()||"part_time_mba"===this.survey.survey_type()&&"starting_business"===this.vm.response.status_at_graduation()?this.survey_or_results():Handshake.FirstDestinationSurveyPages.JobInformation.slug;case Handshake.FirstDestinationSurveyPages.Location.slug:if(!this.attributes_are_valid(["location"]))return;switch(this.first_destination_response_type_name()){case"Working":case"Volunteering":return Handshake.FirstDestinationSurveyPages.JobInformation.slug;case"Military":return Handshake.FirstDestinationSurveyPages.MilitaryInformation.slug;default:return}break;case Handshake.FirstDestinationSurveyPages.JobInformation.slug:if(t=["job_position_name","job_function_id"],"Working"===this.first_destination_response_type_name()&&(t=t.concat(["employed_during_education","is_internship","found_through_handshake"])),!this.attributes_are_valid(t))return;return"Volunteering"===this.first_destination_response_type_name()?Handshake.FirstDestinationSurveyPages.JobDate.slug:Handshake.FirstDestinationSurveyPages.Compensation.slug;case Handshake.FirstDestinationSurveyPages.Compensation.slug:if(i=this.survey.salary_information_required()?["compensation_salary","pay_schedule_id","offer_date","accept_date","compensation_bonus"]:["offer_date","accept_date"],!this.attributes_are_valid(i))return;return"part_time_mba"===this.survey.survey_type()?Handshake.FirstDestinationSurveyPages.FacilitationType.slug:this.survey_or_results();case Handshake.FirstDestinationSurveyPages.FacilitationType.slug:if(null==this.vm.response.facilitation_type())return;return Handshake.FirstDestinationSurveyPages.AlreadyEmployed.slug;case Handshake.FirstDestinationSurveyPages.AlreadyEmployed.slug:if(null==this.vm.response.employed_during_education())return;return Handshake.FirstDestinationSurveyPages.ChangedJobAspects.slug;case Handshake.FirstDestinationSurveyPages.ChangedJobAspects.slug:return this.survey_or_results();case Handshake.FirstDestinationSurveyPages.JobDate.slug:if(!this.attributes_are_valid(["offer_date","accept_date"]))return;return this.survey_or_results();case Handshake.FirstDestinationSurveyPages.VolunteerEmployer.slug:if(!this.attributes_are_valid(["employer_name"]))return;return Handshake.FirstDestinationSurveyPages.Location.slug;case Handshake.FirstDestinationSurveyPages.ContinuingEducation.slug:if(!this.attributes_are_valid(["continuing_education_school_name","location"]))return;return Handshake.FirstDestinationSurveyPages.ContinuingEducationMajor.slug;case Handshake.FirstDestinationSurveyPages.ContinuingEducationMajor.slug:if(!this.attributes_are_valid(["continuing_education_major_name"]))return;return Handshake.FirstDestinationSurveyPages.ContinuingEducationLevel.slug;case Handshake.FirstDestinationSurveyPages.ContinuingEducationLevel.slug:if(!this.attributes_are_valid(["continuing_education_education_level_id"]))return;return this.survey_or_results();case Handshake.FirstDestinationSurveyPages.FellowshipType.slug:if(!this.attributes_are_valid(["first_destination_response_type_id"]))return;return Handshake.FirstDestinationSurveyPages.FellowshipName.slug;case Handshake.FirstDestinationSurveyPages.FellowshipName.slug:if(!this.attributes_are_valid(["fellowship_name"]))return;if("Working"===this.vm.response.first_destination_response_type_name())return Handshake.FirstDestinationSurveyPages.EmploymentType.slug;if("Continuing Education"===this.vm.response.first_destination_response_type_name())return Handshake.FirstDestinationSurveyPages.ContinuingEducation.slug;break;case Handshake.FirstDestinationSurveyPages.MilitaryBranch.slug:if(!this.attributes_are_valid(["military_branch_id"]))return;return Handshake.FirstDestinationSurveyPages.MilitaryRank.slug;case Handshake.FirstDestinationSurveyPages.MilitaryRank.slug:if(!this.attributes_are_valid(["military_rank_id"]))return;return Handshake.FirstDestinationSurveyPages.Location.slug;case Handshake.FirstDestinationSurveyPages.MilitaryInformation.slug:return Handshake.FirstDestinationSurveyPages.Compensation.slug;case Handshake.FirstDestinationSurveyPages.StillLooking.slug:if(!this.attributes_are_valid(["seeking_option_id"]))return;return this.survey_or_results();case Handshake.FirstDestinationSurveyPages.NotSeeking.slug:if(!this.attributes_are_valid(["not_seeking_option_id"]))return;return this.survey_or_results();case Handshake.FirstDestinationSurveyPages.JobOfferList.slug:if(!(this.vm.response.first_destination_response_job_offers().length>0))return;return this.survey_or_results();case Handshake.FirstDestinationSurveyPages.JobOfferStatus.slug:return Handshake.FirstDestinationSurveyPages.JobOfferEmployer.slug;case Handshake.FirstDestinationSurveyPages.JobOfferEmployer.slug:if(!this.job_offer_attributes_are_valid(["employer_name","industry_id","location"]))return;return Handshake.FirstDestinationSurveyPages.JobOfferEmploymentType.slug;case Handshake.FirstDestinationSurveyPages.JobOfferEmploymentType.slug:if(!(s=this.vm.response.first_destination_response_job_offers()[this.vm.question_props.job_offer_index()]).employment_type_id())return;return Handshake.FirstDestinationSurveyPages.JobOfferInformation.slug;case Handshake.FirstDestinationSurveyPages.JobOfferInformation.slug:if(!this.job_offer_attributes_are_valid(["job_position_name","employed_during_education","job_function_id","is_internship"]))return;return Handshake.FirstDestinationSurveyPages.JobOfferCompensation.slug;case Handshake.FirstDestinationSurveyPages.JobOfferCompensation.slug:if(s=this.vm.response.first_destination_response_job_offers()[this.vm.question_props.job_offer_index()],i=this.survey.salary_information_required()&&"accepted"===s.status()?["compensation_salary","pay_schedule_id","offer_date","accept_date","start_date","compensation_bonus"]:"accepted"===s.status()?["offer_date","accept_date","start_date"]:["offer_date"],!this.job_offer_attributes_are_valid(i))return;return"accepted"===s.status()?Handshake.FirstDestinationSurveyPages.JobOfferFacilitationType.slug:Handshake.FirstDestinationSurveyPages.JobOfferList.slug;case Handshake.FirstDestinationSurveyPages.JobOfferFacilitationType.slug:if(null==this.vm.response.first_destination_response_job_offers()[this.vm.question_props.job_offer_index()].facilitation_type())return;return Handshake.FirstDestinationSurveyPages.JobOfferList.slug;case Handshake.FirstDestinationSurveyPages.TakeSurvey.slug:if(!this.vm.response.survey_response_id())return;return!this.props.kiosk_mode&&this.props.user_logged_in&&"Career Services"!==Handshake.passed.current_user_type&&this.vm.response.seeking_option_id()&&"Employment"===this.vm.response.seeking_option_name()?Handshake.FirstDestinationSurveyPages.Postings.slug:Handshake.FirstDestinationSurveyPages.Results.slug;case Handshake.FirstDestinationSurveyPages.StaffOnly.slug:return this.survey_or_results();default:return}},s.prototype.attributes_are_valid=function(e){var t;return"Career Services"===Handshake.passed.current_user_type&&!this.props.kiosk_mode&&this.current_page()!==Handshake.FirstDestinationSurveyPages.StatusAtGraduation.slug&&this.current_page()!==Handshake.FirstDestinationSurveyPages.FirstDestinationResponseType.slug||-1===_(e).map((t=this,function(e){var s;return"location"===e?Boolean(null!=(s=t.vm.response.location())?s.city.force_validation(!0):void 0):Boolean(t.vm.response[e].force_validation(!0))})).indexOf(!1)},s.prototype.job_offer_attributes_are_valid=function(e){var t;return"Career Services"===Handshake.passed.current_user_type&&!this.props.kiosk_mode||-1===_(e).map((t=this,function(e){var s;return"location"===e?Boolean(null!=(s=t.vm.response.first_destination_response_job_offers()[t.vm.question_props.job_offer_index()].location())?s.city.force_validation(!0):void 0):Boolean(t.vm.response.first_destination_response_job_offers()[t.vm.question_props.job_offer_index()][e].force_validation(!0))})).indexOf(!1)},s}(),Handshake.FirstDestinationSurveyPreSurvey=function(){function t(t){var s,i,n,o;this.props=t,this.dispose=e(this.dispose,this),this.form_is_valid=e(this.form_is_valid,this),this.set_disable_submit=e(this.set_disable_submit,this),this.callback=e(this.callback,this),this.submit=e(this.submit,this),this.set_edu_email=e(this.set_edu_email,this),this.disable_edu_validation=e(this.disable_edu_validation,this),this.subscriptions=[],this.majors=ko.observable(),this.initialized=ko.observable(!1),this.vm={response:this.props.response,submit:this.submit,majors:this.majors,disable_submit:ko.observable(!0),edu_email:ko.observable(!1),disable_edu_email_validation:ko.observable(!1),disable_edu_validation:this.disable_edu_validation,initialized:this.initialized,education_levels:ko.observableArray(this.props.education_levels),student_name:this.props.student_name,user_logged_in:this.props.user_logged_in,kiosk_mode:this.props.kiosk_mode,kiosk_mode_survey_id:this.props.kiosk_mode_survey_id,logged_out_single_response:this.props.logged_out_single_response,needs_to_agree_to_tos:this.props.needs_to_agree_to_tos,knowledge_source_typeahead_options:{path:"/schools/"+Handshake.passed.current_user_institution_id+"/knowledge_sources"}},this.subscriptions.push(this.props.response.primary_major_id.subscribe(this.set_disable_submit)),this.subscriptions.push(this.props.response.education_level_id.subscribe(this.set_disable_submit)),this.subscriptions.push(this.props.response.graduation_date.subscribe(this.set_disable_submit)),this.subscriptions.push(this.props.response.email_address.subscribe(this.set_edu_email)),this.subscriptions.push(this.props.response.email_address.subscribe(this.set_disable_submit)),this.subscriptions.push(this.vm.majors.subscribe((i=this,function(e){var t;return t=null!=e?e.split(","):void 0,i.props.response.major_ids(t),i.set_disable_submit()}))),this.bachelors_education_level=_(this.vm.education_levels()).findWhere({behavior_identifier:"Bachelors"}),this.props.response.education_level_id()||this.props.response.education_level_id(null!=(s=this.bachelors_education_level)?s.id:void 0),this.vm.primary_major_id_select2_options={url:this.props.route_for_first_destination_resource("majors"),placeholder:"Program of Study",infinite_scroll:!0,per_page:20,dataFunction:(n=this,function(e,t){return{school_id:n.props.school_id,query:e,paginated_search:!0,page:t,token:n.props.token_param}}),initial_value:this.props.response.primary_major()},this.vm.major_ids_select2_options={url:this.props.route_for_first_destination_resource("majors"),placeholder:"Program of Study",initial_value:this.props.response.majors(),infinite_scroll:!0,dataFunction:(o=this,function(e,t){return{school_id:o.props.school_id,query:e,paginated_search:!0,page:t,token:o.props.token_param}}),full_data:this.props.response.majors},this.vm.education_level_id_select2_options={placeholder:"Degree"},this.initialized(!0),this.set_disable_submit()}return t.prototype.disable_edu_validation=function(){return this.vm.disable_edu_email_validation(!0),this.set_edu_email()},t.prototype.set_edu_email=function(){return this.vm.edu_email(!this.vm.disable_edu_email_validation()&&endsWith(this.vm.response.email_address(),Handshake.passed.university_email_tld)),this.set_disable_submit()},t.prototype.submit=function(){var e;if(this.form_is_valid())return("Career Services"!==Handshake.passed.current_user_type||this.props.kiosk_mode)&&this.vm.response.status("in_progress"),this.vm.response.isPersisted()?this.vm.response.save(this.callback):(e={},this.vm.response.using_first_destination_resources_controller()&&(e.token=this.props.token_param,e.source_email_date_id=this.props.source_email_date_id,e.mass_email_id=this.props.mass_email_id),this.vm.response.create(this.callback,null,e))},t.prototype.callback=function(){return this.props.initialize_survey()},t.prototype.set_disable_submit=function(){return this.vm.disable_submit(!this.form_is_valid())},t.prototype.form_is_valid=function(){return!this.vm.edu_email()&&(!!this.props.response.primary_major_id.valid()&&(!!this.props.response.education_level_id.valid()&&(!!this.props.response.graduation_date.valid()&&!!this.props.response.email_address.valid())))},t.prototype.dispose=function(){return _(this.subscriptions).each(function(e){return e.dispose()})},t}(),Handshake.FirstDestinationSurveyGraduatePreSurvey=function(){function t(t){var s,i,n,o;this.props=t,this.dispose=e(this.dispose,this),this.callback=e(this.callback,this),this.submit=e(this.submit,this),this.disable_edu_validation=e(this.disable_edu_validation,this),this.subscriptions=[],this.majors=ko.observable(),this.initialized=ko.observable(!1),this.vm={response:this.props.response,submit:this.submit,majors:this.majors,initialized:this.initialized,student_name:this.props.student_name,user_logged_in:this.props.user_logged_in,logged_out_single_response:this.props.logged_out_single_response,kiosk_mode:this.props.kiosk_mode,kiosk_mode_survey_id:this.props.kiosk_mode_survey_id,needs_to_agree_to_tos:this.props.needs_to_agree_to_tos,custom_specialty_major:ko.observable(!1),survey_type:this.props.survey_type,disable_edu_validation:this.disable_edu_validation,disable_edu_email_validation:ko.observable(!1),university_email_tld:this.props.university_email_tld,program_types:[{name:"",value:null},{name:"In Person",value:"in_person"},{name:"Online",value:"online"},{name:"Hybrid (40% - 60% in person meetings)",value:"hybrid"}],primary_major_categories:[{name:"",value:null},{name:"Technical",value:"technical"},{name:"Business",value:"business"},{name:"Other",value:"other"}],enable_fds_survey_types:Handshake.passed.current_user_feature_flags["fds-survey-types"]},this.vm.response.primary_major_id.extend({validate:{name:"primary_major_id",resource:this.vm.response,validations:{presence:!0}}}),"full_time_mba"!==this.props.survey_type()&&"specialty_masters"!==this.props.survey_type()||this.vm.response.primary_major_category.extend({validate:{name:"primary_major_category",resource:this.vm.response,validations:{presence:!0}}}),this.vm.response.years_of_professional_experience.extend({validate:{name:"years_of_professional_experience",resource:this.vm.response,validations:{presence:!0}}}),this.vm.response.graduate_program_months.extend({validate:{name:"graduate_program_months",resource:this.vm.response,validations:{presence:!0}}}),this.vm.response.graduate_program_type.extend({validate:{name:"graduate_program_type",resource:this.vm.response,validations:{presence:!0}}}),this.vm.edu_email=ko.computed((s=this,function(){return!s.vm.disable_edu_email_validation()&&s.vm.response.email_address()&&endsWith(s.vm.response.email_address(),s.vm.university_email_tld)})),this.vm.disable_submit=ko.computed((i=this,function(){var e;return!(!i.vm.edu_email()&&i.vm.response.graduation_date.valid()&&i.vm.response.email_address.valid()&&i.vm.response.primary_major_id.valid()&&("part_time_mba"===i.props.survey_type()||("full_time_mba"===(e=i.props.survey_type())||"specialty_masters"===e)&&i.vm.response.primary_major_category.valid())&&i.vm.response.years_of_professional_experience.valid()&&i.vm.response.graduate_program_months.valid()&&i.vm.response.graduate_program_type.valid()&&("specialty_masters"!==i.props.survey_type()||i.vm.response.graduate_specialty_major_id()||i.vm.response.graduate_specialty_major_name()))})),this.vm.primary_major_id_select2_options={url:this.props.route_for_first_destination_resource("majors"),placeholder:"Program of Study",infinite_scroll:!0,per_page:20,dataFunction:(n=this,function(e,t){return{school_id:n.props.school_id,query:e,paginated_search:!0,page:t,token:n.props.token_param}}),initial_value:this.props.response.primary_major()},this.vm.graduate_specialty_major_id_select2_options={url:this.props.route_for_first_destination_resource("majors"),placeholder:"Graduate Program of Study",infinite_scroll:!0,per_page:20,dataFunction:(o=this,function(e,t){return{school_id:o.props.school_id,query:e,paginated_search:!0,page:t,token:o.props.token_param}}),initial_value:this.props.response.graduate_specialty_major()},this.initialized(!0)}return t.prototype.disable_edu_validation=function(){return this.vm.disable_edu_email_validation(!0)},t.prototype.submit=function(){var e
;if(!this.vm.disable_submit())return("Career Services"!==Handshake.passed.current_user_type||this.props.kiosk_mode)&&this.vm.response.status("in_progress"),this.vm.response.isPersisted()?this.vm.response.save(this.callback):(e={},this.vm.response.using_first_destination_resources_controller()&&(e.token=this.props.token_param,e.source_email_date_id=this.props.source_email_date_id,e.mass_email_id=this.props.mass_email_id),this.vm.response.create(this.callback,null,e))},t.prototype.callback=function(){return this.props.initialize_survey()},t.prototype.dispose=function(){return _(this.subscriptions).each(function(e){return e.dispose()})},t}(),Handshake.FirstDestinationSurveyPages.EmploymentType=function(t){function i(t){var s,n;this.props=t,this.decorate_employment_types=e(this.decorate_employment_types,this),i.__super__.constructor.call(this,this.props),this.vm.employment_types=ko.observableArray(),this.props.set_graph("employment_types",{employment_types:this.vm.employment_types}),$.getJSON(this.props.route_for_first_destination_resource("employment_types"),(s=this,function(e){var t,i;return i=_(e.employment_types).filter(function(e){return-1!==["Full-Time","Part-Time"].indexOf(e.name)}),t=s.decorate_employment_types(i),s.vm.employment_types(t),s.props.finish_loading()})),this.subscriptions.push(this.vm.response.employment_type_id.subscribe((n=this,function(e){var t;if(e)return t=_(n.vm.employment_types()).findWhere({id:e}),n.vm.response.employment_type_name(t.name)})))}return s(i,t),i.slug="employment-type",i.prototype.decorate_employment_types=function(e){return _(e).map((t=this,function(e){var s;return e.icon_url=null!=(s=_(t.props.employment_type_icons).findWhere({name:e.name}))?s.icon_url:void 0,e}));var t},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.EmploymentCategory=function(t){function i(t){var s;this.props=t,this.set_employment_category_name=e(this.set_employment_category_name,this),this.decorate_employment_categories=e(this.decorate_employment_categories,this),this.set_employment_categories=e(this.set_employment_categories,this),i.__super__.constructor.call(this,this.props),this.vm.employment_categories=ko.observableArray(),this.props.disable_first_destination_resources_controller?this.vm.response.relevant_employment_categories().then(this.set_employment_categories):$.getJSON(this.props.route_for_first_destination_resource("employment_categories"),(s=this,function(e){var t,i;return t=-1!==["Masters","Doctorate","Postdoctoral Studies"].indexOf(s.vm.response.education_level_name()),i=_(e.employment_categories).filter(function(e){switch(!1){case"Faculty Tenure"!==e.name:return t&&"Full-Time"===s.vm.response.employment_type_name();case"Faculty Non-Tenure"!==e.name:return t;case"Fellowship"!==e.name:return!1;default:return!0}}),s.set_employment_categories(i)}))}return s(i,t),i.slug="employment-category",i.prototype.set_employment_categories=function(e){var t,s;return t=this.decorate_employment_categories(e),this.props.set_graph("employment_categories",{employment_categories:t}),this.vm.employment_categories(t),this.props.finish_loading(),this.set_employment_category_name(),this.subscriptions.push(this.vm.response.employment_category_id.subscribe((s=this,function(){return s.set_employment_category_name()})))},i.prototype.decorate_employment_categories=function(e){return _(e).map((t=this,function(e){var s;return"Other"===e.name&&(e.input_value=t.vm.response.other_employment_category_name,delete e.icon_url),"Organization"===e.name?e.display_name="Organization/Company":e.display_name=e.name,e.icon_url=null!=(s=_(t.props.employment_category_icons).findWhere({name:e.name}))?s.icon_url:void 0,e}));var t},i.prototype.set_employment_category_name=function(){var e,t;return t=null!=(e=_(this.vm.employment_categories()).findWhere({id:this.vm.response.employment_category_id()}))?e.name:void 0,this.vm.response.employment_category_name(t)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.JobFoundThroughHandshake=function(t){function i(t){var s,n,o,r;this.props=t,this.set_job_function_from_job=e(this.set_job_function_from_job,this),this.select_application=e(this.select_application,this),this.not_found_through_handshake=e(this.not_found_through_handshake,this),i.__super__.constructor.call(this,this.props),s={location:this.vm.response.location,object_type:"job",place_types:["(cities)"],placeholder:"Select a city",disable_custom_input:!0},this.addLocationView=new Handshake.Locations.AddLocationView(s),this.vm.applications=ko.observableArray(),this.vm.select_application=this.select_application,this.vm.not_found_through_handshake=this.not_found_through_handshake,this.props.set_graph("response_types"),n={page:1,per_page:300,query:"",applicable_type:"Job",user_id:this.vm.response.first_destination_recipient_user_id(),simple_search:!0},0===this.props.applications_count?this.set_applications([]):$.getJSON("/applications",n,(r=this,function(e){var t;return r.applications=e,t=_.pluck(r.applications,"applicable_employer_id"),$.getJSON(r.props.route_for_first_destination_resource("employers"),{ids:t},function(e){return r.applications=_.map(r.applications,function(t){return t.employer=_(e.results).findWhere({id:t.applicable_employer_id})||{},t}),r.set_applications(r.applications)})})).fail((o=this,function(){return o.set_applications([])}))}return s(i,t),i.slug="job-found-through-handshake",i.prototype.not_found_through_handshake=function(){return this.vm.response.found_through_handshake(!1),this.vm.response.application_id(null),this.vm.response&&this.vm.response.location||this.vm.response.location(new Handshake.Locations.Location),this.props.submit()},i.prototype.select_application=function(e){var t;if(this.vm.response.employer_id(null!=e?e.applicable_employer_id:void 0),this.vm.response.employer_name(null!=e?e.applicable_employer_name:void 0),null!=e?e.applicable_employer_id:void 0)return this.props.start_loading(),new Handshake.Jobs.Job({id:null!=e?e.original_job_id:void 0}).fetch((t=this,function(s){return t.vm.response.found_through_handshake(!0),t.vm.response.application_id(e.id),t.vm.response.employer_industry_id(s.job.employer_industry_id),t.set_job_function_from_job(s.job),t.props.submit()}))},i.prototype.set_job_function_from_job=function(e){if(e.job_function_ids.length)return this.vm.response.job_function_id(_(e.job_function_ids).first())},i.prototype.set_applications=function(e){return e.length||this.not_found_through_handshake(),this.vm.applications(e),this.props.finish_loading()},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.Employer=function(t){function i(t){var s,n,o,r;this.props=t,this.set_employer_information=e(this.set_employer_information,this),this.set_employer_name=e(this.set_employer_name,this),this.set_employer_graph=e(this.set_employer_graph,this),i.__super__.constructor.call(this,this.props),this.set_employer_graph(),this.vm.set_employer_name=this.set_employer_name,this.vm.set_employer_information=this.set_employer_information,this.vm.show_employer_typeahead=ko.observable(this.vm.response.employer_name()&&!this.vm.response.employer_id()),this.vm.employer_industry_select2_options={url:this.props.route_for_first_destination_resource("industries"),placeholder:"Employer Industry",full_data:(n=this,function(e){return e?(n.vm.response.employer_industry_id(e.id),n.vm.response.employer_industry_name(e.name)):{id:n.vm.response.employer_industry_id(),name:n.vm.response.employer_industry_name()}})},this.vm.employer_typeahead_options={path:this.props.route_for_first_destination_resource("employers"),dataKey:"results",onChange:this.set_employer_information},this.vm.employer_select2_options={placeholder:"Select an employer",resultFormatFunction:Handshake.Helpers.logoFormatSelection,url:this.props.route_for_first_destination_resource("employers"),full_data:(o=this,function(e){return e?o.set_employer_information(e):{id:o.vm.response.employer_id(),name:o.vm.response.employer_name()}})},s={location:this.vm.response.location,object_type:"job",place_types:["(cities)"],placeholder:"Select a city",disable_custom_input:!0},this.addLocationView=new Handshake.Locations.AddLocationView(s),"part_time_mba"===this.props.survey.survey_type()&&$.getJSON(this.props.route_for_first_destination_resource("employment_categories"),(r=this,function(e){return r.organization_employment_category=_(e.employment_categories).findWhere({name:"Organization"}),r.vm.response.employment_category_id(r.organization_employment_category.id)})),this.props.finish_loading()}return s(i,t),i.slug="employer",i.prototype.set_employer_graph=function(){var e;return e={donut_graph_title:"working/going to work here",bar_graph_title:"Employers at your institution"},this.props.set_graph("employers",e)},i.prototype.set_employer_name=function(e){return this.vm.response.employer_name(e.value)},i.prototype.set_employer_information=function(e){if(this.vm.response.employer_name(e.name),this.vm.response.employer_id(e.id),this.vm.response.employer_industry_id(e.industry_id),e.industry_id)return this.vm.response.employer_industry_name(e.industry.name)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.Location=function(t){function i(t){var s;this.props=t,this.set_location_graph=e(this.set_location_graph,this),i.__super__.constructor.call(this,this.props),s={location:this.vm.response.location,object_type:"job",place_types:["(cities)"],placeholder:"Select a city",disable_custom_input:!0},this.addLocationView=new Handshake.Locations.AddLocationView(s),this.set_location_graph(),this.props.finish_loading()}return s(i,t),i.slug="location",i.prototype.set_location_graph=function(){var e;return e={},"Military"===this.vm.response.first_destination_response_type_name()&&(e.donut_graph_title="serving here",e.bar_graph_title="locations for students in your class"),"Volunteering"===this.vm.response.first_destination_response_type_name()?(e.donut_graph_title="volunteering here",e.bar_graph_title="locations for students in your class"):(e.donut_graph_title="working/going to work here",e.bar_graph_title="work locations for students in your class"),this.props.set_graph("locations",e)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.JobInformation=function(t){function i(t){var s;this.props=t,this.set_job_position_name=e(this.set_job_position_name,this),i.__super__.constructor.call(this,this.props),this.vm.show_is_internship=ko.observable(this.vm.response.is_internship()),this.vm.job_position_typeahead_options={path:this.props.route_for_first_destination_resource("job_roles"),dataKey:"job_roles",onChange:this.set_job_position_name},this.vm.employed_during_education_options=[{value:!0,display:"Yes"},{value:!1,display:"No"}],this.vm.is_internship_options=[{value:!0,display:"Yes"},{value:!1,display:"No"}],this.vm.job_function_select2_options={url:this.props.route_for_first_destination_resource("job_functions"),placeholder:"Job Function",initial_value:{id:this.vm.response.job_function_id(),name:this.vm.response.job_function_name()}},this.props.set_graph("job_functions",{donut_graph_title:"with the same job function",bar_graph_title:"job functions at your institution"}),$.getJSON(this.props.route_for_first_destination_resource("employment_categories"),(s=this,function(){var e;return e=["Masters","Doctorate","Postdoctoral Studies"],s.vm.show_is_internship(-1===e.indexOf(s.vm.response.education_level_name())),s.props.finish_loading()}))}return s(i,t),i.slug="job-information",i.prototype.set_job_position_name=function(e){return this.vm.response.job_position_name(e.name)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.Compensation=function(t){function i(t){var s,n,o,r,a,c,l,u;this.props=t,this.set_salary_percentile=e(this.set_salary_percentile,this),this.clear_salary=e(this.clear_salary,this),this.show_compensation_modal=e(this.show_compensation_modal,this),i.__super__.constructor.call(this,this.props),this.props.format_dates(),this.not_enough_data=ko.observable(),this.vm.pay_schedules=ko.observableArray(),this.vm.salary_percentile=ko.observable(),this.vm.salary_percentile_message=ko.observable(),this.pay_schedule_name=ko.computed((n=this,function(){if(n.vm.pay_schedules().length&&n.vm.response.pay_schedule_id())return _(n.vm.pay_schedules()).findWhere({id:n.vm.response.pay_schedule_id()}).name})),s=ko.computed((o=this,function(){if(o.pay_schedule_name()&&o.vm.response.compensation_salary())switch(o.pay_schedule_name()){case"Hourly Wage":return 40*o.vm.response.compensation_salary()*52;case"Monthly Stipend":return 12*o.vm.response.compensation_salary();default:return o.vm.response.compensation_salary()}})),this.props.set_graph("accept_date"),$.getJSON(this.props.route_for_first_destination_resource("pay_schedules"),(r=this,function(e){return r.vm.pay_schedules(e.pay_schedules),r.props.finish_loading()})),this.salary_is_zero=ko.computed((a=this,function(){return 0===parseFloat(a.vm.response.compensation_salary())})),this.button_text=ko.computed((c=this,function(){return c.salary_is_zero()?"Ok":"No"})),this.show_second_button=ko.computed((l=this,function(){return!l.salary_is_zero()})),this.warning_text=ko.computed((u=this,function(){var e,t;if(t=Handshake.Helpers.numberWithCommas(parseFloat(u.vm.response.compensation_salary()).toFixed(2)),u.salary_is_zero())return"Salary must be greater than $"+t;switch(e=Handshake.Helpers.numberWithCommas(parseFloat(s()).toFixed(2)),u.pay_schedule_name()){case"Monthly Stipend":return"You entered a monthly stipend of $"+t+", which is a yearly total of $"+e+" assuming 12 months worked in a year. Is this monthly stipend correct?";case"Hourly Wage":return"You entered a hourly wage of $"+t+", which is a yearly total of $"+e+" assuming 40 hours per week and 52 weeks per year. Is this hourly wage correct?";case"Annual Salary":return"You entered an annual salary of $"+t+". Is this correct?"}})),this.pay_schedule_name.subscribe(this.show_compensation_modal)}return s(i,t),i.slug="compensation",i.prototype.show_compensation_modal=function(){var e,t,s;if(!this.vm.response.compensation_salary())return!1;if(e=this.vm.response.compensation_salary(),s=!1,!(t=this.vm.response.compensation_currency())||"USD"===t)switch(this.pay_schedule_name()){case"Monthly Stipend":s=e<100||e>5e3;break;case"Hourly Wage":s=e<8||e>50;break;case"Annual Salary":s=e<5e3||e>2e5;break;default:s=!1}return s?$("#compensation-warning-modal").modal("show"):void 0},i.prototype.clear_salary=function(){return this.vm.response.compensation_salary(""),$("#compensation-warning-modal").modal("hide")},i.prototype.set_salary_percentile=function(e){var t;if(!isNaN(parseInt(e)))return this.vm.response.statistics("compensation",{query:e}).then((t=this,function(e){var s;return t.not_enough_data(e.not_enough_data),t.vm.salary_percentile(null!=(s=e.statistics)?s.percentile:void 0),e.not_enough_data?t.vm.salary_percentile_message("Not enough data to determine percentile."):t.vm.salary_percentile_message("You are in the "+Handshake.Helpers.ordinalize(e.statistics.percentile)+" percentile.")}))},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.JobDate=function(t){function i(t){this.props=t,this.response_type_name=e(this.response_type_name,this),i.__super__.constructor.call(this,this.props),this.props.format_dates(),this.vm.title="Tell us about your "+this.response_type_name()+" offer",this.props.set_graph("accept_date"),this.props.finish_loading()}return s(i,t),i.slug="job-dates",i.prototype.response_type_name=function(){if(this.vm.response.is_fellowship())return"fellowship";switch(this.vm.response.first_destination_response_type_name()){case"Working":return"job";default:return this.vm.response.first_destination_response_type_name().toLowerCase()}},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.VolunteerEmployer=function(t){function i(t){var s,n;this.props=t,this.set_employer_information=e(this.set_employer_information,this),this.set_employer_name=e(this.set_employer_name,this),this.set_employer_graph=e(this.set_employer_graph,this),i.__super__.constructor.call(this,this.props),this.set_employer_graph(),this.vm.set_employer_name=this.set_employer_name,this.vm.show_employer_typeahead=ko.observable(this.vm.response.employer_name()&&!this.vm.response.employer_id()),this.vm.employer_typeahead_options={path:this.props.route_for_first_destination_resource("employers"),params:{simple_search:!0},onChange:this.set_employer_information},this.vm.employer_select2_options={placeholder:"Select an employer",resultFormatFunction:Handshake.Helpers.logoFormatSelection,url:this.props.route_for_first_destination_resource("employers"),full_data:(n=this,function(e){return e?n.set_employer_information(e):{id:n.vm.response.employer_id(),name:n.vm.response.employer_name()}})},s={location:this.vm.response.location,object_type:"job",place_types:["(cities)"],placeholder:"Select a city",disable_custom_input:!0},this.addLocationView=new Handshake.Locations.AddLocationView(s),this.props.finish_loading()}return s(i,t),i.slug="volunteer-employer",i.prototype.set_employer_graph=function(){var e;return e={donut_graph_title:"volunteering here",bar_graph_title:"organizations at your institution"},this.props.set_graph("employers",e)},i.prototype.set_employer_name=function(e){return this.vm.response.employer_name(e.value)},i.prototype.set_employer_information=function(e){return this.vm.response.employer_name(e.name),this.vm.response.employer_id(e.id)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.ContinuingEducationMajor=function(t){function i(t){var s;this.props=t,this.set_continuing_education_major_graph=e(this.set_continuing_education_major_graph,this),i.__super__.constructor.call(this,this.props),this.vm.set_major_name=(s=this,function(e){return s.vm.response.continuing_education_major_name(e.value)}),this.vm.continuing_education_major_typeahead_options={path:this.props.route_for_first_destination_resource("majors"),params:{simple_search:!0}},this.set_continuing_education_major_graph(),this.props.finish_loading()}return s(i,t),i.slug="continuing-education-major",i.prototype.set_continuing_education_major_graph=function(){var e;return e={donut_graph_title:"in the same major",bar_graph_title:"majors of study for students in your class"},this.props.set_graph("majors",e)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.ContinuingEducationLevel=function(t){function i(t){var s;this.props=t,this.set_education_level_graph=e(this.set_education_level_graph,this),i.__super__.constructor.call(this,this.props),s="undergraduate"===this.props.survey.survey_type()?["High School"]:["High School","Associates","Certificate","Advanced Certificate","Bachelors"],this.vm.education_level_id_select2_options={url:this.props.route_for_first_destination_resource("education_levels"),placeholder:"Degree",results_filter:function(e){return _.filter(e,function(e){return!_.contains(s,e.name)})},initial_value:{id:this.vm.response.continuing_education_education_level_id(),name:this.vm.response.continuing_education_education_level_name()}},this.set_education_level_graph(),this.props.finish_loading()}return s(i,t),i.slug="continuing-education-level",i.prototype.set_education_level_graph=function(){var e;return e={donut_graph_title:"pursuing the same degree",bar_graph_title:"degrees for students in your class"},this.props.set_graph("degrees",e)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.ContinuingEducation=function(t){function i(t){var s,n,o;this.props=t,this.set_continuing_education_graph=e(this.set_continuing_education_graph,this),i.__super__.constructor.call(this,this.props),s={location:this.vm.response.location,object_type:"education",place_types:["(cities)"],placeholder:"Select a city",disable_custom_input:!0},this.addLocationView=new Handshake.Locations.AddLocationView(s),this.vm.continuing_education_school_name_select2_options={url:this.props.route_for_first_destination_resource("continuing_education_schools"),placeholder:"Name of Institution",results_property:"results",infinite_scroll:!0,full_data:(n=this,function(e){return e?n.vm.response.continuing_education_school_name(e.name):{id:n.vm.response.continuing_education_school_name(),name:n.vm.response.continuing_education_school_name()}})},this.vm.continuing_education_school_name_typeahead_options={path:this.props.route_for_first_destination_resource("continuing_education_schools"),dataKey:"results",onChange:(o=this,function(e){return o.vm.response.continuing_education_school_name(e.name)}),hint:!1},this.set_continuing_education_graph(),this.props.finish_loading()}return s(i,t),i.slug="continuing-education",i.prototype.set_continuing_education_graph=function(){var e;return e={donut_graph_title:"continuing their education here",bar_graph_title:"institutions for students in your class"},this.props.set_graph("schools",e)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.FellowshipType=function(t){function i(t){var s,n;this.props=t,this.set_selected_fellowship_type=e(this.set_selected_fellowship_type,this),i.__super__.constructor.call(this,this.props),this.props.set_graph("response_types"),this.vm.fellowship_types=ko.observableArray([{id:"Educational",name:"Educational"},{id:"Work",name:"Work"}]),this.vm.fellowship_type=ko.observable(),this.working_response=_(this.props.first_destination_response_types()).findWhere({name:"Working"}),this.education_response=_(this.props.first_destination_response_types()).findWhere({name:"Continuing Education"}),$.getJSON(this.props.route_for_first_destination_resource("employment_categories"),(s=this,function(e){return s.fellowship_employment_category=_(e.employment_categories).findWhere({name:"Fellowship"}),s.set_selected_fellowship_type(),s.props.finish_loading()})),this.subscriptions.push(this.vm.fellowship_type.subscribe((n=this,function(e){return"Work"===e.name?(n.vm.response.employment_category_id(n.fellowship_employment_category.id),n.vm.response.first_destination_response_type_id(n.working_response.id),n.vm.response.first_destination_response_type_name(n.working_response.name)):"Educational"===e.name?(n.vm.response.employment_category_id(null),n.vm.response.first_destination_response_type_id(n.education_response.id),n.vm.response.first_destination_response_type_name(n.education_response.name)):void 0})))}return s(i,t),i.slug="fellowship-type",i.prototype.set_selected_fellowship_type=function(){return this.vm.response.first_destination_response_type_name()===this.working_response.name?this.vm.fellowship_type(_(this.vm.fellowship_types()).findWhere({name:"Work"})):this.vm.response.first_destination_response_type_name()===this.education_response.name?this.vm.fellowship_type(_(this.vm.fellowship_types()).findWhere({name:"Educational"})):void 0},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.FellowshipName=function(e){function t(e){this.props=e,t.__super__.constructor.call(this,this.props),this.props.set_graph("response_types"),this.props.finish_loading()}return s(t,e),t.slug="fellowship-name",t}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.MilitaryBranch=function(t){function i(t){var s;this.props=t,this.decorate_military_branches=e(this.decorate_military_branches,this),i.__super__.constructor.call(this,this.props),this.vm.military_branches=ko.observableArray(),this.props.set_graph("military_branches",{military_branches:this.vm.military_branches}),$.getJSON(this.props.route_for_first_destination_resource("military_branches"),(s=this,function(e){var t;return t=s.decorate_military_branches(e.military_branches),s.vm.military_branches(t),s.props.finish_loading()}))}return s(i,t),i.slug="military-branch",i.prototype.decorate_military_branches=function(e){return _(e).map((t=this,function(e){var s;return e.icon_url=null!=(s=_(t.props.military_branch_icons).findWhere({name:e.name}))?s.icon_url:void 0,e}));var t},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.MilitaryRank=function(e){function t(e){var s;this.props=e,t.__super__.constructor.call(this,this.props),this.vm.military_ranks=ko.observableArray(),this.props.set_graph("military_ranks",{military_ranks:this.vm.military_ranks}),$.getJSON(this.props.route_for_first_destination_resource("military_ranks"),(s=this,function(e){return s.vm.military_ranks(e.military_ranks),s.props.finish_loading()}))}return s(t,e),t.slug="military-rank",t}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.MilitaryInformation=function(t){function i(t){this.props=t,this.set_location_graph=e(this.set_location_graph,this),i.__super__.constructor.call(this,this.props),this.set_location_graph(),this.vm.specialization_label="What is your "+this.vm.response.military_branch_name()+" specialization?",this.props.finish_loading()}return s(i,t),i.slug="military-information",i.prototype.set_location_graph=function(){var e;return e={donut_graph_title:"serving here",bar_graph_title:"locations for students in your class"},this.props.set_graph("locations",e)},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.StillLooking=function(t){function i(t){var s,n;this.props=t,this.decorate_seeking_options=e(this.decorate_seeking_options,this),i.__super__.constructor.call(this,this.props),this.props.set_graph("response_types"),this.vm.seeking_options=ko.observableArray(),$.getJSON(this.props.route_for_first_destination_resource("seeking_options"),(s=this,function(e){var t;return t=s.decorate_seeking_options(e.seeking_options),s.vm.seeking_options(t),s.props.finish_loading()})),this.subscriptions.push(this.vm.response.seeking_option_id.subscribe((n=this,function(e){var t;return t=_(n.vm.seeking_options()).findWhere({id:e}),n.vm.response.seeking_option_name(null!=t?t.name:void 0)})))}return s(i,t),i.slug="still-looking",i.prototype.decorate_seeking_options=function(e){return _(e).map((t=this,function(e){var s;return e.icon_url=null!=(s=_(t.props.seeking_option_icons).findWhere({name:e.name}))?s.icon_url:void 0,e}));var t},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.Postings=function(t){function i(t){var s,n,o,r;this.props=t,this.set_results=e(this.set_results,this),i.__super__.constructor.call(this,this.props),o=new Handshake.Postings.Posting,s=new Handshake.JobTypes.JobType,n={postings:ko.observableArray(),seeking_option_name:this.vm.response.seeking_option_name(),result_handler:new Handshake.Postings.SearchResultHandler},this.props.set_graph(!1),s.index((r=this,function(e){var t;return t=[_(e.job_types).findWhere({name:"Job"}).id],o.index(function(e){var t;return n.postings(Handshake.Resource.resourcesFromArray(e.results)),t=_.extend({},e,{favorite_jobs:r.props.favorite_jobs}),n.result_handler.update_job_data(t),r.set_results(n),r.props.finish_loading(),r.props.response.status("submitted"),r.props.response.save(r.props.finish_loading)},null,{"job.job_types":t})}))}return s(i,t),i.slug="postings",i.prototype.set_results=function(e){return this.props.set_secondary_content_component({name:"first-destination-response-posting-results",params:e})},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.NotSeeking=function(t){function i(t){var s,n;this.props=t,this.reset_other_text=e(this.reset_other_text,this),this.decorate_not_seeking_options=e(this.decorate_not_seeking_options,this),i.__super__.constructor.call(this,this.props),this.props.set_graph("response_types"),this.vm.not_seeking_options=ko.observableArray(),$.getJSON(this.props.route_for_first_destination_resource("not_seeking_options"),(s=this,function(e){var t;return t=s.decorate_not_seeking_options(e.not_seeking_options),s.vm.not_seeking_options(t),s.props.finish_loading()})),this.subscriptions.push(this.vm.response.not_seeking_option_id.subscribe((n=this,function(){return n.reset_other_text()})))}return s(i,t),i.slug="not-seeking",i.prototype.decorate_not_seeking_options=function(e){return _(e).map((t=this,function(e){var s;return"Other"===e.name&&(e.input_value=t.vm.response.not_seeking_option_name,delete e.icon_url),e.icon_url=null!=(s=_(t.props.not_seeking_option_icons).findWhere({name:e.name}))?s.icon_url:void 0,e}));var t},i.prototype.reset_other_text=function(){return _(this.vm.not_seeking_options()).findWhere({name:"Other"}).id!==this.vm.response.not_seeking_option_id()&&this.vm.response.not_seeking_option_name(null),this.props.set_graph("response_types")},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.TakeSurvey=function(t){function i(t){var s;this.props=t,this.survey_save_success=e(this.survey_save_success,this),i.__super__.constructor.call(this,this.props),this.take_survey_view=new Handshake.TakeSurveyView({redirectOnSubmit:!1,redirectToIndex:!1,callback:this.survey_save_success,use_finish_button:!0,survey_id:this.props.response.survey_id(),survey_response_id:this.props.response.survey_response_id(),previous_page_callback:this.props.go_back,starting_page:this.props.response.starting_survey_page_or_null()}),this.vm.school_name=this.props.school_name,this.take_survey_view.finishResponse=(s=this,function(){if(s.take_survey_view.completed())return s.props.response.survey_response(s.take_survey_view.survey_response()),s.props.response.save(s.survey_save_success)}),this.props.set_graph(!1),this.props.finish_loading()}return s(i,t),i.slug="take-survey",i.prototype.survey_save_success=function(e){return e.survey_response&&this.props.response.survey_response(Handshake.Resource.resourceFromObject(e.survey_response)),this.props.submit()},i}(Handshake.FirstDestinationSurveyPage),Handshake.FirstDestinationSurveyPages.Results=function(e){function t(e){this.props=e,t.__super__.constructor.call(this,this.props),this.props.finish_loading()}return s(t,e),t.slug="results",t}(Handshake.FirstDestinationSurveyPage)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.FirstDestinationSurveys={},Handshake.FirstDestinationSurveys.FirstDestinationSurvey=function(s){function i(t){var s,n,o;this.overview_statistics=e(this.overview_statistics,this),this.report_download=e(this.report_download,this),this.email_preview=e(this.email_preview,this),i.__super__.constructor.call(this,t),this.attributes({name:{},created_at:{},status:{send:!0},email_subject:{send:!0},custom_message:{send:!0},reminder_email_subject:{send:!0},reminder_custom_message:{send:!0},survey_type:{},first_destination_recipient_count:{},first_destination_recipient_responses_count:{},survey:{belongs_to:Handshake.Surveys.Survey},survey_id:{},survey_name:{},school_id:{},salary_information_required:{},hide_offer_day:{},submission_cutoff_date:{},working_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage},volunteering_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage},continuing_education_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage},military_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage},still_looking_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage},not_seeking_survey_page:{belongs_to:Handshake.SurveyPages.SurveyPage}}),this.has_skip_logic=ko.computed((s=this,function(){return null!=s.working_survey_page()&&s.working_survey_page().isPersisted()||null!=s.volunteering_survey_page()&&s.volunteering_survey_page().isPersisted()||null!=s.continuing_education_survey_page()&&s.continuing_education_survey_page().isPersisted()||null!=s.military_survey_page()&&s.military_survey_page().isPersisted()||null!=s.still_looking_survey_page()&&s.still_looking_survey_page().isPersisted()||null!=s.not_seeking_survey_page()&&s.not_seeking_survey_page().isPersisted()})),this.submission_cutoff_date_formatted=ko.computed({read:(o=this,function(){return Handshake.Helpers.toDateTimePicker(o.submission_cutoff_date())}),write:(n=this,function(e){return n.submission_cutoff_date(Handshake.Helpers.fromDateTimePicker(e))})})}return t(i,s),i.type="FirstDestinationSurvey",i.underscore="first_destination_survey",i.prototype.email_preview=function(e,t){return this.ajax_call({type:"POST",method:"email_preview",on_member:!0,action:"email_preview",data:e,success:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.report_download=function(e){return this.ajax_call({type:"POST",method:"report_download",on_member:!0,action:"report_download",success:function(t){if(_.isFunction(e))return e(t)}})},
i.prototype.overview_statistics=function(e){return this.ajax_call({type:"GET",method:"overview_statistics",on_member:!0,action:"overview_statistics",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.FirstDestinationSurveyReporting=function(){function t(t){this.props=t,this.report_download=e(this.report_download,this),this.unmount=e(this.unmount,this),this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,this.first_destination_survey=Handshake.Resource.resourceFromObject(this.props.first_destination_survey),this.looker_keepalive=new Handshake.LookerKeepalive(this.props.looker_session_length_seconds)}return t.prototype.unmount=function(){return this.looker_keepalive.unmount()},t.prototype.report_download=function(){return this.first_destination_survey.report_download(this.ajax_download_view.bulkActionSuccess)},t}(),Handshake.FirstDestinationSurveyIndex=function(){function t(t){this.props=t,this.search_callback=e(this.search_callback,this),this.searchable=new Handshake.Searchable($("#search-form"),"first_destination_survey",this.search_callback),this.searchable.initialSetup("FirstDestinationSurvey"),this.first_destination_surveys=ko.observableArray()}return t.prototype.search_callback=function(e){return this.first_destination_surveys(Handshake.Resource.resourcesFromArray(e.results))},t}(),Handshake.FirstDestinationBulkAdd=function(){function t(t){this.props=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.success=e(this.success,this),this.perform=e(this.perform,this),this.onSelectionChange=e(this.onSelectionChange,this),this.fds_survey_selected=e(this.fds_survey_selected,this),this.searchable=this.props.searchable,this.modal_element=$("#fds-survey-modal"),this.fds_survey_id=ko.observable(),this.fds_campaign_id=ko.observable(!1),this.show_cohort_selector=ko.observable(!1),this.show_cohort_warning=ko.observable(!1),this.select2_options={url:"/schools/"+this.props.school_id+"/first_destination_surveys",value:this.fds_survey_id},this.select2_cohort_options={}}return t.prototype.fds_survey_selected=function(){return!1!==this.fds_campaign_id()},t.prototype.onSelectionChange=function(e,t){return t.added.campaigns_present&&!0===t.added.enable_campaigns&&$("#fds-survey-cohort").length?(this.select2_cohort_options={url:"/first_destination_surveys/"+this.fds_survey_id()+"/campaigns",value:this.fds_campaign_id},ko.applyBindingsToNode(document.getElementById("fds-survey-cohort"),{select2_ajax:this.select2_cohort_options}),this.show_cohort_selector(!0),this.show_cohort_warning(!1)):t.added.campaigns_present&&!0===t.added.enable_campaigns?(this.show_cohort_selector(!1),this.show_cohort_warning(!0)):(this.fds_campaign_id(!1),this.show_cohort_selector(!1),this.show_cohort_warning(!1))},t.prototype.perform=function(){return this.fds_campaign_id()?this.searchable.performBulkAction({first_destination_survey_id:this.fds_survey_id(),first_destination_survey_campaign_id:this.fds_campaign_id()}):this.searchable.performBulkAction({first_destination_survey_id:this.fds_survey_id()}),!1},t.prototype.success=function(e){if(e.count>0)return Handshake.Helpers.notifySuccess("Successfully added the selected users to the First Destination Survey '"+e.name+"'.")},t.prototype.show_modal=function(){return this.modal_element.modal("show"),!1},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.GraduateProgramInterests={},Handshake.GraduateProgramInterests.GraduateProgramInterest=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({user_id:{send:!0},graduate_program_option_id:{send:!0}})}return e(s,t),s.type="GraduateProgramInterest",s.underscore="graduate_program_interest",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.HarassmentReports={},Handshake.HarassmentReports.HarassmentReport=function(s){function i(t){this.isValid=e(this.isValid,this),i.__super__.constructor.call(this,t),this.attributes({offender_type:{send:!0},offender_id:{send:!0},message:{send:!0}})}return t(i,s),i.type="HarassmentReport",i.underscore="harassment_report",i.prototype.isValid=function(){return null!=this.message()},i}(Handshake.Resource),Handshake.HarassmentReportsModal=function(){function t(t){this.submitReportSuccess=e(this.submitReportSuccess,this),this.submitReport=e(this.submitReport,this),this.offender_name=t.offender_name,this.plain_button=t.plain_button,this.initialized=!1,this.harassment_report=ko.observable(new Handshake.HarassmentReports.HarassmentReport),this.harassment_report().offender_type(t.offender_type),this.harassment_report().offender_id(t.offender_id())}return t.prototype.initializeHarassmentModal=function(){return this.initialized?this.showModal():(this.initialized=!0,$("#harassment-report-modal").modal())},t.prototype.submitReport=function(){return this.harassment_report().isValid()?this.harassment_report().create(this.submitReportSuccess):Handshake.Helpers.notifyError("Please describe the situation before proceeding.")},t.prototype.submitReportSuccess=function(e){if(e.success)return this.hideModal(),this.harassment_report().message(""),Handshake.Helpers.notifySuccess(e.message)},t.prototype.buttonStyle=function(){return this.plain_button?"btn btn-link":"btn btn-primary form-control"},t.prototype.showModal=function(){return $("#harassment-report-modal").modal("show")},t.prototype.hideModal=function(){return $("#harassment-report-modal").modal("hide")},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.Industries={},Handshake.Industries.Industry=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0}})}return e(s,t),s.type="Industry",s.underscore="industry",s.underscore_plural="industries",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InstitutionAttendees={},Handshake.InstitutionAttendees.InstitutionAttendee=function(s){function i(t){var s,n;this.reset=e(this.reset,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.resend_receipts=e(this.resend_receipts,this),this.add_by_consortium=e(this.add_by_consortium,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({attendable_id:{send:!0},attendable_type:{send:!0},attendable_name:{},institution_id:{send:!0},institution_type:{send:!0},school_approval_confirmed:{send:!0},institution_id_type:{},institution_name:{},institution_logo_url:{},payment_status:{},amount_due:{},total_paid:{},status:{},created_at:{},updated_at:{}}),this.institution_path=ko.computed((s=this,function(){return s.institution_id()?Handshake.Resource.resourceFromObject({id:s.institution_id(),type:s.institution_type()}).entity_path:null})),this.attendable_path=ko.computed((n=this,function(){return n.attendable_id()?Handshake.Resource.resourceFromObject({id:n.attendable_id(),type:n.attendable_type()}).entity_path:null}))}return t(i,s),i.type="InstitutionAttendee",i.underscore="institution_attendee",i.nested_methods=["new","create","index","add_by_consortium"],i.prototype.nested_route=function(){return this.attendable_path()},i.prototype.add_by_consortium=function(e,t){return this.ajax_call({type:"POST",method:"add_by_consortium",on_member:!1,data:e,action:"add_by_consortium",success:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.resend_receipts=function(e){return this.ajax_call({type:"POST",method:"resend_receipts",on_member:!0,action:"resend_receipts",success:function(t){return _.isFunction(e)&&e(t),window.Handshake.Helpers.notifySuccess("The receipts for this employer's charges have been resent.")}})},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.EditInstitutionAttendeeView=function(){function t(t){this.props=t,this.mark_as_invoiced=e(this.mark_as_invoiced,this),this.initialize_manage_invoice_modal=e(this.initialize_manage_invoice_modal,this),this.manually_record_charge=e(this.manually_record_charge,this),this.institution_attendees=ko.observableArray([]).trackHasItems(),this.attendable=ko.observable(Handshake.Resource.resourceFromObject(this.props.attendable)),this.institution_type=ko.observable(this.props.institution_type),this.payment_required=ko.observable(this.props.payment_required),this.institution_attendees(Handshake.Resource.resourcesFromArray(this.props.institution_attendees)),this.institutionAttendeesList=new Handshake.InstitutionAttendees.InstitutionAttendeesList({attendable:this.attendable(),institution_attendees:this.institution_attendees,institution_type:this.institution_type(),consortia_exist:this.props.consortia_exist&&"School"===this.institution_type()}),this.attendees_count_by_institution=this.props.attendees_count_by_institution,this.institution_id=ko.observable(),$("#manual-charge-modal").length>0&&(this.manualChargeForm=new Handshake.Charges.ManualChargeForm,this.manageInvoicesModal=new Handshake.Invoices.ManageInvoicesModal(null,this.mark_as_invoiced))}return t.prototype.manually_record_charge=function(e){return this.manualChargeForm.set_chargeable(ko.observable(e),e.institution_id(),e.institution_type()),$("#manual-charge-modal").modal("show")},t.prototype.initialize_manage_invoice_modal=function(e){return this.manageInvoicesModal.setInvoiceable(e),this.manageInvoicesModal.initialize()},t.prototype.mark_as_invoiced=function(e){var t;if(t=_(this.institution_attendees()).find(function(t){return t.id()===e.invoiceable.id}))return t.payment_status("invoiced")},t}(),Handshake.InstitutionAttendees.InstitutionAttendeesList=function(){function t(t){var s,i;this.props=t,this.removeHost=e(this.removeHost,this),this.choose_institution=e(this.choose_institution,this),this.choose_consortium=e(this.choose_consortium,this),this.toggleSchoolApprovalConfirm=e(this.toggleSchoolApprovalConfirm,this),this.cancelAdd=e(this.cancelAdd,this),this.urlFunction=e(this.urlFunction,this),this.consortiumSelect2Options=e(this.consortiumSelect2Options,this),this.institutionSelect2Options=e(this.institutionSelect2Options,this),this.removeAttendee=e(this.removeAttendee,this),this.setRemoveAttendee=e(this.setRemoveAttendee,this),this.cancelRemove=e(this.cancelRemove,this),this.is_a_host_or_owner=e(this.is_a_host_or_owner,this),this.attendable=this.props.attendable,this.institution_attendees=this.props.institution_attendees,this.consortia_exist=this.props.consortia_exist,this.school_approval_confirmed=ko.observable(!1),this.institution_id=ko.observable(),this.consortium_id=ko.observable(),this.institution_type=ko.observable(this.props.institution_type||"Employer"),this.removing_attendee=ko.observable(),this.show_core_schools=this.props.show_core_schools||!1,this.not_ids=ko.computed((s=this,function(){return _.map(s.institution_attendees(),function(e){return e.institution_id()})})),this.title=ko.computed((i=this,function(){var e;return e=1===i.institution_attendees().length?"":"s",i.institution_attendees().length+" "+i.institution_type()+e}))}return t.prototype.is_a_host_or_owner=function(e){return"Event"===this.attendable.type?this.attendable.owner_id_type()===e.institution_id_type()?"Owner":this.attendable.host_id_type()===e.institution_id_type()&&"Host":"CareerFair"===this.attendable.type&&(this.attendable.institution_id_type()===e.institution_id_type()&&"Owner and Host")},t.prototype.cancelRemove=function(){return this.removing_attendee(null)},t.prototype.setRemoveAttendee=function(e){return this.removing_attendee(e)},t.prototype.removeAttendee=function(){if(this.removing_attendee())return this.removeHost(this.removing_attendee())},t.prototype.institutionSelect2Options=function(){var e;return e={placeholder:"Select the "+this.institution_type()+" to invite",url:this.urlFunction,value:this.institution_id},this.show_core_schools&&$.extend(e,Handshake.CoreSchools.coreSchoolsSelect2Options),e},t.prototype.consortiumSelect2Options=function(){return{placeholder:"Select the Consortium to invite",url:"/consortia",value:this.consortium_id}},t.prototype.urlFunction=function(){var e;return e="",e=this.show_core_schools?"/employers/approved_core_schools":"/"+this.institution_type().toLowerCase()+"s",this.not_ids().length>0&&(e+="?not_ids="+this.not_ids()),e},t.prototype.cancelAdd=function(){return this.institution_id(null),this.consortium_id(null)},t.prototype.toggleSchoolApprovalConfirm=function(){var e;return e=$("#invite_button"),this.school_approval_confirmed(!this.school_approval_confirmed()),this.school_approval_confirmed()&&e.removeClass("disabled"),!0},t.prototype.choose_consortium=function(){var e,t;return e={attendable_id:this.attendable.id(),attendable_type:this.attendable.type,consortium_id:this.consortium_id()},new Handshake.InstitutionAttendees.InstitutionAttendee(e).add_by_consortium(e,(t=this,function(e){return t.institution_attendees(Handshake.Resource.resourcesFromArray(e.institution_attendees)),Handshake.Helpers.notifySuccess("Successfully added the members of the consortium.")}))},t.prototype.choose_institution=function(){var e,t,s;return t={attendable_id:this.attendable.id(),attendable_type:this.attendable.type,institution_id:this.institution_id(),institution_type:this.institution_type()},(e=new Handshake.InstitutionAttendees.InstitutionAttendee(t)).create((s=this,function(){return s.institution_attendees.push(e),Handshake.Helpers.notifySuccess("Successfully added "+e.institution_name()+"."),s.institution_id(null)}))},t.prototype.removeHost=function(e){return e.destroy((t=this,function(){return t.institution_attendees.remove(e),Handshake.Helpers.notifySuccess("Successfully removed "+e.institution_name()+".")}));var t},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InstitutionLabels={},Handshake.InstitutionLabels.InstitutionLabel=function(s){function i(t){var s,n,o;this.loadTypeDetails=e(this.loadTypeDetails,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},institution_id:{send:!0},institution_type:{send:!0},total_labelled:{},labellable_types:{array:!0,send:!0},label_type:{send:!0},archived:{send:!0},permitted_user_types:{send:!0},created_by_id:{},created_by:{belongs_to:Handshake.Users.User,send:!1}}),this.labellable_type_text=ko.computed((s=this,function(){return s.constructor.LABELLABLE_TYPE_OPTIONS.length===s.labellable_types().length?"All":s.labellable_types().join(", ")})),this.label_type_css=ko.computed((n=this,function(){switch(n.label_type()){case"normal":return"tag--primary";case"system":return"tag--default";case"public":return"tag--info"}})),this.type_details=ko.observableArray(),this.created_by_name=ko.computed((o=this,function(){return o.created_by().name()}))}return t(i,s),i.type="InstitutionLabel",i.underscore="institution_label",i.LABELLABLE_TYPE_OPTIONS=["User","Event","Job","Employer","Contact","InterviewSchedule","School","Registration","Experience","Room"],i.prototype.loadTypeDetails=function(e){return this.ajax_call({type:"GET",method:"type_details",on_member:!0,action:"type_details",success:(t=this,function(s){if(s.success&&(t.type_details(s.details),e))return e(s)})});var t},i}(Handshake.Resource),Handshake.ManageInstitutionLabelsView=function(){function t(t){var s,i;this.props=t,this.create_institution_label_callback=e(this.create_institution_label_callback,this),this.showEditModal=e(this.showEditModal,this),this.showCreateLabelModal=e(this.showCreateLabelModal,this),this.searchByLabels=e(this.searchByLabels,this),this.searchByType=e(this.searchByType,this),this.searchCallback=e(this.searchCallback,this),this.can_search=e(this.can_search,this),this.type_is_searchable=e(this.type_is_searchable,this),this.clickable_label_types=e(this.clickable_label_types,this),this.institution_labels=ko.observableArray(),this.searchable=new Handshake.Searchable($("#search-form"),"labels",this.searchCallback),s=Handshake.passed.current_user_type,this.use_university_index="Career Services"===s||"Admins"===s||"Mentors"===s,this.use_university_index?this.searchable.initialSetup("UniversityManageLabels"):this.searchable.initialSetup("ManageLabels"),this.selectedLabel=ko.observable(),this.show_archived=ko.computed((i=this,function(){return-1!==i.searchable.booleanView.getValues().indexOf("include_archived")})),this.editLabelView=new Handshake.InstitutionLabels.EditLabelView("All",null,this.create_institution_label_callback)}return t.prototype.UNSEARCHABLE_TYPES=["Registration","Room"],t.prototype.clickable_label_types=function(e){return _(e.labellable_types()).filter((t=this,function(e){return t.type_is_searchable(e)}));var t},t.prototype.type_is_searchable=function(e){return!_(this.UNSEARCHABLE_TYPES).contains(e)},t.prototype.can_search=function(e){return this.clickable_label_types(e).length>0},t.prototype.searchCallback=function(e){return this.institution_labels(Handshake.Resource.resourcesFromArray(e.results))},t.prototype.searchByType=function(e,t){var s,i;if(!_(this.UNSEARCHABLE_TYPES).contains(e)){switch(i=null,s=$.param({added_institution_labels:[t.id()]}),e){case"User":i="/students?"+s;break;case"InterviewSchedule":i="/interview_schedules?"+s;break;case"Job":i="School"===t.institution_type()?"/postings?"+s:"/jobs?"+s;break;case"Contact":case"Experience":case"Event":case"Employer":case"School":i="/"+e.toLowerCase()+"s?"+s}return i?window.open(i,"_blank"):(bugsnagClient.notify("Could not search for institution labels for type "+e),Handshake.Helpers.notifyError("Error trying to search for this label's items."))}},t.prototype.searchByLabels=function(e){if(0!==e.labellable_types().length)return 1===e.labellable_types().length?this.searchByType(e.labellable_types()[0],e):(e.loadTypeDetails(),this.selectedLabel(e),$("#details-institution-label").modal("show"))},t.prototype.showCreateLabelModal=function(){var e;return e=new Handshake.InstitutionLabels.InstitutionLabel({institution_id:this.props.institution.id,institution_type:this.props.institution.type}),this.editLabelView.setInstitutionLabel(e),$("#edit-institution-label").modal("show")},t.prototype.showEditModal=function(e){return this.editLabelView.setInstitutionLabel(e),$("#edit-institution-label").modal("show")},t.prototype.create_institution_label_callback=function(e){return this.institution_labels.unshift(e)},t}(),Handshake.InstitutionLabels.EditLabelView=function(){function t(t,s,i,n){var o,r;this.default_label_type=null!=t?t:"All",this.edit_callback=s,this.create_callback=null!=i?i:null,this.destroy_callback=null!=n?n:null,this.cancel=e(this.cancel,this),this.destroyLabel=e(this.destroyLabel,this),this.saveOrCreateInstitutionLabel=e(this.saveOrCreateInstitutionLabel,this),this.default_permitted_user_types=e(this.default_permitted_user_types,this),this.employee_user_type=e(this.employee_user_type,this),this.resetInstitutionLabel=e(this.resetInstitutionLabel,this),this.setInstitutionLabel=e(this.setInstitutionLabel,this),this.institution_label=ko.observable(new Handshake.InstitutionLabels.InstitutionLabel),null==this.create_callback&&(this.create_callback=this.edit_callback),null==this.destroy_callback&&(this.destroy_callback=this.edit_callback),this.labellable_type_options=ko.computed((o=this,function(){var e,t;return t=[{name:"All",value:(e=Handshake.InstitutionLabels.InstitutionLabel.LABELLABLE_TYPE_OPTIONS).join(",")}],o.institution_label().total_labelled()?t.concat(_.map(o.institution_label().labellable_types(),function(e){return{name:e,value:e}})):t.concat(_.map(e,function(e){return{name:e,value:e}}))})),this.csv_labellable_types=ko.observable(),_.each(this.labellable_type_options(),(r=this,function(e){if(e.name===r.default_label_type)return r.csv_labellable_types(e.value)})),this.label_type_options=ko.computed(function(){var e;return e=["normal","public"],_.map(e,function(e){return{name:capitalizeString(e),value:e}})})}return t.prototype.setInstitutionLabel=function(e){return this.institution_label(e),this.csv_labellable_types(e.labellable_types().join(","))},t.prototype.resetInstitutionLabel=function(){return this.institution_label(new Handshake.InstitutionLabels.InstitutionLabel),this.csv_labellable_types(null)},t.prototype.employee_user_type=function(e){return"School"===e?"Career Services":"Employer"===e?"Employers":void 0},t.prototype.default_permitted_user_types=function(){var e;return e=[this.employee_user_type(this.institution_label().institution_type())],"School"===this.institution_label().institution_type()&&"public"===this.institution_label().label_type()&&e.push("Students"),e},t.prototype.saveOrCreateInstitutionLabel=function(){return this.institution_label().labellable_types(this.csv_labellable_types().split(",")),this.institution_label().permitted_user_types(this.default_permitted_user_types()),this.institution_label().isPersisted()?this.institution_label().save((t=this,function(){if($("#edit-institution-label").modal("hide"),_.isFunction(t.edit_callback))return t.edit_callback(t.institution_label())})):this.institution_label().create((e=this,function(){return $("#edit-institution-label").modal("hide"),_.isFunction(e.create_callback)&&e.create_callback(e.institution_label()),e.resetInstitutionLabel()}));var e,t},t.prototype.destroyLabel=function(){var e;if(confirm("Are you sure you want to delete this label?"))return this.institution_label().destroy((e=this,function(){if($("#edit-institution-label").modal("hide"),Handshake.Helpers.notifySuccess("The label is now being deleted. This may take up to a few minutes if there are many things using this label"),_.isFunction(e.destroy_callback))return e.destroy_callback(e.institution_label())}))},t.prototype.cancel=function(){return this.institution_label().revert()},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.InstitutionSizes={},Handshake.InstitutionSizes.InstitutionSize=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0}})}return e(s,t),s.type="InstitutionSize",s.underscore="institution_size",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.InstitutionTypes={},Handshake.InstitutionTypes.InstitutionType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0}})}return e(s,t),s.type="InstitutionType",s.underscore="institution_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Interests={},Handshake.Interests.Interest=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({user_id:{send:!0},interesting_id:{send:!0},interesting_type:{send:!0},interesting_name:{},interesting:{polymorphic:!0,send:!0,nested_attribute:!0}})}return t(i,s),i.type="Interest",i.underscore="interest",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InternalMessages={},Handshake.InternalMessages.InternalMessage=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({conversation_id:{send:!0},fancy_status:{},user_id:{send:!0},user_name:{},user_title:{},user_path:{},user_photo:{},user_institution_name:{},user_institution_path:{},message_text:{},safe_html:{},message:{send:!0}})}return t(i,s),i.type="InternalMessage",i.underscore="internal_message",i.prototype.nested_route=function(){return"/conversations/"+this.conversation_id()},i}(Handshake.Resource),Handshake.BulkMessagePanel=function(s){function i(t){var s,n;this.searchable=t,this.insert_template=e(this.insert_template,this),this.save_to_template=e(this.save_to_template,this),this.confirm=e(this.confirm,this),this.quill_react_props=e(this.quill_react_props,this),this.react_props=e(this.react_props,this),this.remove_user=e(this.remove_user,this),this.user_name=e(this.user_name,this),this.hide_panel=e(this.hide_panel,this),this.show_panel=e(this.show_panel,this),this.set_message_campaign_fields=e(this.set_message_campaign_fields,this),this.remove_change_handlers=e(this.remove_change_handlers,this),this.before_page_change=e(this.before_page_change,this),this.before_unload=e(this.before_unload,this),this.wysihtml5_options=e(this.wysihtml5_options,this),this.unmount=e(this.unmount,this),i.__super__.constructor.call(this,"#bulk-message-panel"),this.user_count=ko.computed((s=this,function(){return s.searchable.all_pages_checked()?"all":s.searchable.checked_results().length})),this.pluralized_users=ko.computed((n=this,function(){return n.user_count()+" "+Handshake.Helpers.pluralizeString(n.searchable.item_name(),n.searchable.checked_results().length,"s")})),this.subject=ko.observable(""),this.message=ko.observable(""),this.default_subject=Handshake.passed.current_user_calculated_first_name+" from "+Handshake.passed.current_user_institution_name+" has sent you a message on Handshake",this.default_message=ko.observable(""),this.template=ko.observable(),this.campaign_object_id=ko.observable(),this.campaign_object_type=ko.observable(),this.confirm_message="There are unsaved changes.",this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.message_template_manage_modal=new Handshake.MessageTemplateManageModal({subject:this.subject,message:this.message,template:this.template}),this.message_template_save_modal=new Handshake.MessageTemplateSaveModal({subject:this.subject,message:this.message,template:this.template})}return t(i,s),i.prototype.unmount=function(){return this.remove_change_handlers()},i.prototype.wysihtml5_options=function(){return{wysihtml5_options:{toolbar:{emphasis:!0,insert_variable_dropdown:{first_name:"First Name",institution_name:"School",major_name:"Major"}}},on_load:function(){return $('a[data-wysihtml5-command="openInsertVariable"]').on("click",function(e){return $(e.target).closest(".dropdown").toggleClass("open"),!1}),$('a[data-wysihtml5-command="insertVariable"]').on("click",function(e){var t,s;return s=$(e.target).closest(".wysihtml5-toolbar").siblings("textarea").data("wysihtml5"),t=$(e.target).attr("data-wysihtml5-command-value"),s.editor.toolbar.execCommand("insertHTML","{{"+t+"}}")})}}},i.prototype.before_unload=function(){if(0!==this.message().length)return this.confirm_message},i.prototype.before_page_change=function(e){if(0!==this.message().length)return confirm(this.confirm_message)?void 0:e.preventDefault()},i.prototype.remove_change_handlers=function(){return $(window).off("beforeunload",this.before_unload),$(document).off("page:before-change",this.before_page_change)},i.prototype.set_message_campaign_fields=function(e,t,s){return this.default_message(e),this.campaign_object_id(t),this.campaign_object_type(s)},i.prototype.show_panel=function(e){return null==e&&(e=!1),e&&(this.subject(""),this.message(this.default_message())),$(window).on("beforeunload",this.before_unload),$(document).on("page:before-change",this.before_page_change),i.__super__.show_panel.call(this)},i.prototype.hide_panel=function(e){if(null==e&&(e=!0),!e||0===this.message().length||confirm(this.confirm_message))return this.remove_change_handlers(),i.__super__.hide_panel.call(this)},i.prototype.user_name=function(e){switch(e.type){case"User":return e.name;case"Application":return e.user_name;default:return this.searchable.item_name}},i.prototype.remove_user=function(e){return this.searchable.checked_ids.remove(e.id)},i.prototype.react_props=function(e){return{children:this.user_name(e),onClickRemove:(t=this,function(){return t.remove_user(e)})};var t},i.prototype.quill_react_props=function(){return{message:this.message(),variables:[{variable:"first_name",displayName:"First name"},{variable:"institution_name",displayName:"School"},{variable:"major_name",displayName:"Major"}],handleChange:this.message,imageModal:this.userImageUploadView,messageType:"message"}},i.prototype.confirm=function(){var e,t;if(t=this.subject().length>0?this.subject():this.default_subject,!(this.subject().length>255))return this.hide_panel(!1),this.searchable.performBulkAction({subject:t,message:this.message(),message_template_id:null!=(e=this.template())?e.id():void 0,campaign_object_id:this.campaign_object_id(),campaign_object_type:this.campaign_object_type()});Handshake.Helpers.notifyError("Subject is too long (maximum is 255 characters).")},i.prototype.save_to_template=function(){return this.message_template_save_modal.show_modal()},i.prototype.insert_template=function(){return this.message_template_manage_modal.show_modal()},i}(Handshake.DockedPanel)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InternshipApprovals={},Handshake.InternshipApprovals.InternshipApproval=function(s){function i(t){var s,n,o,r,a;this.nested_route=e(this.nested_route,this),this.generateNewToken=e(this.generateNewToken,this),this.manuallySendEmail=e(this.manuallySendEmail,this),i.__super__.constructor.call(this,t),this.attributes({experience_id:{send:!0},contact_id:{send:!0},contact_name:{},token:{},status:{send:!0},nice_deadline:{},nice_deadline_with_offset:{},sent_at:{},deadline:{send:!0},deadline_offset_days:{send:!0},comment:{send:!0},approved_at:{},send_evaluation_requests:{send:!0},survey_id:{send:!0},survey_token:{},survey_response_id:{send:!0},survey_name:{},approver_title:{send:!0}}),this.deadlineFormatted=ko.computed({read:(n=this,function(){return Handshake.Helpers.toDateTimePicker(n.deadline())}),write:(s=this,function(e){return s.deadline(Handshake.Helpers.fromDateTimePicker(e))})}),this.shareablePath=ko.computed((o=this,function(){return o.base_route("show")+"/"+o.id()+"?token="+o.token()})),this.shareableUrl=ko.computed((r=this,function(){return""+Handshake.passed.host+r.shareablePath()})),this.statusTagClass=ko.computed((a=this,function(){return"approved"===a.status()?"tag--success":"pending"===a.status()?"tag--warning":"expired"===a.status()?"tag--info":"declined"===a.status()?"tag--danger":(bugsnagClient.notify("Invalid status detected: "+a.status()),"")}))}return t(i,s),i.type="InternshipApproval",i.underscore="internship_approval",i.prototype.manuallySendEmail=function(){return this.ajax_call({type:"POST",method:"manually_send_email",on_member:!0,action:"manually_send_email",failure:(e=this,function(){if(e.errors_full_messages())return Handshake.Helpers.notifyError(e.errors_full_messages())}),
success:function(){return Handshake.Helpers.notifySuccess("Email successfully sent.")}});var e},i.prototype.generateNewToken=function(){return this.ajax_call({type:"POST",method:"generate_new_token",on_member:!0,action:"generate_new_token",failure:(e=this,function(){if(e.errors_full_messages())return Handshake.Helpers.notifyError(e.errors_full_messages())})});var e},i.prototype.nested_route=function(){return"/experiences/"+this.experience_id()},i}(Handshake.Resource),Handshake.InternshipApprovals.InternshipApprovalsView=function(s){function i(t,s){this.experienceView=t,this.validateFields=e(this.validateFields,this),this.saveSurveyResponse=e(this.saveSurveyResponse,this),this.toggleEditSurveyResponse=e(this.toggleEditSurveyResponse,this),this.buildNewItem=e(this.buildNewItem,this),this.initFormWidgets=e(this.initFormWidgets,this),this.surveySelect2Options=e(this.surveySelect2Options,this),this.userSelect2Options=e(this.userSelect2Options,this),this.saveItem=e(this.saveItem,this),this.sortItems=e(this.sortItems,this),this.beginProcess=e(this.beginProcess,this),i.__super__.constructor.call(this,s,{}),this.sortItems()}return t(i,s),i.prototype.beginProcess=function(){return this.experienceView.experience().ajax_call({type:"POST",method:"start_approval_process",action:"start_approval_process",on_member:!0,success:(e=this,function(t){return Handshake.Helpers.notifySuccess("The experience approval process has been started."),e.items(ko.utils.arrayMap(t.internship_approvals,function(t){return e.buildNewItem(t)})),e.sortItems()})});var e},i.prototype.sortItems=function(){return this.items(this.items().slice().sort(function(e,t){return Date.parse(e.deadline())-Date.parse(t.deadline())}))},i.prototype.saveItem=function(e){return i.__super__.saveItem.call(this,e),this.sortItems()},i.prototype.userSelect2Options=function(e){var t;return t={allowClear:!0,placeholder:"Contact...",url:"/contacts",secondary_property:"email_address",value:e.contact_id},e.contact_id()&&(t.initial_value={name:e.contact_name(),id:e.contact_id()}),t},i.prototype.surveySelect2Options=function(e){return{allowClear:!0,placeholder:"Survey...",url:"/surveys",full_data:function(t,s){return t||s?(e.survey_id(t.id||null),e.survey_name(t.name||"")):{id:e.survey_id()||null,name:e.survey_name()}}}},i.prototype.initFormWidgets=function(){},i.prototype.buildNewItem=function(e){var t,s,i;return e.experience_id=this.experienceView.experience().id(),e.status||(e.status="pending"),(t=new Handshake.InternshipApprovals.InternshipApproval(e)).take_survey_view=ko.observable(),t.editing_survey_response=ko.observable(!1),i=this,s=function(){return t.survey_response_id(t.take_survey_view().survey_response().id()),i.saveItem(t),t.editing_survey_response(!1)},Handshake.passed.enable_experience_approval_custom_questions&&(t.survey_id()&&t.take_survey_view(new Handshake.TakeSurveyView({survey_id:t.survey_id(),survey_response_id:t.survey_response_id(),selector:"#survey-view-"+t.id(),token:t.survey_token(),callback:s})),t.survey_id.subscribe(function(e){return t.survey_response_id(null),t.take_survey_view(new Handshake.TakeSurveyView({survey_id:e,survey_response_id:t.survey_response_id(),selector:"#survey-view-"+t.id(),token:t.survey_token(),callback:s}))})),t},i.prototype.toggleEditSurveyResponse=function(e){return e.editing_survey_response(!e.editing_survey_response())},i.prototype.saveSurveyResponse=function(e){return e.take_survey_view().finishResponse()},i.prototype.validateFields=function(){return!0},i}(Handshake.ResourceEditor),Handshake.InternshipApprovalView=function(){function t(t){this.props=t,this.declineInternshipApproval=e(this.declineInternshipApproval,this),this.approveInternshipApproval=e(this.approveInternshipApproval,this),this.approveOrDeclineParams=e(this.approveOrDeclineParams,this),this.internship_approval=Handshake.Resource.resourceFromObject(this.props.internship_approval),Handshake.passed.enable_experience_approval_custom_questions&&(this.take_survey_view=new Handshake.TakeSurveyView({survey_id:this.internship_approval.survey_id(),survey_response_id:this.internship_approval.survey_response_id(),selector:".survey-view",token:this.props.survey_token}),this.props.survey_response&&this.take_survey_view.survey_response(Handshake.Resource.resourceFromObject(this.props.survey_response)))}return t.prototype.approveOrDeclineParams=function(){var e;return e={token:this.internship_approval.token(),internship_approval:{comment:this.internship_approval.comment()}},Handshake.passed.enable_experience_approval_custom_questions&&this.internship_approval.survey_id()&&(e.internship_approval.survey_response_attributes=this.take_survey_view.survey_response_json()),e},t.prototype.approveInternshipApproval=function(){return this.internship_approval.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",data:this.approveOrDeclineParams(),success:(e=this,function(){return Handshake.SPA.navigate(e.internship_approval.shareablePath())})});var e},t.prototype.declineInternshipApproval=function(){return $.trim(this.internship_approval.comment()).length>0?this.internship_approval.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",data:this.approveOrDeclineParams(),success:(e=this,function(){return Handshake.SPA.navigate(e.internship_approval.shareablePath())})}):Handshake.Helpers.notifyError("Please leave a comment about why you are declining");var e},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.InternshipPreferences={},Handshake.InternshipPreferences.InternshipPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({enabled:{send:!0},institution_label_name:{},institution_label_id:{send:!0},must:{send:!0},custom_message:{send:!0},show_students:{send:!0},internship_survey_id:{send:!0}})}return e(s,t),s.type="InternshipPreference",s.underscore="internship_preference",s}(Handshake.Resource),Handshake.EditInternshipPreferenceView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.internship_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.internship_preference)),this.attachmentUpload=new Handshake.Attachments.CreateAttachmentView(this.internship_preference,this.props.attachments),this.preferenceLabelView=new Handshake.Labels.PreferenceLabelView(this.internship_preference)}return e.prototype.cancel=function(){return this.internship_preference().revert()},e.prototype.submit=function(){return this.internship_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.InterviewPreferences={},Handshake.InterviewPreferences.InterviewPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({enabled:{send:!0},institution_label_name:{},institution_label_id:{send:!0},must:{send:!0},custom_message:{send:!0},daily_room_cost:{send:!0},maximum_rooms_per_request:{send:!0},room_conflict_management:{send:!0},available_room_capacity:{send:!0},approval_message:{send:!0},student_message:{send:!0}})}return e(s,t),s.type="InterviewPreference",s.underscore="interview_preference",s}(Handshake.Resource),Handshake.EditInterviewPreferencesView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.interview_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.interview_preference)),this.preferenceLabelView=new Handshake.Labels.PreferenceLabelView(this.interview_preference)}return e.prototype.cancel=function(){return this.interview_preference().revert()},e.prototype.submit=function(){return this.interview_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InterviewScheduleDates={},Handshake.InterviewScheduleDates.InterviewScheduleDate=function(s){function i(t){var s,n,o,r,a,c;this.removeRoom=e(this.removeRoom,this),this.addARoom=e(this.addARoom,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({interview_schedule_id:{send:!0},date:{send:!0},alternate_date:{send:!0},moment_time_zone:{},room_count:{send:!0},details:{send:!0},rooms:{send:!0,array:!0,belongs_to:Handshake.Rooms.Room},room_ids:{array:!0,send:!0,convert_empty_to_blank:!0},room_names:{array:!0}}),this.interview_schedule_template_id_to_build_with=ko.observable(),this.nice_date=ko.computed((s=this,function(){return Handshake.Helpers.straightDate(s.date())})),this.date_fancy=ko.computed({read:(o=this,function(){return Handshake.Helpers.toDatePicker(o.date(),o.moment_time_zone())}),write:(n=this,function(e){return n.date(Handshake.Helpers.fromDatePicker(e,n.moment_time_zone()))})}),this.alternate_date_fancy=ko.computed({read:(a=this,function(){return Handshake.Helpers.toDatePicker(a.alternate_date(),a.moment_time_zone())}),write:(r=this,function(e){return r.alternate_date(Handshake.Helpers.fromDatePicker(e,r.moment_time_zone()))})}),this.rooms.subscribe((c=this,function(e){return c.room_names(_.map(e,function(e){return e.name()}).join(", ")),c.room_ids(_.map(e,function(e){return e.id()}))})),this.rooms(this.rooms())}return t(i,s),i.type="InterviewScheduleDate",i.underscore="interview_schedule_date",i.prototype.nested_route=function(){return"/interview_schedules/"+this.interview_schedule_id()},i.prototype.addARoom=function(e){return e.rooms.push(new Handshake.Rooms.Room({}))},i.prototype.removeRoom=function(e){return this.rooms.remove(e)},i}(Handshake.Resource),Handshake.InterviewScheduleDates.AddInterviewScheduleDateModal=function(){function t(t){this.finish_adding_date=e(this.finish_adding_date,this),this.add_date=e(this.add_date,this),this.cancel_date=e(this.cancel_date,this),this.remove_date=e(this.remove_date,this),this.date_does_not_conflict=e(this.date_does_not_conflict,this),this.remaining_rooms_for_date=e(this.remaining_rooms_for_date,this),this.initialize_modal=e(this.initialize_modal,this),this.resetDateToAdd=e(this.resetDateToAdd,this),this.interview_schedule=t.interview_schedule,this.min_date=t.season_start,this.max_date=t.season_end,this.room_conflict_management=t.room_conflict_management,this.available_rooms_data=t.available_rooms_data,this.default_rooms_available=t.default_rooms_available,this.parent=t.parent,this.date_already_added=ko.observable(!1),this.dateToAdd=ko.observable(),this.resetDateToAdd()}return t.prototype.resetDateToAdd=function(){return this.date_already_added(!1),this.dateToAdd(new Handshake.InterviewScheduleDates.InterviewScheduleDate({interview_schedule_id:this.interview_schedule().id()}))},t.prototype.initialize_modal=function(e){var t;if(this.resetDateToAdd(),t="InterviewScheduleDate"===e.type&&this.parent.interview_schedule_date_for_date({date:e.date()})?e:this.parent.interview_schedule_date_for_date({date:e.date}))this.date_already_added(!0),this.dateToAdd(t);else{if(e.disabled)return;this.dateToAdd().date(Handshake.Helpers.toDatePicker(e.date))}return $("#add-interview-schedule-date-modal").modal("show")},t.prototype.remaining_rooms_for_date=function(){return null!=this.available_rooms_data()[this.dateToAdd().date()]?this.available_rooms_data()[this.dateToAdd().date()].available:this.default_rooms_available()},t.prototype.date_does_not_conflict=function(){var e;return!this.room_conflict_management()||("Career Services"===Handshake.passed.current_user_type||(e=this.remaining_rooms_for_date(),this.dateToAdd().isPersisted()&&(e+=this.dateToAdd().getLatestData().room_count),this.dateToAdd().room_count()<=e))},t.prototype.remove_date=function(){if(this.dateToAdd().isNew()||this.interview_schedule().isNew())this.interview_schedule().removeDate(this.dateToAdd());else{if(!confirm("Are you sure you want to delete this date? All slots on this date will also be deleted once you save the schedule. If you want to change dates, we recommend editing the existing date instead."))return;this.dateToAdd().markAsDestroyed()}return $("#add-interview-schedule-date-modal").modal("hide")},t.prototype.cancel_date=function(){return this.dateToAdd().revert(),$("#add-interview-schedule-date-modal").modal("hide")},t.prototype.add_date=function(){var e,t;return this.available_rooms_data()[this.dateToAdd().date()]||!1===this.room_conflict_management()?this.finish_adding_date():(e={career_center_id:this.interview_schedule().career_center_id(),start_date:moment(this.dateToAdd().date()).subtract(1,"day").toISOString(),end_date:moment(this.dateToAdd().date()).add(1,"day").toISOString()},this.interview_schedule().ajax_call({type:"GET",action:"available_rooms_data",on_member:!1,method:"available_rooms_data",data:e,success:(t=this,function(e){return t.available_rooms_data()[t.dateToAdd().date()]=e.available_rooms_data[t.dateToAdd().date()],t.finish_adding_date()})}))},t.prototype.finish_adding_date=function(){var e;if(this.dateToAdd().date()&&this.dateToAdd().room_count()&&this.dateToAdd().room_count()>0){if(this.date_does_not_conflict()){if(+this.parent.maximum_rooms_per_request()&&+this.parent.maximum_rooms_per_request()>0&&(e=+this.interview_schedule().total_room_count(),this.date_already_added()||(e+=+this.dateToAdd().room_count()),+e>+this.parent.maximum_rooms_per_request())){if("Career Services"!==Handshake.passed.current_user_type)return void Handshake.Helpers.notifyError("Total room count cannot be more than "+this.parent.maximum_rooms_per_request());if(!confirm("There "+(1===e?"is":"are")+" a total of "+e+" "+Handshake.Helpers.pluralizeString("room",e,"s")+" on this interview schedule and the limit is "+this.parent.maximum_rooms_per_request()+". Would you like to proceed?"))return}return this.parent.interview_schedule_date_for_date({date:this.dateToAdd().date()})||this.interview_schedule().interview_schedule_dates.push(this.dateToAdd()),this.dateToAdd().setLatestData(),this.resetDateToAdd(),$("#add-interview-schedule-date-modal").modal("hide")}this.remaining_rooms_for_date()>0?Handshake.Helpers.notifyError("This date has only "+this.remaining_rooms_for_date()+" rooms left."):Handshake.Helpers.notifyError("This date has no rooms left.")}else Handshake.Helpers.notifyError("The date and room count are required.")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InterviewScheduleGroups={},Handshake.InterviewScheduleGroups.InterviewScheduleGroup=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({interview_schedule_id:{send:!0},name:{send:!0},interview_schedule_job_id:{},job_id:{}})}return t(i,s),i.type="InterviewScheduleGroup",i.underscore="interview_schedule_group",i.prototype.nested_route=function(){return"/interview_schedules/"+this.interview_schedule_id()},i}(Handshake.Resource),Handshake.ManageInterviewScheduleGroupsModal=function(){function t(t){this.interview_schedule=t.interview_schedule,this.searchable=t.searchable,this.show_interview_schedule_groups=t.show_interview_schedule_groups,this.applications=t.applications,this.create_interview_schedule_group=e(this.create_interview_schedule_group,this),this.add_new_interview_schedule_group=e(this.add_new_interview_schedule_group,this),this.confirm=e(this.confirm,this),this.remove_success=e(this.remove_success,this),this.add_success=e(this.add_success,this),this.success=e(this.success,this),this.select_remove=e(this.select_remove,this),this.select_add=e(this.select_add,this),this.interview_schedule_group_select2_options=e(this.interview_schedule_group_select2_options,this),this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.modal_element=$("#manage-interview-schedule-groups-modal"),this.action=ko.observable(),this.new_interview_schedule_group_name=ko.observable(),this.show_new_form=ko.observable(!1),this.interview_schedule_group=ko.observable({})}return t.prototype.show_modal=function(){return this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t.prototype.interview_schedule_group_select2_options=function(){return{placeholder:"Select Group...",url:(t=this,function(){return new Handshake.InterviewScheduleGroups.InterviewScheduleGroup({interview_schedule_id:t.interview_schedule().id()}).base_route("index")}),dataFunction:(e=this,function(t){return{query:t,interview_schedule_id:e.interview_schedule().id(),exclude_job_groups:!0}}),full_data:this.interview_schedule_group};var e,t},t.prototype.select_add=function(){return this.action("add"),this.show_modal(),!1},t.prototype.select_remove=function(){return this.action("remove"),this.show_modal(),!1},t.prototype.success=function(e){return"add"===this.action()?this.add_success(e):this.remove_success(e),this.show_interview_schedule_groups(!0),this.interview_schedule_group({})},t.prototype.add_success=function(e){return _.each(this.applications(),function(t){if(-1!==e.user_ids.indexOf(t.user_id()))return t.interview_schedule_groups.push(e.interview_schedule_group)}),Handshake.Helpers.notifySuccess("Successfully added students to the interview group '"+e.interview_schedule_group.name+"'.")},t.prototype.remove_success=function(e){return _.each(this.applications(),function(t){var s,i;if(-1!==e.user_ids.indexOf(t.user_id()))return s=_.findWhere(t.interview_schedule_groups(),{id:e.interview_schedule_group.id}),i=_.without(t.interview_schedule_groups(),s),t.interview_schedule_groups(i)}),Handshake.Helpers.notifySuccess("Successfully removed students from the interview group '"+e.interview_schedule_group.name+"'.")},t.prototype.confirm=function(){return this.searchable.performBulkAction({interview_schedule_group_id:this.interview_schedule_group().id,interview_schedule_id:this.interview_schedule().id()}),this.hide_modal(),!1},t.prototype.add_new_interview_schedule_group=function(){return this.show_new_form(!0)},t.prototype.create_interview_schedule_group=function(){var e,t;return e={name:this.new_interview_schedule_group_name(),interview_schedule_id:this.interview_schedule().id()},new Handshake.InterviewScheduleGroups.InterviewScheduleGroup(e).create((t=this,function(e){return t.new_interview_schedule_group_name(null),t.interview_schedule_group(e.interview_schedule_group),t.show_new_form(!1)}))},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.InterviewScheduleJobs={},Handshake.InterviewScheduleJobs.InterviewScheduleJob=function(t){function s(e){s.__super__.constructor.call(this,e),this.always_send_all_properties(!0),this.attributes({interview_schedule_id:{send:!0},job_id:{send:!0},internal_status:{send:!0}})}return e(s,t),s.type="InterviewScheduleJob",s.underscore="interview_schedule_job",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InterviewScheduleTemplates={},Handshake.InterviewScheduleTemplates.InterviewScheduleTemplate=function(s){function i(t){this.fetch_interview_schedule_template_slots=e(this.fetch_interview_schedule_template_slots,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{},name:{},description:{},most_common_slot_duration:{},most_common_slot_room:{},first_slot:{belongs_to:Handshake.InterviewScheduleTemplates.InterviewScheduleTemplateSlot},last_slot:{belongs_to:Handshake.InterviewScheduleTemplates.InterviewScheduleTemplateSlot},interview_schedule_template_slot_count:{}}),this.interview_schedule_template_slots=ko.observableArray([])}return t(i,s),i.type="InterviewScheduleTemplate",i.underscore="interview_schedule_template",i.prototype.fetch_interview_schedule_template_slots=function(e){return this.ajax_call({type:"GET",method:"interview_schedule_template_slots",on_member:!0,action:"interview_schedule_template_slots",success:(t=this,function(s){return t.interview_schedule_template_slots(s),e(s)})});var t},i}(Handshake.Resource),Handshake.InterviewScheduleTemplates.InterviewScheduleTemplateSlot=function(e){function s(e){var t,i,n,o,r,a,c;s.__super__.constructor.call(this,e),this.attributes({interview_schedule_template_id:{send:!0},room_id:{send:!0},room_full_name:{send:!0},start_minutes:{send:!0},end_minutes:{send:!0},unavailable:{send:!0}}),this.nice_start_time=ko.computed((t=this,function(){return moment().hours(t.start_minutes()/60).minutes(t.start_minutes()%60)})),this.nice_end_time=ko.computed((i=this,function(){return moment().hours(i.end_minutes()/60).minutes(i.end_minutes()%60)})),this.start_time=ko.computed({write:(o=this,function(e){var t;return t=moment(""+e,"hh:mm a"),o.start_minutes(60*t.hours()+t.minutes())}),read:(n=this,function(){return n.start_minutes()?n.nice_start_time().format("h:mm a"):null})}),this.end_time=ko.computed({write:(a=this,function(e){var t;return t=moment(""+e,"hh:mm a"),a.end_minutes(60*t.hours()+t.minutes())}),read:(r=this,function(){return r.end_minutes()?r.nice_end_time().format("h:mm a"):null})}),this.room_id_full_name=ko.computed((c=this,function(){return{id:c.room_id(),full_name:c.room_full_name()}}))}return t(s,e),s.type="InterviewScheduleTemplateSlot",s.underscore="interview_schedule_template_slot",s.prototype.nested_route=function(){return"/interview_schedule_templates/"+this.interview_schedule_template_id()},s}(Handshake.Resource),Handshake.InterviewScheduleTemplateSlotsTable=function(){function t(t){var s,i,n;this.props=t,this.manually_add_interview_slot=e(this.manually_add_interview_slot,this),this.manually_add_interview_slot_success=e(this.manually_add_interview_slot_success,this),this.removeSlot=e(this.removeSlot,this),this.saveSlot=e(this.saveSlot,this),this.editSlot=e(this.editSlot,this),this.bulkToggleChecks=e(this.bulkToggleChecks,this),this.getSlotForId=e(this.getSlotForId,this),this.interviewSlotsFetched=e(this.interviewSlotsFetched,this),this.interview_schedule_template=ko.observable(),this.props.interview_schedule_template?this.interview_schedule_template(new Handshake.InterviewScheduleTemplates.InterviewScheduleTemplate(this.props.interview_schedule_template)):alert("No interview schedule passed in JSON"),this.room_select2_url="/schools/"+this.interview_schedule_template().school_id()+"/all_rooms",this.interview_schedule_template_slots=ko.observableArray([]),this.selectedSlot=ko.observable(),this.picked_slot_ids=ko.observableArray([]),this.picked_slots=ko.computed((s=this,function(){return _.map(s.picked_slot_ids(),function(e){return s.getSlotForId(e)})})),this.allChecked=ko.computed((i=this,function(){return i.picked_slot_ids().length===i.interview_schedule_template_slots().length})),this.interview_schedule_template().fetch_interview_schedule_template_slots(this.interviewSlotsFetched),this.new_slot_length=ko.observable(),this.ordered_slots=ko.computed((n=this,function(){return n.interview_schedule_template_slots.slice().sort(function(e,t){return e.start_minutes()-t.start_minutes()})}))}return t.prototype.interviewSlotsFetched=function(e){return this.interview_schedule_template_slots(Handshake.Resource.resourcesFromArray(e,Handshake.InterviewScheduleTemplates.InterviewScheduleTemplateSlot))},t.prototype.getSlotForId=function(e){return _.find(this.interview_schedule_template_slots(),function(t){return t.id()===ko.utils.unwrapObservable(e)})},t.prototype.bulkToggleChecks=function(){return!this.allChecked()?this.picked_slot_ids(_.map(this.interview_schedule_template_slots(),function(e){return e.id()})):this.picked_slot_ids([]),!0},t.prototype.editSlot=function(e){return this.selectedSlot(e),this.show_edit_modal()},t.prototype.saveSlot=function(e){return e.save((t=this,function(){return t.hide_edit_modal()}));var t},t.prototype.removeSlot=function(e){return e.destroy((t=this,function(){return t.interview_schedule_template_slots.remove(e)}));var t},t.prototype.show_edit_modal=function(){return $("#edit-interview-slot").modal("show")},t.prototype.hide_edit_modal=function(){return $("#edit-interview-slot").modal("hide")},t.prototype.manually_add_interview_slot_success=function(e){var t;return t=new Handshake.InterviewScheduleTemplates.InterviewScheduleTemplateSlot(e.interview_schedule_template_slot),this.interview_schedule_template_slots.push(t)},t.prototype.manually_add_interview_slot=function(){var e;return(e=new Handshake.InterviewScheduleTemplates.InterviewScheduleTemplateSlot({})).interview_schedule_template_id(this.interview_schedule_template().id()),e.create(this.manually_add_interview_slot_success,null,{new_slot_length:this.new_slot_length()})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.InterviewScheduleTimelines={},Handshake.InterviewScheduleTimelines.InterviewScheduleTimeline=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{},description:{},interview_schedule_type_id:{},interview_schedule_type_name:{},apply_start_offset:{},apply_start_time:{},apply_end_offset:{},apply_end_time:{},employer_reminder_date_offset:{},employer_reminder_time:{},employer_deadline_date_offset:{},employer_deadline_time:{},primary_start_offset:{},primary_start_time:{},alternate_start_offset:{},alternate_start_time:{},signup_end_offset:{},signup_end_time:{},moment_time_zone:{},career_center_id:{}})}return e(s,t),s.type="InterviewScheduleTimeline",s.underscore="interview_schedule_timeline",s}(Handshake.Resource),Handshake.EditInterviewScheduleTimelineView=function(){function e(e){var t,i,n,o,r;this.props=e,this.update_example=s(this.update_example,this),this.timeline=ko.observable(Handshake.Resource.resourceFromObject(this.props.interview_schedule_timeline)),this.interview_schedule_types=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.interview_schedule_types)),i=(t=_.find(this.props.interview_schedule_types,(n=this,function(e){return e.id===n.props.chosen_interview_type_id})))?""+t.id:this.props.interview_schedule_types.length?""+this.props.interview_schedule_types[0].id:"1",this.chosen_interview_type=ko.observable(i),this.chosen_interview_type_object=ko.computed((o=this,function(){return _.find(o.interview_schedule_types(),function(e){return e.id()===parseInt(o.chosen_interview_type())})})),this.selected_career_center=ko.computed((r=this,function(){return _.find(r.props.career_centers,function(e){return parseInt(e.id)===parseInt(r.timeline().career_center_id())})})),this.example_apply_start=ko.observable(),this.example_apply_end=ko.observable(),this.example_employer_reminder_date=ko.observable(),this.example_employer_deadline_date=ko.observable(),this.example_primary_start=ko.observable(),this.example_alternate_start=ko.observable(),this.example_signup_end=ko.observable(),this.example_date=ko.observable(Handshake.Helpers.straightDate(moment())),this.update_example(this.timeline())}return e.prototype.update_example=function(e){var t,s,i,n,o,r,a,c;return r=moment().subtract(parseInt(e.apply_start_offset()),"days"),i=moment(r.format("YYYY MMMM Do")+" "+e.apply_start_time(),"YYYY MMMM Do h:mm a"),this.example_apply_start(Handshake.Helpers.straightDateTime(i)),r=moment().subtract(e.apply_end_offset(),"days"),s=moment(r.format("YYYY MMMM Do")+" "+e.apply_end_time(),"YYYY MMMM Do h:mm a"),this.example_apply_end(Handshake.Helpers.straightDateTime(s)),r=moment().subtract(e.employer_reminder_date_offset(),"days"),o=moment(r.format("YYYY MMMM Do")+" "+e.employer_reminder_time(),"YYYY MMMM Do h:mm a"),this.example_employer_reminder_date(Handshake.Helpers.straightDateTime(o)),r=moment().subtract(e.employer_deadline_date_offset(),"days"),n=moment(r.format("YYYY MMMM Do")+" "+e.employer_deadline_time(),"YYYY MMMM Do h:mm a"),this.example_employer_deadline_date(Handshake.Helpers.straightDateTime(n)),r=moment().subtract(e.primary_start_offset(),"days"),a=moment(r.format("YYYY MMMM Do")+" "+e.primary_start_time(),"YYYY MMMM Do h:mm a"),this.example_primary_start(Handshake.Helpers.straightDateTime(a)),r=moment().subtract(e.alternate_start_offset(),"days"),t=moment(r.format("YYYY MMMM Do")+" "+e.alternate_start_time(),"YYYY MMMM Do h:mm a"),this.example_alternate_start(Handshake.Helpers.straightDateTime(t)),r=moment().subtract(e.signup_end_offset(),"days"),c=moment(r.format("YYYY MMMM Do")+" "+e.signup_end_time(),"YYYY MMMM Do h:mm a"),this.example_signup_end(Handshake.Helpers.straightDateTime(c))},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.InterviewScheduleTypes={},Handshake.InterviewScheduleTypes.InterviewScheduleType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{},description:{}})}return e(s,t),s.type="InterviewScheduleType",s.underscore="interview_schedule_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty,i=[].indexOf||function(e){for(var t=0,s=this.length;t<s;t++)if(t in this&&this[t]===e)return t;return-1};Handshake.InterviewSchedules={},Handshake.InterviewSchedules.InterviewSchedule=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d,p,m,f,b,y,v,g,k,w,H,S,C,j,A,P,x,F,I,E,M,T,O,R,D,V,L,q;this.can_remove_job=e(this.can_remove_job,this),this.duplicate=e(this.duplicate,this),this.formatted_date=e(this.formatted_date,this),this.removeDate=e(this.removeDate,this),this.taken_slot=e(this.taken_slot,this),this.is_room_only=e(this.is_room_only,this),this.is_preselect=e(this.is_preselect,this),this.save_on_enter=e(this.save_on_enter,this),this.uninvite_user=e(this.uninvite_user,this),this.apply_template=e(this.apply_template,this),this.reset=e(this.reset,this),this.cancel=e(this.cancel,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.build_all_slots=e(this.build_all_slots,this),this.send_packet=e(this.send_packet,this),this.build_interview_packet_details=e(this.build_interview_packet_details,this),this.fetch_interview_slots=e(this.fetch_interview_slots,this),this.total_cost=e(this.total_cost,this),this.total_room_count=e(this.total_room_count,this),this.slot_interview_group_association_hint=e(this.slot_interview_group_association_hint,this),this.clear_jobs=e(this.clear_jobs,this),this.remove_job=e(this.remove_job,this),this.add_job=e(this.add_job,this),i.__super__.constructor.call(this,t),this.attributes({identifier:{send:!0},description:{send:!0},request_comments:{},employer_id:{send:!0},employer_name:{},employer_logo_url:{},employer_logo_feed_item_url:{},employer_path:{},employer_industry_id:{},employer_industry_name:{},school_id:{send:!0},school_name:{},school_logo_url:{},school_path:{},interview_schedule_type_id:{send:!0},interview_schedule_template_id:{send:!0},interview_schedule_template_name:{},interview_schedule_template:{belongs_to:Handshake.InterviewScheduleTemplates.InterviewScheduleTemplate},interview_schedule_type_name:{send:!0},interview_slots_size:{send:!0},taken_interview_slots_size:{send:!0},available_slots_count:{send:!0},empty_slots_count:{send:!0},time_zone:{send:!0},moment_time_zone:{},first_interview_schedule_date:{send:!0},last_interview_schedule_date:{send:!0},
interview_schedule_dates:{array:!0,send:!0,belongs_to:Handshake.InterviewScheduleDates.InterviewScheduleDate,nested_attribute:!0},apply_start:{send:!0},apply_end:{send:!0},employer_reminder_date:{send:!0},employer_deadline_date:{send:!0},primary_signup_start:{send:!0},alternate_signup_start:{send:!0},signup_end:{send:!0},convert_to_open_date:{send:!0},document_types:{array:!0},status:{},timeline_status:{},responder_name:{},created_by_name:{},fancy_status:{},primary_slots_student_ids:{array:!0},primary_slots_student_ids_count:{},primary_slots_count:{},contact_ids:{array:!0,send:!0,convert_empty_to_blank:!0},student_screen:{send:!0,belongs_to:Handshake.StudentScreens.StudentScreen,nested_attribute:!0},application_mode:{send:!0},room_count:{send:!0},room_ids:{array:!0},room_count_sum:{},job_ids:{array:!0},job_titles:{array:!0},interview_schedule_jobs:{array:!0,send:!0,belongs_to:Handshake.InterviewScheduleJobs.InterviewScheduleJob,nested_attribute:!0},jobs:{array:!0,belongs_to:Handshake.Jobs.Job},event_ids:{array:!0,send:!0,convert_empty_to_blank:!0},document_type_ids:{array:!0,send:!0,convert_empty_to_blank:!0},payment_status:{},amount_due:{},daily_room_cost:{send:!0},exclude_from_room_conflict_management:{send:!0},created_at:{},updated_at:{},primary_selections_count:{send:!0},alternate_selections_count:{send:!0},primaries_with_slots_count:{send:!0},alternates_with_slots_count:{send:!0},added_label_ids:{array:!0},attachment_ids:{array:!0},institution_attendee_ids:{send:!0,array:!0},applications_count:{},career_center_id:{send:!0},career_center:{belongs_to:Handshake.CareerCenters.CareerCenter},interview_schedule_groups:{send:!0,array:!0,belongs_to:Handshake.InterviewScheduleGroups.InterviewScheduleGroup},can_student_see_slots:{},short_timeline_status:{},prevent_multiple_applications:{send:!0}}),this.name=ko.computed((s=this,function(){return s.employer_name()?s.identifier()?s.employer_name()+" - "+s.identifier():s.employer_name():s.identifier()})),this.document_type_names=ko.computed((n=this,function(){return _.map(n.document_types(),function(e){return e.name}).join(", ")})),this.interview_schedule_type_info=ko.computed((o=this,function(){switch(o.interview_schedule_type_name()){case"Room Only":return"A room is reserved in Handshake but the slots are managed outside of Handshake. You can be selected for this interview schedule but you will schedule slot assignments with the employer.";case"Open":return"If you meet the qualifications, you can take a slot in this schedule immediately after applying.";case"Preselect":return"After the application period, primary and alternate candidates are selected by the employer. Primary candidates can sign up before alternate candidates and signup dates can be found in the timeline section of the schedule."}})),this.non_destroyed_interview_schedule_dates=ko.computed((r=this,function(){var e;return(e=_.filter(r.interview_schedule_dates(),function(e){return!e.markedAsDestroyed()})).length!==r.interview_schedule_dates().length&&r.markAsChanged("interview_schedule_dates"),e})),this.full_when=ko.computed((a=this,function(){return _.map(a.interview_schedule_dates(),function(e){return Handshake.TimeZoneHelper.dateTime("long_date",e.date(),null)}).join(", ")})),this.jobs_count=ko.computed((c=this,function(){return c.job_ids().length})),this.nice_date=ko.computed((l=this,function(){var e;return l.interview_schedule_dates().length<3?_.map(l.interview_schedule_dates(),function(e){return Handshake.TimeZoneHelper.dateTime("month_day_year",e.date())}).join(", "):(e=l.interview_schedule_dates().length+" days from ",e+=Handshake.TimeZoneHelper.dateTime("month_day_year",l.first_interview_schedule_date()),e+=" to ",e+=Handshake.TimeZoneHelper.dateTime("month_day_year",l.last_interview_schedule_date()))})),this.interview_slots=ko.observableArray([]).trackHasItems(),this.requested_interview_slot_swaps=ko.computed((u=this,function(){var e;return e=[],_.each(u.interview_slots(),function(t){return _.each(t.interview_slot_swaps(),function(t){if(t.interview_slot_student_id()===Handshake.passed.current_user_id&&"pending"===t.status())return e.push(t)})}),e})),this.interview_slot_swaps=ko.computed((h=this,function(){var e;return e=[],_.each(h.interview_slots(),function(t){return _.each(t.interview_slot_swaps(),function(t){if(t.student_id===Handshake.passed.current_user_id&&"archived"!==t.status())return e.push(t)})}),e})),this.display_text=ko.computed((d=this,function(){return d.identifier()?d.employer_name()+" - "+d.identifier()+": "+d.nice_date():d.employer_name()+": "+d.nice_date()})),this.job_titles_joined=ko.computed((p=this,function(){return p.job_titles().join(", ")})),this.necessaryDatesFilled=ko.computed((m=this,function(){return!(!m.apply_start()||!m.apply_end()||m.is_preselect()&&!(m.primary_signup_start()&&m.alternate_signup_start&&m.signup_end()))})),this.human_timeline_status=ko.computed((f=this,function(){return f.timeline_status()?f.timeline_status().replace(/_/g," "):f.timeline_status()})),this.editedType=ko.computed((b=this,function(){if(!b.interview_schedule_type_name())return b.interview_schedule_type_name();switch(b.interview_schedule_type_name()){case"Preselect":return"Pre-select";case"Preselect Continuous":return"Pre-select Continuous";default:return b.interview_schedule_type_name()}})),this.apply_start_formatted=ko.computed({read:(v=this,function(){return Handshake.Helpers.toDateTimePicker(v.apply_start(),v.moment_time_zone())}),write:(y=this,function(e){return y.apply_start(Handshake.Helpers.fromDateTimePicker(e,y.moment_time_zone()))})}),this.apply_end_formatted=ko.computed({read:(k=this,function(){return Handshake.Helpers.toDateTimePicker(k.apply_end(),k.moment_time_zone())}),write:(g=this,function(e){return g.apply_end(Handshake.Helpers.fromDateTimePicker(e,g.moment_time_zone()))})}),this.employer_reminder_date_formatted=ko.computed({read:(H=this,function(){return Handshake.Helpers.toDateTimePicker(H.employer_reminder_date(),H.moment_time_zone())}),write:(w=this,function(e){return w.employer_reminder_date(Handshake.Helpers.fromDateTimePicker(e,w.moment_time_zone()))})}),this.employer_deadline_date_formatted=ko.computed({read:(C=this,function(){return Handshake.Helpers.toDateTimePicker(C.employer_deadline_date(),C.moment_time_zone())}),write:(S=this,function(e){return S.employer_deadline_date(Handshake.Helpers.fromDateTimePicker(e,S.moment_time_zone()))})}),this.primary_signup_start_formatted=ko.computed({read:(A=this,function(){return Handshake.Helpers.toDateTimePicker(A.primary_signup_start(),A.moment_time_zone())}),write:(j=this,function(e){return j.primary_signup_start(Handshake.Helpers.fromDateTimePicker(e,j.moment_time_zone()))})}),this.alternate_signup_start_formatted=ko.computed({read:(x=this,function(){return Handshake.Helpers.toDateTimePicker(x.alternate_signup_start(),x.moment_time_zone())}),write:(P=this,function(e){return P.alternate_signup_start(Handshake.Helpers.fromDateTimePicker(e,P.moment_time_zone()))})}),this.signup_end_formatted=ko.computed({read:(I=this,function(){return Handshake.Helpers.toDateTimePicker(I.signup_end(),I.moment_time_zone())}),write:(F=this,function(e){return F.signup_end(Handshake.Helpers.fromDateTimePicker(e,F.moment_time_zone()))})}),this.convert_to_open_date_formatted=ko.computed({read:(M=this,function(){return Handshake.Helpers.toDateTimePicker(M.convert_to_open_date(),M.moment_time_zone())}),write:(E=this,function(e){return E.convert_to_open_date(Handshake.Helpers.fromDateTimePicker(e,E.moment_time_zone()))})}),this.days_until_primary_signup_start=ko.computed((T=this,function(){return moment(T.primary_signup_start()).diff(moment(),"days")})),this.days_until_alternate_signup_start=ko.computed((O=this,function(){return moment(O.alternate_signup_start()).diff(moment(),"days")})),this.non_job_interview_schedule_groups=ko.computed((R=this,function(){return _.filter(R.interview_schedule_groups(),function(e){return!e.interview_schedule_job_id()})})),this.slot_interview_group_association_label=ko.computed((D=this,function(){return D.non_job_interview_schedule_groups().length>0?"Jobs and Interview Groups":"Jobs"})),this.safe_job_titles_html=ko.observable(this.job_titles().map(function(e){return"<li class=aligned-job-title> <span> "+Handshake.Helpers.escapeString(e)+" </span> </li>"}).join("")),this.taken_slots_percentage=ko.computed((V=this,function(){return 0===V.interview_slots_size()?"100%":V.taken_interview_slots_size()/V.interview_slots_size()*100+"%"})),this.slots_taken_text=ko.computed((L=this,function(){return L.taken_interview_slots_size()+"/"+L.interview_slots_size()})),this.applications_path=ko.pureComputed((q=this,function(){return q.entity_path+"/applications"}))}return t(i,s),i.type="InterviewSchedule",i.underscore="interview_schedule",i.prototype.add_job=function(e){return this.jobs.push(e),this.job_ids.push(e.id()),this.job_titles.push(e.title())},i.prototype.remove_job=function(e){return this.jobs.remove(e),this.job_ids.remove(e.id()),this.job_titles.remove(e.title())},i.prototype.clear_jobs=function(){return this.jobs([]),this.job_ids([]),this.job_titles([]),this.interview_schedule_jobs([])},i.prototype.slot_interview_group_association_hint=function(e){var t,s,i;return null==e&&(e=!1),s=this.member_route("applicants"),t="<a href="+encodeURI(s)+" target='_blank'>Review Applicants page</a>",i="Review Applicants page",this.non_job_interview_schedule_groups().length>0?"You may select jobs and interview groups to associate with this interview slot. Only students in these interview groups or who applied to these jobs will be able to take this slot. You can place student into particular group on "+(e?t:i)+".":"You may select jobs to associate with this interview slot. Only students who have applied to these jobs will be able to take this slot."},i.prototype.total_room_count=function(){return _.reduce(this.non_destroyed_interview_schedule_dates(),function(e,t){return e+ +t.room_count()},0)},i.prototype.total_cost=function(){return this.daily_room_cost()?+this.daily_room_cost()*+this.total_room_count():null},i.prototype.fetch_interview_slots=function(e){return this.ajax_call({type:"GET",method:"interview_slots",on_member:!0,action:"interview_slots",success:(t=this,function(s){if(t.interview_slots(Handshake.Resource.resourcesFromArray(s)),e)return e(s)})});var t},i.prototype.build_interview_packet_details=function(e){return this.ajax_call({type:"POST",method:"build_interview_packet_details",on_member:!0,action:"build_interview_packet_details",success:function(t){return e(t)}})},i.prototype.send_packet=function(e,t,s){return this.ajax_call({type:"POST",method:"send_packet",on_member:!0,action:"send_packet",data:s,success:e,failure:t})},i.prototype.build_all_slots=function(e,t,s){return this.ajax_call({type:"POST",method:"build_all_slots",on_member:!0,action:"build_all_slots",data:s,success:e,failure:t})},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.cancel=function(e,t){return this.ajax_call({type:"POST",data:e,method:"cancel",on_member:!0,action:"cancel",success:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.apply_template=function(e,t,s){return this.ajax_call({type:"POST",method:"apply_template",on_member:!0,action:"apply_template",data:{interview_schedule_template_id:e.id(),interview_schedule_date_id:t.id()},success:function(e){if(_.isFunction(s))return s(e)}})},i.prototype.uninvite_user=function(e,t){return this.ajax_call({type:"POST",method:"uninvite_user",on_member:!0,action:"uninvite_user",data:{user_id:e.id()},success:function(e){return t(e)}})},i.prototype.save_on_enter=function(e,t){if(!t||13===t.keyCode)return this.save()},i.prototype.is_preselect=function(){return"Preselect"===this.interview_schedule_type_name()},i.prototype.is_room_only=function(){return"Room Only"===this.interview_schedule_type_name()},i.prototype.taken_slot=function(e){var t,s,i;for(t=0,s=(i=this.primary_slots_student_ids()).length;t<s;t++)if(e===i[t].student_id)return!0;return!1},i.prototype.removeDate=function(e){return this.interview_schedule_dates.remove(e)},i.prototype.formatted_date=function(e,t){var s;return"Invalid date"===(s=moment(e).shorthandWithTwoDigitYear("L"))||null===e?t||"":s},i.prototype.duplicate=function(e){return this.ajax_call({type:"POST",method:"duplicate",on_member:!0,action:"duplicate",success:function(t){return e(t)}})},i.prototype.can_remove_job=function(e,t){return this.ajax_call({type:"GET",method:"can_remove_job",action:"can_remove_job",on_member:!0,data:{job_id:e},success:function(e){if(_.isFunction(t))return t(e)}})},i}(Handshake.Resource),Handshake.InterviewSchedules.LargePreview=function(){function e(e){this.interview_schedule=e.interview_schedule,this.hide_employer_button=e.hide_employer_button}return e}(),Handshake.InterviewSchedules.TimeSlot=function(){function e(e,t){var s,i;this.id=e.start_date,this.moment_time_zone=ko.observable(e.moment_time_zone),this.start_date=ko.observable(e.start_date),this.end_date=ko.observable(e.end_date),this.room_id=ko.observable(t.id),this.start_time=ko.computed((s=this,function(){return Handshake.TimeZoneHelper.dateTime("time",s.start_date(),s.moment_time_zone())})),this.end_time=ko.computed((i=this,function(){return Handshake.TimeZoneHelper.dateTime("time",i.end_date(),i.moment_time_zone())}))}return e}(),Handshake.EditInterviewScheduleView=function(s){function i(t){var s,r,a,c,l,u,h,d,p,m,f,b,y,v,g,k,w,H,S,C,j;this.props=t,this.set_timeline_dates_from_timeline=e(this.set_timeline_dates_from_timeline,this),this.applyTimeline=e(this.applyTimeline,this),this.chooseInterviewScheduleTemplate=e(this.chooseInterviewScheduleTemplate,this),this.update_room_availability_data=e(this.update_room_availability_data,this),this.update_possible_timelines=e(this.update_possible_timelines,this),this.update_possible_templates=e(this.update_possible_templates,this),this.postSelectPage=e(this.postSelectPage,this),this.select_jobs_page=e(this.select_jobs_page,this),this.select_timeline_page=e(this.select_timeline_page,this),this.edit_timeline_invisible=e(this.edit_timeline_invisible,this),this.select_basics_page=e(this.select_basics_page,this),this.finalizeAction=e(this.finalizeAction,this),this.saveChanges=e(this.saveChanges,this),this.createFailure=e(this.createFailure,this),this.saveSuccess=e(this.saveSuccess,this),this.showRemoveJobConfirmation=e(this.showRemoveJobConfirmation,this),this.removeJobFromInterview=e(this.removeJobFromInterview,this),this.can_remove_job=e(this.can_remove_job,this),this.edit_job=e(this.edit_job,this),this.react_save_job=e(this.react_save_job,this),this.react_cancel_job_slideout_modal=e(this.react_cancel_job_slideout_modal,this),this.show_job_form_slideout_modal=e(this.show_job_form_slideout_modal,this),this.show_import_existing_job_modal=e(this.show_import_existing_job_modal,this),this.show_attach_job_modal=e(this.show_attach_job_modal,this),this.contactSelect2RemovingFunction=e(this.contactSelect2RemovingFunction,this),this.contactSelect2DataFunction=e(this.contactSelect2DataFunction,this),this.schoolSelect2Options=e(this.schoolSelect2Options,this),this.employerSelect2Options=e(this.employerSelect2Options,this),this.update_drilldown=e(this.update_drilldown,this),this.chooseInterviewScheduleType=e(this.chooseInterviewScheduleType,this),this.chooseDirectApplicationMode=e(this.chooseDirectApplicationMode,this),this.chooseJobsApplicationMode=e(this.chooseJobsApplicationMode,this),this.toggleAdvancedMode=e(this.toggleAdvancedMode,this),this.reset_schedule_times=e(this.reset_schedule_times,this),this.interview_schedule_date_for_date=e(this.interview_schedule_date_for_date,this),this.date_popover_selected=e(this.date_popover_selected,this),this.next_timeline_week=e(this.next_timeline_week,this),this.previous_timeline_week=e(this.previous_timeline_week,this),this.prevent_multiple_applications=e(this.prevent_multiple_applications,this),this.allow_multiple_applications=e(this.allow_multiple_applications,this),this.update_parent_major_groups=e(this.update_parent_major_groups,this),this.unmount=e(this.unmount,this),this.reset_on_career_center_change=e(this.reset_on_career_center_change,this),this.load_employer_approval=e(this.load_employer_approval,this),this.load_career_centers=e(this.load_career_centers,this),this.timeline_description=e(this.timeline_description,this),this.interview_schedule=ko.observable(null),this.preselect_interview_schedule_type_id=ko.observable(this.props.preselect_interview_schedule_type_id),this.interview_schedule(new Handshake.InterviewSchedules.InterviewSchedule(this.props.interview_schedule)),this.interview_slot_job_ids=ko.observableArray(this.props.interview_slot_job_ids),this.document_types=ko.observableArray(this.props.document_types),this.career_centers=ko.observableArray(),this.react_job_id=ko.observable(null),this.react_create_new_job=ko.observable(null),this.react_show_job_slideout_modal=ko.observable(!1),this.react_interview_schedule_info=ko.observable(null),this.react_job_modal_props=ko.computed((r=this,function(){return{jobId:r.react_job_id(),createNewJob:r.react_create_new_job(),visible:r.react_show_job_slideout_modal(),onCancel:r.react_cancel_job_slideout_modal,onSave:r.react_save_job,interviewScheduleInfo:r.react_interview_schedule_info()}})),s=this.interview_schedule().isNew()?this.interview_schedule().base_route("index"):this.interview_schedule().entity_path,i.__super__.constructor.call(this,this.interview_schedule,s,".interview-schedules-form-nav"),this.interview_schedule().isNew()&&this.currentPage(0),null!=this.props.initial_page&&this.currentPage(n[this.props.initial_page]||this.props.initial_page),this.interview_schedule().jobs(Handshake.Resource.resourcesFromArray(this.props.jobs)),this.interview_schedule().clearChanged("jobs"),this.interview_schedule().student_screen(Handshake.Resource.resourceFromObject(this.props.student_screen)),this.interview_schedule().clearChanged("student_screen"),this.prevent_multiple_applications_warning_shown=!1,this.interview_schedule().jobs.subscribe((a=this,function(){if(a.interview_schedule().jobs().length<=1&&a.interview_schedule().prevent_multiple_applications(!1),2===a.interview_schedule().jobs().length&&!a.prevent_multiple_applications_warning_shown)return a.prevent_multiple_applications_warning_shown=!0,$("#prevent-multiple-applications-modal").modal("show")})),"Employers"===Handshake.passed.current_user_type?this.finalizeText(this.interview_schedule().isPersisted()?"Save":"Request"):this.finalizeText(this.interview_schedule().isPersisted()?"Save":"Create"),this.showDeleteButton(this.interview_schedule().isPersisted()),this.onBasicsPage=ko.computed((c=this,function(){return c.currentPage()===n.Basics})),this.onTimelinePage=ko.computed((l=this,function(){return l.currentPage()===n.Timeline})),this.onJobsPage=ko.computed((u=this,function(){return u.currentPage()===n.Jobs})),this.onReviewPage=ko.computed((h=this,function(){return h.currentPage()===n.Review})),$(".interview_schedule_school_id").on("select2-selecting",(d=this,function(e){if(d.interview_schedule().jobs().length>0&&"Employers"===Handshake.passed.current_user_type)return confirm("Changing the School will cause any associated jobs to be reset. Are you sure you would like to change the school?")?d.interview_schedule().clear_jobs():e.preventDefault()})),this.times_have_been_selected=ko.computed((p=this,function(){return p.interview_schedule().apply_start()||p.interview_schedule().apply_end()||p.interview_schedule().primary_signup_start()||p.interview_schedule().alternate_signup_start()||p.interview_schedule().signup_end()})),this.career_center_select2_options={placeholder:"Career Center...",allowClear:!0,initial_value:{id:this.interview_schedule().career_center_id(),name:this.interview_schedule().career_center().name()}},this.pageOptions.push(new Handshake.PagedForm.Page({index:n.Basics,name:"Basics",description:"Basic details about this interview such as the identifier, description and contacts."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:n.Timeline,name:"Timeline",shown:(f=this,function(){return"Career Services"!==Handshake.passed.current_user_type||Handshake.passed.current_user_institution_id===f.interview_schedule().school_id()}),description:this.timeline_description(),enabled:(m=this,function(){return Boolean("all"===m.props.edit_permissions)})})),this.pageOptions.push(new Handshake.PagedForm.Page({index:n.Jobs,name:"Jobs",description:"Specify which jobs are associated for students to apply through for this interview schedule."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:n.Review,name:"Review",description:"Make sure that everything is in place."})),this.reselectPage(),this.selected_career_center=ko.computed((b=this,function(){return b.interview_schedule().career_center().isPersisted()?b.interview_schedule().career_center():_.find(b.career_centers(),function(e){return e.id()===b.interview_schedule().career_center_id()})})),this.interview_schedule_contact_select2_options={placeholder:"Choose contacts...",initial_value:this.props.initial_contacts,value:this.interview_schedule().contact_ids,url:"/contacts/possible_contacts",dataFunction:this.contactSelect2DataFunction,removingFunction:this.contactSelect2RemovingFunction},this.contactModal=new Handshake.Contacts.CreateContactModal(null,this.interview_schedule().employer_id),this.attach_job_modal=new Handshake.AttachJobModal(this),this.import_existing_job_modal=new Handshake.ImportExistingJobModal(this),this.create_job_slideout_modal=ko.observable(),this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Are you sure you want to remove job?",safe_body_html:"ATTENTION: removing this job will also remove any applications for this job from the interview schedule."}),this.room_conflict_management=ko.observable(!1),this.timeline_week_start=ko.observable(moment().startOf("week").add(1,"day")),this.available_rooms_data=ko.observable({}),this.room_availability_loading=ko.observable(!1),this.default_rooms_available=ko.observable(0),this.maximum_rooms_per_request=ko.observable(!1),setInterval((y=this,function(){if(y.room_conflict_management())return y.update_room_availability_data()}),o),this.season_start=ko.observable(!1),this.season_end=ko.observable(!1),this.seasons=ko.observableArray([]),this.timeline_date_options=ko.computed((v=this,function(){return _.map(_.range(0,6),function(e){var t,s,i,n;return s=moment(v.timeline_week_start()).add(e,"days").format("YYYY-MM-DD"),n=!1,v.seasons().length>0&&(_.filter(v.seasons(),function(e){var t,i;return i=e.season_start?moment(e.season_start).format("YYYY-MM-DD"):null,t=e.season_end?moment(e.season_end).format("YYYY-MM-DD"):null,(!i||s>=i)&&(!t||s<=t)}).length>0||(n=!0)),t=void 0!==v.available_rooms_data()[s]?v.available_rooms_data()[s].available:v.default_rooms_available(),i=(i=n||t<=0&&v.room_conflict_management())&&!v.interview_schedule_date_for_date({date:s}),"Career Services"===Handshake.passed.current_user_type&&(i=!1),(i||t<0)&&(t=0),{date:s,available_rooms:t,disabled:i}})})),this.addInterviewScheduleDateModal=new Handshake.InterviewScheduleDates.AddInterviewScheduleDateModal({interview_schedule:this.interview_schedule,season_start:this.season_start,season_end:this.season_end,room_conflict_management:this.room_conflict_management,available_rooms_data:this.available_rooms_data,default_rooms_available:this.default_rooms_available,parent:this}),this.advanced_timeline_mode=ko.observable(this.interview_schedule().isPersisted()&&this.interview_schedule().necessaryDatesFilled()),this.advancedModeToggleText=ko.computed((g=this,function(){return g.advanced_timeline_mode()?"Choose a Different Timeline":"Enter Dates Directly"})),this.interview_schedule_types=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.interview_schedule_types)),this.interview_schedule_timelines=ko.observableArray([]),this.interview_schedule_templates=ko.observableArray([]),this.newInterviewScheduleDateRoomCount=ko.observable(),this.disableAdvancedModeInputs=ko.computed((k=this,function(){return"Employers"===Handshake.passed.current_user_type&&k.interview_schedule_timelines().length>0})),this.selectMajorGroupsView=new Handshake.MajorGroups.SelectMajorGroupsView({resource_type:"student_screen",parent_major_groups:ko.observableArray(this.props.parent_major_groups||[]),selected_major_groups:ko.observableArray(this.props.selected_major_groups),selected_majors:ko.observableArray(this.props.selected_majors)}),this.interview_schedule().school_id()&&(this.load_career_centers(),"Employers"===Handshake.passed.current_user_type&&this.load_employer_approval()),this.interview_schedule().school_id.subscribe((w=this,function(){if(w.load_career_centers(),w.update_parent_major_groups(),"Employers"===Handshake.passed.current_user_type)return w.load_employer_approval()})),this.interview_schedule().isPersisted()||this.update_parent_major_groups(!0),this.selectMajorGroupsView.selected_major_ids.subscribe((H=this,function(){return H.interview_schedule().student_screen().major_ids(H.selectMajorGroupsView.selected_major_ids()),H.update_drilldown()})),this.selectMajorGroupsView.selected_major_group_ids.subscribe((S=this,function(){return S.interview_schedule().student_screen().major_group_ids(S.selectMajorGroupsView.selected_major_group_ids()),S.update_drilldown()})),this.postSelectPage(),this.selected_timeline=ko.observable(),this.earliest_interview_schedule_date=ko.computed((C=this,function(){var e,t;return 0===(e=C.interview_schedule().non_destroyed_interview_schedule_dates()).length?null:(t=e[0].date(),_.each(e,function(e){if(moment(e.date())<moment(t))return t=e.date()}),t)})),this.earliest_interview_schedule_date.subscribe((j=this,function(){if(j.interview_schedule().isNew())return j.set_timeline_dates_from_timeline()}))}var n,o;return t(i,s),o=15e3,n={Basics:0,Timeline:1,Jobs:2,Review:3},i.prototype.timeline_description=function(){return"all"===this.props.edit_permissions?"Determine when this interview will happen, where and with what timeline.":"You have already requested this interview schedule. In order to change the timeline you will need to contact the career center."},i.prototype.load_career_centers=function(){var e,t,s;if("Career Services"!==Handshake.passed.current_user_type||Handshake.passed.current_user_institution_id===this.interview_schedule().school_id())return e=new Handshake.CareerCenters.CareerCenter({school_id:this.interview_schedule().school_id()}),t={},"Employers"===Handshake.passed.current_user_type&&(t={available_for_interview_schedules:!0}),e.index((s=this,function(e){if(s.career_centers(Handshake.Resource.resourcesFromArray(e)),1===s.career_centers().length)return s.interview_schedule().career_center_id(s.career_centers()[0].id())}),null,t)},i.prototype.load_employer_approval=function(){return $.ajax("/employer_approvals/lookup_employer_approval",{data:{school_id:this.interview_schedule().school_id()},success:(e=this,function(t){return e.employer_approval=Handshake.Resource.resourceFromObject(t.employer_approval)})});var e},i.prototype.reset_on_career_center_change=function(){return"Employers"!==Handshake.passed.current_user_type||(!(this.interview_schedule().interview_schedule_template_id()||this.times_have_been_selected()||this.interview_schedule().non_destroyed_interview_schedule_dates().length>0||this.interview_schedule().interview_schedule_type_id())||(confirm("Changing the career center will reset any options you have selected on this request. Are you sure you would like to change the career center?")?(this.update_possible_templates(),this.update_possible_timelines(),this.reset_schedule_times(),this.interview_schedule().interview_schedule_dates([]),!0):void 0))},i.prototype.unmount=function(){return this.unmount_paged_form()},i.prototype.update_parent_major_groups=function(e){var t,s;return null==e&&(e=!1),this.selectMajorGroupsView.major_search_view.set_school_id(this.interview_schedule().school_id()),t={school_id:this.interview_schedule().school_id()},$.getJSON("/parent_major_groups",t,(s=this,function(t){if(t.success&&s.selectMajorGroupsView.parent_major_groups(t.parent_major_groups),s.selectMajorGroupsView.setParentMajorGroupsViews(),e)return s.interview_schedule().student_screen().clearChanged("major_ids"),s.interview_schedule().student_screen().clearChanged("major_group_ids"),s.interview_schedule().clearChanged("student_screen")}))},i.prototype.allow_multiple_applications=function(){return this.interview_schedule().prevent_multiple_applications(!1),$("#prevent-multiple-applications-modal").modal("hide")},i.prototype.prevent_multiple_applications=function(){return this.interview_schedule().prevent_multiple_applications(!0),$("#prevent-multiple-applications-modal").modal("hide")},i.prototype.previous_timeline_week=function(){return this.timeline_week_start(this.timeline_week_start().subtract(1,"week")),this.update_room_availability_data()},i.prototype.next_timeline_week=function(){return this.timeline_week_start(this.timeline_week_start().add(1,"week")),this.update_room_availability_data()},i.prototype.date_popover_selected=function(e){return this.timeline_week_start(moment(e.date).startOf("week").add(1,"day")),this.update_room_availability_data()},i.prototype.interview_schedule_date_for_date=function(e){return _.find(this.interview_schedule().non_destroyed_interview_schedule_dates(),function(t){return t.date()===e.date})},i.prototype.initializeTypeTooltip=function(e){return $(e).tooltip()},i.prototype.reset_schedule_times=function(){return this.selected_timeline(null),this.interview_schedule().interview_schedule_type_id(null),this.interview_schedule().interview_schedule_type_name(null),this.interview_schedule().apply_start_formatted(null),this.interview_schedule().apply_end_formatted(null),this.interview_schedule().primary_signup_start_formatted(null),this.interview_schedule().alternate_signup_start_formatted(null),this.interview_schedule().signup_end_formatted(null)},i.prototype.toggleAdvancedMode=function(){return this.reset_schedule_times(),this.advanced_timeline_mode(!this.advanced_timeline_mode())},i.prototype.chooseJobsApplicationMode=function(){return this.interview_schedule().application_mode("jobs")},i.prototype.chooseDirectApplicationMode=function(){return this.interview_schedule().application_mode("direct")},i.prototype.chooseInterviewScheduleType=function(e){return this.interview_schedule().interview_schedule_type_id(e.id()),this.interview_schedule().interview_schedule_type_name(e.name())},i.prototype.update_drilldown=function(){return this.interview_schedule().markAsChanged("student_screen")},i.prototype.employerSelect2Options=function(e){return{url:"/employers/approved_employers",placeholder:"Employer...",full_data:function(t){return t?(e.employer_id(t.id),e.employer_name(t.name)):{id:e.employer_id(),name:e.employer_name()}}}},i.prototype.schoolSelect2Options=function(e){var t;return t={url:"/employers/approved_core_schools",placeholder:UNSAFE__i18n.t("school_capitalized")+"...",full_data:function(t){return t?(e.school_id(t.id),e.school_name(t.name),e.moment_time_zone(t.moment_time_zone)):{id:e.school_id(),name:e.school_name()}},dataFunction:function(e){return{query:e,simple_search:!0,permission:"create_interview_schedules",in_interview_scheduling_period_only:!0}}},$.extend(t,Handshake.CoreSchools.coreSchoolsSelect2Options),t},i.prototype.contactSelect2DataFunction=function(e){return{query:e,simple_search:!0,employer_id:$("#interview_schedule_employer_id").val(),class_name:"InterviewSchedule",object_id:this.interview_schedule_id}},i.prototype.contactSelect2RemovingFunction=function(e){return Handshake.passed.current_user_institution_id_type===e.choice.institution_id_type||confirm("This contact does not belong to you. If you remove it, you will not be able to add it again yourself. Please confirm that you would like to remove this contact. If you would like to keep this contact, click the cancel button.")},i.prototype.existing_job_select2_options=function(e,t,s,i,n){return null==n&&(n={}),{placeholder:s,allowClear:i,full_data:e,url:"/interview_schedules/possible_jobs",primary_property:function(e){return"#"+e.id+" "+e.title},secondary_property:function(e){return""+_.compact([e.job_type_name,e.employment_type_name]).join(" - ")},
dataFunction:function(e){var s;return s={query:e,simple_search:!0,employer_ids:[t().employer_id()],school_id:t().school_id()},$.extend(s,n)}}},i.prototype.show_attach_job_modal=function(){return this.attach_job_modal.show_modal()},i.prototype.show_import_existing_job_modal=function(){return this.import_existing_job_modal.show_modal()},i.prototype.show_job_form_slideout_modal=function(e,t){return null==e&&(e=null),null==t&&(t=!1),this.react_job_id(e),this.react_create_new_job(null===e||t),this.react_interview_schedule_info({schoolId:this.interview_schedule().school_id(),employerId:this.interview_schedule().employer_id(),applyEndDate:this.interview_schedule().apply_end()}),this.react_show_job_slideout_modal(!0)},i.prototype.react_cancel_job_slideout_modal=function(){return this.react_show_job_slideout_modal(!1)},i.prototype.react_save_job=function(e){var t,s;return this.react_show_job_slideout_modal(!1),s=new Handshake.Jobs.Job(e),this.react_create_new_job()?(t=new Handshake.InterviewScheduleJobs.InterviewScheduleJob({interview_schedule_id:this.interview_schedule().id(),job_id:s.id()}),this.interview_schedule().interview_schedule_jobs.push(t),this.interview_schedule().jobs.push(s)):_.find(this.interview_schedule().jobs(),function(e){return e.id()===e.id}).update(s,!0)},i.prototype.edit_job=function(e){return this.show_job_form_slideout_modal(e.id())},i.prototype.can_remove_job=function(e){return!_.contains(this.interview_slot_job_ids(),e.id())},i.prototype.removeJobFromInterview=function(e){var t;{if(!this.interview_schedule().isNew())return this.interview_schedule().can_remove_job(e.id(),(t=this,function(s){return s.can_remove_job?t.showRemoveJobConfirmation(e):Handshake.Helpers.notifyError("Cannot remove a job whose applicants are associated with interview slots  or who are selected as primary, alternate, or hired candidates.")}));this.showRemoveJobConfirmation(e)}},i.prototype.showRemoveJobConfirmation=function(e){return this.confirmation_modal.show_modal((t=this,function(){var s;return t.interview_schedule().remove_job(e),(s=_.find(t.interview_schedule().interview_schedule_jobs(),function(t){return parseInt(t.job_id())===parseInt(e.id())})).isPersisted()?s.internal_status("archived"):t.interview_schedule().interview_schedule_jobs.remove(s)}));var t},i.prototype.saveSuccess=function(){return window.location.href=this.interview_schedule().entity_path},i.prototype.createFailure=function(e){var t;if(e.payment_required&&"Employers"===Handshake.passed.current_user_type&&!e.errors)return this.stripe_handler=StripeCheckout.configure({key:e.stripe_publishable_key,token:(t=this,function(e){return t.charge=new Handshake.Charges.Charge({chargeable_path:t.interview_schedule().entity_path}),t.charge.update({external_customer_id:e.id,last_four_digits:e.card.last4,card_type:e.card.brand}),t.interview_schedule().create(t.saveSuccess,null,{charge:t.charge.getJSON(!1),stripeToken:e.id})})}),this.stripe_handler.open({name:"Pay Now",currency:Handshake.passed.default_currency.toLowerCase(),amount:e.amount_due})},i.prototype.saveChanges=function(){return this.interview_schedule().isPersisted()?this.interview_schedule().save(this.saveSuccess):this.interview_schedule().create(this.saveSuccess,this.createFailure)},i.prototype.finalizeAction=function(){return this.saveChanges()},i.prototype.select_basics_page=function(){return this.selectPage(this.pageOptions()[n.Basics])},i.prototype.edit_timeline_invisible=function(){return"approved"===this.interview_schedule().status()&&"Employers"===Handshake.passed.current_user_type},i.prototype.select_timeline_page=function(){return this.selectPage(this.pageOptions()[n.Timeline])},i.prototype.select_jobs_page=function(){return this.selectPage(this.pageOptions()[n.Jobs])},i.prototype.postSelectPage=function(){if(this.onTimelinePage()&&this.interview_schedule().school_id()&&this.interview_schedule().career_center_id())return this.update_possible_templates(),this.update_possible_timelines()},i.prototype.update_possible_templates=function(){return this.interview_schedule().ajax_call({type:"GET",action:"possible_templates",on_member:!1,method:"possible_templates",data:{career_center_id:this.interview_schedule().career_center_id()},success:(e=this,function(t){return e.interview_schedule_templates(Handshake.Resource.resourcesFromArray(t.interview_schedule_templates))})});var e},i.prototype.update_possible_timelines=function(){return this.interview_schedule().ajax_call({type:"GET",action:"possible_timelines",on_member:!1,method:"possible_timelines",data:{career_center_id:this.interview_schedule().career_center_id()},success:(e=this,function(t){return e.interview_schedule_timelines(Handshake.Resource.resourcesFromArray(t.interview_schedule_timelines)),e.seasons(t.seasons),_.each(e.seasons(),function(t){var s,i;if(i=t.season_start?moment(t.season_start).format("YYYY-MM-DD"):null,s=t.season_end?moment(t.season_end).format("YYYY-MM-DD"):null,(!e.season_start()||i<e.season_start())&&e.season_start(i),!e.season_end()||s>e.season_end())return e.season_end(s)}),t.daily_room_cost&&!e.interview_schedule().daily_room_cost()&&"Employers"===Handshake.passed.current_user_type&&e.interview_schedule().daily_room_cost(t.daily_room_cost),e.season_start()&&e.season_end()?e.timeline_week_start().isBetween(e.season_start(),e.season_end())||e.timeline_week_start(moment(e.season_start()).startOf("week").add(1,"day")):e.season_start()?e.timeline_week_start().isAfter(e.season_start())||e.timeline_week_start(moment(e.season_start()).startOf("week").add(1,"day")):e.season_end()&&(e.timeline_week_start().isBefore(e.season_end())||e.timeline_week_start(moment(e.season_end()).startOf("week").subtract(1,"week").add(1,"day"))),e.update_room_availability_data()})});var e},i.prototype.update_room_availability_data=function(){var e,t;if(this.onTimelinePage()&&this.interview_schedule().career_center_id())return this.room_availability_loading(!0),e={career_center_id:this.interview_schedule().career_center_id(),start_date:moment(this.timeline_week_start()).subtract(1,"week").toISOString(),end_date:moment(this.timeline_week_start()).add(1,"week").toISOString()},this.interview_schedule().ajax_call({type:"GET",action:"available_rooms_data",on_member:!1,method:"available_rooms_data",data:e,success:(t=this,function(e){return t.room_availability_loading(!1),t.room_conflict_management(e.room_conflict_management),t.available_rooms_data(e.available_rooms_data),t.default_rooms_available(e.default_rooms_available),t.maximum_rooms_per_request(e.maximum_rooms_per_request)})})},i.prototype.chooseInterviewScheduleTemplate=function(e){return this.interview_schedule().interview_schedule_template_id(e.id()),!0},i.prototype.applyTimeline=function(e){if(this.interview_schedule().non_destroyed_interview_schedule_dates().length>0){if(this.earliest_interview_schedule_date())return this.selected_timeline(e),this.set_timeline_dates_from_timeline(),this.advanced_timeline_mode(!0);Handshake.Helpers.notifyError("Please choose an interview date first")}else Handshake.Helpers.notifyError("Please choose an interview date first")},i.prototype.set_timeline_dates_from_timeline=function(){var e,t,s,i,n,o,r,a,c,l,u;if((u=this.selected_timeline())&&(n=this.earliest_interview_schedule_date()))return this.interview_schedule().moment_time_zone(),e="YYYY-MM-DD hh:mm a",this.interview_schedule().interview_schedule_type_id(u.interview_schedule_type_id()),this.interview_schedule().interview_schedule_type_name(u.interview_schedule_type_name()),u.apply_start_offset()&&(a=moment(n).subtract(u.apply_start_offset(),"days"),i=moment(a.format("YYYY MMMM Do")+" "+u.apply_start_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().apply_start_formatted(i.format(e))),u.apply_end_offset()&&(a=moment(n).subtract(u.apply_end_offset(),"days"),s=moment(a.format("YYYY MMMM Do")+" "+u.apply_end_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().apply_end_formatted(s.format(e))),u.employer_reminder_date_offset()&&(a=moment(n).subtract(u.employer_reminder_date_offset(),"days"),r=moment(a.format("YYYY MMMM Do")+" "+u.employer_reminder_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().employer_reminder_date_formatted(r.format(e))),u.employer_deadline_date_offset()&&(a=moment(n).subtract(u.employer_deadline_date_offset(),"days"),o=moment(a.format("YYYY MMMM Do")+" "+u.employer_deadline_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().employer_deadline_date_formatted(o.format(e))),u.primary_start_offset()&&(a=moment(n).subtract(u.primary_start_offset(),"days"),c=moment(a.format("YYYY MMMM Do")+" "+u.primary_start_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().primary_signup_start_formatted(c.format(e))),u.alternate_start_offset()&&(a=moment(n).subtract(u.alternate_start_offset(),"days"),t=moment(a.format("YYYY MMMM Do")+" "+u.alternate_start_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().alternate_signup_start_formatted(t.format(e))),u.signup_end_offset()?(a=moment(n).subtract(u.signup_end_offset(),"days"),l=moment(a.format("YYYY MMMM Do")+" "+u.signup_end_time(),"YYYY MMMM Do h:mm a"),this.interview_schedule().signup_end_formatted(l.format(e))):void 0},i}(Handshake.PagedForm.View),Handshake.InterviewSchedules.AssociateJobModal=function(){function t(t){this.interview_schedule=t,this.showApplicationInfo=e(this.showApplicationInfo,this),this.addJob=e(this.addJob,this),this.select2Options=e(this.select2Options,this),this.job=ko.observable({id:null,text:null})}return t.prototype.select2Options=function(){return{placeholder:"Choose a Job...",full_data:this.job,url:"/interview_schedules/possible_jobs",primary_property:function(e){return"#"+e.id+" "+e.title},secondary_property:function(e){return""+_.compact([e.job_type_name,e.employment_type_name]).join(" - ")},results_filter:(t=this,function(e){var s;return s=t.interview_schedule().job_ids().slice(0),_.filter(e,function(e){if(-1===s.indexOf(e.id))return s.push(e.id),e})}),dataFunction:(e=this,function(t){return{query:t,simple_search:!0,employer_ids:[e.interview_schedule().employer_id()],school_id:e.interview_schedule().school_id()}})};var e,t},t.prototype.addJob=function(){var e,t;if(this.job().id){var s;if(!_.contains(this.interview_schedule().job_ids(),+this.job().id))return(e=_.find(this.interview_schedule().interview_schedule_jobs(),(s=this,function(e){return parseInt(e.job_id())===parseInt(s.job().id)})))?e.internal_status("normal"):(t=new Handshake.InterviewScheduleJobs.InterviewScheduleJob({interview_schedule_id:this.interview_schedule().id(),job_id:this.job().id}),this.interview_schedule().interview_schedule_jobs.push(t)),this.interview_schedule().add_job(Handshake.Resource.resourceFromObject(this.job())),this.job({id:null,text:null}),this.closeModal();Handshake.Helpers.notifyError("This job has already been added.")}else Handshake.Helpers.notifyError("Please select a job to add.")},t.prototype.showModal=function(){return $("#associate-job-modal").modal("show")},t.prototype.closeModal=function(){return $("#associate-job-modal").modal("hide")},t.prototype.showApplicationInfo=function(){return this.job().id&&moment()<this.interview_schedule().apply_end()},t}(),Handshake.AttachJobModal=function(){function t(t){this.vm=t,this.create_job=e(this.create_job,this),this.select2_options=e(this.select2_options,this),this.interview_schedule=this.vm.interview_schedule,this.template_job=ko.observable({id:null,text:null})}return t.prototype.select2_options=function(){var e;return e={include_expired_postings:!0},this.vm.existing_job_select2_options(this.template_job,this.interview_schedule,"Choose an existing job as a template",!0,e)},t.prototype.create_job=function(){return this.template_job().id?(this.close_modal(),this.vm.show_job_form_slideout_modal(this.template_job().id,!0)):Handshake.Helpers.notifyError("Please select a job.")},t.prototype.show_modal=function(){return this.template_job({id:null,text:null}),$("#attach_job_modal").modal("show")},t.prototype.close_modal=function(){return $("#attach_job_modal").modal("hide")},t}(),Handshake.ImportExistingJobModal=function(){function t(t){this.vm=t,this.add_job=e(this.add_job,this),this.remove_duplicate_jobs=e(this.remove_duplicate_jobs,this),this.select2_options=e(this.select2_options,this),this.job=ko.observable({id:null,text:null}),this.interview_schedule=this.vm.interview_schedule}return t.prototype.select2_options=function(){var e,t;return e={exclude_interviewing_jobs:"Admins"!==Handshake.passed.current_user_type},"Employers"!==Handshake.passed.current_user_type&&(e.include_expired_postings=!0),(t=this.vm.existing_job_select2_options(this.job,this.interview_schedule,"Choose an existing job",!1,e)).results_filter=this.remove_duplicate_jobs,t},t.prototype.remove_duplicate_jobs=function(e){var t;return t=this.interview_schedule().job_ids().slice(0),_.filter(e,function(e){if(-1===t.indexOf(e.id))return t.push(e.id),e})},t.prototype.add_job=function(){var e,t;if(this.job().id){var s;if(!_.contains(this.interview_schedule().job_ids(),+this.job().id))return(e=_.find(this.interview_schedule().interview_schedule_jobs(),(s=this,function(e){return parseInt(e.job_id())===parseInt(s.job().id)})))?e.internal_status("normal"):(t=new Handshake.InterviewScheduleJobs.InterviewScheduleJob({interview_schedule_id:this.interview_schedule().id(),job_id:this.job().id}),this.interview_schedule().interview_schedule_jobs.push(t)),this.interview_schedule().job_ids.push(this.job().id),this.interview_schedule().jobs.push(Handshake.Resource.resourceFromObject(this.job())),this.job({id:null,text:null}),this.close_modal();Handshake.Helpers.notifyError("This job has already been added.")}else Handshake.Helpers.notifyError("Please select a job to add.")},t.prototype.show_modal=function(){return $("#import_existing_job_modal").modal("show")},t.prototype.close_modal=function(){return $("#import_existing_job_modal").modal("hide")},t}(),Handshake.InterviewScheduleCancelModal=function(){function t(){this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.confirm=e(this.confirm,this),this.modal_element=$("#interview-cancel-warning-modal"),this.interview_schedule=ko.observable(),this.notify_students=ko.observable("none"),this.notify_employers=ko.observable(!0),this.custom_message=ko.observable()}return t.prototype.confirm=function(){var e,t;return e={notify_employers:this.notify_employers(),notify_students:this.notify_students(),custom_message:this.custom_message()},this.interview_schedule().cancel(e,(t=this,function(){return Handshake.Helpers.notifySuccess("Interview schedule successfully cancelled."),t.hide_modal()}))},t.prototype.show_modal=function(e){return this.interview_schedule(e),this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.notify_students("none"),this.notify_employers(!0),this.custom_message(null),this.modal_element.modal("hide")},t}(),Handshake.SearchInterviewSchedulesView=function(){function t(t){var s,i,n,o;this.props=t,this.update_interview_schedule_favorites=e(this.update_interview_schedule_favorites,this),this.printPacketsSuccess=e(this.printPacketsSuccess,this),this.printPacketsCancel=e(this.printPacketsCancel,this),this.printPacketsConfirm=e(this.printPacketsConfirm,this),this.printPacketsSelect=e(this.printPacketsSelect,this),this.qualified_for=e(this.qualified_for,this),this.sendMassEmailSuccess=e(this.sendMassEmailSuccess,this),this.cancel_mass_email=e(this.cancel_mass_email,this),this.confirm_mass_email_contacts_requester=e(this.confirm_mass_email_contacts_requester,this),this.select_mass_email_contacts_requester=e(this.select_mass_email_contacts_requester,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.resetInterviewSchedule=e(this.resetInterviewSchedule,this),this.show_cancel_warning=e(this.show_cancel_warning,this),this.declineInterviewSchedule=e(this.declineInterviewSchedule,this),this.approveInterviewSchedule=e(this.approveInterviewSchedule,this),this.searchCallback=e(this.searchCallback,this),this.massEmailInterviewSchedulesSuccess=e(this.massEmailInterviewSchedulesSuccess,this),this.dispose=e(this.dispose,this),this.interview_schedules=ko.observableArray([]),this.qualified_interview_schedule_ids=ko.observableArray([]),this.interview_schedule_cancel_modal=new Handshake.InterviewScheduleCancelModal,this.pending_interview_schedules_count=ko.observable(0),this.searchable=new Handshake.Searchable($("#search-form"),"interview_schedules",this.searchCallback),s=[{label:"Print Packets",type:"simple",key_action:!0,bulk_action:"print_interview_packets",select_action:this.printPacketsSelect,confirm_action:this.printPacketsConfirm,cancel_action:this.printPacketsCancel,success:this.printPacketsSuccess}],"Career Services"===Handshake.passed.current_user_type&&(s=[{label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"InterviewSchedule",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Contacts or Requester",type:"simple",key_action:!0,bulk_action:"mass_email_interview_contacts_requester",select_action:this.select_mass_email_contacts_requester,confirm_action:this.confirm_mass_email_contacts_requester,cancel_action:this.cancel_mass_email,success:this.sendMassEmailSuccess},{label:"Download Checkins to CSV",type:"simple",bulk_action:"download_csv",extra_data:{type:"checkins"},success:this.searchable.ajax_download_view.bulkActionSuccess}].concat(s),this.props.use_new_mass_emails||s.push({label:"Send Email to Students About Interviews",type:"simple",bulk_action:"mass_email_about_items",success:this.massEmailInterviewSchedulesSuccess})),this.searchable.bulkActions(s),"Career Services"===(i=Handshake.passed.current_user_type)||"Admins"===i?this.searchable.initialSetup("UniversityManageInterviewSchedules"):"Students"===i?this.searchable.initialSetup("StudentInterviewSchedule"):this.searchable.initialSetup("ManageInterviewSchedules"),$("#build-interview-schedule-slots-modal")&&(this.room_select2_url="/schools/"+Handshake.passed.current_user_institution_id+"/all_rooms",this.buildInterviewScheduleSlotsView=new Handshake.InterviewSchedules.BuildInterviewScheduleSlotsView(ko.observable(),this.room_select2_url,null)),this.mass_email_contacts_requester_modal=new Handshake.InterviewSchedules.MassEmailContactsRequesterModal(this.searchable),this.default_date=(n=this,function(){var e,t;if((e=_.filter(n.interview_schedules(),function(e){return n.searchable.checked_ids().indexOf(e.id())>-1})).length>0)return t=_.sortBy(e,function(e){return e.first_interview_schedule_date()||0})[0],Handshake.Helpers.toDatePicker(t.first_interview_schedule_date(),t.moment_time_zone())}),this.print_interview_packets_modal=new Handshake.InterviewSchedules.PrintInterviewPacketsModal({searchable:this.searchable,document_types:this.props.document_types,default_date:this.default_date}),$(".rooms-reserved-info").popover({html:!0,content:$(".rooms-reserved-info-html").html()}),$(".selections-info").popover({html:!0,content:$(".selections-info-html").html()}),this.props.render_in_react&&(this.favorite_interview_schedule_ids=ko.observable(this.props.interview_schedule_favorites.map(function(e){return e.id})),this.react_props=ko.observable({entities:{favorites:this.props.interview_schedule_favorites,interview_schedules:[]},updateInterviewScheduleFavorites:this.update_interview_schedule_favorites}),this.empty_state_props=ko.computed((o=this,function(){var e;return o.searchable.followedOnly()?(e={imageUrl:"events/search-empty-state-favorites.png",title:"Oops, it\u2019s empty.",subtitle:"Start favoriting interviews to fill up this page!"},o.favorite_interview_schedule_ids().length&&(e.subtitle="Looks like there are no matches..."),e):{imageUrl:"events/search-empty-state.png",title:"No Upcoming Interviews",subtitle:"In the meantime you can...",actions:[{href:"/users/"+Handshake.passed.current_user_id,text:"Update Your Profile"},{href:"/postings",text:"Explore Jobs"}]}})))}return t.prototype.dispose=function(){return this.print_interview_packets_modal.dispose()},t.prototype.massEmailInterviewSchedulesSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.searchCallback=function(e){return this.interview_schedules(Handshake.Resource.resourcesFromArray(e.results,Handshake.InterviewSchedules.InterviewSchedule)),this.pending_interview_schedules_count(e.pending_interview_schedules_count||0),this.qualified_interview_schedule_ids(e.qualified_interview_schedule_ids||[]),this.props.render_in_react?setTimeout((t=this,function(){var s;return s=_.extend({},t.react_props().entities,{interview_schedules:e.results}),t.react_props(_.extend({},t.react_props(),{entities:s}))}),0):(this.interview_schedules(Handshake.Resource.resourcesFromArray(e.results,Handshake.InterviewSchedules.InterviewSchedule)),$(".interview-schedule-type-info").each(function(e,t){return $(t).popover({html:!0,content:$(".type"+e).html()})}));var t},t.prototype.approveInterviewSchedule=function(e){return e.approve((t=this,function(){return t.buildInterviewScheduleSlotsView.setInterviewSchedule(e),t.buildInterviewScheduleSlotsView.initialize()}));var t},t.prototype.declineInterviewSchedule=function(e){return e.decline()},t.prototype.show_cancel_warning=function(e){return this.interview_schedule_cancel_modal.show_modal(e)},t.prototype.resetInterviewSchedule=function(e){return e.reset()},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.select_mass_email_contacts_requester=function(){return this.mass_email_contacts_requester_modal.show_modal(),!1},t.prototype.confirm_mass_email_contacts_requester=function(){return this.mass_email_contacts_requester_modal.confirm(),!1},t.prototype.cancel_mass_email=function(){return this.mass_email_contacts_requester_modal.show_modal()},t.prototype.sendMassEmailSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.qualified_for=function(e){return this.qualified_interview_schedule_ids().indexOf(parseInt(e.id()))>-1},t.prototype.printPacketsSelect=function(){return this.print_interview_packets_modal.show_modal(),!1},t.prototype.printPacketsConfirm=function(){return this.print_interview_packets_modal.perform(),!1},t.prototype.printPacketsCancel=function(){return this.print_interview_packets_modal.show_modal()},t.prototype.printPacketsSuccess=function(e){return this.searchable.selectedBulkAction().confirmed=!1,this.print_interview_packets_modal.show_compiling_status(e)},t.prototype.update_interview_schedule_favorites=function(e){return this.react_props(_.extend({},this.react_props(),{entities:_.extend({},this.react_props().entities,{favorites:e})})),this.favorite_interview_schedule_ids(e.map(function(e){return e.favoritable_id}))},t}(),Handshake.UnifiedInterviewSchedulesView=function(s){function n(t){var s,i;this.props=t,this.hide_advanced_filters_if_clicked_outside=e(this.hide_advanced_filters_if_clicked_outside,this),this.unmount=e(this.unmount,this),this.filter_career_center=e(this.filter_career_center,this),this.reset=e(this.reset,this),this.toggleAdvancedFilters=e(this.toggleAdvancedFilters,this),this.toggle_timeline_status_filter_mode=e(this.toggle_timeline_status_filter_mode,this),this.switchFilterMode=e(this.switchFilterMode,this),n.__super__.constructor.call(this,this.props),this.status_filter_mode=ko.observable(getUrlParams().status_filter_mode||Handshake.cookies.read("status_filter_mode",{user_scoped:!0})||"pending"),this.timeline_status_filter_mode=ko.observable(getUrlParams().timeline_status_filter_mode||Handshake.cookies.read("timeline_status_filter_mode",{user_scoped:!0})||""),this.searchable.addExternalParam("status_filter_mode",this.status_filter_mode,{include_in_bulk_actions:!0}),this.searchable.addExternalParam("timeline_status_filter_mode",this.timeline_status_filter_mode,{include_in_bulk_actions:!0}),this.status_filter_mode.subscribe((s=this,function(e){return s.switchFilterMode(),Handshake.cookies.write("status_filter_mode",e,{user_scoped:!0,permanent:!0})})),this.timeline_status_filter_mode.subscribe((i=this,function(e){return i.switchFilterMode(),Handshake.cookies.write("timeline_status_filter_mode",e,{user_scoped:!0,permanent:!0})})),this.showAdvancedFilters=ko.observable(!1),this.mouseOnAdvancedFilters=ko.observable(!1),$(document).on("CareerCenterSelected",this.filter_career_center),$(document).on("click",this.hide_advanced_filters_if_clicked_outside),this.performInitialSearch()}return t(n,s),n.prototype.switchFilterMode=function(){return this.searchable.performExternalParamsSearch()},n.prototype.toggle_timeline_status_filter_mode=function(e){return this.timeline_status_filter_mode()===e?this.timeline_status_filter_mode(""):this.timeline_status_filter_mode(e)},n.prototype.toggleAdvancedFilters=function(e,t){return t.stopPropagation(),this.showAdvancedFilters(!this.showAdvancedFilters())},n.prototype.reset=function(){return this.searchable.reset(),this.showAdvancedFilters(!1)},n.prototype.get_visible_columns=function(){switch(this.status_filter_mode()){case"pending":case"other":return["date_received","jobs","rooms_requested","type","status"];case"approved":switch(this.timeline_status_filter_mode()){case"pre_application_period":return["jobs","payment_status","amount_due","apply_start","apply_end","rooms_requested","rooms_assigned","type"];case"in_application_period":return["jobs","payment_status","amount_due","applicants","apply_start","apply_end","rooms_requested","rooms_assigned","type"];case"pre_signup":return["deadline","payment_status","amount_due","applicants","primary_signup_start","primary_selections","alternate_selections","slots_available","rooms_requested","rooms_assigned","slots_taken"];case"signup":return["payment_status","amount_due","applicants","primary_signup_start","alternate_signup_start","signup_end","slots_taken","rooms_assigned","rooms_requested"];case"schedule_finalized":case"interviews_finished":return["payment_status","amount_due","applicants","signup_end","slots_taken","rooms_assigned","type","rooms_requested"];default:return["date_received","jobs","payment_status","amount_due","type","rooms_requested","rooms_assigned","timeline","status","slots_taken"]}break;case"all":return["date_received","jobs","type","rooms_requested","rooms_assigned","timeline","status"];default:return[]}},n.prototype.show_fields=function(e){return i.call(this.get_visible_columns(),e)>=0},n.prototype.performInitialSearch=function(){var e,t;return(e=Handshake.cookies.read("interview_schedule_career_center_filter",{user_scoped:!0}))&&this.filter_career_center(_,e,!1),"Career Services"===(t=Handshake.passed.current_user_type)||"Admins"===t?this.searchable.initialSetup("UniversityManageInterviewSchedules"):this.searchable.initialSetup("ManageInterviewSchedules")},n.prototype.filter_career_center=function(e,t,s){if(null==s&&(s=!0),parseInt(t,10)?this.searchable.addExternalParam("career_centers",function(){return[t]}):this.searchable.addExternalParam("career_centers",function(){return""}),s)return this.searchable.performExternalParamsSearch()},n.prototype.unmount=function(){return $(document).off("CareerCenterSelected",this.filter_career_center)},n.prototype.hide_advanced_filters_if_clicked_outside=function(){if(!this.mouseOnAdvancedFilters())return this.showAdvancedFilters(!1)},n}(Handshake.SearchInterviewSchedulesView),Handshake.ShowInterviewScheduleView=function(){function t(t){var s,i,n,o;this.props=t,this.download_interview_slots_csv=e(this.download_interview_slots_csv,this),this.duplicateInterviewScheduleSuccess=e(this.duplicateInterviewScheduleSuccess,this),this.slots_built_callback=e(this.slots_built_callback,this),this.approveAndBuildSchedule=e(this.approveAndBuildSchedule,this),this.show_cancel_warning=e(this.show_cancel_warning,this),this.roomsSelect2Options=e(this.roomsSelect2Options,this),this.showAddInterviewScheduleDate=e(this.showAddInterviewScheduleDate,this),this.removeInterviewScheduleDate=e(this.removeInterviewScheduleDate,this),this.revertInterviewScheduleDate=e(this.revertInterviewScheduleDate,this),this.saveInterviewScheduleDateSuccess=e(this.saveInterviewScheduleDateSuccess,this),this.saveInterviewScheduleDate=e(this.saveInterviewScheduleDate,this),this.editInterviewScheduleDate=e(this.editInterviewScheduleDate,this),this.revertSlot=e(this.revertSlot,this),this.declinePendingSwapRequests=e(this.declinePendingSwapRequests,this),this.showSwapRequests=e(this.showSwapRequests,this),this.showAddInstitutionAttendee=e(this.showAddInstitutionAttendee,this),this.roomSelect2Options=e(this.roomSelect2Options,this),this.job_select2_options=e(this.job_select2_options,this),this.interview_group_select2_options=e(this.interview_group_select2_options,this),this.update_slot_tables=e(this.update_slot_tables,this),this.create_slot_tables=e(this.create_slot_tables,this),this.permissions={},_.each(_.keys(this.props.dynamic_permissions),(i=this,function(e){return Handshake.permissions[e]=ko.observable(i.props.dynamic_permissions[e]),i.permissions[e]=i.props.dynamic_permissions[e]})),this.interview_schedule=ko.observable(new Handshake.InterviewSchedules.InterviewSchedule(this.props.interview_schedule)),this.interview_schedule_cancel_modal=new Handshake.InterviewScheduleCancelModal,this.props.requested_interview_schedule_template&&(this.requestedInterviewScheduleTemplate=ko.observable(Handshake.Resource.resourceFromObject(this.props.requested_interview_schedule_template))),this.interview_schedule_dates=this.interview_schedule().interview_schedule_dates,this.ordered_interview_schedule_dates=ko.computed((n=this,function(){return n.interview_schedule_dates().sort(function(e,t){return Date.parse(e.date())-Date.parse(t.date())})})),this.interviewSlotTables=ko.observable(),this.interviewSlotTablesProps=ko.observable(),this.create_slot_tables(),this.newApplicationModal=new Handshake.CreateApplicationView({success_callback:this.on_new_application_created,applicable:this.props.interview_schedule,pending_document_count:this.props.pending_document_count,interview_slots:this.interview_schedule().interview_slots}),this.room_select2_url="/schools/"+this.interview_schedule().school_id()+"/all_rooms",this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.interview_schedule,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))}),this.interview_schedule().added_labels=this.labelView.labels),this.props.notes_enabled&&(this.notesModal=new Handshake.Notes.NotesView(this.interview_schedule(),!0)),this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,$("#build-interview-packet").length>0&&(this.buildInterviewPacketView=new Handshake.InterviewSchedules.BuildInterviewPacketView({interview_schedule:this.interview_schedule,ajax_download_view:this.ajax_download_view,document_types:this.props.document_types})),$("#build-interview-schedule-slots-modal")&&(this.buildInterviewScheduleSlotsView=new Handshake.InterviewSchedules.BuildInterviewScheduleSlotsView(this.interview_schedule,this.room_select2_url,this.slots_built_callback)),this.props.comments_enabled&&(this.commentsView=new Handshake.Comments.CommentsView(this.interview_schedule,"staff")),this.props.pins_enabled&&(s=ko.observable(),this.props.pin&&s(new Handshake.Pins.Pin(this.props.pin)),this.createPinModal=new Handshake.Pins.CreateModalView(this.interview_schedule,s)),$(".charge-edit-form").length>0&&(this.chargeForm=new Handshake.Charges.ChargeForm({chargeable:this.interview_schedule,institution_id:this.interview_schedule().employer_id(),institution_type:Handshake.Employers.Employer.type,stripe_publishable_key:this.props.stripe_publishable_key,
stripe_amount:this.props.stripe_amount,payment_processor:this.props.payment_processor})),$("#manual-charge-modal").length>0&&(this.manualChargeForm=new Handshake.Charges.ManualChargeForm(this.interview_schedule,this.interview_schedule().employer_id(),Handshake.Employers.Employer.type)),this.props.invoices_enabled&&(this.manageInvoicesModal=new Handshake.Invoices.ManageInvoicesModal(this.interview_schedule())),this.collapsed=ko.observable(!0),this.initial_collapsed=!0,"pending"===this.interview_schedule().status()&&(this.initial_collapsed=!1,this.collapsed(!1)),this.contactModal=new Handshake.Contacts.ShowContactModal(this.props.contacts,this.props.can_show_contact),this.interview_slots_checkins_table_props={interviewScheduleId:this.interview_schedule().id()},this.interview_schedule().fetch_interview_slots(),this.selectedSlot=ko.observable(),this.selectedInterviewScheduleDate=ko.observable(),this.selectedInterviewSlotTable=ko.observable(),this.selectedInterviewSlotView=ko.observable(),window.getUrlParams().auto_apply&&$("#new-application-modal").modal("show"),this.school_institution_attendees=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.school_institution_attendees)),this.schoolInstitutionAttendeesList=new Handshake.InstitutionAttendees.InstitutionAttendeesList({attendable:this.interview_schedule(),institution_attendees:this.school_institution_attendees,institution_type:"School",consortia_exist:this.props.consortia_exist,show_core_schools:this.props.show_core_schools}),this.selectedInstitutionAttendeeView=ko.observable(this.schoolInstitutionAttendeesList),$("#edit-interview-schedule-date").on("hide.bs.modal",(o=this,function(e){if("edit-interview-schedule-date"===e.target.id)return o.revertInterviewScheduleDate(o.selectedInterviewScheduleDate())}))}return t.prototype.create_slot_tables=function(){var e,t;return"Career Services"===Handshake.passed.current_user_type||"Admins"===Handshake.passed.current_user_type?(e=this.interview_schedule_dates().length,_.each(this.interview_schedule_dates(),(t=this,function(s){return s.fetch(function(i){if(s.initial_prop=i.interview_schedule_date,0==(e-=1))return t.update_slot_tables()})}))):this.update_slot_tables()},t.prototype.update_slot_tables=function(){return this.interviewSlotTablesProps({canSeeInterviewSlots:this.props.can_see_interview_slots,canEditInterviewSchedule:this.props.can_edit_interview_schedule,interviewSchedule:this.props.interview_schedule,interviewSlotAdjustLengthEnabled:this.props.interview_slot_adjust_length_enabled,globalPassed:Handshake.passed,requestedInterviewScheduleTemplate:this.props.requested_interview_schedule_template,templates:this.props.templates,permissions:this.permissions,interviewScheduleDates:_.map(this.ordered_interview_schedule_dates(),function(e){return{interviewScheduleDate:e.initial_prop}})}),this.interviewSlotTables(_.map(this.ordered_interview_schedule_dates(),(e=this,function(t){return new Handshake.InterviewSlots.InterviewSlotsTable({can_see_interview_slots:e.props.can_see_interview_slots,interview_schedule:e.interview_schedule,interview_schedule_raw:e.props.interview_schedule,interview_schedule_date:t,interview_schedule_date_raw:t.initial_prop,requestedInterviewScheduleTemplate:e.requestedInterviewScheduleTemplate,requestedInterviewScheduleTemplate_raw:e.props.requested_interview_schedule_template,templates:e.props.templates,can_edit_interview_schedule:e.props.can_edit_interview_schedule,create_slot_tables:e.create_slot_tables})})));var e},t.prototype.on_new_application_created=function(e){return"Students"===Handshake.passed.current_user_type?window.location.href=e.destination_path:Handshake.Helpers.notifySuccess("Application successfully created.")},t.prototype.interview_group_select2_options=function(){return{allowClear:!0,placeholder:"Select "+this.interview_schedule().slot_interview_group_association_label()+"...",collection:_.map(this.interview_schedule().interview_schedule_groups(),function(e){return{id:e.id(),name:e.name()}}),full_data:(e=this,function(t){var s;return t?(s=_.map(t,function(e){return new Handshake.InterviewScheduleGroups.InterviewScheduleGroup({id:e.id,name:e.text})}),e.selectedSlot().interview_schedule_groups(s)):_.map(e.selectedSlot().interview_schedule_groups(),function(e){return{id:e.id(),text:e.name()}})})};var e},t.prototype.job_select2_options=function(){return{allowClear:!0,placeholder:"Select Jobs...",url:"/interview_schedules/possible_jobs",full_data:(t=this,function(e,s){return null==s&&(s=!1),e||s?t.selectedSlot().jobs(Handshake.Resource.resourcesFromArray(e,Handshake.Jobs.Job)):_.map(t.selectedSlot().jobs(),function(e){return{id:e.id(),name:e.name()}})}),dataFunction:(e=this,function(t){return{query:t,simple_search:!0,employer_ids:[e.interview_schedule().employer_id()],school_id:e.interview_schedule().school_id(),not_job_ids:e.selectedSlot().job_ids(),"job.ids":e.interview_schedule().job_ids()}})};var e,t},t.prototype.roomSelect2Options=function(e){var t,s;return t=e?_(this.interview_schedule_dates()).find(function(t){return t.id()===e.interview_schedule_date_id()}):this.selectedInterviewSlotTable().interview_schedule_date,s={simple_search:!0,placeholder:"Room",url:this.room_select2_url,results_property:"rooms",allowClear:!0,primary_property:Handshake.Rooms.Results.name_with_reserved_status,dataFunction:function(e,s){return{query:e,page:s,availability_date:t.date()}},results_filter:Handshake.Rooms.Results.group_by_availability},e&&$.extend(s,{initial_value:e.room_id_full_name()}),s},t.prototype.showAddInstitutionAttendee=function(e){return Handshake.SPA.navigate(this.interview_schedule().entity_path+"/institution_attendees?institution_type="+e.institution_type())},t.prototype.showSwapRequests=function(e){return this.selectedInterviewSlotView(e),$(".interview-slot-swap-modal").modal("show"),!1},t.prototype.declinePendingSwapRequests=function(){return _.each(this.interview_schedule().requested_interview_slot_swaps(),function(e){return e.decline()})},t.prototype.revertSlot=function(e){return e.revert()},t.prototype.editInterviewScheduleDate=function(e,t){return t.preventDefault(),this.selectedInterviewScheduleDate(e.interview_schedule_date),this.showEditInterviewScheduleDateModal()},t.prototype.saveInterviewScheduleDate=function(e){return e.isNew()?e.create((s=this,function(e){return s.saveInterviewScheduleDateSuccess(e,!1)})):e.save((t=this,function(e){return t.saveInterviewScheduleDateSuccess(e,!0)}));var t,s},t.prototype.saveInterviewScheduleDateSuccess=function(e,t){var s;return s=t?"updated":"added",t||this.interview_schedule_dates.push(new Handshake.InterviewScheduleDates.InterviewScheduleDate(e.interview_schedule_date)),Handshake.Helpers.notifySuccess("Interview schedule date successfully "+s+"."),this.hideEditInterviewScheduleDateModal(),this.create_slot_tables()},t.prototype.revertInterviewScheduleDate=function(e){if(e&&e.isNew())return e.revert(),this.interview_schedule_dates.remove(e)},t.prototype.removeInterviewScheduleDate=function(e){var t;if(this.props.can_edit_interview_schedule_date&&confirm("Are you sure you want to delete this date from this interview schedule? All slots on this date will also be deleted."))return e.destroy((t=this,function(s){return t.interview_schedule_dates.remove(e),t.interview_schedule().interview_slots(Handshake.Resource.resourcesFromArray(s.interview_slots)),t.hideEditInterviewScheduleDateModal(),Handshake.Helpers.notifySuccess("Interview schedule date and its slots successfully removed.")}))},t.prototype.showAddInterviewScheduleDate=function(){var e;return e=new Handshake.InterviewScheduleDates.InterviewScheduleDate({interview_schedule_id:this.interview_schedule().id(),moment_time_zone:this.interview_schedule().moment_time_zone(),date:moment().format("YYYY-MM-DD")}),this.selectedInterviewScheduleDate(e),this.showEditInterviewScheduleDateModal()},t.prototype.roomsSelect2Options=function(e){return this.room_select2_url="/schools/"+Handshake.passed.current_user_institution_id+"/all_rooms",{placeholder:"Assign rooms...",initial_value:e.rooms,results_property:"rooms",primary_property:Handshake.Rooms.Results.name_with_reserved_status,url:this.room_select2_url,full_data:function(t,s){return null==s&&(s=!1),t||s?e.rooms(Handshake.Resource.resourcesFromArray(t,Handshake.Rooms.Room)):_.map(e.rooms(),function(e){return{id:e.id(),full_name:e.full_name()}})},dataFunction:function(t,s){return{interview_schedule_id:e.interview_schedule_id(),simple_search:!0,query:t,page:s,availability_date:e.date()}},results_filter:Handshake.Rooms.Results.group_by_availability}},t.prototype.showEditInterviewScheduleDateModal=function(){return $("#edit-interview-schedule-date").modal("show")},t.prototype.hideEditInterviewScheduleDateModal=function(){return $("#edit-interview-schedule-date").modal("hide")},t.prototype.show_cancel_warning=function(){return this.interview_schedule_cancel_modal.show_modal(this.interview_schedule())},t.prototype.approveAndBuildSchedule=function(){return this.interview_schedule().approve((e=this,function(){return e.buildInterviewScheduleSlotsView.initialize()}));var e},t.prototype.slots_built_callback=function(){return this.interview_schedule().fetch_interview_slots(),this.create_slot_tables()},t.prototype.showDuplicateConfirmation=function(){return $("#duplicate-confirmation-modal").modal("show")},t.prototype.duplicateInterviewSchedule=function(){return this.interview_schedule().duplicate(this.duplicateInterviewScheduleSuccess)},t.prototype.duplicateInterviewScheduleSuccess=function(e){return $("#duplicate-confirmation-modal").modal("hide"),window.location.href=new Handshake.InterviewSchedules.InterviewSchedule(e.interview_schedule).entity_path},t.prototype.download_interview_slots_csv=function(){var e;return e=this.interview_schedule().member_route("interview_slots_csv_download"),this.ajax_download_view.download_results(e)},t}(),Handshake.InterviewSchedules.MassEmailContactsRequesterModal=function(){function t(t){this.searchable=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.confirm=e(this.confirm,this),this.modal_element=$("#new-mass-email-modal"),this.initialized=ko.observable(!1),this.send_to_contacts=ko.observable(!1),this.send_to_requesters=ko.observable(!1),this.send_to_self=ko.observable(!1)}return t.prototype.confirm=function(){return this.hide_modal(),this.searchable.performBulkAction({send_to_contacts:this.send_to_contacts(),send_to_requesters:this.send_to_requesters(),send_to_self:this.send_to_self()})},t.prototype.show_modal=function(){return this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}(),Handshake.InterviewSchedules.PrintInterviewPacketsModal=function(){function t(t){this.props=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.perform=e(this.perform,this),this.poll_status=e(this.poll_status,this),this.start_status_polling=e(this.start_status_polling,this),this.clear_status=e(this.clear_status,this),this.show_compiling_status=e(this.show_compiling_status,this),this.get_packets=e(this.get_packets,this),this.dispose=e(this.dispose,this),this.searchable=this.props.searchable,this.modal_element=$("#print-interview-packets-modal"),this.modal_element.on("hidden.bs.modal",this.clear_status),this.show_form=ko.observable(!0),this.status_message=ko.observable(""),this.error_message=ko.observable(""),this.download=ko.observable(null),this.excluded_documents=ko.observable([]),this.show_download_link=ko.observable(!1),this.default_date=this.props.default_date,this.selected_date=ko.observable(Handshake.Helpers.toDatePicker(new Date)),this.group_by=ko.observable("room"),this.include_interview_schedules=ko.observable(!0),this.include_contact_details=ko.observable(!0),this.include_required_documents=ko.observable(!0),this.include_profiles=ko.observable(!1),this.document_options=ko.observable(this.props.document_types),this.selected_document_type_ids=ko.observableArray(_.map(this.document_options(),function(e){return e.id})),$(".group-by-info").popover({html:!0,content:$(".group-by-info-html").html(),container:"body",trigger:"hover"})}return t.prototype.dispose=function(){return this.modal_element.off("hidden.bs.modal")},t.prototype.get_packets=function(){return this.hide_modal(),this.perform()},t.prototype.show_compiling_status=function(e){return this.status_message("Compiling packets...\n\n This might take a while. The packets will be emailed to you when they're done, and a download link will appear."),this.error_message(null),this.excluded_documents([]),this.show_download_link(!1),this.show_form(!1),this.download(new Handshake.Downloads.Download(e.download)),this.start_status_polling(),this.show_modal()},t.prototype.clear_status=function(){return this.status_message(null),this.error_message(null),this.excluded_documents([]),this.show_download_link(!1),clearInterval(this.status_poller),this.download(null),this.show_form(!0)},t.prototype.start_status_polling=function(){return this.poll_status(),this.status_poller=setInterval(this.poll_status,5e3)},t.prototype.poll_status=function(){var e,t;return null!=(e=this.download())?e.fetch((t=this,function(){var e,s,i;return"building"!==(null!=(e=t.download())?e.status():void 0)&&clearInterval(t.status_poller),"done"===(null!=(s=t.download())?s.status():void 0)?(t.status_message("Packets compiled successfully."),t.show_download_link(!0),t.excluded_documents(t.download().worker_message().split("\n").filter(function(e){return!!e}))):"failed"===(null!=(i=t.download())?i.status():void 0)?(t.status_message(""),t.error_message(t.download().worker_message())):void 0})):void 0},t.prototype.perform=function(){var e;return e={date:this.selected_date(),group_by:this.group_by(),include_interview_schedules:this.include_interview_schedules(),include_contact_details:this.include_contact_details(),include_required_documents:this.include_required_documents(),include_profiles:this.include_profiles(),include_past_interview_schedules:"true"},this.include_required_documents()&&(e.selected_document_type_ids=this.selected_document_type_ids()),this.searchable.performBulkAction(e)},t.prototype.show_modal=function(){return this.default_date()&&this.selected_date(this.default_date()),this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}(),Handshake.InterviewSchedules.BuildInterviewPacketView=function(){function t(t){var s,i;this.props=t,this.finishBuildingPacket=e(this.finishBuildingPacket,this),this.finishBuildingPacketFailure=e(this.finishBuildingPacketFailure,this),this.finishBuildingPacketSuccess=e(this.finishBuildingPacketSuccess,this),this.initialize=e(this.initialize,this),this.interview_schedule=this.props.interview_schedule,this.contact_options=ko.observableArray([]),this.missing_pdfs_list=ko.observableArray([]),this.initialized=ko.observable(!1),this.server_error=ko.observable(),this.document_options=ko.observable(this.props.document_types),this.selected_document_type_ids=ko.observableArray(_.map(this.document_options(),function(e){return e.id})),this.missing_pdf_names=ko.computed((s=this,function(){return s.missing_pdfs_list().join(", ")})),this.include_current_user=ko.observable(!0),this.included_contact_ids=ko.observableArray([]),this.include_interview_schedule=ko.observable(!0),this.include_contact_details=ko.observable(!1),this.include_required_documents=ko.observable(!0),this.include_profiles=ko.observable(!1),this.back_to_back_schedule=ko.observable(!1),this.can_print_back_to_back=ko.computed((i=this,function(){var e,t;return e=!0,t=_.groupBy(i.interview_schedule().interview_slots(),function(e){return e.start_date()}),_.each(t,function(t){var s;if(t.length%2!=0&&(e=!1),s=_.map(t,function(e){return e.room_id()}),_.uniq(s).length!==t.length)return e=!1}),e}))}return t.prototype.initialize=function(){return this.initialized()?$("#build-interview-packet").modal("show"):this.interview_schedule().build_interview_packet_details((e=this,function(t){return $("#build-interview-packet").modal("show"),e.contact_options(Handshake.Resource.resourcesFromArray(t.contacts)),e.missing_pdfs_list(t.missing_pdfs_list),e.initialized(!0)}));var e},t.prototype.finishBuildingPacketSuccess=function(e){return $("#build-interview-packet").modal("hide"),this.props.ajax_download_view.bulkActionSuccess(e),Handshake.Helpers.notifySuccess("The interview schedule packet was successfully sent to the selected recipients.")},t.prototype.finishBuildingPacketFailure=function(e){return this.server_error(e.error)},t.prototype.finishBuildingPacket=function(){var e;return e={group_by:"date_then_room",include_current_user:this.include_current_user(),included_contact_ids:this.included_contact_ids().join(","),include_interview_schedule:this.include_interview_schedule(),include_contact_details:this.include_contact_details(),include_required_documents:this.include_required_documents(),include_profiles:this.include_profiles(),selected_document_type_ids:this.selected_document_type_ids(),back_to_back_schedule:this.back_to_back_schedule()},this.interview_schedule().send_packet(this.finishBuildingPacketSuccess,this.finishBuildingPacketFailure,e)},t}(),Handshake.InterviewSchedules.BuildInterviewScheduleSlotsView=function(){function t(t,s,i){this.interview_schedule=t,this.rooms_search_url=s,this.slots_built_callback=i,this.templateSelect2Options=e(this.templateSelect2Options,this),this.roomSelect2Options=e(this.roomSelect2Options,this),this.finishBuildingScheduleSlots=e(this.finishBuildingScheduleSlots,this),this.finishBuildingScheduleSlotsFailure=e(this.finishBuildingScheduleSlotsFailure,this),this.finishBuildingScheduleSlotsSuccess=e(this.finishBuildingScheduleSlotsSuccess,this),this.initialize=e(this.initialize,this),this.setInterviewSchedule=e(this.setInterviewSchedule,this),this.initialized=ko.observable(!1),this.server_error=ko.observable(),this.datesToApply=ko.observableArray([]),this.interview_schedule()&&this.datesToApply(_.map(this.interview_schedule().interview_schedule_dates(),function(e){return e.id()}))}return t.prototype.setInterviewSchedule=function(e){return this.interview_schedule(e),this.datesToApply(_.map(this.interview_schedule().interview_schedule_dates(),function(e){return e.id()})),this.initialized(!1)},t.prototype.initialize=function(){return this.initialized()?$("#build-interview-schedule-slots-modal").modal("show"):(_.each(this.interview_schedule().interview_schedule_dates(),(e=this,function(t){var s,i;for(i=[],s=0;s<(t.room_count()||1);)i.push(new Handshake.Rooms.Room({})),++s;return t.rooms(i),t.interview_schedule_template_id_to_build_with(e.interview_schedule().interview_schedule_template_id())})),this.initialized(!0),$("#build-interview-schedule-slots-modal").modal("show"));var e},t.prototype.finishBuildingScheduleSlotsSuccess=function(){if($("#build-interview-schedule-slots-modal").modal("hide"),Handshake.Helpers.notifySuccess("The interview schedule slots were successfully built."),_.isFunction(this.slots_built_callback))return this.slots_built_callback()},t.prototype.finishBuildingScheduleSlotsFailure=function(e){return e.error&&!_.isFunction(e.error)?this.server_error(e.error):this.server_error("There was an issue processing your request")},t.prototype.finishBuildingScheduleSlots=function(){var e,t,s;return t={dates_to_apply:this.datesToApply()},e=_.filter(this.interview_schedule().interview_schedule_dates(),(s=this,function(e){return _.contains(s.datesToApply(),e.id())})),t.interview_schedule_dates=_.map(e,function(e){var t;return t=e.interview_schedule_template_id_to_build_with(),{interview_schedule_date_id:e.id(),room_ids:_.map(e.rooms(),function(e){return void 0!==e.id()?""+e.id():""}),interview_schedule_template_id_to_build_with:t}}),this.interview_schedule().build_all_slots(this.finishBuildingScheduleSlotsSuccess,this.finishBuildingScheduleSlotsFailure,t)},t.prototype.roomSelect2Options=function(e,t){return{placeholder:"Choose a Room...",url:this.rooms_search_url,results_property:"rooms",allowClear:!0,primary_property:Handshake.Rooms.Results.name_with_reserved_status,full_data:function(t){return t?(e.id(t.id),e.name(t.name)):{}},dataFunction:function(e,s){return{query:e,page:s,availability_date:t.date()}},results_filter:Handshake.Rooms.Results.group_by_availability}},t.prototype.templateSelect2Options=function(e){return{placeholder:"Choose a Template...",allow_remove:!0,url:"/schools/"+this.interview_schedule().school_id()+"/interview_schedule_templates",full_data:(t=this,function(s){return s?e.interview_schedule_template_id_to_build_with(s.id):{id:t.interview_schedule().interview_schedule_template_id(),name:t.interview_schedule().interview_schedule_template_name()}})};var t},t}(),Handshake.PrintPacketsView=function(){function t(t){this.props=t,this.poll_status=e(this.poll_status,this),this.start_status_polling=e(this.start_status_polling,this),this.handle_error=e(this.handle_error,this),this.get_packets=e(this.get_packets,this),this.disable_submit=ko.observable(!1),this.status_message=ko.observable(""),this.error_message=ko.observable(""),this.download=ko.observable(null),this.excluded_documents=ko.observable([]),this.show_download_link=ko.observable(!1),this.selected_date=ko.observable(Handshake.Helpers.toDatePicker(new Date)),this.group_by=ko.observable("room"),this.include_interview_schedules=ko.observable(!0),this.include_contact_details=ko.observable(!0),this.include_required_documents=ko.observable(!0),this.include_profiles=ko.observable(!1),this.document_options=ko.observable(this.props.document_types),this.status_options=ko.observable(this.props.status_options),this.selected_status_options=ko.observableArray(["approved"]),this.selected_document_type_ids=ko.observableArray(_.map(this.document_options(),function(e){return e.id})),$(".group-by-info").popover({html:!0,content:$(".group-by-info-html").html(),container:"body"})}return t.prototype.get_packets=function(){var e,t,s;return this.status_message("Compiling packets...\n\n This might take a while. The packets will be emailed to you when they're done, and a download link will appear."),this.error_message(null),this.excluded_documents([]),this.download(null),this.show_download_link(!1),this.disable_submit(!0),e={date:this.selected_date(),group_by:this.group_by(),include_interview_schedules:this.include_interview_schedules(),include_contact_details:this.include_contact_details(),include_required_documents:this.include_required_documents(),include_profiles:this.include_profiles(),selected_status_options:this.selected_status_options()},this.include_required_documents()&&(e.selected_document_type_ids=this.selected_document_type_ids()),$.ajax({type:"POST",url:"/interview_schedules/download_packets.json",dataType:"json",data:e,success:(s=this,function(e){if(e.success)return s.download(new Handshake.Downloads.Download(e.download)),s.start_status_polling();if(e.errors)return s.handle_error(e.errors.join(", "));throw"Failed to interpret response from download_packets call. Neither success nor errors were returned"}),error:(t=this,function(){return t.handle_error("An error occurred while attempting to download the packet. Engineers have been notified.",!0)})})},t.prototype.handle_error=function(e,t){return null==t&&(t=!1),t&&bugsnagClient.notify(e),this.status_message(""),this.error_message(e),this.disable_submit(!1)},t.prototype.start_status_polling=function(){return this.poll_status(),this.status_poller=setInterval(this.poll_status,5e3)},t.prototype.poll_status=function(){return this.download().fetch((e=this,function(){return"building"!==e.download().status()&&(clearInterval(e.status_poller),e.disable_submit(!1)),"done"===e.download().status()?(e.status_message("Packets compiled successfully."),e.show_download_link(!0),e.excluded_documents(e.download().worker_message().split("\n").filter(function(e){return!!e}))):"failed"===e.download().status()?(e.status_message(""),e.error_message(e.download().worker_message())):void 0}));var e},t}(),Handshake.InterviewSchedules.Card=function(){function t(t){this.props=t,this.set_alerts=e(this.set_alerts,this),this.set_description=e(this.set_description,this),this.start_date=_(this.props.card.interview_schedule_dates()).first().date(),this.vm={type:"interview-schedule",featured:this.props.featured,heading_params:{title:this.props.card.employer_name()+" Interview",title_path:this.props.card.entity_path,subtitle:Handshake.Helpers.straightDate(this.start_date),date:this.start_date},content_params:{alerts:[]},action_params:{actions:[{text:"View Details",url:this.props.card.entity_path,"class":"btn-brand-alt-green"}]}},this.set_alerts(),this.set_description()}return t.prototype.set_description=function(){return this.props.card.job_titles().length?(this.vm.content_params.description="Jobs include: "+this.props.card.job_titles_joined(),this.vm.content_params.alerts.length>0?this.vm.content_params.description_length=90:void 0):(this.vm.content_params.description="There are no jobs for this interview.",this.vm.content_params.description_class="placeholder")},t.prototype.set_alerts=function(){var e,t,s,i,n;return s=5,t=moment(this.props.card.apply_end()),n=moment(new Date),e="info",i="fa-info-circle",t.diff(n,"days")<=s&&(e="danger",i="fa-exclamation-triangle"),this.vm.content_params.alerts.push({html_safe_content:"<p><i class='fa "+i+"'></i> Applications close "+t.shorthandWithTwoDigitYear("l")+" at "+t.format("h:mmA")+"</p>","class":e})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InterviewSeasons={},Handshake.InterviewSeasons.InterviewSeason=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},school_id:{send:!0},schedule_start:{send:!0},schedule_end:{send:!0},season_start:{send:!0},season_end:{send:!0}})}return t(i,s),i.type="InterviewSeason",i.underscore="interview_season",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.EditInterviewSeasonView=function(){function e(){}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InterviewSlotSwaps={},Handshake.InterviewSlotSwaps.InterviewSlotSwap=function(s){function i(t){this.decline=e(this.decline,this),this.approve=e(this.approve,this),i.__super__.constructor.call(this,t),this.attributes({student_id:{send:!0},interview_slot_id:{send:!0},interview_schedule_id:{send:!0},status:{send:!0},interview_slot_student_id:{},student_name:{}})}return t(i,s),i.type="InterviewSlotSwap",i.underscore="interview_slot_swap",i.prototype.nested_route=function(){return"/interview_slots/"+this.interview_slot_id()},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(Handshake.Helpers.notifySuccess("Successfully swapped slots."),_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(Handshake.Helpers.notifySuccess("Slot swap request declined."),_.isFunction(e))return e(t)}})},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.InterviewSlots={},Handshake.InterviewSlots.InterviewSlot=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d,p,m,f,b,y,v,g;this.request_swap=e(this.request_swap,this),this.swap_slot=e(this.swap_slot,this),this.leave_slot=e(this.leave_slot,this),this.take_slot=e(this.take_slot,this),i.__super__.constructor.call(this,t),this.attributes({interview_schedule_id:{send:!0},interview_schedule_date_id:{send:!0},room_id:{send:!0},room_full_name:{send:!0},initial_room_group:{send:!0},interviewer_id:{send:!0},interviewer_name:{send:!0},employer_name:{},employer_logo_url:{},interview_schedule_invite_id:{send:!0},interviewee_information:{},student_id:{send:!0,convert_undefined_to_null:!0},student_name:{},student_school_name:{send:!0},moment_time_zone:{},start_date:{send:!0},end_date:{send:!0},unavailable:{send:!0},fancy_title:{},interview_slot_swaps:{array:!0,belongs_to:Handshake.InterviewSlotSwaps.InterviewSlotSwap},checked_in:{send:!0},interview_schedule_groups:{belongs_to:Handshake.InterviewScheduleGroups.InterviewScheduleGroup,array:!0},interview_schedule_group_ids:{convert_empty_to_blank:!0,array:!0,send:!0}}),this.start_time_fancy=ko.computed((s=this,function(){return Handshake.TimeZoneHelper.dateTime("time",s.start_date(),s.moment_time_zone())})),this.end_time_fancy=ko.computed((n=this,function(){return Handshake.TimeZoneHelper.dateTime("time",n.end_date(),n.moment_time_zone())})),this.unarchived_swaps=ko.computed((o=this,function(){return _.filter(o.interview_slot_swaps(),function(e){return"archived"!==e.status()})})),this.interview_schedule_group_ids=ko.computed((r=this,function(){return _.map(r.interview_schedule_groups(),function(e){return e.id()})})),this.interview_schedule_group_names=ko.computed((a=this,function(){return _.map(a.interview_schedule_groups(),function(e){return e.name()})})),this.interview_schedule_groups_with_jobs=ko.computed((c=this,function(){return _.filter(c.interview_schedule_groups(),function(e){return e.interview_schedule_job_id()})})),this.interview_schedule_groups_without_jobs=ko.computed((l=this,function(){return _.filter(l.interview_schedule_groups(),function(e){return!e.interview_schedule_job_id()})})),this.modal_start_time=ko.computed({read:(h=this,function(){return Handshake.Helpers.toTimePicker(h.start_date(),h.moment_time_zone())}),write:(u=this,function(e){var t,s;return s=moment.tz(e,"h:mm a",u.moment_time_zone()),(t=moment.tz(u.start_date(),u.moment_time_zone())).hours(s.hours()),t.minutes(s.minutes()),u.start_date(t.toISOString())})}),this.modal_end_time=ko.computed({read:(p=this,function(){return Handshake.Helpers.toTimePicker(p.end_date(),p.moment_time_zone())}),write:(d=this,function(e){var t,s;return s=moment.tz(e,"h:mm a",d.moment_time_zone()),(t=moment.tz(d.end_date(),d.moment_time_zone())).hours(s.hours()),t.minutes(s.minutes()),d.end_date(t.toISOString())})}),this.display_time=ko.computed((m=this,function(){return m.start_time_fancy()+" - "+m.end_time_fancy()})),this.slot_taken_by_current_user=ko.computed((f=this,function(){return f.student_id()===Handshake.passed.current_user_id})),this.room_id_full_name=ko.computed((b=this,function(){return{id:b.room_id(),full_name:b.room_full_name()}})),this.room_or_group_name=ko.computed((y=this,function(){return y.room_full_name()?y.room_full_name():"Unassigned Room Number "+y.initial_room_group()})),this.name=ko.computed((v=this,function(){return v.fancy_title()})),this.student_select2_options={simple_search:!0,placeholder:"Select an Applicant...",url:"/interview_schedules/"+this.interview_schedule_id()+"/possible_students",allowClear:!0,secondary_property:"institution_managed_email",full_data:(g=this,function(e,t){return e||t?(g.student_id(e?e.id:null),g.student_name(e?e.name:null)):{id:g.student_id(),name:g.student_name()}})}}return t(i,s),i.type="InterviewSlot",i.underscore="interview_slot",i.nested_methods=["new","create","index"],i.prototype.nested_route=function(){return"/interview_schedules/"+this.interview_schedule_id()},i.prototype.take_slot=function(e,t){return this.ajax_call({type:"POST",method:"take_slot",on_member:!0,action:"take_slot",success:function(t){if(_.isFunction(e))return e(t)},failure:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.leave_slot=function(e,t){return this.ajax_call({type:"POST",method:"leave_slot",on_member:!0,action:"leave_slot",success:function(t){if(_.isFunction(e)&&e(t),!1===t.can_take_slot)return document.location.reload()},failure:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.swap_slot=function(e,t){return this.ajax_call({type:"POST",method:"swap_slot",on_member:!0,action:"swap_slot",success:function(t){if(_.isFunction(e))return e(t)},failure:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.request_swap=function(e,t){return this.ajax_call({type:"POST",method:"request_swap",on_member:!0,
action:"request_swap",success:function(t){if(_.isFunction(e))return e(t)},failure:function(e){if(_.isFunction(t))return t(e)}})},i}(Handshake.Resource),Handshake.InterviewSlots.InterviewSlotsTable=function(){function t(t){var s,i,n,o,r,a,c,l,u,h;this.props=t,this.save_date_with_delay=e(this.save_date_with_delay,this),this.unreserve_room=e(this.unreserve_room,this),this.reserve_room=e(this.reserve_room,this),this.used_rooms=e(this.used_rooms,this),this.manually_add_interview_slot=e(this.manually_add_interview_slot,this),this.manually_add_interview_slot_success=e(this.manually_add_interview_slot_success,this),this.applyTemplate=e(this.applyTemplate,this),this.applyRequestedTemplate=e(this.applyRequestedTemplate,this),this.bulkToggleChecks=e(this.bulkToggleChecks,this),this.interview_group_select2_options=e(this.interview_group_select2_options,this),this.setSortOption=e(this.setSortOption,this),this.slot_comparison=e(this.slot_comparison,this),this.uncheckCheckbox=e(this.uncheckCheckbox,this),this.checkCheckbox=e(this.checkCheckbox,this),this.interview_schedule=this.props.interview_schedule,this.interview_schedule_date=this.props.interview_schedule_date,this.requestedInterviewScheduleTemplate=this.props.requestedInterviewScheduleTemplate,this.requestedInterviewScheduleTemplate_raw=this.props.requestedInterviewScheduleTemplate_raw,this.create_slot_tables=this.props.create_slot_tables,this.new_slot_length=ko.observable(),this.templates=ko.observableArray([]),this.picked_slots=ko.observableArray(),this.table_slots=ko.computed((s=this,function(){return ko.utils.arrayFilter(s.interview_schedule().interview_slots(),function(e){return e.interview_schedule_date_id()===s.interview_schedule_date.id()})})),this.allChecked=ko.computed((i=this,function(){return i.picked_slots().length===i.table_slots().length})),this.disable_shift=ko.observable(!1),this.disable_time=ko.observable(!1),this.sendValues=ko.observableArray(["ids"]),this.sendValues.subscribe((n=this,function(){return-1!==n.sendValues.indexOf("start_date")||-1!==n.sendValues.indexOf("end_date")?n.disable_shift(!0):n.disable_shift(!1),-1!==n.sendValues.indexOf("shift_time")?n.disable_time(!0):n.disable_time(!1)})),this.bulk_edit_interviewer_name=ko.observable(),this.bulk_edit_unavailable=ko.observable(),this.bulk_edit_checked_in=ko.observable(),this.can_edit_unavailable=ko.computed((o=this,function(){var e;return e=!0,_.each(o.picked_slots(),function(t){if(t.student_id()&&t.student_id()>0)return e=!1}),e})),this.bulk_edit_start_time=ko.observable(),this.bulk_edit_end_time=ko.observable(),this.bulk_edit_room_id=ko.observable(),this.bulk_edit_initial_room_group=ko.observable(),this.period_value=ko.observable(),this.period_time=ko.observable(),this.period_add=ko.observable(),this.bulk_edit_interview_group_ids=ko.observableArray(),this.slot_sort_options=ko.observableArray(["Time","Job","Student","Interviewer","Room"]),this.selected_slot_sort=ko.observable("Time"),this.sort_direction=ko.observable("desc"),this.bulk_edit_shift_time=ko.computed((r=this,function(){if(r.period_value()&&r.period_time())return+r.period_add()*+r.period_value()*+r.period_time()})),this.templates(Handshake.Resource.resourcesFromArray(this.props.templates,Handshake.InterviewScheduleTemplates.InterviewScheduleTemplate)),$.fn.modal.Constructor.prototype.enforceFocus=function(){return null},this.interview_slot_views=ko.observableArray(),_.each(this.interview_schedule().interview_slots(),(a=this,function(e){if(e.interview_schedule_date_id()===a.interview_schedule_date.id())return a.interview_slot_views.push(new Handshake.InterviewSlots.InterviewSlotView(a.interview_schedule,e))})),this.ordered_slots=ko.computed((c=this,function(){var e;switch(e="",c.selected_slot_sort()){case"Time":e="";break;case"Job":e="interview_schedule_group_names";break;case"Student":e="student_name";break;case"Interviewer":e="interviewer_name";break;case"Room":e="room_or_group_name";break;default:bugsnagClient.notify("Invalid slot sort of "+c.selected_slot_sort())}return c.interview_slot_views().sort(function(t,s){return c.slot_comparison(t,s,e)})})),this.unreserved_used_rooms=ko.computed((l=this,function(){return _(l.used_rooms()).filter(function(e){return!_(l.interview_schedule_date.rooms()).some(function(t){return t.id()===e.id})})})),this.unused_reserved_rooms=ko.computed((u=this,function(){return _(u.interview_schedule_date.rooms()).filter(function(e){return e.id()&&!_(u.used_rooms()).some(function(t){return t.id===e.id()})})})),this.interview_slots_table_header_props=(h=this,function(){return{canSeeInterviewSlots:h.props.can_see_interview_slots,canEditInterviewSchedule:h.props.can_edit_interview_schedule,interviewScheduleDate:h.props.interview_schedule_date_raw,interviewSchedule:h.props.interview_schedule_raw,globalPassed:Handshake.passed}})}return t.prototype.checkCheckbox=function(e,t){var s;return s=$(t.target).data("send-value"),"change"===t.type&&""===$(t.target).val()?this.sendValues.remove(s):-1===this.sendValues.indexOf(s)?this.sendValues.push(s):void 0},t.prototype.uncheckCheckbox=function(e,t){if(""===$(t.target).val())return this.sendValues.remove($(t.target).data("send-value"))},t.prototype.slot_comparison=function(e,t,s){var i,n,o;return o=0,s.length>0&&("interview_schedule_group_names"===s?(i=e.interview_slot[s]().join(", "),n=t.interview_slot[s]().join(", ")):(i=e.interview_slot[s]()||"",n=t.interview_slot[s]()||""),o=i.localeCompare(n),"asc"===this.sort_direction()&&(o=-o)),0===o&&(o=Date.parse(e.interview_slot.start_date())-Date.parse(t.interview_slot.start_date()),"asc"===this.sort_direction()&&0===s.length&&(o=-o)),o},t.prototype.setSortOption=function(e){return this.selected_slot_sort()===e?"desc"===this.sort_direction()?this.sort_direction("asc"):this.sort_direction("desc"):(this.selected_slot_sort(e),this.sort_direction("desc"))},t.prototype.interview_group_select2_options=function(){return{allowClear:!0,placeholder:"Select "+this.interview_schedule().slot_interview_group_association_label()+"...",value:this.bulk_edit_interview_group_ids,collection:_.map(this.interview_schedule().interview_schedule_groups(),function(e){return{id:e.id(),name:e.name()}})}},t.prototype.bulkToggleChecks=function(){return!this.allChecked()?this.picked_slots(this.table_slots().slice()):this.picked_slots([]),!0},t.prototype.applyRequestedTemplate=function(){return this.applyTemplate(this.requestedInterviewScheduleTemplate())},t.prototype.applyTemplate=function(e){return this.interview_schedule().apply_template(e,this.interview_schedule_date,(t=this,function(e){return t.interview_schedule().interview_slots(Handshake.Resource.resourcesFromArray(e.interview_slots,Handshake.InterviewSlots.InterviewSlot)),t.create_slot_tables()}));var t},t.prototype.manually_add_interview_slot_success=function(e){var t;return t=new Handshake.InterviewSlots.InterviewSlot(e.interview_slot),this.interview_schedule().interview_slots.push(t),this.create_slot_tables()},t.prototype.manually_add_interview_slot=function(){var e;return(e=new Handshake.InterviewSlots.InterviewSlot({})).interview_schedule_id(this.interview_schedule().id()),e.interview_schedule_date_id(this.interview_schedule_date.id()),e.moment_time_zone(this.interview_schedule().moment_time_zone()),e.create(this.manually_add_interview_slot_success,null,{new_slot_length:this.new_slot_length()})},t.prototype.used_rooms=function(){return _(this.interview_schedule().interview_slots()).reduce((e=this,function(t,s){var i;return s.interview_schedule_date_id()!==e.interview_schedule_date.id()?t:(i=s.room_id_full_name()).id?_(t).some(function(e){return e.id===i.id})?t:t.concat(i):t}),[]);var e},t.prototype.reserve_room=function(e){return this.interview_schedule_date.rooms.push(new Handshake.Rooms.Room(e)),this.save_date_with_delay()},t.prototype.unreserve_room=function(e){return this.interview_schedule_date.rooms.remove(e),this.save_date_with_delay()},t.prototype.save_date_with_delay=function(){return this.delayed_date_save&&clearTimeout(this.delayed_date_save),this.delayed_date_save=setTimeout(this.interview_schedule_date.save,1e3)},t}(),Handshake.InterviewSlots.InterviewSlotView=function(){function t(t,s){var i,n,o,r,a,c,l;this.interview_schedule=t,this.interview_slot=s,this.declineSwap=e(this.declineSwap,this),this.approveSwap=e(this.approveSwap,this),this.student_action_text=ko.observable(),this.student_action_css=ko.observable(),this.student_action_visible=ko.observable(!0),this.swap_text=ko.computed((i=this,function(){var e;return e=1===i.interview_slot.unarchived_swaps().length?"":"s",i.interview_slot.unarchived_swaps().length+" Slot Swap"+e})),this.swap=ko.computed((n=this,function(){return _.find(n.interview_slot.interview_slot_swaps(),function(e){return e.student_id()===Handshake.passed.current_user_id&&"archived"!==e.status()})})),this.requested_swap=ko.computed((o=this,function(){return _.find(o.interview_schedule().requested_interview_slot_swaps(),function(e){return e.student_id()===o.interview_slot.student_id()&&"pending"===e.status()})})),this.current_user_selected_slot=ko.computed((r=this,function(){return _.find(r.interview_schedule().interview_slots(),function(e){return e.student_id()===Handshake.passed.current_user_id})})),this.student_in_interview_schedule_group=ko.computed((a=this,function(){return!(a.interview_slot.interview_schedule_groups().length>0&&!_.find(a.interview_slot.interview_schedule_groups_without_jobs(),function(e){return _.contains(Handshake.permissions.student_interview_schedule_group_ids(),e.id())})&&!_.find(a.interview_slot.interview_schedule_groups_with_jobs(),function(e){return _.contains(Handshake.permissions.student_interview_schedule_group_ids(),e.id())&&_.contains(Handshake.permissions.student_job_ids(),e.job_id())}))})),this.visible_to_students=ko.computed((c=this,function(){return!(Handshake.permissions.student_applications_present()&&"Students"===Handshake.passed.current_user_type&&c.interview_slot.interview_schedule_groups().length>0&&!_.find(c.interview_slot.interview_schedule_groups(),function(e){return _.contains(Handshake.permissions.student_interview_schedule_group_ids(),e.id())}))})),this.student_action=ko.computed((l=this,function(){return Handshake.permissions.student_take_interview_slot()&&!l.interview_slot.slot_taken_by_current_user()&&l.student_in_interview_schedule_group()?(l.student_action_visible(!0),l.interview_slot.student_id()?l.swap()&&!l.requested_swap()?"declined"===l.swap().status()?(l.student_action_text("Swap Declined"),l.student_action_css("btn-default disabled"),null):(l.student_action_text("Withdraw Swap Request"),l.student_action_css("btn-warning"),"withdraw_swap"):l.requested_swap()?(l.student_action_text("Switch to Slot"),l.student_action_css("btn-primary"),"swap_slot"):l.current_user_selected_slot()?(l.student_action_text("Request Swap"),l.student_action_css("btn-default"),"request_swap"):l.student_action_visible(!1):l.current_user_selected_slot()?(l.student_action_text("Switch to Slot"),l.student_action_css("btn-primary"),"swap_slot"):(l.student_action_text("Take Slot"),l.student_action_css("btn-success"),"take_slot")):l.interview_slot.slot_taken_by_current_user()?(l.student_action_visible(!0),l.student_action_text("Leave Slot"),l.student_action_css("btn-danger"),"leave_slot"):l.student_action_visible(!1)}))}return t.prototype.approveSwap=function(e){return e.approve((t=this,function(){return t.interview_schedule().fetch_interview_slots(),e.status("approved")}));var t},t.prototype.declineSwap=function(e){return e.decline()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Invoices={},Handshake.Invoices.Invoice=function(s){function i(t){var s;this.resend=e(this.resend,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({created_by_id:{},invoiceable_id:{send:!0},invoiceable_type:{send:!0},institution_id:{send:!0},institution_type:{send:!0},invoiceable_path:{},number:{send:!0},amount:{send:!0},subject:{send:!0},message:{send:!0},contact_ids:{array:!0,send:!0},user_ids:{array:!0,send:!0},updated_at:{},created_at:{},download_id:{},download_token:{}}),this.download_path=ko.computed((s=this,function(){return s.download_id()&&s.download_token()?"/downloads/"+s.download_id()+"?token="+s.download_token():null}))}return t(i,s),i.type="Invoice",i.underscore="invoice",i.prototype.nested_route=function(){return this.invoiceable_path()},i.prototype.resend=function(e){return this.ajax_call({type:"PUT",on_member:!0,data:{invoice:{message:this.message(),subject:this.subject(),user_ids:this.user_ids(),contact_ids:this.contact_ids()}},action:"resend",method:"resend",success:function(){if(e)return e()}})},i}(Handshake.Resource),Handshake.Invoices.InvoiceModal=function(){function t(t){var s,i;this.success_callback=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.process=e(this.process,this),this.resend_invoice_success=e(this.resend_invoice_success,this),this.create_invoice_success=e(this.create_invoice_success,this),this.initialize_modal=e(this.initialize_modal,this),this.contact_string=e(this.contact_string,this),this.fetch_invoice_content=e(this.fetch_invoice_content,this),this.invoice=ko.observable(),this.invoiceable=ko.observable(),this.user_options=ko.observableArray([]),this.contact_options=ko.observableArray([]),this.loading=ko.observable(!0),this.reloadPageOnCallback=!1,this.modalTitle=ko.computed((s=this,function(){return s.invoice()&&s.invoice().isNew()?"New Invoice":"Resend Invoice"})),this.submitButtonLabel=ko.computed((i=this,function(){return i.invoice()&&i.invoice().isNew()?"Finish and Send":"Resend"}))}return t.prototype.fetch_invoice_content=function(){var e,t;return this.loading(!0),e=this.invoice().isNew()?"new":"fetch",this.invoice()[e]((t=this,function(e){return t.user_options(Handshake.Resource.resourcesFromArray(e.user_options)),t.contact_options(Handshake.Resource.resourcesFromArray(e.contact_options)),t.loading(!1)}))},t.prototype.contact_string=function(e){return"Registration"===this.invoiceable().type&&e.id()===this.invoiceable().registrant_contact_id()?"(Registrant)":"(Representative)"},t.prototype.initialize_modal=function(e,t,s){return this.invoiceable=t,this.invoice(e),this.user_options([]),this.contact_options([]),this.reloadPageOnCallback=s,this.fetch_invoice_content()},t.prototype.create_invoice_success=function(e){return Handshake.Helpers.notifySuccess("Invoice was successfully created and sent."),_.isFunction(this.success_callback)&&this.success_callback(e),this.hide_modal()},t.prototype.resend_invoice_success=function(){return Handshake.Helpers.notifySuccess("Invoice was successfully resent."),this.hide_modal()},t.prototype.process=function(){return this.invoice().isNew()?this.invoice().create(this.create_invoice_success):this.invoice().resend(this.resend_invoice_success)},t.prototype.show_modal=function(){return $("#invoice-modal").modal("show")},t.prototype.hide_modal=function(){if($("#invoice-modal").modal("hide"),this.reloadPageOnCallback)return Handshake.SPA.reload()},t}(),Handshake.Invoices.ManageInvoicesModal=function(){function t(t,s){var i,n;this.hideModal=e(this.hideModal,this),this.showModal=e(this.showModal,this),this.showInvoiceModal=e(this.showInvoiceModal,this),this.isModalOpen=e(this.isModalOpen,this),this.createNewInvoice=e(this.createNewInvoice,this),this.showInvoice=e(this.showInvoice,this),this.toggleHidePreviousInvoices=e(this.toggleHidePreviousInvoices,this),this.loadInvoices=e(this.loadInvoices,this),this.setInvoiceable=e(this.setInvoiceable,this),this.initialize=e(this.initialize,this),this.invoiceable=ko.observable(t),this.invoices=ko.observableArray([]).trackHasItems(),this.initialized=ko.observable(!1),this.invoiceModal=new Handshake.Invoices.InvoiceModal(s),this.hidePreviousInvoices=ko.observable(!0),this.reloadPageOnCallback=!1,this.openInvoiceModalOnClose=!1,$("#manage-invoices-modal").on("hidden.bs.modal",(i=this,function(){if(i.invoices.clear(),i.openInvoiceModalOnClose)return i.showInvoiceModal()})),this.visibleInvoices=ko.computed((n=this,function(){return n.invoices().length<1?[]:n.hidePreviousInvoices()?[n.invoices()[0]]:n.invoices()}))}return t.prototype.initialize=function(){return this.loadInvoices(),this.showModal()},t.prototype.setInvoiceable=function(e){if(e)return this.invoiceable(e)},t.prototype.loadInvoices=function(){var e;return new Handshake.Invoices.Invoice({invoiceable_path:this.invoiceable().entity_path}).index((e=this,function(t){return e.invoices(Handshake.Resource.resourcesFromArray(_(t.invoices).sortBy(function(e){return e.number}).reverse(),Handshake.Invoices.Invoice))}))},t.prototype.toggleHidePreviousInvoices=function(){return this.hidePreviousInvoices(!this.hidePreviousInvoices())},t.prototype.showInvoice=function(e){return this.invoiceModal.initialize_modal(e,this.invoiceable,this.reloadPageOnCallback),this.openInvoiceModalOnClose=!0,this.hideModal()},t.prototype.createNewInvoice=function(){var e;return e=new Handshake.Invoices.Invoice({invoiceable_id:ko.utils.unwrapObservable(this.invoiceable().id),invoiceable_type:this.invoiceable().type,invoiceable_path:this.invoiceable().entity_path}),this.invoiceModal.initialize_modal(e,this.invoiceable,this.reloadPageOnCallback),this.isModalOpen()?(this.openInvoiceModalOnClose=!0,this.hideModal()):this.showInvoiceModal()},t.prototype.isModalOpen=function(){return $("body").hasClass("modal-open")},t.prototype.showInvoiceModal=function(){return this.invoiceModal.show_modal(),this.openInvoiceModalOnClose=!1},t.prototype.showModal=function(){return $("#manage-invoices-modal").modal("show")},t.prototype.hideModal=function(){return $("#manage-invoices-modal").modal("hide")},t}(),Handshake.DownloadInvoicesView=function(){function t(t){var s;this.props=t,this.poll_status=e(this.poll_status,this),this.start_status_polling=e(this.start_status_polling,this),this.handle_error=e(this.handle_error,this),this.get_invoice_report=e(this.get_invoice_report,this),this.start_date=ko.observable(""),this.end_date=ko.observable(""),this.employer_id=ko.observable(""),this.selected_payment_statuses=ko.observableArray(this.props.payment_statuses),this.selected_chargeable_types=ko.observableArray(_.map(this.props.chargeable_types,function(e){return e.value})),this.payment_statuses=ko.observableArray(this.props.payment_statuses),this.chargeable_types=ko.observableArray(this.props.chargeable_types),this.building_invoices=ko.observable(!1),this.status_message=ko.observable(""),this.error_message=ko.observable(""),this.enable_submit=ko.computed((s=this,function(){return Handshake.Helpers.isValidDate(s.start_date())&&Handshake.Helpers.isValidDate(s.end_date())&&0!==s.selected_payment_statuses().length&&0!==s.selected_chargeable_types().length&&!s.building_invoices()})),this.download=ko.observable(null),this.show_download_link=ko.observable(!1)}return t.prototype.get_invoice_report=function(){var e,t,s;return this.status_message("Building invoice report...\n\n This might take a while. The invoice report will be emailed to you when they're done, and a download link will appear here."),this.download(null),this.error_message(""),this.show_download_link(!1),this.building_invoices(!0),e={start_date:this.start_date(),end_date:this.end_date(),employer_id:this.employer_id(),payment_statuses:this.selected_payment_statuses(),chargeable_types:this.selected_chargeable_types()},$.ajax({type:"POST",url:"/invoices/download_report.json",dataType:"json",data:e,success:(s=this,function(e){if(e.success)return s.download(new Handshake.Downloads.Download(e.download)),s.start_status_polling();if(e.errors)return s.handle_error(e.errors.join(", "));throw new Error("Failed to interpret response from download_report call. Neither success nor errors were returned")}),error:(t=this,function(){return t.handle_error("An error occurred while attempting to download the invoice report. Engineers have been notified.",!0)})})},t.prototype.handle_error=function(e,t){return null==t&&(t=!1),t&&bugsnagClient.notify(e),this.status_message(""),this.error_message(e),this.building_invoices(!1)},t.prototype.start_status_polling=function(){return this.poll_status(),this.status_poller=setInterval(this.poll_status,5e3)},t.prototype.poll_status=function(){return this.download().fetch((e=this,function(){return"building"!==e.download().status()&&(clearInterval(e.status_poller),e.building_invoices(!1)),"done"===e.download().status()?(e.status_message("Invoice report built successfully."),e.show_download_link(!0)):"failed"===e.download().status()?(e.status_message(""),e.error_message(e.download().worker_message())):void 0}));var e},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.JobApplySettings={},Handshake.JobApplySettings.JobApplySetting=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({apply_type:{send:!0},external_apply_type:{send:!0},external_url:{send:!0},additional_instructions:{send:!0}})}return e(s,t),s.type="JobApplySetting",s.underscore="job_apply_setting",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.JobFunctions={},Handshake.JobFunctions.JobFunction=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{}})}return e(s,t),s.type="JobFunction",s.underscore="job_function",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.JobPreferences={},Handshake.JobPreferences.JobPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({enabled:{send:!0},institution_label_name:{},institution_label_id:{send:!0},must:{send:!0},custom_message:{send:!0},school_id:{}})}return e(s,t),s.type="JobPreference",s.underscore="job_preference",s}(Handshake.Resource),Handshake.EditJobPreferencesView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.job_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.job_preference)),this.preferenceLabelView=new Handshake.Labels.PreferenceLabelView(this.job_preference)}return e.prototype.cancel=function(){return this.job_preference().revert()},e.prototype.submit=function(){return this.job_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.JobRoles={},Handshake.JobRoles.JobRole=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{},job_role_group_id:{}})}return e(s,t),s.type="JobRole",s.underscore="job_role",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.JobTypes={},Handshake.JobTypes.JobType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{}})}return e(s,t),s.type="JobType",s.underscore="job_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Jobs={},Handshake.Jobs.Job=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d,p,m,f,b,y,v,g,k,w,H,S;this.school_names_tooltip=e(this.school_names_tooltip,this),this.status_tooltip=e(this.status_tooltip,this),this.duplicate=e(this.duplicate,this),this.expire=e(this.expire,this),this.paginated_postings=e(this.paginated_postings,this),this.go_to_previous_page=e(this.go_to_previous_page,this),this.go_to_next_page=e(this.go_to_next_page,this),this.initialize_date_picker=e(this.initialize_date_picker,this),i.__super__.constructor.call(this,t),this.attributes({name:{},title:{send:!0},description:{send:!0},text_description:{},desired_skills:{send:!0},responsibilities:{send:!0},locations:{array:!0,send:!0,nested_attribute:!0,belongs_to:Handshake.Locations.Location},locations_option:{send:!0},location_names:{array:!0},location_cities:{array:!0},location_states:{array:!0},duration:{send:!0},government:{send:!0},remote:{send:!0},employer_id:{send:!0},employer_name:{},employer_logo_url:{},employer_logo_feed_item_url:{},employer_path:{},job_type_id:{send:!0,convert_integer_to_string:!0},job_type_name:{},salary_type_id:{convert_integer_to_string:!0,send:!0},salary_type:{belongs_to:Handshake.SalaryTypes.SalaryType},salary_type_name:{},relocation_assistance_available:{send:!0},pay_rate:{send:!0},monthly_housing_stipend:{send:!0},employment_type_id:{convert_integer_to_string:!0,send:!0},employment_type_name:{},job_function_ids:{arry:!0,send:!0},document_notes:{send:!0},document_type_ids:{send:!0,array:!0,convert_integer_to_string:!0},document_types:{array:!0},student_screen:{send:!0,nested_attribute:!0,belongs_to:Handshake.StudentScreens.StudentScreen},contact_jobs:{array:!0,send:!0,nested_attribute:!0,belongs_to:Handshake.ContactJobs.ContactJob},contact:{belongs_to:Handshake.Contacts.Contact},division_id:{send:!0},employer_industry_id:{},employer_industry_name:{},division_name:{},nice_job_type:{},tracking_code:{send:!0},institution_name:{},response_date:{},status:{},work_study:{send:!0},postings:{send:!0,belongs_to:Handshake.Postings.Posting,nested_attribute:!0,array:!0},applications_count:{},created_at:{},updated_at:{},job_apply_setting:{send:!0,belongs_to:Handshake.JobApplySettings.JobApplySetting,nested_attribute:!0},additional_application_instructions:{send:!0},use_external_apply_link:{send:!0},external_apply_link:{send:!0},start_date:{send:!0},end_date:{send:!0},salary:{send:!0},pay_schedule_id:{send:!0,convert_integer_to_string:!0},postings_count:{},pending_postings_count:{},approved_postings_count:{},declined_postings_count:{},expired_postings_count:{},posting_school_names:{}}),this.full_type=ko.computed((s=this,function(){var e;return e=s.job_type_name(),s.employment_type_name()&&(e=s.employment_type_name()+" "+e),e})),this.truncated_description=ko.computed((n=this,function(){return Handshake.Helpers.truncateString(n.text_description(),200)})),this.document_type_names=ko.computed((o=this,function(){return _.map(o.document_types(),function(e){return e.name}).join(", ")})),this.new_posting_school_name=ko.observable(),this.fancy_employer_name=ko.computed((r=this,function(){return r.division_name()?r.employer_name()+" - "+r.division_name():r.employer_name()})),this.nice_response_date=ko.computed((a=this,function(){return Handshake.Helpers.straightDateTime(a.response_date())})),this.non_destroyed_locations=ko.computed((c=this,function(){return _.filter(c.locations(),function(e){return!e.markedAsDestroyed()})})),this.non_destroyed_contact_jobs=ko.computed((l=this,function(){return _.filter(l.contact_jobs(),function(e){return!e.markedAsDestroyed()})})),this.non_destroyed_postings=ko.computed((u=this,function(){return _.filter(u.postings(),function(e){return!e.markedAsDestroyed()})})),this.non_expired_postings=ko.computed((h=this,function(){return _.filter(h.non_destroyed_postings(),function(e){return e.isPersisted()&&"expired"!==e.status()||e.isNew()})})),this.condensed_location_names=ko.computed((d=this,function(){var e;return e="",d.location_names().length>0&&(e+=d.location_names()[0]),d.location_names().length>1&&(e+=" + "+(d.location_names().length-1)+" more"),e})),this.city_state_pairs=ko.computed((p=this,function(){return"usa"===p.locations_option()?["United States"]:"worldwide"===p.locations_option()?["Worldwide"]:_(p.location_cities()).map(function(e,t){var s,i;return s=[e],(i=p.location_states()[t])&&s.push(i),_.compact(s).join(", ")})})),this.safe_card_location_html=ko.computed((m=this,function(){var e;return e="",e+="<b>"+Handshake.Helpers.escapeString(m.full_type())+"</b> ",m.city_state_pairs().length>0&&(e+="in <b>"+Handshake.Helpers.escapeString(m.city_state_pairs()[0])+"</b>"),e})),this.tooltip_text=ko.computed((f=this,function(){if(f.city_state_pairs().length>1)return f.city_state_pairs().length-1+" more"})),this.safe_tooltip_html=ko.computed((b=this,function(){var e;if(b.city_state_pairs().length>1)return e='<div style="text-align: left">',_(b.city_state_pairs()).each(function(t){return e+=Handshake.Helpers.escapeString(t),e+="</br>"}),e+="</div>"})),this.applications_count_text=ko.pureComputed((y=this,function(){var e;return e=Handshake.Helpers.pluralizeString("applicant",y.applications_count(),"s"),y.applications_count()+" "+e})),this.applications_path=ko.pureComputed((v=this,function(){return v.entity_path+"/applications"})),this.can_create_message_campaign=ko.pureComputed((g=this,function(){return g.approved_postings_count()>0})),this.new_job_message_campaign_path=ko.pureComputed((k=this,function(){return k.entity_path+"/message_campaigns/new"})),this.job_path=function(e,t){var s;return s="/jobs/",s+=e.id()||t.job_id()},this.short_created_at=ko.pureComputed((w=this,function(){return moment(w.created_at()).format("l")})),this.current_page=ko.observable(1),this.per_page=25,this.sorted_postings=ko.computed((H=this,function(){return H.postings().sort(function(e,t){return e.school_name()<t.school_name()?-1:1})})),this.num_pages=ko.computed((S=this,function(){var e;return e=S.postings().length/S.per_page,S.postings().length%S.per_page>0||0===S.postings().length?Math.floor(e)+1:Math.floor(e)}))}return t(i,s),i.type="Job",i.underscore="job",i.prototype.initialize_date_picker=function(e,t){var s,i,n,o,r,a,c,l,u,h,_;if(!(i=$(t.currentTarget).find("input").eq(0)).hasClass("initialized"))return s=i.siblings(".validated-datetime"),n=i.closest(".input-group"),_=i.val(),a="yyyy-mm-dd H:ii p",i.donetyping(function(e){if(Handshake.Helpers.validateDateTimeInput(e,a)&&""!==$(e).val())return s.data("date",$(e).val())},this.timeout),i.on("change",function(){if(Handshake.Helpers.validateDateTimeInput(i,a)&&""!==i.val())return s.data("date",i.val())}),h=a.replace("ii p","mm am/pm").toLowerCase(),i.attr("placeholder")||i.attr("placeholder",h),n.after("<div class='error-wrapper'><span class='invalid-date hidden'>Invalid Date </span><span class='format-hint hidden'>"+h+"</span></div>"),c=a.replace("yyyy-mm-dd","YYYY-MM-DD").replace("mm/yyyy","MM/YYYY").replace("ii p","mm a"),l=ko.observable(Handshake.passed.current_user_time_zone),r=_?moment.tz(_,c,l()):moment(),o="time"===(u={autoclose:!0,showMeridian:!0,startView:2,format:a,minView:0,maxView:4}).formatViewType?r:r.startOf("hour"),u.initialDate=moment(o.format("YYYY-MM-DD hh:mm a"),"YYYY-MM-DD hh:mm a").toDate(),s.on("click",function(){return s.find(".fa").tooltip("hide")}),s.datetimepicker(u),s.on("changeDate",function(){return i.val(s.data("date")).trigger("change")}),i.on("blur",function(){return n.siblings(".error-wrapper").find(".format-hint:first").addClass("hidden")}),i.on("focus",function(){var e;return n.siblings(".error-wrapper").find(".format-hint:first").removeClass("hidden"),(e=s.find(".fa")).tooltip({trigger:"manual",title:"Click here to select date"}),e.tooltip("show"),setTimeout(function(){return e.tooltip("hide")},4e3)}),i.addClass("initialized")},i.prototype.go_to_next_page=function(){var e;return e=this.current_page()+1,this.current_page(e)},i.prototype.go_to_previous_page=function(){var e;return e=this.current_page()-1,this.current_page(e)},i.prototype.paginated_postings=function(e){var t,s;return s=(e-1)*this.per_page,t=e*this.per_page,this.sorted_postings().slice(s,t)},i.prototype.expire=function(e){return this.ajax_call({type:"POST",method:"expire",on_member:!0,action:"expire",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.duplicate=function(e,t){return this.ajax_call({type:"POST",method:"duplicate",on_member:!0,action:"duplicate",data:t,success:function(t){
if(_.isFunction(e))return e(t)}})},i.prototype.status_tooltip=function(e){return'<div class="count">\n  '+this[e+"_postings_count"]()+'\n</div>\n<div class="status">\n  '+capitalizeString(e)+"\n</div>"},i.prototype.school_names_tooltip=function(){var e,t;return(e=(t=this.posting_school_names().map(function(e){return Handshake.Helpers.escapeString(e)})).length)>10?t.slice(0,10).join("<br>")+"<br>And "+(e-10)+" more":t.join("<br>")},i}(Handshake.Resource),Handshake.Jobs.LargePreview=function(){function e(e){this.job=e.job,this.hide_employer_button=e.hide_employer_button}return e}(),Handshake.EmployerShowJobView=function(){function t(t){this.props=t,this.expire_all_postings=e(this.expire_all_postings,this),this.view_posting_details=e(this.view_posting_details,this),this.job=ko.observable(new Handshake.Jobs.Job(this.props.job)),this.favorite=ko.observable(),this.props.favorite&&this.favorite(Handshake.Resource.resourceFromObject(this.props.favorite)),this.postings=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.postings)),this.labelView=new Handshake.Labels.LabelView({labellable:ko.observable(this.job()),labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))}),this.notesModal=new Handshake.Notes.NotesView(this.job(),!0),this.contactModal=new Handshake.Contacts.ShowContactModal(this.props.contacts,this.props.can_show_contact),this.posting_details_modal=new Handshake.PostingDetailsModal({job:this.job}),this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Expire at All Schools?",safe_body_html:"You are about to expire this job across every school it is posted to, which will prevent\nadditional students from applying. Are you sure you want to proceed?"})}return t.prototype.view_posting_details=function(e){return this.posting_details_modal.select_posting_and_load(e)},t.prototype.expire_all_postings=function(){return this.confirmation_modal.show_modal((e=this,function(){return e.job().expire(function(){return Handshake.Helpers.notifyInfo("All postings for this job will be expired in just a moment. In some cases, you may need to edit associated interview dates instead.")})}));var e},t}(),Handshake.OldShowJobView=function(){function t(t){var s,i,n,o,r;this.props=t,this.saveExpirationDate=e(this.saveExpirationDate,this),this.duplicate=e(this.duplicate,this),this.postingAction=e(this.postingAction,this),this.job=new Handshake.Jobs.Job(this.props.job),this.distributeJobView=new Handshake.DistributeJobView({job_id:this.props.job.id,postings:this.props.postings}),this.newApplicationModal=new Handshake.CreateApplicationView({success_callback:this.refresh_on_create_success,applicable:this.props.job}),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:ko.observable(this.job),labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))})),this.props.notes_enabled&&(this.notesModal=new Handshake.Notes.NotesView(this.job,!0)),this.props.pins_enabled&&(s=ko.observable(),this.props.pin&&s(new Handshake.Pins.Pin(this.props.pin)),this.createPinModal=new Handshake.Pins.CreateModalView(ko.observable(this.job),s)),this.postings=ko.observableArray(),this.postings(Handshake.Resource.resourcesFromArray(this.props.postings)),this.postingViews=ko.observableArray(),_.each(this.postings(),(i=this,function(e){var t;return t=new Handshake.Postings.PostingFormView({posting:ko.observable(e),next_job_path:i.props.next_job_path}),i.postingViews.push(t)})),this.latest_posting=ko.observable(this.postings()[0]),this.postingText=ko.computed((n=this,function(){if(n.latest_posting()&&n.latest_posting().id()){if("approved"===n.latest_posting().status())return"Expire Posting Now";if("expired"===n.latest_posting().status())return"Approve Again"}return""})),this.showPostingAction=ko.computed((o=this,function(){var e;if(o.latest_posting()&&o.latest_posting().id()){if(o.latest_posting().controlled_by_interview_schedule())return!1;if("approved"===(e=o.latest_posting().status())||"expired"===e)return!0}return!1})),this.distributeJobView.postings.subscribe((r=this,function(e){var t;return t=new Handshake.Postings.PostingFormView({posting:ko.observable(e[0].value),next_job_path:r.props.next_job_path}),r.postingViews.unshift(t)}),null,"arrayChange"),this.contactModal=new Handshake.Contacts.ShowContactModal(this.props.contacts,this.props.can_show_contact),this.selectedPosting=ko.observable(null),this.modal_action=ko.observable(),window.getUrlParams().auto_apply&&$("#new-application-modal").modal("show")}return t.prototype.refresh_on_create_success=function(e){return window.location.href=e.destination_path},t.prototype.postingAction=function(){return!!this.latest_posting()&&("expired"===this.latest_posting().status()?(this.selectedPosting(this.latest_posting()),this.selectedPosting().expiration_date(null),this.modal_action("approve_again"),$("#posting-expiration-date").modal("show")):"approved"===this.latest_posting().status()?this.latest_posting().expire(function(){return Handshake.Helpers.notifySuccess("Posting successfully expired.")}):void 0)},t.prototype.duplicate=function(){return this.selectedPosting(new Handshake.Postings.Posting({job_id:this.latest_posting().job().id()})),this.modal_action("duplicate"),$("#posting-expiration-date").modal("show")},t.prototype.saveExpirationDate=function(){var e,t,s;if(t=$("#posting-expiration-date input#expiration-date").val(),this.selectedPosting().expiration_date(t),$("#posting-expiration-date").modal("hide"),!t||$("#posting-expiration-date .invalid-date:visible").length>0)Handshake.Helpers.notifyError("A valid expiration date is required.");else switch(this.modal_action()){case"approve_again":return e=this.latest_posting(),$.ajax({method:"PUT",url:"/postings/"+this.selectedPosting().id(),dataType:"json",data:{posting:{expiration_date:this.selectedPosting().expiration_date()}},success:function(){return e.approve(function(){return Handshake.Helpers.notifySuccess("Posting successfully approved.")},!0)}});case"duplicate":return s=function(e){return Handshake.Helpers.notifySuccess("Job was successfully duplicated."),window.location.href=e.job.entity_path+"/edit"},this.latest_posting().job().duplicate(s,{duplicate_job_expiration_date:this.selectedPosting().expiration_date()})}},t}(),Handshake.InterviewScheduleRedirectModal=function(){function t(){this.setup_modal=e(this.setup_modal,this),this.destination_path=ko.observable(),this.interview_schedules=ko.observableArray()}return t.prototype.setup_modal=function(e,t){return this.destination_path(e),this.interview_schedules(Handshake.Resource.resourcesFromArray(t))},t.prototype.show=function(){return $("#interview-schedule-redirect-modal").modal("show")},t.prototype.close=function(){return Handshake.SPA.navigate(this.destination_path())},t}(),Handshake.Jobs.FilterJobsView=function(){function t(t,s,i,n){this.additionalCallback=s,this.searchCallback=e(this.searchCallback,this),this.items=ko.observableArray([]),this.templateName="Job-template",this.searchable=new Handshake.Searchable($("#search-form",t),"jobs",this.searchCallback,t),this.searchable.pushHistoryOnSearchPerformed(!1),i||this.searchable.initialSetup("Job",n)}return t.prototype.searchCallback=function(e){if(this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.Jobs.Job)),this.additionalCallback)return this.additionalCallback(e)},t}(),Handshake.DistributeJobView=function(){function e(e){this.props=e,this.postings=ko.observableArray([]),this.postings(Handshake.Resource.resourcesFromArray(this.props.postings,Handshake.Postings.Posting))}return e}(),Handshake.SearchJobsView=function(){function t(){this.searchCallback=e(this.searchCallback,this),this.jobs=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"jobs",this.searchCallback),this.searchable.initialSetup("Job")}return t.prototype.searchCallback=function(e){return this.jobs(Handshake.Resource.resourcesFromArray(e.results,Handshake.Jobs.Job))},t.prototype.templateName=function(e){return e.type+"-template"},t}(),Handshake.UnifiedJobsView=function(){function t(t){var s,i,n,o,r,a;this.props=t,this.expire_posting=e(this.expire_posting,this),this.expire_all_postings=e(this.expire_all_postings,this),this.searchCallback=e(this.searchCallback,this),this.persistDivisionsFiltersInCookies=e(this.persistDivisionsFiltersInCookies,this),this.updateStoredFilters=e(this.updateStoredFilters,this),this.setDefaultSort=e(this.setDefaultSort,this),this.category=e(this.category,this),this.switchOnlyMyJobs=e(this.switchOnlyMyJobs,this),this.switchFilterMode=e(this.switchFilterMode,this),this.switchViewBy=e(this.switchViewBy,this),i=Handshake.cookies.read("unified_jobs_filters",{user_scoped:!0}),o=getUrlParams().view_by_job,this.view_by_job=ko.observable(o&&"true"===o||(null!=i?i.view_by_job:void 0)||!1),this.filter_mode=ko.observable(getUrlParams().filter_mode||(null!=i?i.filter_mode:void 0)||"active"),n=getUrlParams().only_my_jobs,this.only_my_jobs=ko.observable(n&&"true"===n||(null!=i?i.only_my_jobs:void 0)||!1),this.results=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"jobs",this.searchCallback),this.searchable.addExternalParam("view_by_job",this.view_by_job),this.view_by_job.subscribe(this.switchViewBy),this.searchable.addExternalParam("filter_mode",this.filter_mode,{include_in_bulk_actions:!0}),this.filter_mode.subscribe(this.switchFilterMode),this.searchable.addExternalParam("only_my_jobs",this.only_my_jobs),this.only_my_jobs.subscribe(this.switchOnlyMyJobs),this.safe_html_empty_state=ko.computed((r=this,function(){var e;switch(e="No jobs matched your search. ",r.filter_mode()){case"active":e+="Try selecting <b>Expired, Declined</b> or <b>Not Posted</b> above!";break;case"expired":e+="Try selecting <b>Active, Declined</b> or <b>Not Posted</b> above!";break;case"all":e+="Try selecting <b>Not Posted</b> or <b>Declined</b> above!";break;case"declined":e+="Try selecting <b>Active, Expired</b> or <b>Not Posted</b> above!";break;case"not_posted":e+="Try selecting <b>Active, Expired</b> or <b>Declined</b> above!"}return e})),this.confirmation_modal_title=ko.observable(""),this.confirmation_modal_body=ko.observable(""),this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:this.confirmation_modal_title,body:this.confirmation_modal_body}),this.bulk_download_documents=new Handshake.BulkDownloadDocumentsModal({searchable:this.searchable,document_types:this.props.document_types,extra_data:(a=this,function(){return{view_by_job:a.view_by_job()}})}),s=[{label:"Download Applicant Packages",type:"simple",key_action:!0,bulk_action:"download_application_documents_pdf",select_action:this.bulk_download_documents.show_modal,confirm_action:this.bulk_download_documents.confirm,cancel_action:this.bulk_download_documents.hide_modal,success:this.bulk_download_documents.download_success},{label:"Download Applicant Data to CSV",type:"simple",key_action:!0,bulk_action:"download_applicant_data_csv",success:this.searchable.ajax_download_view.bulkActionSuccess,extra_data:{filter_mode:this.filter_mode()}}],this.searchable.bulkActions(s),this.initialSetupWithPersistedFiltering(),this.setDefaultSort(),this.job_applicants_header_tooltip="These numbers show applications across every school the job is posted to on Handshake. If you\nhaven't added one of these schools to your account, you may see fewer applications.",this.my_jobs_toggle_popover_options={html:!0,placement:"bottom",animation:!1,hide_on_click_outside:!0,content:'<div class="unified-jobs-view__my-jobs-toggle-popover">\n  <b>JOB VIEW SETTINGS</b>\n  <div class="form-group">\n    <span class="radio">\n      <label>\n        <input type="radio" name="only_my_jobs" value="false" data-bind="radio_boolean: only_my_jobs">\n          All '+Handshake.Helpers.escapeString(this.props.employer_name)+' jobs\n        </input>\n      </label>\n    </span>\n    <span class="radio">\n      <label>\n        <input type="radio" name="only_my_jobs" value="true" data-bind="radio_boolean: only_my_jobs">\n          Jobs created by me\n        </input>\n      </label>\n    </span>\n  </div>\n</div>'},this.previous_view_by_job=null}return t.prototype.initialSetupWithPersistedFiltering=function(){var e,t;return this.stored_divisions=Handshake.cookies.read("divisions_filters",{user_scoped:!0}),this.stored_divisions?(t=_.map(this.stored_divisions,function(e){return new Handshake.FilterValue(e,"divisions")}),e=new Handshake.SavedSearches.SavedSearch({values:t,qualified_only:null}),this.searchable.initialSetup(this.category(),e)):this.searchable.initialSetup(this.category())},t.prototype.switchViewBy=function(){return this.searchable.category(this.category()),this.searchable.sortingInfo.sortBy(null),this.searchable.checked_ids([]),this.setDefaultSort(),this.updateStoredFilters(),this.searchable.performExternalParamsSearch({safeFilterChange:!0})},t.prototype.switchFilterMode=function(e){switch(this.setDefaultSort(),e){case"declined":null==this.previous_view_by_job&&(this.previous_view_by_job=this.view_by_job()),this.view_by_job()?this.view_by_job(!1):this.searchable.performExternalParamsSearch();break;case"not_posted":null==this.previous_view_by_job&&(this.previous_view_by_job=this.view_by_job()),this.view_by_job()?this.searchable.performExternalParamsSearch():this.view_by_job(!0);break;default:null!=this.previous_view_by_job&&(this.view_by_job(this.previous_view_by_job),this.previous_view_by_job=null),this.searchable.performExternalParamsSearch()}return this.updateStoredFilters()},t.prototype.switchOnlyMyJobs=function(){return this.updateStoredFilters(),this.searchable.performExternalParamsSearch()},t.prototype.category=function(){return this.view_by_job()?"ManageJobs":"Employers"===Handshake.passed.current_user_type?"EmployerPostings":"JobPostings"},t.prototype.setDefaultSort=function(){var e;if(!this.view_by_job()){if(e=this.searchable.sortingInfo.columns(),!(this.searchable.sortingInfo.isDefaultSort()||1===e.length&&"expiration_date"===e[0]))return;return this.searchable.sortingInfo.sortBy(null),"active"===this.filter_mode()?this.searchable.sortingInfo.sortBy("expiration_date","asc"):this.searchable.sortingInfo.sortBy("expiration_date","desc")}if(this.searchable.sortingInfo.isDefaultSort())return this.searchable.sortingInfo.sortBy("created_at","desc")},t.prototype.updateStoredFilters=function(){var e;return e={view_by_job:this.view_by_job(),filter_mode:this.filter_mode(),only_my_jobs:this.only_my_jobs()},Handshake.cookies.write("unified_jobs_filters",e,{user_scoped:!0,permanent:!0})},t.prototype.persistDivisionsFiltersInCookies=function(){var e,t;if(e=this.searchable.searchParams().divisions||[],t=this.stored_divisions||[],_.intersection(e,t).length!==_.union(e,t).length)return Handshake.cookies.write("divisions_filters",e,{user_scoped:!0,permanent:!0})},t.prototype.searchCallback=function(e){return this.persistDivisionsFiltersInCookies(),this.results(Handshake.Resource.resourcesFromArray(e.results))},t.prototype.expire_all_postings=function(e){return this.confirmation_modal_title("Expire at All Schools?"),this.confirmation_modal_body("You are about to expire this job across every school it is posted to, which will prevent additional students from\napplying. Are you sure you want to proceed?"),this.confirmation_modal.show_modal(function(){return e.expire(function(){return Handshake.Helpers.notifyInfo("All postings for this job will be expired in just a moment. In some cases, you may need to edit associated\ninterview dates instead.")})})},t.prototype.expire_posting=function(e){return this.confirmation_modal_title("Expire This Job at "+e.school_name()),this.confirmation_modal_body("You are about to expire this job at "+e.school_name()+", which will prevent additional students from applying.\nAre you sure you want to proceed?"),this.confirmation_modal.show_modal(function(){return e.expire(function(){return Handshake.Helpers.notifySuccess("Posting successfully expired.")})})},t}(),Handshake.JobSharePreview=function(){function e(e){this.props=e}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Journals={},Handshake.Journals.Journal=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},body:{send:!0},body_with_hashtags_as_labels:{},url:{},image_present:{},image_file_name:{send:!0},image_content_type:{send:!0},image_list_item_url:{},labels:{},created_at:{},fancy_created_at:{}})}return t(i,s),i.type="Journal",i.underscore="journal",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.EditJournalView=function(){function e(){this.userImageUploadView=new Handshake.UserImages.UserImageUploadView}return e}(),Handshake.JournalIndexView=function(){function t(t){this.props=t,this.searchCallback=e(this.searchCallback,this),this.create_journal=e(this.create_journal,this),this.journals=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback),this.searchable.initialSetup("Journals")}return t.prototype.create_journal=function(){var e;return new Handshake.Journals.Journal({user_id:Handshake.passed.current_user_id,body:$("#journal_body_quick").val()}).create((e=this,function(t){return e.journals.unshift(new Handshake.Journals.Journal(t.journal)),e.searchable.currentResult(e.journals())}))},t.prototype.expand_body_quick=function(){return $("#journal_body_quick").addClass("expanded")},t.prototype.searchCallback=function(e){return this.journals(Handshake.Resource.resourcesFromArray(e.results))},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.KioskPreferences={},Handshake.KioskPreferences.KioskPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({school_id:{send:!0},should_hash_input:{send:!0},card_salt:{send:!0},card_substring_regex:{send:!0},card_regex:{send:!0}})}return e(s,t),s.type="KioskPreference",s.underscore="kiosk_preference",s}(Handshake.Resource),Handshake.EditKioskPreferenceView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.kiosk_preference=new Handshake.KioskPreferences.KioskPreference(this.props.kiosk_preference)}return e.prototype.cancel=function(){return this.kiosk_preference.revert()},e.prototype.submit=function(){return this.kiosk_preference.save(function(){return Handshake.Helpers.notifySuccess("Your settings have been successfully saved.")})},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Labels={},Handshake.Labels.Label=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},labellable_path:{},institution_label_id:{send:!0},institution_label_type:{}})}return t(i,s),i.type="Label",i.underscore="label",i.prototype.nested_route=function(){return""+this.labellable_path()},i}(Handshake.Resource),Handshake.Labels.PreferenceLabelView=function(){function t(t){this.preference=t,this.institutionLabelCallback=e(this.institutionLabelCallback,this),this.labelSelect2Options=e(this.labelSelect2Options,this),this.editLabelView=new Handshake.InstitutionLabels.EditLabelView("User",this.institutionLabelCallback)}return t.prototype.labelSelect2Options=function(e){var t;return t="/institution_labels",e.school_id&&e.school_id()&&(t+="?"+$.param({school_id:e.school_id()})),{placeholder:"Select a label...",url:t,full_data:function(t){return t?(e.institution_label_name(t.name),e.institution_label_id(t.id)):{name:e.institution_label_name(),id:e.institution_label_id()}},dataFunction:function(e){return{labellable_types:["User"],query:e,simple_search:!0}}}},t.prototype.institutionLabelCallback=function(e){return this.preference().institution_label_name(e.name()),this.preference().institution_label_id(e.id())},t}(),Handshake.Labels.LabelView=function(){function t(t){var s,i,n,o,r;this.props=t,this.institutionLabelCallback=e(this.institutionLabelCallback,this),this.deleteItem=e(this.deleteItem,this),this.addItem=e(this.addItem,this),this.confirm=e(this.confirm,this),this.labellable=this.props.labellable,this.labels=this.props.labels,this.hide_when_empty=this.props.hide_when_empty||!1,this.institution_label=ko.observable(),this.editLabelView=new Handshake.InstitutionLabels.EditLabelView(this.labellable().type,this.institutionLabelCallback),this.can_delete_labels=ko.observable(!0),null!=this.props.can_label&&this.can_delete_labels(this.props.can_label),this.props.is_component_view&&(this.can_delete_labels=Handshake.ability.can("label",this.labellable().underscore_plural,this.labellable().id())),this.normal_labels=ko.computed((s=this,function(){return s.labels().filter(function(e){return"normal"===e.institution_label_type()})})),this.public_labels=ko.computed((i=this,function(){return i.labels().filter(function(e){return"public"===e.institution_label_type()})})),this.system_labels=ko.computed((n=this,function(){return n.labels().filter(function(e){return"system"===e.institution_label_type()})})),this.label_select2_options={placeholder:"Select a label...",url:"/institution_labels",on_change:this.addItem,value:this.institution_label_id,secondary_property:function(e){return capitalizeString(e.label_type)+" Label"},full_data:(r=this,function(e){return e?r.institution_label(Handshake.Resource.resourceFromObject(e)):r.institution_label(null)}),dataFunction:(o=this,function(e){return{labellable_types:[o.labellable().type],label_types:["normal","public"],query:e,simple_search:!0,not_ids:_.map(o.labels(),function(e){return e.institution_label_id()}).join(",")}})}}return t.prototype.confirm=function(){return"public"!==this.institution_label().label_type()||confirm("This label will be seen by "+"students"+'. Press "OK" to add this label.')},t.prototype.addItem=function(){var e,t,s;return this.confirm()?(t={institution_label_id:this.institution_label().id(),labellable_path:this.labellable().entity_path},(e=new Handshake.Labels.Label(t)).create((s=this,function(){return s.labels.push(e),s.institution_label(null),$("#label-select2").select2("data",null)}))):(this.institution_label(null),$("#label-select2").select2("data",null))},t.prototype.deleteItem=function(e){return e.destroy((t=this,function(){return t.labels.remove(e)}));var t},t.prototype.institutionLabelCallback=function(e){return this.institution_label(e),this.addItem()},t}(),Handshake.Labels.BulkLabelModal=function(){function t(t){this.searchable=t,this.hideModal=e(this.hideModal,this),this.showModal=e(this.showModal,this),this.confirm=e(this.confirm,this),this.labelSelect2Options=e(this.labelSelect2Options,this),this.institutionLabelCallback=e(this.institutionLabelCallback,this),this.showCreateLabelModal=e(this.showCreateLabelModal,this),this.relevant_labellable_type=e(this.relevant_labellable_type,this),this.modal_element=$("#bulk-label-modal"),this.institution_label_id=ko.observable(null),this.editLabelView=new Handshake.InstitutionLabels.EditLabelView("All",this.institutionLabelCallback)}return t.prototype.relevant_labellable_type=function(){var e,t;return(e=_.filter(this.searchable.bulkActions(),(t=this,function(e){return"add_employer_label"===t.searchable.selectedBulkAction().bulk_action?"add_employer_label"===e.bulk_action:"add_label"===e.bulk_action}))[0])&&e.labellable_type?e.labellable_type:e?("undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"NoLabellableType",errorMessage:"Bulk action found, without a labellable type",groupingHash:"Bulk action found, without a labellable type",metaData:{bulkAction:e}}),null):("undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify({errorClass:"MissingBulkAction",errorMessage:"No relevant bulk action found for bulk labelling",groupingHash:"No relevant bulk action found for bulk labelling",metaData:{existingBulkActions:this.searchable.bulkActions()}}),null)},t.prototype.showCreateLabelModal=function(){return this.modal_element.modal("hide"),this.editLabelView.setInstitutionLabel(new Handshake.InstitutionLabels.InstitutionLabel),$("#edit-institution-label").modal("show")},t.prototype.institutionLabelCallback=function(){return this.modal_element.modal("show")},t.prototype.labelSelect2Options=function(){return{placeholder:"Select a label...",url:"/institution_labels",full_data:(t=this,function(e){return e?t.institution_label_id(e.id):{name:"",id:null}}),dataFunction:(e=this,function(t){var s;return s={query:t,label_types:["normal","public"],simple_search:!0},e.relevant_labellable_type()?s.labellable_types=[e.relevant_labellable_type()]:bugsnagClient.notify("Add label search performed with no relevant labellable type"),s})};var e,t},t.prototype.confirm=function(){return this.hideModal(),this.searchable.performBulkAction({institution_label_id:this.institution_label_id()})},t.prototype.showModal=function(e){return null==e&&(e=!1),this.modal_element=$("#bulk-label-modal"),e&&$("#institution-label-id-select2").select2("data",null),this.modal_element.modal("show")},t.prototype.hideModal=function(){return this.modal_element.modal("hide")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.LearningObjectives={},Handshake.LearningObjectives.LearningObjective=function(s){function i(t){var s;this.saveSelf=e(this.saveSelf,this),this.stopEditing=e(this.stopEditing,this),this.editContent=e(this.editContent,this),this.toggleEditingContent=e(this.toggleEditingContent,this),this.toggleComplete=e(this.toggleComplete,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},experience_id:{send:!0},content:{send:!0},completed:{send:!0}}),this.placeholderText="Add a New Learning Objective",this.editMode=ko.observable(!1),this.focusInput=ko.observable(!1),this.completed.subscribe((s=this,function(){if(!s.isNew())return Handshake.operations.add_worker(),s.save(function(){return Handshake.operations.remove_worker()})}))}return t(i,s),i.type="LearningObjective",i.underscore="learning_objective",i.prototype.nested_route=function(){return"/experiences/"+this.experience_id()},i.prototype.toggleComplete=function(){return this.completed()?this.uncomplete():this.complete()},i.prototype.toggleEditingContent=function(){return this.editMode()?this.editMode(!1):(this.editMode(!0),this.focusInput(!0))},i.prototype.editContent=function(){return this.editMode(!0),this.focusInput(!0)},i.prototype.stopEditing=function(){return this.editMode(!1)},i.prototype.saveSelf=function(){return this.save(),this.stopEditing()},i}(Handshake.Resource),Handshake.LearningObjectives.ListView=function(){function t(t){this.experience=t,this.removeLearningObjective=e(this.removeLearningObjective,this),this.addLearningObjective=e(this.addLearningObjective,this),this.addLearningObjectiveSuccess=e(this.addLearningObjectiveSuccess,this),this.resetNewLearningObjective=e(this.resetNewLearningObjective,this),this.learning_objectives=ko.observableArray([]),this.new_learning_objective=ko.observable(),this.resetNewLearningObjective(),this.learning_objectives(Handshake.Resource.resourcesFromArray(this.experience.learning_objectives,Handshake.LearningObjectives.LearningObjective))}return t.prototype.resetNewLearningObjective=function(){var e;return e={experience_id:this.experience.id},this.new_learning_objective(new Handshake.LearningObjectives.LearningObjective(e))},t.prototype.addLearningObjectiveSuccess=function(e){return this.learning_objectives.push(new Handshake.LearningObjectives.LearningObjective(e.learning_objective)),this.resetNewLearningObjective()},t.prototype.addLearningObjective=function(){return this.new_learning_objective().create(this.addLearningObjectiveSuccess)},t.prototype.removeLearningObjective=function(e){return e.destroy((t=this,function(){return t.learning_objectives.remove(e)}));var t},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Locations={},Handshake.Locations.Location=function(s){function i(t){this.setLocationFromMapboxResult=e(this.setLocationFromMapboxResult,this),this.clearAttributes=e(this.clearAttributes,this),this.clearNonNameAttributes=e(this.clearNonNameAttributes,this),this.setNameFromAttributes=e(this.setNameFromAttributes,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},city:{send:!0,validations:{presence:!0}},state:{send:!0},country:{send:!0},zipcode:{send:!0},latitude:{send:!0},longitude:{send:!0},address_line_one:{send:!0},address_line_two:{send:!0}})}return t(i,s),i.type="Location",i.underscore="location",i.prototype.setNameFromAttributes=function(){var e;return e=[_.compact([this.address_line_one(),this.address_line_two()]).join(" "),this.city(),_.compact([this.state(),this.zipcode()]).join(" "),this.country()],this.name(_.compact(_.map(e,function(e){return $.trim(e)})).join(", "))},i.prototype.clearNonNameAttributes=function(){return this.city(null),this.state(null),this.country(null),this.zipcode(null),this.latitude(null),this.longitude(null),this.address_line_one(null),this.address_line_two(null)},i.prototype.clearAttributes=function(){return this.clearNonNameAttributes(),this.name(null)},i.prototype.setLocationFromMapboxResult=function(e){var t,s;if(null!==e)return this.name(e.place_name),this.latitude(e.center[1]),this.longitude(e.center[0]),t=[e],e.context&&(t=t.concat(e.context)),t.forEach((s=this,function(e){if(-1!==e.id.indexOf("address")&&s.address_line_one(e.address+" "+e.text),-1!==e.id.indexOf("place")&&s.city(e.text),-1!==e.id.indexOf("postcode")&&s.zipcode(e.text),-1!==e.id.indexOf("region")&&s.state(e.text),-1!==e.id.indexOf("country"))return s.country(e.text)}))},i}(Handshake.Resource),Handshake.Locations.AddLocationView=function(){function t(t){var s,i,n,o,r,a;this.props=t,this.attr_name=e(this.attr_name,this),this.setLocationByName=e(this.setLocationByName,this),this.handleSelect=e(this.handleSelect,this),this.handleBlur=e(this.handleBlur,this),s=this.props.location,i=this.props.object_type,n=this.props.place_types,this.placeholder=this.props.placeholder||"Enter your address",this.disable_custom_input=this.props.disable_custom_input||!1,this.location_changed_callback=this.props.location_changed_callback,this.input_id=this.props.input_id||"location_name",this.hide_map=ko.observable(this.props.hide_map),this.domContext=null,this.objectType=ko.observable(i),this.showingAdvancedEdit=ko.observable(!1),this.place_types=n||["geocode"],this.city_only=ko.pureComputed((o=this,function(){return 1===o.place_types.length&&"(cities)"===o.place_types[0]})),this.disabled=ko.observable(!1),this.map_hidden=ko.computed((r=this,function(){return r.disabled()||r.hide_map()})),this.location=s||ko.observable(new Handshake.Locations.Location),this.props.clear_on_name_change&&this.location().name.subscribe((a=this,function(){return a.location().clearNonNameAttributes()}))}return t.prototype.handleBlur=function(e){var t;if(e!==this.location().name())return t={city:null,state:null,zipcode:null,country:null,name:e,longitude:null,latitude:null},this.handleSelect(t)},t.prototype.handleSelect=function(e){if(e)return this.location().name(e.name),this.location().city(e.city),this.location().state(e.state),this.location().country(e.country),this.location().zipcode(e.zipcode),this.location().latitude(e.latitude),this.location().longitude(e.longitude),this.location().address_line_one(e.addressLineOne),_.isFunction(this.location_changed_callback)?this.location_changed_callback(new Handshake.Locations.Location(this.location().getJSON())):void 0},
t.prototype.setLocationByName=function(e,t){var s,i,n;return s=["place","address"],i="https://api.tiles.mapbox.com/geocoding/v5/"+Handshake.passed.mapbox_mode+"/"+encodeURIComponent(e)+".json?access_token="+Handshake.passed.mapbox_api_key+"&types="+encodeURIComponent(s)+"&language=en",$.ajax({dataType:"json",url:i,success:(n=this,function(e){if(n.location().setLocationFromMapboxResult(e.features[0]),n.location().setNameFromAttributes(),_.isFunction(t))return t(e.features[0])})})},t.prototype.attr_name=function(e){return this.objectType()+"[location_attributes]["+e+"]"},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.MajorGroups={},Handshake.MajorGroups.ParentMajorGroup=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0},major_group_ids:{array:!0,send:!0},major_groups:{array:!0,belongs_to:Handshake.MajorGroups.MajorGroup}})}return e(s,t),s.type="ParentMajorGroup",s.underscore="parent_major_group",s}(Handshake.Resource),Handshake.MajorGroups.MajorGroup=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0},school_major_names:{array:!0},school_major_ids:{send:!0,array:!0,convert_empty_to_blank:!0},parent_major_group_id:{send:!0}})}return e(s,t),s.type="MajorGroup",s.underscore="major_group",s}(Handshake.Resource),Handshake.SchoolEditMajorGroupsView=function(){function e(e){this.props=e,this.poll_for_update_complete=s(this.poll_for_update_complete,this),this.cancel=s(this.cancel,this),this.save=s(this.save,this),this.setSelectedMajorGroup=s(this.setSelectedMajorGroup,this),this.selectedMajorGroup=ko.observable(),this.parent_major_groups=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.parent_major_groups)),this.update_in_progress=ko.observable(this.props.update_in_progress),this.major_search_view=new Handshake.MajorGroups.MajorSearchView({majors_search_path:this.props.majors_search_path,limit_to_career_fair_majors:this.props.limit_to_career_fair_majors}),this.update_in_progress()&&this.poll_for_update_complete(function(){return window.location.reload()})}return e.prototype.setSelectedMajorGroup=function(e){return this.selectedMajorGroup(e)},e.prototype.save=function(){return this.update_in_progress(!0),this.selectedMajorGroup().save((e=this,function(){return e.poll_for_update_complete(function(){return e.selectedMajorGroup().fetch(function(){return Handshake.Helpers.notifySuccess("Major Group Successfully Updated"),e.update_in_progress(!1)})})}));var e},e.prototype.cancel=function(){return this.selectedMajorGroup().revert()},e.prototype.poll_for_update_complete=function(e,t){return null==t&&(t=1e3),new Handshake.Schools.School({id:this.props.school_id}).ajax_call({type:"GET",method:"major_group_update_progress",action:"major_group_update_progress",on_member:!0,success:(s=this,function(i){return i.update_in_progress?setTimeout(function(){return s.poll_for_update_complete(e,t+1e3)},t):_.isFunction(e)?e():void 0})});var s},e}(),Handshake.MajorGroups.SelectMajorGroupsView=function(){function e(e){var t,i;this.toggleMajor=s(this.toggleMajor,this),this.setParentMajorGroupsViews=s(this.setParentMajorGroupsViews,this),this.resource_type=e.resource_type,this.selected_majors=ko.observableArray(),this.selected_major_ids=ko.observableArray(),this.selected_major_group_ids=ko.observableArray(),this.parent_major_groups=e.parent_major_groups,this.school_major_group_ids=e.school_major_group_ids,this.current_school_major_ids=e.current_school_major_ids||[],this.parent_major_group_views=ko.observableArray([]),this.setParentMajorGroupsViews(),this.selected_major_ids(_.map(e.selected_majors(),function(e){return e.id})),this.selected_majors(Handshake.Resource.resourcesFromArray(e.selected_majors())),this.selected_major_group_ids(_.map(e.selected_major_groups(),function(e){return e.id})),this.visible_majors=ko.computed((t=this,function(){var e;return e="Career Services"===Handshake.passed.current_user_type&&t.current_school_major_ids.length>0,_.filter(t.selected_majors(),function(s){return!e||_(t.current_school_major_ids).contains(s.id())})})),this.major_search_view=new Handshake.MajorGroups.MajorSearchView({limit_to_career_fair_majors:e.limit_to_career_fair_majors,selected_major_group_ids:this.selected_major_group_ids,selected_major_ids:this.selected_major_ids,school_id:e.school_id}),this.selected_parent_major_groups=ko.computed((i=this,function(){return _.filter(i.parent_major_group_views(),function(e){return e.selected_major_groups().length>0||e.parent_group_selected()})}))}return e.prototype.setParentMajorGroupsViews=function(){var e,t;return this.selected_major_group_ids([]),this.selected_major_ids([]),this.selected_majors([]),this.parent_major_group_views([]),e=_.map(this.parent_major_groups(),(t=this,function(e){return new Handshake.MajorGroups.SelectParentMajorGroupView(e,t.school_major_group_ids,t.selected_major_group_ids)})),this.parent_major_group_views(e)},e.prototype.toggleMajor=function(e){var t;return(t=_.find(this.selected_majors(),function(t){return t.id()===e.id()}))?this.selected_majors.remove(t):this.selected_majors.push(e),!0},e}(),Handshake.MajorGroups.SelectParentMajorGroupView=function(){function e(e,t,i){var n,o,r;this.school_major_group_ids=t,this.all_selected_major_group_ids=i,this.checkParentGroup=s(this.checkParentGroup,this),this.removeAllMajorGroupIds=s(this.removeAllMajorGroupIds,this),this.addAllMajorGroupIds=s(this.addAllMajorGroupIds,this),this.parent_major_group=Handshake.Resource.resourceFromObject(e),this.selected_major_groups=ko.computed((n=this,function(){return _.filter(n.parent_major_group.major_groups(),function(e){return-1!==n.all_selected_major_group_ids().indexOf(e.id())})})),this.selected_major_group_ids=ko.computed((o=this,function(){return _.map(o.selected_major_groups(),function(e){return e.id()})})),this.parent_group_selected=ko.computed((r=this,function(){return r.selected_major_group_ids().length===r.parent_major_group.major_groups().length})),this.expanded=ko.observable(!1)}return e.prototype.addAllMajorGroupIds=function(){var e;return e=_.difference(_.map(this.parent_major_group.major_groups(),function(e){return e.id()}),this.selected_major_group_ids()),ko.utils.arrayPushAll(this.all_selected_major_group_ids,e)},e.prototype.removeAllMajorGroupIds=function(){return this.all_selected_major_group_ids(_.difference(this.all_selected_major_group_ids(),this.selected_major_group_ids()))},e.prototype.checkParentGroup=function(){return this.parent_group_selected()?this.removeAllMajorGroupIds():this.addAllMajorGroupIds(),!0},e}(),Handshake.MajorGroups.MajorSearchView=function(){function e(e){var t,i,n;this.props=e,this.updateModalSize=s(this.updateModalSize,this),this.loadMore=s(this.loadMore,this),this.getMajors=s(this.getMajors,this),this.schoolSelect2Options=s(this.schoolSelect2Options,this),this.set_school_id=s(this.set_school_id,this),this.majors=ko.observableArray(),this.query=ko.observable(),this.current_majors_page=ko.observable(1),this.total_majors_pages=ko.observable(0),this.search_path=ko.observable(this.props.majors_search_path||"/majors"),this.loading=ko.observable(!1),this.allow_school_selection=ko.observable(!0),this.limit_to_career_fair_majors=ko.observable(this.props.limit_to_career_fair_majors),this.school_id=ko.observable(),this.selected_major_group_ids=this.props.selected_major_group_ids||ko.observableArray([]),this.selected_major_ids=this.props.selected_major_ids||ko.observableArray([]),this.selected_majors=this.props.selected_majors||ko.observableArray([]),this.selected_major_ids.subscribe((t=this,function(e){var s,i,n,o;for(o=[],i=0,n=e.length;i<n;i++)"added"===(s=e[i]).status?o.push(t.selected_majors.push(_(t.majors()).find(function(e){return e.id()===s.value}))):o.push(t.selected_majors.remove(function(e){return(null!=e?e.id():void 0)===s.value}));return o}),null,"arrayChange"),"Employers"!==Handshake.passed.current_user_type?this.set_school_id(Handshake.passed.current_user_institution_id):this.props.school_id?this.set_school_id(this.props.school_id):(this.loading(!0),this.getMajors()),this.query.subscribe((i=this,function(){return i.current_majors_page(1)})),this.show_results=ko.computed((n=this,function(){return!n.props.hide_all_schools_results||!!n.school_id()}))}return e.prototype.set_school_id=function(e){return this.school_id(e),this.allow_school_selection(!1),this.loading(!0),this.getMajors(!0)},e.prototype.schoolSelect2Options=function(){return{url:"/employers/approved_schools",placeholder:"Select School...",value:this.school_id,data_function:function(e){return{query:e,simple_search:!0}},allowClear:!0,on_change:this.getMajors}},e.prototype.getMajors=function(e){var t,s;return null==e&&(e=!0),this.props.hide_all_schools_results&&!this.school_id()?(this.majors([]),this.loading(!1),void this.updateModalSize()):(Handshake.operations.add_worker(),t={per_page:25,page:e?1:this.current_majors_page(),school_id:this.school_id(),scope_major_groups:!0},this.query()&&(t.query=this.query()),this.limit_to_career_fair_majors()&&(t.limit_to_career_fair_majors=this.limit_to_career_fair_majors()),$.getJSON(this.search_path(),t,(s=this,function(t){var i;return i=Handshake.Resource.resourcesFromArray(t.results),t.major_id_to_major_group_id_hash&&_.each(i,function(e){return e.major_group_ids(t.major_id_to_major_group_id_hash[""+e.id()])}),e?s.majors(i):ko.utils.arrayPushAll(s.majors,i),s.current_majors_page(t.current_page),s.total_majors_pages(t.total_pages),s.loading(!1),s.updateModalSize(),Handshake.operations.remove_worker()})))},e.prototype.loadMore=function(){if(!this.loading()&&this.current_majors_page()!==this.total_majors_pages())return this.loading(!0),this.current_majors_page(this.current_majors_page()+1),this.getMajors(!1)},e.prototype.updateModalSize=function(){var e,t;return null!=(e=this.props.modal_element)&&null!=(t=e.data("bs.modal"))?t.handleUpdate():void 0},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.Majors={},Handshake.Majors.Major=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0},description:{send:!0},major_group_ids:{array:!0}})}return e(s,t),s.type="Major",s.underscore="major",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.MassEmailEventsDataView=function(){function t(t){var s,i;this.props=t,this.download_recipients_csv=e(this.download_recipients_csv,this),this.opens=ko.observable([]),this.clicks=ko.observable([]),this.link_aggregates=ko.observable([]),this.opens_total=ko.observable(0),this.clicks_total=ko.observable(0),this.eventsByWeek=ko.computed((s=this,function(){return[s.opens(),s.clicks()]})),this.vm={mass_email_body:this.props.mass_email_body},this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,Handshake.operations.add_worker(),this.props.mass_email_id&&$.getJSON("/mass_emails/"+this.props.mass_email_id+"/mass_email_events.json",(i=this,function(e){return i.opens(e.opens),i.clicks(e.clicks),i.link_aggregates(e.link_aggregates),i.opens_total(e.opens_total),i.clicks_total(e.clicks_total),Handshake.Helpers.initLineGraph($("#messages_graph"),i.eventsByWeek(),null,moment().subtract(6,"days").utc(),moment().utc(),"day"),Handshake.operations.remove_worker()}))}return t.prototype.download_recipients_csv=function(){var e;return e=new Handshake.MassEmails.MassEmail({id:this.props.mass_email_id}).member_route("download_recipients_csv"),this.ajax_download_view.download_results(e)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.MassEmails={},Handshake.MassEmails.MassEmail=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d;this.quill_react_props=e(this.quill_react_props,this),this.add_card=e(this.add_card,this),this.fetchRecipientCount=e(this.fetchRecipientCount,this),this.sendTestEmail=e(this.sendTestEmail,this),this.unfinalize=e(this.unfinalize,this),this.finalize=e(this.finalize,this),this.schedule=e(this.schedule,this),this.wysihtml5_options=e(this.wysihtml5_options,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},fancy_name:{},fancy_subject:{},subject:{send:!0},category:{send:!0},reply_to:{send:!0},from_name:{send:!0},carbon_copy:{send:!0},body:{send:!0},institution_id:{send:!0},institution_type:{send:!0},institution_name:{},institution_logo:{},send_later:{send:!0},moment_time_zone:{},send_date:{send:!0},status:{},email_template_id:{send:!0},email_template_name:{},user:{},user_id:{},user_name:{},user_first_name:{},user_last_name:{},saved_search:{send:!0,nested_attribute:!0,belongs_to:Handshake.SavedSearches.SavedSearch},recipient_count:{},recipients_set:{},attachment_count:{}}),this.send_date_formatted=ko.computed({read:(n=this,function(){return Handshake.Helpers.toDateTimePicker(n.send_date(),n.moment_time_zone())}),write:(s=this,function(e){return s.send_date(Handshake.Helpers.fromDateTimePicker(e,s.moment_time_zone()))})}),this.carbon_copy_errors=ko.computed((o=this,function(){var e;return!(!o.carbon_copy()||0===o.carbon_copy().length)&&(e=!1,_.each(o.carbon_copy().trim().split(/[\s,;]+/),function(t){if(!/^([\w+\-.%]+@[\w\-.]+\.[A-z]{2,4})$/.test(t))return e=!0}),e)})),this.mass_email_cards=ko.observableArray([]),t.mass_email_cards&&this.mass_email_cards(Handshake.Resource.resourcesFromArray(t.mass_email_cards)),this.image_modal=ko.observable(null),this.drafting=ko.computed((r=this,function(){return"drafting"===r.status()})),this.finalized=ko.computed((a=this,function(){return"finalized"===a.status()})),this.scheduled=ko.computed((c=this,function(){return"scheduled"===c.status()})),this.has_been_sent=ko.computed((l=this,function(){return"has_been_sent"===l.status()})),this.subjectSmart=ko.computed((u=this,function(){return"Subject: "+u.fancy_subject()})),this.bodyIsEmpty=ko.computed((h=this,function(){return 0===$.trim(h.body()).replace(/(<[^>]*>|&nbsp;|\s)/g,"").length})),this.nice_send_date=Handshake.TimeZoneHelper.dateTime("long_date",this.send_date(),this.moment_time_zone()),this.send_date.subscribe((d=this,function(){return d.send_later(!!d.send_date())}))}return t(i,s),i.type="MassEmail",i.underscore="mass_email",i.prototype.wysihtml5_options=function(){return{wysihtml5_options:{toolbar:{html:!0,insert_variable_dropdown:{username:"Username",name:"Full Name",first_name:"First Name",calculated_first_name:"Preferred Name",last_name:"Last Name",email_address:"Email Address",institution_name:"Your School"}}},on_load:function(){return $('a[data-wysihtml5-command="openInsertVariable"]').on("click",function(e){return $(e.target).closest(".dropdown").toggleClass("open"),!1}),$('a[data-wysihtml5-command="insertVariable"]').on("click",function(e){var t,s;return s=$(e.target).closest(".wysihtml5-toolbar").siblings("textarea").data("wysihtml5"),t=$(e.target).attr("data-wysihtml5-command-value"),s.editor.toolbar.execCommand("insertHTML","%recipient."+t+"%")})}}},i.prototype.schedule=function(e){return this.ajax_call({type:"POST",method:"schedule",on_member:!0,action:"schedule",success:function(t){return e(t)}})},i.prototype.finalize=function(e){return this.ajax_call({type:"POST",method:"finalize",on_member:!0,action:"finalize",success:function(t){return e(t)}})},i.prototype.unfinalize=function(e){return this.ajax_call({type:"POST",method:"unfinalize",on_member:!0,action:"unfinalize",success:function(t){return e(t)}})},i.prototype.sendTestEmail=function(){return this.ajax_call({type:"POST",method:"send_test_email",on_member:!0,action:"send_test_email",success:function(){return Handshake.Helpers.notifySuccess("A test email was sent to you.")}})},i.prototype.fetchRecipientCount=function(e,t){return this.ajax_call({type:"GET",method:"recipient_count",on_member:!0,action:"recipient_count",success:e,failure:t})},i.prototype.add_card=function(e,t){var s,i;return(s=new Handshake.MassEmails.MassEmailCard({})).update({mass_email_id:this.id()}),s.update({card_id:e.id,card_type:e.type}),s.create((i=this,function(e){return i.mass_email_cards.push(Handshake.Resource.resourceFromObject(e.mass_email_card)),t(e)}))},i.prototype.quill_react_props=function(){return{message:this.body(),variables:[{variable:"recipient.username",displayName:"Username"},{variable:"recipient.name",displayName:"Full name"},{variable:"recipient.first_name",displayName:"First name"},{variable:"recipient.calculated_first_name",displayName:"Preferred name"},{variable:"recipient.last_name",displayName:"Last name"},{variable:"recipient.email_address",displayName:"Email address"},{variable:"recipient.institution_name",displayName:"Your school"}],handleChange:this.body,imageModal:this.image_modal(),enableHtml:!0,messageType:"email"}},i}(Handshake.Resource),Handshake.MassEmails.MassEmailCard=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({institution_id:{},institution_type:{},mass_email_id:{send:!0},card_id:{send:!0},card_type:{send:!0},card_name:{}}),this.update(t)}return t(i,s),i.type="MassEmailCard",i.underscore="mass_email_card",i.prototype.nested_route=function(){return"/mass_emails/"+this.mass_email_id()},i}(Handshake.Resource),Handshake.NewMassEmailView=function(s){function i(t){var s,n,o,r,a,c,l,u;this.props=t,this.fetchRecipientCountPollSuccess=e(this.fetchRecipientCountPollSuccess,this),this.getSavedSearch=e(this.getSavedSearch,this),this.finalizeMassEmailSuccess=e(this.finalizeMassEmailSuccess,this),this.preSelectPage=e(this.preSelectPage,this),this.selectTemplatePage=e(this.selectTemplatePage,this),this.selectWritePage=e(this.selectWritePage,this),this.selectSetupPage=e(this.selectSetupPage,this),this.selectFilterPage=e(this.selectFilterPage,this),this.postSelectPage=e(this.postSelectPage,this),this.saveChanges=e(this.saveChanges,this),this.onSavedMassEmail=e(this.onSavedMassEmail,this),this.templateSelected=e(this.templateSelected,this),this.redrawCharts=e(this.redrawCharts,this),this.searchCallback=e(this.searchCallback,this),this.on_resize=e(this.on_resize,this),this.unmount=e(this.unmount,this),this.mass_email=ko.observable(null),this.mass_email(new Handshake.MassEmails.MassEmail(this.props.mass_email)),this.initial_recipient_status=ko.observable(this.props.initial_recipient_status),this.recipients_message=ko.observable(this.props.recipients_message),i.__super__.constructor.call(this,this.mass_email),"recipients_being_added"===this.initial_recipient_status()&&new Handshake.ExponentialPoll(this.mass_email().fetchRecipientCount,this.fetchRecipientCountPollSuccess).start_poll(),"no_initial_recipients"===this.initial_recipient_status()&&(this.filterUsersView=new Handshake.Users.FilterStudentsView("#recipients-search",this.searchCallback,!0),this.initialSearch=!0),this.templateSelectorView=new Handshake.EmailTemplates.TemplateSelectorView(this.mass_email(),this.templateSelected,this.props.email_templates),this.cardSearch=new Handshake.MassEmails.CardSelectorView(this.mass_email(),this.props.mass_email_cards),this.attachmentUpload=new Handshake.Attachments.CreateAttachmentView(this.mass_email,this.props.attachments),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"We can do that for you!",safe_body_html:'Our internal student marketing team is now sending student invitation and welcome back emails. Review the updated emails <a href="https://support.joinhandshake.com/hc/en-us/articles/115007135747-Invite-Email-Examples" target="_blank">here</a>. If you would like the Handshake team to send these emails please click "Contact Support" below.',confirm_button_text:"Contact Support",cancel_button_text:"Continue"}),this.mass_email().category.subscribe((s=this,function(e){if("Handshake Invitation - Invitation for students to join Handshake"===e)return s.confirmation_modal.show_modal(function(){return window.open("https://support.joinhandshake.com/hc/en-us/requests/new","_blank")})})),this.mass_email_categories=this.props.mass_email_categories,this.onFilterPage=ko.computed((n=this,function(){return 0===n.currentPage()})),this.onSetupPage=ko.computed((o=this,function(){return 1===o.currentPage()})),this.onWritePage=ko.computed((r=this,function(){return 2===r.currentPage()})),this.onTemplatePage=ko.computed((a=this,function(){return 3===a.currentPage()})),this.onReviewPage=ko.computed((c=this,function(){return 4===c.currentPage()})),this.pageOptions.push(new Handshake.PagedForm.Page({index:0,name:"Recipients",description:"Search for the students that you want to receive the email."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:1,name:"Setup",description:"Fill out the subject, denote who the email is from, and name the Mass Email campaign."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:2,name:"Write",description:"Write the body of the email to be sent."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:3,name:"Template",description:"Choose what template to use for the email."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:4,name:"Review",description:"Make sure that everything is in place and send the email."})),this.reselectPage(),this.show_card_invitations_warning=ko.computed((l=this,function(){return _.filter(l.mass_email().mass_email_cards(),function(e){return _.contains(["Event","CareerFair","Survey"],e.card_type())}).length>0})),$(window).on("resize",this.on_resize),setTimeout((u=this,function(){var e,t;if(u.filterUsersView)return e=u.props.saved_search,e=new Handshake.SavedSearches.SavedSearch(e,!0),t=Handshake.passed.current_user_type,u.use_students_university_index="Career Services"===t||"Admins"===t||"Mentors"===t,u.use_students_university_index?u.filterUsersView.searchable.initialSetup("UniversityRecipientsFilter",e):Bugsnag.notify("Unexpected user type "+t+" encountered in NewMassEmailView")}),1)}return t(i,s),i.prototype.unmount=function(){return $(window).off("resize",this.on_resize),this.unmount_paged_form()},i.prototype.on_resize=function(){return this.redrawCharts(this.recipient_details)},i.prototype.searchCallback=function(e){var t,s;return this.initialSearch||this.mass_email().markAsChanged("search"),this.initialSearch=!1,this.mass_email().recipient_count(e.total),t={majors:(_.find(e.filter_views.filter_views,function(e){return"majors"===e.type})||{options:[]}).options,school_years:(_.find(e.filter_views.filter_views,function(e){return"school_years"===e.type})||{options:[]}).options},setTimeout((s=this,function(){return s.redrawCharts(t)}),1e3)},i.prototype.redrawCharts=function(e){if(e&&(e.majors||e.school_years)&&(this.recipient_details=e,this.onReviewPage()&&!this.massEmailRecipientsBeingAdded))return this.recipient_details.majors&&window.Handshake.Helpers.initPieChart($("#student_majors_chart"),this.recipient_details.majors,null),this.recipient_details.school_years?window.Handshake.Helpers.initPieChart($("#student_years_chart"),this.recipient_details.school_years,null):void 0},i.prototype.templateSelected=function(e){return this.mass_email().email_template_id(e.id())},i.prototype.onSavedMassEmail=function(){return this.templateSelectorView.refresh()},i.prototype.saveChanges=function(){return null!=this.filterUsersView&&this.mass_email().saved_search(this.getSavedSearch()),this.mass_email().save(this.onSavedMassEmail),!1},i.prototype.postSelectPage=function(){if(this.onReviewPage())return this.redrawCharts(this.recipient_details)},i.prototype.selectFilterPage=function(){return this.selectPage(this.pageOptions()[0])},i.prototype.selectSetupPage=function(){return this.selectPage(this.pageOptions()[1])},i.prototype.selectWritePage=function(){return this.selectPage(this.pageOptions()[2])},i.prototype.selectTemplatePage=function(){return this.templateSelectorView.refresh(),this.selectPage(this.pageOptions()[3])},i.prototype.preSelectPage=function(e){if(3===e.index())return this.templateSelectorView.refresh()},i.prototype.finalizeAction=function(){return this.mass_email().finalize(this.finalizeMassEmailSuccess)},i.prototype.finalizeMassEmailSuccess=function(e){return window.location.href=new Handshake.MassEmails.MassEmail(e.mass_email).entity_path},i.prototype.getSavedSearch=function(){return this.filterUsersView.searchable.getSavedSearch()},i.prototype.fetchRecipientCountPollSuccess=function(e){return this.initial_recipient_status("recipients_added"),this.recipients_message(e.recipients_message)},i}(Handshake.PagedForm.View),Handshake.MassEmails.CardSelectorView=function(){function t(t,s){this.mass_email=t,this.removeCard=e(this.removeCard,this),this.addCard=e(this.addCard,this),this.addCardSuccess=e(this.addCardSuccess,this),this.items=ko.observableArray([]),this.items(Handshake.Resource.resourcesFromArray(s,Handshake.MassEmails.MassEmailCard)),this.cardTypeaheadOptions={path:"/mass_emails/search_cards",server_data:{},onChange:this.addCard}}return t.prototype.addCardSuccess=function(e){return this.items.push(Handshake.Resource.resourceFromObject(e.mass_email_card)),$("#card-search").typeahead("val","")},t.prototype.addCard=function(e){return this.mass_email.add_card(e,this.addCardSuccess)},t.prototype.removeCard=function(e){return e.destroy((t=this,function(){return t.items.remove(e)}));var t},t}(),Handshake.ManageMassEmailsView=function(){function t(t){var s;this.props=t,this.destroyMassEmail=e(this.destroyMassEmail,this),this.searchCallback=e(this.searchCallback,this),this.mass_emails=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"mass_emails",this.searchCallback),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s?this.searchable.initialSetup("UniversityMassEmails"):this.searchable.initialSetup("MassEmail")}return t.prototype.searchCallback=function(e){return this.mass_emails(Handshake.Resource.resourcesFromArray(e.results,Handshake.MassEmails.MassEmail))},t.prototype.destroyMassEmail=function(e){if(confirm("Are you sure you want to delete this mass email?"))return e.destroy((t=this,function(){return t.mass_emails.remove(e),Handshake.Helpers.notifySuccess("This mass email is being deleted. The mass email may continue showing up for a few minutes while we clean everything up.")}));var t},t}(),Handshake.FinalizedMassEmailView=function(){function t(t){this.props=t,this.unfinalizeMassEmail=e(this.unfinalizeMassEmail,this),this.unfinalizeMassEmailSuccess=e(this.unfinalizeMassEmailSuccess,this),this.sendMassEmail=e(this.sendMassEmail,this),this.sendMassEmailSuccess=e(this.sendMassEmailSuccess,this),this.requireCountConfirmation=e(this.requireCountConfirmation,this),this.mass_email=ko.observable(null),this.mass_email(new Handshake.MassEmails.MassEmail(this.props.mass_email)),this.recipient_count_confirmation=ko.observable(),this.vm={mass_email_body:this.props.mass_email_body}}return t.prototype.showSendConfirmation=function(){return $("#mass-email-confirmation-modal").modal("show")},t.prototype.requireCountConfirmation=function(){return this.mass_email().recipient_count()>100},t.prototype.sendMassEmailSuccess=function(e){return $("#mass-email-confirmation-modal").modal("hide"),window.location.href=new Handshake.MassEmails.MassEmail(e.mass_email).entity_path},t.prototype.sendMassEmail=function(){if(!this.requireCountConfirmation()||Number(this.recipient_count_confirmation())===Number(this.mass_email().recipient_count()))return this.mass_email().schedule(this.sendMassEmailSuccess);Handshake.Helpers.notifyError("The number you've entered does not match the number of recipients.")},t.prototype.unfinalizeMassEmailSuccess=function(e){return window.location.href=new Handshake.MassEmails.MassEmail(e.mass_email).entity_path},t.prototype.unfinalizeMassEmail=function(){return this.mass_email().unfinalize(this.unfinalizeMassEmailSuccess)},t}(),Handshake.MassEmailBodyContainer=function(){function e(e){this.vm=e}return e}(),Handshake.MassEmailBody=function(){function e(e){this.vm=e,$(".js-auto-resize-iframe").on("load",function(e){return window.Handshake.Helpers.iframe_onload(e)})}return e}(),Handshake.MassEmailNotification=function(){function t(t){this.vm=t,this.enableTargetedEmails=e(this.enableTargetedEmails,this)}return t.prototype.enableTargetedEmails=function(){return $.ajax("/users/"+Handshake.passed.current_user_id+"/preferences",{method:"PUT",data:{"user_preferences[use_new_mass_emails]":!0},success:function(){return Handshake.Helpers.notifySuccess("Targeted emails are now enabled"),setTimeout(function(){return Handshake.SPA.reload()},1e3)}})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.MentorshipPreferences={},Handshake.MentorshipPreferences.MentorshipPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({enabled:{send:!0},institution_label_name:{},institution_label_id:{send:!0},must:{send:!0},custom_message:{send:!0},allow_student_search:{send:!0},mentors_manage_mentorships:{send:!0},mentor_survey_id:{send:!0},enable_mentorships:{send:!0}})}return e(s,t),s.type="MentorshipPreference",s.underscore="mentorship_preference",s}(Handshake.Resource),Handshake.EditMentorshipPreferencesView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.mentorship_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.mentorship_preference)),this.preferenceLabelView=new Handshake.Labels.PreferenceLabelView(this.mentorship_preference)}return e.prototype.cancel=function(){return this.mentorship_preference().revert()},e.prototype.submit=function(){return this.mentorship_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Mentorships={},Handshake.Mentorships.Mentorship=function(s){function i(t){this.decline=e(this.decline,this),this.decline_silent=e(this.decline_silent,this),this.complete=e(this.complete,this),this.begin=e(this.begin,this),this.reset=e(this.reset,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{},student_id:{},student_name:{},student_last_name:{},student_first_name:{},mentor_id:{},mentor_name:{},mentor_last_name:{},mentor_first_name:{},status:{},fancy_created_at:{}})}return t(i,s),i.type="Mentorship",i.underscore="mentorship",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.begin=function(e){return this.ajax_call({type:"POST",method:"begin",on_member:!0,action:"begin",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.complete=function(e){return this.ajax_call({type:"POST",method:"complete",on_member:!0,action:"complete",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline_silent=function(e){return this.ajax_call({type:"POST",method:"decline",data:{silent:!0},on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",data:{silent:!1},on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.MentorshipsView=function(){function t(){var t;this.searchCallback=e(this.searchCallback,this),this.mentorships=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"schools",this.searchCallback),
"Career Services"===(t=Handshake.passed.current_user_type)||"Admins"===t||"Mentors"===t?this.searchable.initialSetup("UniversityManageMentorships"):this.searchable.initialSetup("ManageMentorships")}return t.prototype.searchCallback=function(e){return this.mentorships(Handshake.Resource.resourcesFromArray(e.results))},t}(),Handshake.EditMentorshipView=function(){function e(e){this.props=e,this.mentor=ko.observable(this.props.mentor),this.student=ko.observable(this.props.student),this.select2_mentor_options={placeholder:"Choose a mentor...",url:"/mentors",simple_search:!1,initial_value:this.mentor},"Career Services"===Handshake.passed.current_user_type&&(this.select2_mentor_options.secondary_property="institution_managed_email"),this.select2_student_options={placeholder:"Choose a student...",url:"/students",simple_search:!1,initial_value:this.student,secondary_property:"institution_managed_email"}}return e}(),Handshake.ShowMentorshipView=function(){function e(e){var t;this.props=e,this.conversationView=new Handshake.Conversations.ConversationView,(t=new Handshake.Conversations.Conversation(this.props.conversation)).loadMessages(),t.other_user_name(this.props.other_user.name),this.conversationView.conversation(t),this.conversationView.reset_new_message()}return e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.MessageTemplates={},Handshake.MessageTemplates.MessageTemplate=function(t){function s(e){s.__super__.constructor.call(this,e),this.one_call_at_a_time(!1),this.attributes({name:{send:!0},subject:{send:!0},template:{send:!0},user_id:{send:!0}})}return e(s,t),s.type="MessageTemplate",s.underscore="message_template",s}(Handshake.Resource),Handshake.MessageTemplateSaveModal=function(){function e(e){var t;this.props=e,this.save=s(this.save,this),this.after_save=s(this.after_save,this),this.show_modal=s(this.show_modal,this),this.reset_modal=s(this.reset_modal,this),this.modal_element=$("#message-template-save-modal"),this.subject=this.props.subject,this.message=this.props.message,this.template=this.props.template,this.save_as_new=ko.observable(!0),this.name=ko.observable(""),this.save_as_existing_text=ko.computed((t=this,function(){if(null!=t.template())return'Save changes to "'+t.template().name()+'"'}))}return e.prototype.reset_modal=function(){return this.save_as_new(!0),this.name("")},e.prototype.show_modal=function(){return this.reset_modal(),this.modal_element.modal("show")},e.prototype.after_save=function(e){return Handshake.Helpers.notifySuccess(e),this.modal_element.modal("hide")},e.prototype.save=function(){var e,t,s;{if(!(this.message().length>5e3))return this.save_as_new()?(e=new Handshake.MessageTemplates.MessageTemplate({name:this.name(),subject:this.subject(),template:this.message()})).create((s=this,function(){return s.template(e),s.after_save("Message template successfully created")})):(this.template().subject(this.subject()),this.template().template(this.message()),this.template().save((t=this,function(){return t.after_save("Message template successfully updated")})));Handshake.Helpers.notifyError("Template is too long (maximum is 5,000 characters).")}},e}(),Handshake.MessageTemplateManageModal=function(){function e(e){this.props=e,this.hide_modal=s(this.hide_modal,this),this.show_modal=s(this.show_modal,this),this.destroy_template=s(this.destroy_template,this),this.apply_template=s(this.apply_template,this),this.select_template=s(this.select_template,this),this.reset_and_fetch_templates=s(this.reset_and_fetch_templates,this),this.fetch_institution_templates=s(this.fetch_institution_templates,this),this.fetch_personal_templates=s(this.fetch_personal_templates,this),this.fetch_institution_templates_complete=s(this.fetch_institution_templates_complete,this),this.fetch_personal_templates_complete=s(this.fetch_personal_templates_complete,this),this.fetch_institution_templates_success=s(this.fetch_institution_templates_success,this),this.fetch_personal_templates_success=s(this.fetch_personal_templates_success,this),this.modal_element=$("#message-template-manage-modal"),this.personal_templates_loading=ko.observable(!1),this.institution_templates_loading=ko.observable(!1),this.index_resource=new Handshake.MessageTemplates.MessageTemplate,this.more_personal_templates_to_load=!0,this.more_institution_templates_to_load=!0,this.per_page=50,this.most_recent_templates=ko.observableArray([]),this.all_personal_templates=ko.observableArray([]),this.all_institution_templates=ko.observableArray([]),this.subject=this.props.subject,this.message=this.props.message,this.template=this.props.template,this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Delete Template",body:"Are you sure? You won't be able to undo this.",confirm_button_text:"Delete Template",confirm_button_css:"btn-primary"})}return e.prototype.fetch_personal_templates_success=function(e){return this.more_personal_templates_to_load=e.more_to_load,this.most_recent_templates(Handshake.Resource.resourcesFromArray(e.most_recent_message_templates)),this.all_personal_templates(this.all_personal_templates().concat(Handshake.Resource.resourcesFromArray(e.message_templates))),this.fetch_personal_templates_complete()},e.prototype.fetch_institution_templates_success=function(e){return this.more_institution_templates_to_load=e.more_to_load,this.all_institution_templates(this.all_institution_templates().concat(Handshake.Resource.resourcesFromArray(e.message_templates))),this.fetch_institution_templates_complete()},e.prototype.fetch_personal_templates_complete=function(){return this.personal_templates_loading(!1)},e.prototype.fetch_institution_templates_complete=function(){return this.institution_templates_loading(!1)},e.prototype.fetch_personal_templates=function(){var e;if(this.more_personal_templates_to_load)return this.personal_templates_loading(!0),e={offset:this.all_personal_templates().length,per_page:this.per_page},this.index_resource.index(this.fetch_personal_templates_success,this.fetch_personal_templates_complete,e)},e.prototype.fetch_institution_templates=function(){var e;if(this.more_institution_templates_to_load)return this.institution_templates_loading(!0),e={offset:this.all_institution_templates().length,per_page:this.per_page,scope_to_institution:!0},this.index_resource.index(this.fetch_institution_templates_success,this.fetch_institution_templates_complete,e)},e.prototype.reset_and_fetch_templates=function(){return this.more_institution_templates_to_load=!0,this.more_personal_templates_to_load=!0,this.most_recent_templates([]),this.all_personal_templates([]),this.all_institution_templates([]),this.fetch_personal_templates(),this.fetch_institution_templates()},e.prototype.select_template=function(e){return this.template(e)},e.prototype.apply_template=function(){return this.subject(this.template().subject()||""),this.message(this.template().template()),this.hide_modal()},e.prototype.destroy_template=function(e){return this.confirmation_modal.show_modal((t=this,function(){return t.template()&&t.template().id()===e.id()&&t.template(null),e.destroy(function(){return t.reset_and_fetch_templates()})}));var t},e.prototype.show_modal=function(){return this.reset_and_fetch_templates(),this.modal_element.modal("show")},e.prototype.hide_modal=function(){return this.modal_element.modal("hide")},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.Minors={},Handshake.Minors.Minor=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{send:!0},description:{send:!0}})}return e(s,t),s.type="Minor",s.underscore="minor",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Notes={},Handshake.Notes.Note=function(s){function i(t){var s,n,o,r;this.deleteAttachment=e(this.deleteAttachment,this),this.nested_route=e(this.nested_route,this),this.selectNoteable=e(this.selectNoteable,this),this.setPrivacyPreferenceCareerCenter=e(this.setPrivacyPreferenceCareerCenter,this),this.setPrivacyPreferenceInstitution=e(this.setPrivacyPreferenceInstitution,this),this.setPrivacyPreferencePersonal=e(this.setPrivacyPreferencePersonal,this),this.update_note=e(this.update_note,this),this.cancel=e(this.cancel,this),this.edit=e(this.edit,this),i.__super__.constructor.call(this,t),this.attributes({content:{send:!0},safe_content_html:{},created_at:{},written_at:{},created_by_id:{},created_by_name:{send:!0},noteable_type:{send:!0},noteable_id:{send:!0},noteable_name:{},created_by_photo_url:{},created_by_path:{},noteable_path:{},fancy_status:{},career_center_name:{},career_centers:{},career_center_id:{send:!0},privacy_preference:{send:!0},tagged_user_ids:{array:!0},mentions:{array:!0},hashtags:{array:!0},reminder_sent:{},reminder_date:{send:!0},attachments:{array:!0,belongs_to:Handshake.Attachments.Attachment}}),this.privacy_preference_fancy=ko.computed((s=this,function(){return"personal"===s.privacy_preference()?"Personal Note":"institution"===s.privacy_preference()?"Share with Staff":"career_center"===s.privacy_preference()?s.career_center_name():void 0})),this.reminder_date_fancy=ko.computed((n=this,function(){return window.Handshake.Helpers.fullStraightDateTime(n.reminder_date())})),this.personal_note=ko.computed((o=this,function(){return"Students"!==Handshake.passed.current_user_type&&"Mentors"!==Handshake.passed.current_user_type&&"personal"===o.privacy_preference()})),this.career_center_note=ko.computed((r=this,function(){return"career_center"===r.privacy_preference()}))}return t(i,s),i.type="Note",i.underscore="note",i.prototype.edit=function(){return this.is_editing(!0)},i.prototype.cancel=function(){return this.revert(),this.is_editing(!1)},i.prototype.update_note=function(){return this.save()},i.prototype.setPrivacyPreferencePersonal=function(){return this.privacy_preference("personal"),this.career_center_id(null),this.career_center_name(null)},i.prototype.setPrivacyPreferenceInstitution=function(){return this.privacy_preference("institution"),this.career_center_id(null),this.career_center_name(null)},i.prototype.setPrivacyPreferenceCareerCenter=function(e,t){return this.career_center_id(e()),this.career_center_name(t()),this.privacy_preference("career_center")},i.prototype.selectNoteable=function(){var e;return e=Handshake.Resource.resourceFromObject($("#note-"+this.id()).select2("data")),this.noteable_id(e.id()),this.noteable_type(e.type),this.save(function(){return Handshake.Helpers.notifySuccess("Note applied to student.")})},i.prototype.nested_route=function(){return""+this.noteable_path()},i.prototype.deleteAttachment=function(e){return e.destroy((t=this,function(){return t.attachments.remove(e),t.cache.latestData.attachments=_.map(t.attachments(),function(e){return e.cache.latestData})}));var t},i}(Handshake.Resource),Handshake.Notes.NotesModalComponent=function(){function e(e){this.notesView=new Handshake.Notes.NotesView(e.noteable(),!0,!1),this.include_button=e.include_button}return e}(),Handshake.Notes.NotesView=function(){function t(t,s,i){null==s&&(s=!0),null==i&&(i=!1),this.submitRemoveNote=e(this.submitRemoveNote,this),this.hideDeleteWarning=e(this.hideDeleteWarning,this),this.showDeleteWarning=e(this.showDeleteWarning,this),this.noteInputKeyUp=e(this.noteInputKeyUp,this),this.noteInputKeyDown=e(this.noteInputKeyDown,this),this.searchPossibleMentions=e(this.searchPossibleMentions,this),this.chooseMention=e(this.chooseMention,this),this.getCurrentWord=e(this.getCurrentWord,this),this.removeNote=e(this.removeNote,this),this.removeNoteSuccess=e(this.removeNoteSuccess,this),this.addNote=e(this.addNote,this),this.addNoteSuccess=e(this.addNoteSuccess,this),this.addAttachmentSuccess=e(this.addAttachmentSuccess,this),this.pollUploadStatus=e(this.pollUploadStatus,this),this.checkAttachments=e(this.checkAttachments,this),this.resetNewNote=e(this.resetNewNote,this),this.templateName=e(this.templateName,this),this.loadNotes=e(this.loadNotes,this),this.setNoteable=e(this.setNoteable,this),this.showAddForm=e(this.showAddForm,this),this.initializeModal=e(this.initializeModal,this),this.noteable=ko.observable(t),this.initialized=ko.observable(!1),this.notes=ko.observableArray([]),this.career_centers=ko.observableArray([]),this.new_note=ko.observable(),this.currentMentionNote=ko.observable(),this.mentionPickerOptions=ko.observableArray([]),this.currentTextBox=null,this.currentCaret=null,this.collapseAddForm=ko.observable(i),this.noteToDelete=ko.observable(),this.noteable()&&(s||(this.initialized(!0),this.resetNewNote(),this.loadNotes()))}return t.prototype.initializeModal=function(){return this.initialized()?$("#notes-modal").modal("show"):(this.initialized(!0),this.resetNewNote(),this.loadNotes(),$("#notes-modal").modal("show"))},t.prototype.showAddForm=function(){return this.collapseAddForm(!1)},t.prototype.setNoteable=function(e){return e?(this.noteable(Handshake.Resource.resourceFromObject(e)),this.resetNewNote(),this.loadNotes()):(this.noteable(null),this.resetNewNote(),this.notes([]))},t.prototype.loadNotes=function(){var e;return new Handshake.Notes.Note({noteable_path:this.noteable().entity_path}).index((e=this,function(t){return e.notes(Handshake.Resource.resourcesFromArray(t.notes)),e.career_centers(Handshake.Resource.resourcesFromArray(t.career_centers))}))},t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.resetNewNote=function(e,t,s){var i;return null==e&&(e="institution"),null==t&&(t=null),null==s&&(s=null),i=this.noteable()?this.noteable().entity_path:getPathName(),this.new_note(new Handshake.Notes.Note({noteable_path:i,privacy_preference:e,career_center_name:t,career_center_id:s}))},t.prototype.checkAttachments=function(e){var t,s,i;return s=new Handshake.Notes.Note(e.note),(t=$("#new-note-attachment-upload-input")).val()?new Handshake.FileUploader({file_input:t,record:{type:"Attachment"},attachment_name:"document",success:(i=this,function(e){var t;return(t=new Handshake.Attachments.Attachment({attachable_type:"Note",attachable_id:s.id(),s3_key:e})).create(function(){return i.pollUploadStatus(t)})}),error:function(e){return Handshake.Helpers.notifyError(e.join(", "))}}).upload():this.addNoteSuccess(e)},t.prototype.pollUploadStatus=function(e,t){return null==t&&(t=1e3),setTimeout((s=this,function(){return e.fetch(function(i){return"complete"===i.attachment.document_upload_status?s.addNoteSuccess({note:i.attachment.attachable}):s.pollUploadStatus(e,t+1e3)},t)}));var s},t.prototype.addAttachmentSuccess=function(e,t){return t.result.note=t.result.attachable,this.addNoteSuccess(t.result)},t.prototype.addNoteSuccess=function(e){var t;return t=new Handshake.Notes.Note(e.note),this.notes.unshift(t),this.resetNewNote(e.note.privacy_preference,e.note.career_center_name,e.note.career_center_id)},t.prototype.addNote=function(){return this.new_note().create(this.checkAttachments)},t.prototype.removeNoteSuccess=function(){return this.notes.remove(note)},t.prototype.removeNote=function(e){return e.destroy((t=this,function(){return t.notes.remove(e)}));var t},t.prototype.getCurrentWord=function(){return _.last(this.currentMentionNote().content().slice(0,+(this.currentCaret-1)+1||9e9).split(" "))},t.prototype.chooseMention=function(e){var t;return t=this.getCurrentWord(),this.currentMentionNote().content(this.currentMentionNote().content().replace(t,"+"+e.institution_managed_email()+" ")),this.currentMentionNote(null),this.currentTextBox.focus(),!1},t.prototype.searchPossibleMentions=function(e){var t,s;return t=e.replace("+","").replace("@",""),$.getJSON("/notes/possible_mentions",{query:t},(s=this,function(e){return e.success?s.mentionPickerOptions(Handshake.Resource.resourcesFromArray(e.users)):s.mentionPickerOptions([])}))},t.prototype.noteInputKeyDown=function(e,t){return!(13===t.which&&this.mentionPickerOptions().length>0&&this.currentMentionNote())||(this.chooseMention(this.mentionPickerOptions()[0]),!1)},t.prototype.noteInputKeyUp=function(e,t){var s;if(this.currentTextBox=$(t.target),this.currentCaret=this.currentTextBox.caret(),!(this.currentCaret<=1||e.content().length<=1))return(s=_.last(e.content().slice(0,+(this.currentCaret-1)+1||9e9).split(" "))).length>1&&(0===s.indexOf("+")||0===s.indexOf("@"))?(this.currentMentionNote()||this.currentMentionNote(e),this.searchPossibleMentions(s)):this.currentMentionNote(null),!0},t.prototype.showDeleteWarning=function(e){return this.noteToDelete(e),$("#delete-note-modal").modal("show")},t.prototype.hideDeleteWarning=function(){return $("#delete-note-modal").modal("hide")},t.prototype.submitRemoveNote=function(){return this.hideDeleteWarning(),this.removeNote(this.noteToDelete())},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.NotificationsView=function(){function t(t){var s,i,n,o;this.props=t,this.markAllFacetsAsRead=e(this.markAllFacetsAsRead,this),this.markAllAsRead=e(this.markAllAsRead,this),this.getLabelForFacet=e(this.getLabelForFacet,this),this.chooseFacet=e(this.chooseFacet,this),this.loadMore=e(this.loadMore,this),this.refresh=e(this.refresh,this),this.showAll=e(this.showAll,this),this.showUnread=e(this.showUnread,this),this.currentNotificationsCount=ko.observable(0),this.unreadNotificationsCount=ko.observable(),this.safe_notifications_html=ko.observable(),this.moreToLoad=ko.observable(!0),this.loadingMore=ko.observable(!1),this.currentFacet=ko.observable("All"),this.notificationFacets=ko.observable({}),this.notificationLabelsForKeys={},this.notificationFacetList=ko.computed((s=this,function(){var e;return(e=_.pairs(s.notificationFacets())).unshift(["All",0]),e})),this.currentView=ko.observable("unread"),this.showingUnread=ko.computed((i=this,function(){return"unread"===i.currentView()})),this.showingAll=ko.computed((n=this,function(){return"all"===n.currentView()})),this.mark_all_as_read_visible=ko.computed((o=this,function(){return null!=o.unreadNotificationsCount()&&Handshake.passed.current_user_id===Handshake.passed.logged_in_user_id&&o.unreadNotificationsCount()>0})),this.refresh()}return t.prototype.showUnread=function(){return this.currentView("unread"),this.currentFacet("All"),this.refresh()},t.prototype.showAll=function(){return this.currentView("all"),this.currentFacet("All"),this.refresh()},t.prototype.refresh=function(){return this.currentNotificationsCount(0),this.safe_notifications_html(""),this.loadMore()},t.prototype.loadMore=function(){var e,t;return this.loadingMore(!0),Handshake.operations.add_worker(),e={scope:this.currentView(),current_count:this.currentNotificationsCount()},this.currentFacet()&&"All"!==this.currentFacet()&&(e.current_facet=this.currentFacet()),$.getJSON("/notifications.json",e,(t=this,function(e){return t.loadingMore(!1),Handshake.operations.remove_worker(),e.success?(t.currentNotificationsCount(t.currentNotificationsCount()+e.notifications_count),t.unreadNotificationsCount(e.unread_notifications_count),t.safe_notifications_html(""+t.safe_notifications_html()+e.content),t.notificationLabelsForKeys=e.facet_labels_for_keys,t.notificationFacets(e.notification_facets),t.moreToLoad(e.more_to_load)):Handshake.Helpers.notifyError("Failed to download notifications.")}))},t.prototype.chooseFacet=function(e){return this.currentFacet(e[0]),this.refresh()},t.prototype.getLabelForFacet=function(e){return"All"===e[0]?"All":(this.notificationLabelsForKeys[e[0]]||e[0])+"s"},t.prototype.markAllAsRead=function(){var e;if(confirm("Are you sure you want to mark all your notifications as read?"))return $.ajax({type:"POST",url:"/notifications/mark_all_as_read",dataType:"json",success:(e=this,function(t){if(t.success)return $(window).trigger("handshake.forcePollUpdate"),e.unreadNotificationsCount(0),e.markAllFacetsAsRead(),Handshake.Helpers.notifySuccess("All notifications marked as read.")})})},t.prototype.markAllFacetsAsRead=function(){var e,t,s;return s=(e=_.keys(this.notificationFacets())).map(function(){return 0}),t=_.object(e,s),this.notificationFacets(t)},t}()}.call(this),function(){}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.OfficeLocations={},Handshake.OfficeLocations.OfficeLocation=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},school_id:{},description:{},location_name:{}})}return t(i,s),i.type="OfficeLocation",i.underscore="office_location",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.EditOfficeLocationView=function(){function e(e){var t;this.props=e,t={object_type:"office_location"},this.props.location&&(t.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(t)}return e}(),Handshake.ManageOfficeLocationsView=function(){function t(t){this.props=t,this.searchCallback=e(this.searchCallback,this),this.office_locations=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"office_locations",this.searchCallback),this.searchable.initialSetup("OfficeLocation")}return t.prototype.searchCallback=function(e){return this.office_locations(Handshake.Resource.resourcesFromArray(e))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.OrganizationMemberships={},Handshake.OrganizationMemberships.OrganizationMembership=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({organization_id:{send:!0},organization_name:{},organization_bio:{},user_id:{send:!0}}),this.organization_id_name=ko.computed((s=this,function(){return{id:s.organization_id(),name:s.organization_name()}}))}return t(i,s),i.type="OrganizationMembership",i.underscore="organization_membership",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.OrganizationMemberships.OrganizationMembershipsView=function(s){function i(t){this.props=t,this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),this.initFormWidgets=e(this.initFormWidgets,this),i.__super__.constructor.call(this,this.props.organization_memberships,this.props)}return t(i,s),i.prototype.initFormWidgets=function(){},i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.OrganizationMemberships.OrganizationMembership(e)},i.prototype.validateFields=function(){return!0},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Organizations={},Handshake.Organizations.Organization=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{send:!0},organization_bio:{},organization_memberships_count:{},user_id:{},logo_url:{},logo:{send:!0}}),this.logo_present=ko.computed((s=this,function(){return s.logo_url()}))}return t(i,s),i.type="Organization",i.underscore="organization",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.ShowOrganizationView=function(){function t(t){this.props=t,this.changeImage=e(this.changeImage,this),this.setActiveCropView=e(this.setActiveCropView,this),this.organization=ko.observable(Handshake.Resource.resourceFromObject(this.props.organization)),this.logoCropView=new Handshake.UserImages.CropImageView(this.organization(),"logo","logo",".crop-logo"),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.changeImage),this.active_crop_view=null}return t.prototype.setActiveCropView=function(e){return this.active_crop_view=e},t.prototype.changeImage=function(e){return this.active_crop_view.changeImage(e)},t}(),Handshake.Organizations.RecentOrganization=function(e){function s(e){s.__super__.constructor.call(this,e),this.attributes({organization_name:{},organization_chapter_name:{},logo:{}})}return t(s,e),s.type="Organization",s.underscore="organization",s}(Handshake.Resource),Handshake.OrganizationMergeView=function(){function t(t){this.props=t,this.submit_enabled=e(this.submit_enabled,this),this.search=e(this.search,this),this.query_changed=e(this.query_changed,this),this.reset_search=e(this.reset_search,this),this.merge=e(this.merge,this),this.query=ko.observable(""),this.items=ko.observableArray([]),this.page=ko.observable(1),this.loading=ko.observable(!1),this.end_reached=ko.observable(!1),this.selectedItems=ko.observableArray(),this.selectedItem=ko.observable(""),this.vm={query:this.query,items:this.items,page:this.page,selectedItems:this.selectedItems,selectedItem:this.selectedItem,loading:this.loading,end_reached:this.end_reached,merge:this.merge,nextPage:this.nextPage,queryChanged:this.query_changed,submitEnabled:this.submit_enabled}}return t.prototype.merge=function(){var e,t,s;return t=this.selectedItem().id,e=_.map(_.filter(this.selectedItems(),function(e){return e.id!==t}),function(e){return e.id}),(new Handshake.Organizations.Organization).ajax_call({type:"POST",method:"merge",action:"merge",data:{to_organization:t,from_organizations:e},success:(s=this,function(){return Handshake.Helpers.notifySuccess("Successfully merged "+e.length+" organizations into "+s.selectedItem().name),s.reset_search(),s.query(""),s.selectedItems([]),s.items([])}),failure:function(e){return console.log("Error: "+e)}})},t.prototype.reset_search=function(){return this.page(1),this.items([]),this.end_reached(!1)},t.prototype.query_changed=function(){return this.reset_search(),this.search(!0)},t.prototype.search=function(e){var t,s;return null==e&&(e=!1),this.loading(!0),t={page:this.page(),per_page:30,query:this.query(),simple_search:!0,not_ids:_.map(this.selectedItems(),function(e){return e.id})},$.getJSON("/organizations",t,(s=this,function(e){return $.each(e,function(e,t){return s.items.push({id:t.id,label:t.name+" ("+t.organization_memberships_count+" students)",name:t.name})}),s.loading(!1)}))},t.prototype.submit_enabled=function(){var e,t;return t=void 0!==this.selectedItem().id,e=this.selectedItems().length>=2,t&&e},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.PaymentMethods={},Handshake.PaymentMethods.PaymentMethod=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{}})}return e(s,t),s.type="PaymentMethod",s.underscore="payment_method",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.PaymentPreferences={},Handshake.PaymentPreferences.PaymentPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({site_url:{send:!0},site_id:{send:!0},handshake_fee_percentage:{send:!0},payment_processor:{send:!0},item_id:{send:!0},whitelisted_cashnet_ip_address:{send:!0},touchnet_t_link_web_service:{send:!0}})}return e(s,t),s.type="PaymentPreference",s.underscore="payment_preference",s}(Handshake.Resource),Handshake.EditPaymentPreferencesView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.payment_preference=ko.observable(),this.props.payment_preference&&this.payment_preference(Handshake.Resource.resourceFromObject(this.props.payment_preference))}return e.prototype.cancel=function(){return this.payment_preference().revert()},e.prototype.submit=function(){return this.payment_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.PendingEmployerApprovals={},Handshake.PendingEmployerApprovals.PendingEmployerApproval=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({created_by_id:{send:!0},school_id:{send:!0}})}return e(s,t),s.type="PendingEmployerApproval",s.underscore="pending_employer_approval",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Pins={},Handshake.Pins.Pin=function(s){function i(t){this.inactivate=e(this.inactivate,this),this.activate=e(this.activate,this),this.pinnable_path=e(this.pinnable_path,this),this.institution_path=e(this.institution_path,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},institution_id:{},institution_type:{},pinnable_id:{},pinnable_type:{},status:{send:!0},created_at:{},student_screen_id:{}})}return t(i,s),i.type="Pin",i.underscore="pin",i.prototype.nested_route=function(){return""+this.pinnable_path()},i.prototype.institution_path=function(){return Handshake.Resource.resourceFromObject({id:this.institution_id(),type:this.institution_type()}).entity_path},i.prototype.pinnable_path=function(){return Handshake.Resource.resourceFromObject({id:this.pinnable_id(),type:this.pinnable_type()}).entity_path},i.prototype.activate=function(){return this.status("active"),this.save()},i.prototype.inactivate=function(){return this.status("inactive"),this.save()},i}(Handshake.Resource),Handshake.ManagePinsView=function(){function t(t){var s;this.props=t,this.searchCallback=e(this.searchCallback,this),this.pins=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"schools",this.searchCallback),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s?this.searchable.initialSetup("UniversityPins"):this.searchable.initialSetup("Pin")}return t.prototype.searchCallback=function(e){return this.pins(Handshake.Resource.resourcesFromArray(e.results))},t}(),Handshake.Pins.PinModalComponent=function(){function e(e){this.createModalView=new Handshake.Pins.CreateModalView(e.pinnable,e.pin),this.include_button=e.include_button}return e}(),Handshake.Pins.CreateModalView=function(){function t(t,s){var i,n;this.pinnable=t,this.mouseout=e(this.mouseout,this),this.mouseover=e(this.mouseover,this),this.showModal=e(this.showModal,this),this.closeModal=e(this.closeModal,this),this.pin=ko.observable(),null!=s&&s()?this.pin=s:this.pin(new Handshake.Pins.Pin({pinnable_id:this.pinnable().id(),pinnable_type:this.pinnable().type})),this.moused_over=ko.observable(!1),this.itemPinned=ko.computed((i=this,function(){return i.pin().isPersisted()})),this.buttonText=ko.computed((n=this,function(){return n.pin()?"View Pin":"Pin Item"}))}return t.prototype.closeModal=function(){return $("#create-pin-modal").modal("hide")},t.prototype.showModal=function(){return $("#create-pin-modal").modal("show")},t.prototype.pinItem=function(){return this.pin().create((e=this,function(t){return Handshake.Helpers.notifySuccess("This item has been successfully pinned."),e.pin(Handshake.Resource.resourceFromObject(t.pin)),e.closeModal(),window.location=e.pin().edit_entity_path}));var e},t.prototype.viewPin=function(){
return window.location=this.pin().institution_path()+"/pins?query="+encodeURIComponent(this.pin().name())},t.prototype.mouseover=function(){return this.moused_over(!0)},t.prototype.mouseout=function(){return this.moused_over(!1)},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.PositionInformations={},Handshake.PositionInformations.PositionInformation=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({position_title:{},description:{},major_group_ids:{array:!0},major_groups:{array:!0}})}return e(s,t),s.type="PositionInformation",s.underscore="position_information",s}(Handshake.Resource),Handshake.EditPositionInformationView=function(){function e(e){this.position_information=Handshake.Resource.resourceFromObject(e.position_information),this.major_groups_select2_options=function(){return{placeholder:"Groups to target..."}}}return e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.PostGraduationInterests={},Handshake.PostGraduationInterests.PostGraduationInterest=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({user_id:{send:!0},post_graduation_option_id:{send:!0}})}return e(s,t),s.type="PostGraduationInterest",s.underscore="post_graduation_interest",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Postings={},Handshake.Postings.Posting=function(s){function i(t){var s,n,o,r,a,c,l,u,h,_,d,p,m;this.expire=e(this.expire,this),this.reset=e(this.reset,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.old_edit_interview_schedule_path=e(this.old_edit_interview_schedule_path,this),this.edit_interview_schedule_path=e(this.edit_interview_schedule_path,this),this.interview_schedule_path=e(this.interview_schedule_path,this),this.job_path=e(this.job_path,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({job_id:{},job_name:{},requester_id:{},requester_name:{},requester_path:{},request_date:{},response_date:{},school_id:{send:!0},school_name:{},school_path:{},school_logo:{},employer_id:{send:!0},employer_name:{},employer_path:{},employer_logo:{},employer_location_name:{},fancy_employer_name:{},responder_name:{},responder_path:{},job_type_name:{},employment_type_name:{},status:{send:!0,"default":"pending"},expiration_date:{send:!0},created_at:{},job:{belongs_to:Handshake.Jobs.Job},major_ids:{array:!0},major_group_ids:{array:!0},applications_count:{},employer_interested_in_interviewing:{send:!0},interested_in_interviewing_on_campus:{},should_show_interview_warning:{},controlled_by_interview_schedule:{},interview_schedule_ids:{array:!0},apply_start:{send:!0},interview_status:{},top_employer:{},interview_schedule_id:{},comment_count:{},can_expire:{}}),this.is_past_expiration_date=ko.pureComputed((s=this,function(){return moment(s.expiration_date()).valueOf()<Date.now()})),this.expiration_date_formatted=ko.computed({read:(o=this,function(){return Handshake.Helpers.toDateTimePicker(o.expiration_date())}),write:(n=this,function(e){return n.expiration_date(Handshake.Helpers.fromDateTimePicker(e))})}),this.short_expiration_date=ko.pureComputed((r=this,function(){return moment(r.expiration_date()).format("l")})),this.apply_start_formatted=ko.computed({read:(c=this,function(){return Handshake.Helpers.toDateTimePicker(c.apply_start())}),write:(a=this,function(e){return a.apply_start(Handshake.Helpers.fromDateTimePicker(e))})}),this.pending_or_approved=ko.computed((l=this,function(){return"approved"===l.status()||"pending"===l.status()})),this.fancy_status=ko.computed((u=this,function(){switch(u.status()){case"pending":return"Requested "+Handshake.Helpers.whenInWords(u.created_at());case"approved":return"Approved "+Handshake.Helpers.whenInWords(u.response_date());case"expired":return"Expired "+Handshake.Helpers.whenInWords(u.expiration_date());case"declined":return"Declined "+Handshake.Helpers.whenInWords(u.response_date());default:throw new Error("status unknown")}})),this.employer_logo_present=ko.pureComputed((h=this,function(){return h.employer_logo()&&-1===h.employer_logo().indexOf("default_institution")})),this.applications_count_text=ko.pureComputed((_=this,function(){var e;return e=Handshake.Helpers.pluralizeString("applicant",_.applications_count(),"s"),_.applications_count()+" "+e})),this.applications_path=ko.pureComputed((d=this,function(){return d.job_path()+"/applications?schools[]="+d.school_id()})),this.can_create_message_campaign=ko.pureComputed((p=this,function(){return"approved"===p.status()})),this.new_posting_message_campaign_path=ko.pureComputed((m=this,function(){return m.entity_path+"/message_campaigns/new"}))}return t(i,s),i.type="Posting",i.underscore="posting",i.nested_methods=["create"],i.prototype.nested_route=function(){return""+this.job_path()},i.prototype.job_path=function(){return this.job_id()?new Handshake.Jobs.Job({id:this.job_id()}).entity_path:null},i.prototype.interview_schedule_path=function(){return this.interview_schedule_id()?new Handshake.InterviewSchedules.InterviewSchedule({id:this.interview_schedule_id()}).entity_path:null},i.prototype.edit_interview_schedule_path=function(){if(1===this.interview_schedule_ids().length)return new Handshake.InterviewSchedules.InterviewSchedule({id:this.interview_schedule_ids()[0]}).edit_entity_path+"?initial_page=1"},i.prototype.old_edit_interview_schedule_path=function(){if(1===this.interview_schedule_ids().length)return new Handshake.InterviewSchedules.InterviewSchedule({id:this.interview_schedule_ids()[0]}).edit_entity_path+"?initial_page=2"},i.prototype.check_for_proper_use=function(e){if(2===e.length&&e[1]instanceof $.Event&&"undefined"!=typeof bugsnagClient&&null!==bugsnagClient)return bugsnagClient.notify({errorClass:"ImproperFunctionUse",errorMessage:"Function was called as a click handler, but isn't designed that way"})},i.prototype.approve=function(e){return this.check_for_proper_use(arguments),this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.check_for_proper_use(arguments),this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.reset=function(e){return this.check_for_proper_use(arguments),this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.expire=function(e){return this.check_for_proper_use(arguments),this.ajax_call({type:"POST",method:"expire",on_member:!0,action:"expire",success:function(t){if(_.isFunction(e))return e(t)}})},i}(Handshake.Resource),Handshake.Postings.SearchResultHandler=function(){function t(){this.update_job_data=e(this.update_job_data,this),this.interviewing_on_campus=e(this.interviewing_on_campus,this),this.job_in_upcoming_interview=e(this.job_in_upcoming_interview,this),this.has_applied_for_job=e(this.has_applied_for_job,this),this.is_favorite_job=e(this.is_favorite_job,this),this.qualified_for=e(this.qualified_for,this),this.application_status_for_job=e(this.application_status_for_job,this),this.job_data={qualified_posting_ids:ko.observableArray([]),favorite_jobs:ko.observableArray([]),application_job_ids:ko.observableArray([]),interviewing_job_data:ko.observableArray([]),interviewing_posting_ids:ko.observableArray([]),job_application_statuses:ko.observable({})}}return t.prototype.application_status_for_job=function(e){return this.job_data.job_application_statuses()[e.job_id()]},t.prototype.qualified_for=function(e){return this.job_data.qualified_posting_ids().indexOf(parseInt(e.id()))>-1},t.prototype.is_favorite_job=function(e){return _(this.job_data.favorite_jobs()).findWhere({favoritable_id:e.job_id()})},t.prototype.has_applied_for_job=function(e){return this.job_data.application_job_ids().indexOf(parseInt(e.job_id()))>-1},t.prototype.job_in_upcoming_interview=function(e){return _.findWhere(this.job_data.interviewing_job_data(),{job_id:e.job_id()})},t.prototype.interviewing_on_campus=function(e){return this.job_data.interviewing_posting_ids().indexOf(parseInt(e.id()))>-1},t.prototype.update_job_data=function(e){if(e)return this.job_data.qualified_posting_ids(ko.unwrap(e.qualified_posting_ids)||[]),this.job_data.interviewing_posting_ids(ko.unwrap(e.interviewing_posting_ids)||[]),null!=e.favorite_jobs&&this.job_data.favorite_jobs(ko.unwrap(e.favorite_jobs)||[]),null!=e.application_job_ids&&this.job_data.application_job_ids(ko.unwrap(e.application_job_ids)||[]),null!=e.interviewing_job_data&&this.job_data.interviewing_job_data(ko.unwrap(e.interviewing_job_data)||[]),null!=e.job_application_statuses?this.job_data.job_application_statuses(ko.unwrap(e.job_application_statuses)||{}):void 0},t}(),Handshake.JobPostingsView=function(){function t(t){var s,i;this.props=t,this.expirePosting=e(this.expirePosting,this),this.massEmailJobsSuccess=e(this.massEmailJobsSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.bulkUpdatePostingsSuccess=e(this.bulkUpdatePostingsSuccess,this),this.bulkUpdatePostingsCancel=e(this.bulkUpdatePostingsCancel,this),this.bulkUpdatePostingsConfirm=e(this.bulkUpdatePostingsConfirm,this),this.bulkUpdatePostingsSelect=e(this.bulkUpdatePostingsSelect,this),this.bulkDeclineSuccess=e(this.bulkDeclineSuccess,this),this.bulkApproveSuccess=e(this.bulkApproveSuccess,this),this.saveExpirationDate=e(this.saveExpirationDate,this),this.reapprovePosting=e(this.reapprovePosting,this),this.editExpirationDate=e(this.editExpirationDate,this),this.searchCallback=e(this.searchCallback,this),this.set_up_search_result_handler=e(this.set_up_search_result_handler,this),this.postings=ko.observableArray([]),this.selectedPosting=ko.observable(),this.initialized=!1,this.modal_action=ko.observable(null),this.show_user_feedback_modal=ko.observable(!1),this.can_approve_postings=this.props.can_approve_postings,this.searchable=new Handshake.Searchable($("#search-form"),"postings",this.searchCallback),s=[],"Students"!==Handshake.passed.current_user_type&&s.push({label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"Job",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Students About Jobs",type:"simple",key_action:!0,bulk_action:"mass_email_about_items",success:this.massEmailJobsSuccess}),("Admins"===Handshake.passed.logged_in_user_type&&"Students"!==Handshake.passed.current_user_type||"Career Services"===Handshake.passed.current_user_type&&this.can_approve_postings)&&s.push({label:"Approve Postings",type:"simple",key_action:!0,bulk_action:"approve_job_postings",success:this.bulkApproveSuccess},{label:"Decline Postings",type:"simple",key_action:!0,bulk_action:"decline_job_postings",success:this.bulkDeclineSuccess}),"Admins"===Handshake.passed.logged_in_user_type&&"Students"!==Handshake.passed.current_user_type&&(this.bulkUpdatePostingsModal=new Handshake.Postings.BulkUpdatePostingsModal({searchable:this.searchable}),s.push({label:"Approve Postings Silently (Admin Only)",type:"simple",bulk_action:"approve_job_postings_silently",success:this.bulkApproveSuccess},{label:"Decline Postings Silently (Admin Only)",type:"simple",bulk_action:"decline_job_postings_silently",success:this.bulkDeclineSuccess},{label:"Update Status and Expiration (Admin Only)",type:"simple",bulk_action:"update_postings",select_action:this.bulkUpdatePostingsSelect,confirm_action:this.bulkUpdatePostingsConfirm,cancel_action:this.bulkUpdatePostingsCancel,success:this.bulkUpdatePostingsSuccess})),"Career Services"===Handshake.passed.current_user_type&&(this.mass_email_contacts_modal=new Handshake.Postings.MassEmailJobContactsModal(this.searchable),s.push({label:"Email Contacts or Creators",type:"simple",bulk_action:"mass_email_job_contacts",select_action:this.mass_email_contacts_modal.open,confirm_action:this.mass_email_contacts_modal.confirm,cancel_action:this.mass_email_contacts_modal.open,success:this.mass_email_contacts_modal.success})),this.searchable.bulkActions(s),this.searchable.sortingInfo.show_sort_label(!0),"Career Services"===(i=Handshake.passed.current_user_type)||"Admins"===i?this.searchable.initialSetup("UniversityPostings"):this.searchable.initialSetup("JobPostings"),this.searchable.showPerPageOption(!0),this.set_up_search_result_handler()}return t.prototype.set_up_search_result_handler=function(){return this.result_handler=new Handshake.Postings.SearchResultHandler,this.qualified_for=this.result_handler.qualified_for,this.is_favorite_job=this.result_handler.is_favorite_job,this.has_applied_for_job=this.result_handler.has_applied_for_job,this.job_in_upcoming_interview=this.result_handler.job_in_upcoming_interview,this.interviewing_on_campus=this.result_handler.interviewing_on_campus,this.job_application_statuses=this.result_handler.job_application_statuses},t.prototype.searchCallback=function(e){var t;return t=Handshake.Resource.resourcesFromArray(e.results),this.searchable.infiniteScrolling&&(t=this.postings().concat(t)),this.postings([]),this.result_handler.update_job_data(e),this.postings(t)},t.prototype.editExpirationDate=function(e){return this.selectedPosting(e),$("#posting-expiration-date").modal("show")},t.prototype.reapprovePosting=function(e){return this.selectedPosting(e),this.selectedPosting().expiration_date(null),this.modal_action("approve_again"),$("#posting-expiration-date").modal("show")},t.prototype.saveExpirationDate=function(){var e,t;if($("#posting-expiration-date").modal("hide"),(e=$("#posting-expiration-date input#expiration-date").val())&&!($("#posting-expiration-date .invalid-date:visible").length>0))return"approve_again"===this.modal_action()?(this.modal_action(null),t=this.selectedPosting(),$.ajax({method:"PUT",url:"/postings/"+t.id(),dataType:"json",data:{posting:{expiration_date:e}},success:function(){return t.approve()}})):this.selectedPosting().save();Handshake.Helpers.notifyError("A valid expiration date is required")},t.prototype.bulkApproveSuccess=function(e){return ko.utils.arrayForEach(this.postings(),function(t){if(-1!==e.ids.indexOf(t.id().toString()))return t.status("approved")}),this.show_user_feedback_modal(!0),Handshake.Helpers.notifySuccess("Successfully approved selected items.")},t.prototype.bulkDeclineSuccess=function(e){return ko.utils.arrayForEach(this.postings(),function(t){if(-1!==e.ids.indexOf(t.id().toString()))return t.status("declined")}),this.show_user_feedback_modal(!0),Handshake.Helpers.notifySuccess("Successfully declined selected items.")},t.prototype.bulkUpdatePostingsSelect=function(){return this.bulkUpdatePostingsModal.showModal(),!1},t.prototype.bulkUpdatePostingsConfirm=function(){return this.bulkUpdatePostingsModal.confirm(),!1},t.prototype.bulkUpdatePostingsCancel=function(){return this.bulkUpdatePostingsModal.showModal()},t.prototype.bulkUpdatePostingsSuccess=function(e){var t;return ko.utils.arrayForEach(this.postings(),function(t){if(_(e.ids).contains(t.id())&&!_(e.failed_postings).some(function(e){return e.posting_id===t.id()}))return e.status&&t.status(e.status),e.expiration_date?t.expiration_date(e.expiration_date):void 0}),e.failed_postings.length>0?(t="Some postings were invalid and could not be updated.",_(e.failed_postings).each(function(e){return t+="Posting "+e.posting_id+" (Job "+e.job_id+" at School "+e.school_id+") - "+e.errors.join(", ")}),Handshake.Helpers.notifyInfo(t),console.log(e)):Handshake.Helpers.notifySuccess("Successfully updated postings.")},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.massEmailJobsSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.expirePosting=function(e){return e.expire(function(){return Handshake.Helpers.notifySuccess("Posting successfully expired.")})},t}(),Handshake.Postings.BulkUpdatePostingsModal=function(){function t(t){this.props=t,this.hideModal=e(this.hideModal,this),this.showModal=e(this.showModal,this),this.confirm=e(this.confirm,this),this.searchable=this.props.searchable,this.status=ko.observable(null),this.expiration_date=ko.observable(null),this.modal_element=$("#bulk-update-postings-modal")}return t.prototype.confirm=function(){return this.hideModal(),this.searchable.performBulkAction({status:this.status(),expiration_date:this.expiration_date()})},t.prototype.showModal=function(){return this.modal_element.modal("show")},t.prototype.hideModal=function(){return this.modal_element.modal("hide")},t}(),Handshake.PostingDetailsModal=function(){function t(t){var s,i,n;this.props=t,this.select_posting_and_load=e(this.select_posting_and_load,this),this.job=this.props.job,this.posting=ko.observable(null),this.commentsView=new Handshake.Comments.CommentsView(this.posting),this.modal_title=ko.pureComputed((s=this,function(){return s.posting()?s.job().title()+" at "+s.posting().school_name():"Posting Details"})),this.show_interview_schedule_warning=ko.computed((i=this,function(){return i.posting()&&null!==i.posting()&&i.posting().employer_interested_in_interviewing()&&i.posting().should_show_interview_warning()})),this.new_interview_schedule_path=ko.computed((n=this,function(){return n.posting()&&null!==n.posting()?"/interview_schedules/new?job_id="+n.job().id()+"&interview_schedule[school_id]="+n.posting().school_id():null}))}return t.prototype.select_posting_and_load=function(e){return this.posting(e),e.fetch(),$("#posting-details").modal("show")},t}(),Handshake.Postings.PostingFormView=function(){function t(t){var s,i,n,o;this.props=t,this.chooseStatusFromButton=e(this.chooseStatusFromButton,this),this.save=e(this.save,this),this.launch_user_feedback_modal=e(this.launch_user_feedback_modal,this),this.conditional_save_and_view_next=e(this.conditional_save_and_view_next,this),this.stop_editing=e(this.stop_editing,this),this.start_editing=e(this.start_editing,this),this.posting=this.props.posting,this.commentsView=new Handshake.Comments.CommentsView(this.posting),this.show_user_feedback_modal=ko.observable(!1),this.view_next_when_finished=ko.observable(!1),this.next_job_path=ko.observable(this.props.next_job_path),this.is_editing=ko.observable(!1),"pending"!==this.posting().status()||"Career Services"!==Handshake.passed.current_user_type||this.posting().controlled_by_interview_schedule()||this.is_editing(!0),this.collapsed=ko.observable(!0),this.initial_collapsed=!0,"pending"===this.posting().status()&&(this.initial_collapsed=!1,this.collapsed(!1)),this.save_text=ko.computed((s=this,function(){return"declined"===s.posting().status()?"Save Declined":"approved"===s.posting().status()?"Save Approved":"expired"===s.posting().status()?"Save Expired":"Save"})),this.save_css=ko.computed((i=this,function(){return"declined"===i.posting().status()?"btn btn-danger":"approved"===i.posting().status()?"btn btn-success":"expired"===i.posting().status()?"btn btn-default":"btn btn-primary"})),this.show_interview_schedule_warning=ko.computed((n=this,function(){return!n.is_editing()&&n.posting().employer_interested_in_interviewing()&&n.posting().should_show_interview_warning()})),this.new_interview_schedule_path=ko.computed((o=this,function(){return"/interview_schedules/new?job_id="+o.posting().job_id()+"&interview_schedule[school_id]="+o.posting().school_id()}))}return t.prototype.start_editing=function(){return this.is_editing(!0)},t.prototype.stop_editing=function(){return this.posting().revert(),this.is_editing(!1)},t.prototype.conditional_save_and_view_next=function(){return this.posting().save((e=this,function(){if(e.is_editing(!1),Handshake.Helpers.notifySuccess("Changes successfully saved."),e.view_next_when_finished())return Handshake.SPA.navigate(e.next_job_path())}));var e},t.prototype.launch_user_feedback_modal=function(){return this.show_user_feedback_modal(!0),this.view_next_when_finished(!0)},t.prototype.save=function(){var e;return this.posting().save((e=this,function(){return e.is_editing(!1),Handshake.Helpers.notifySuccess("Changes successfully saved.")})),this.show_user_feedback_modal(!0)},t.prototype.chooseStatusFromButton=function(e,t){return this.posting().status($(t.target).val())},t}(),Handshake.Postings.FilterPostingsView=function(){function t(t,s,i,n){var o;this.additionalCallback=s,this.job_in_upcoming_interview=e(this.job_in_upcoming_interview,this),this.has_applied_for_job=e(this.has_applied_for_job,this),this.is_favorite_job=e(this.is_favorite_job,this),this.searchCallback=e(this.searchCallback,this),this.items=ko.observableArray([]),this.templateName="Posting-template",this.searchable=new Handshake.Searchable($("#search-form",t),"postings",this.searchCallback,t),this.searchable.pushHistoryOnSearchPerformed(!1),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"desc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"Job ID",field:"job_id",sort_direction:"asc"},{label:"Job Name",field:"job_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Expiration Date",field:"expiration_date",sort_direction:"asc"},{label:"Date Posted",field:"created_at",sort_direction:"desc"},{label:"Job Type",field:"job_type_name",sort_direction:"asc"},{label:"Employment Type",field:"employment_type_name",sort_direction:"asc"},{label:"Employer Name",field:"employer_name.case_insensitive_sorting",sort_direction:"asc"}]),i||("Career Services"===(o=Handshake.passed.current_user_type)||"Admins"===o?this.searchable.initialSetup("UniversityPostings",n):this.searchable.initialSetup("Posting",n))}return t.prototype.searchCallback=function(e){if(this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.Postings.Posting)),this.additionalCallback)return this.additionalCallback()},t.prototype.qualified_for=function(){return!1},t.prototype.is_favorite_job=function(){return!1},t.prototype.has_applied_for_job=function(){return!1},t.prototype.job_in_upcoming_interview=function(){return!1},t}(),Handshake.Postings.Card=function(){function t(t){var s,i,n,o;this.props=t,this.set_upcoming_interview_alert=e(this.set_upcoming_interview_alert,this),this.set_apply_open_alert=e(this.set_apply_open_alert,this),this.set_expiration_alert=e(this.set_expiration_alert,this),this.set_applied_alert=e(this.set_applied_alert,this),this.set_qualified_status=e(this.set_qualified_status,this),this.employer_logo=e(this.employer_logo,this),this.result_handler=new Handshake.Postings.SearchResultHandler,this.result_handler.update_job_data(this.props.job_data),this.favorite=ko.observable(this.result_handler.is_favorite_job(this.props.card)),this.classes=ko.computed((i=this,function(){return"btn-brand-dark-blue"+(i.favorite()?" is-favorite":"")})),this.icon_class=ko.computed((n=this,function(){return"fa fa-star"+(n.favorite()?"":"-o")})),this.action_class="btn-brand-blue "+(this.props.recommended?"recommended":""),s=this.props.card.job_path(),this.vm={type:"job",featured:this.props.featured,recommended:this.props.recommended,index:this.props.index,heading_params:{title:this.props.card.job_name(),title_path:this.props.card.job_path(),subtitle:this.props.card.employer_name(),recommended:this.props.recommended,avatar_params:{image_url:this.employer_logo(),name:this.props.card.employer_name()}},content_params:{safe_card_location_html:this.props.card.job().safe_card_location_html(),tooltip_text:this.props.card.job().tooltip_text(),safe_tooltip_html:this.props.card.job().safe_tooltip_html(),alerts:[]},action_params:{actions:[{text:"View Details",url:s,"class":this.action_class},{text:UNSAFE__i18n.t("favorite"),"class":this.classes,icon_class:this.icon_class,favorite:this.favorite(),callback:(o=this,function(){var e,t;return(e=new Handshake.Favorites.Favorite({id:null!=(t=o.favorite())?t.id:void 0,favoritable_path:o.props.card.job().entity_path,favoritable_id:o.props.card.job_id(),favoritable_type:Handshake.Jobs.Job.type,user_id:Handshake.passed.current_user_id})).id()?e.destroy(function(){return o.favorite(null)}):e.create(function(e){return o.favorite(e.favorite)})})}]}},this.result_handler.has_applied_for_job(this.props.card)?this.set_applied_alert():this.props.card.apply_start()&&moment(this.props.card.apply_start())>moment()?this.set_apply_open_alert():this.set_expiration_alert(),this.set_qualified_status(),this.set_upcoming_interview_alert()}return t.prototype.employer_logo=function(){return this.props.card.employer_logo_present()?this.props.card.employer_logo():""},t.prototype.set_qualified_status=function(){if(this.result_handler.qualified_for(this.props.card))return this.vm.qualified=!0,this.vm.heading_params.title_length=40},t.prototype.set_applied_alert=function(){return this.vm.content_params.alerts.push({html_safe_content:"<p><i class='fa fa-check-circle'></i> Application submitted</p>","class":"success"})},t.prototype.set_expiration_alert=function(){var e,t,s,i,n;return e=5,s=moment(this.props.card.expiration_date()),n=moment(new Date),t="info",i="fa-info-circle",s.diff(n,"days")<=e&&(t="danger",i="fa-exclamation-triangle"),this.vm.content_params.alerts.push({html_safe_content:"<p><i class='fa "+i+"'></i> Applications close "+s.shorthandWithTwoDigitYear("l")+" at "+s.format("h:mmA")+"</p>","class":t})},t.prototype.set_apply_open_alert=function(){var e;return e=moment(this.props.card.apply_start()),this.vm.content_params.alerts.push({html_safe_content:"<p><i class='fa fa-info-circle'></i> Applications open "+e.shorthandWithTwoDigitYear("l")+" at "+e.format("h:mmA")+"</p>","class":"info"})},t.prototype.set_upcoming_interview_alert=function(){if(this.result_handler.job_in_upcoming_interview(this.props.card))return this.vm.content_params.alerts.push({html_safe_content:'<p><i class="fa fa-info-circle"></i> Part of an upcoming interview on campus.</p>',"class":"secondary"})},t}(),Handshake.Postings.MassEmailJobContactsModal=function(){function t(t){this.searchable=t,this.close=e(this.close,this),this.open=e(this.open,this),this.success=e(this.success,this),this.confirm=e(this.confirm,this),this.send_to_contacts=ko.observable(!1),this.send_to_creators=ko.observable(!1),this.send_to_self=ko.observable(!1)}return t.prototype.confirm=function(){return this.close(),this.searchable.performBulkAction({send_to_contacts:this.send_to_contacts(),send_to_creators:this.send_to_creators(),send_to_self:this.send_to_self()}),!1},t.prototype.success=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.modal_element=function(){return $("#mass-email-contacts-modal")},t.prototype.open=function(){return this.modal_element().modal("show"),!1},t.prototype.close=function(){return this.modal_element().modal("hide")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Projects={},Handshake.Projects.Project=function(s){function i(t){var s,n,o,r,a;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({user_id:{send:!0},name:{send:!0},start_date:{send:!0},end_date:{send:!0},currently_active:{send:!0},description:{send:!0},student_id:{send:!0},student_name:{send:!0},student_path:{},external_url:{send:!0},better_url:{},position_name:{send:!0}}),this.start_date_formatted=ko.computed({read:(n=this,function(){return Handshake.Helpers.toMonthPicker(n.start_date())}),write:(s=this,function(e){return s.start_date(Handshake.Helpers.fromMonthPicker(e))})}),this.end_date_formatted=ko.computed({read:(r=this,function(){return Handshake.Helpers.toMonthPicker(r.end_date())}),write:(o=this,function(e){return o.end_date(Handshake.Helpers.fromMonthPicker(e))})}),this.start_to_end_date_fancy=ko.computed((a=this,function(){return Handshake.Helpers.startToEndMonthsFancy(a.start_date(),a.end_date())}))}return t(i,s),i.type="Project",i.underscore="project",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.Projects.ProjectsView=function(s){function i(t){this.props=t,this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),i.__super__.constructor.call(this,this.props.projects,this.props)}return t(i,s),i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.Projects.Project(e)},i.prototype.validateFields=function(){return!0},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.QualificationInformations={},Handshake.QualificationInformations.QualificationInformation=function(s){function i(t){var s,o,r;this.preference_met=e(this.preference_met,this),this.preference_specified=e(this.preference_specified,this),i.__super__.constructor.call(this,t),this.attributes({application_id:{},met_school_years_and_graduation_dates_requirement:{},school_years_and_graduation_dates_requirement:{},student_school_years_and_graduation_dates:{},met_cumulative_gpa_requirement:{},cumulative_gpa_requirement:{},student_cumulative_gpa:{},met_majors_requirement:{},majors_requirement:{},student_majors:{},met_work_authorization_requirement:{},work_authorization_requirement:{},student_work_authorization:{},met_colleges_requirement:{},colleges_requirement:{},student_colleges:{},met_institution_labels_requirement:{},institution_labels_requirement:{},student_institution_labels:{},met_work_study_eligibility_requirement:{},work_study_eligibility_requirement:{},student_work_study_eligibility:{},user_institution_id_type:{}}),this.met_school_specific_requirements=ko.computed((s=this,function(){return s.met_colleges_requirement()&&s.met_institution_labels_requirement()})),this.preferences_met_count=ko.computed((o=this,function(){var e,t,s,i;for(e=0,t=0,s=n.length;t<s;t++)i=n[t],o.preference_specified(i)&&o.preference_met(i)&&e++;return e})),this.preferences_specified_count=ko.computed((r=this,function(){var e,t,s,i;for(e=0,t=0,s=n.length;t<s;t++)i=n[t],r.preference_specified(i)&&e++;return e}))}var n;return t(i,s),i.type="QualificationInformation",i.underscore="qualification_information",n=["school_years_and_graduation_dates","cumulative_gpa","majors","work_authorization","colleges","institution_labels","work_study_eligibility"],i.prototype.preference_specified=function(e){var t;return""!==(t=this[e+"_requirement"]())&&null!==t&&void 0!==t},i.prototype.preference_met=function(e){var t;return!0===(t=this["met_"+e+"_requirement"]())||"true"===t},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,
e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.QuestionOptionResponses={},Handshake.QuestionOptionResponses.QuestionOptionResponse=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({question_response_id:{send:!0},question_option_id:{send:!0},checked:{send:!0},other_response:{send:!0},question_option:{belongs_to:Handshake.QuestionOptions.QuestionOption}}),this.is_valid=ko.computed((s=this,function(){return!s.checked()||!s.question_option().is_other()||!_.isEmpty($.trim(s.other_response()))}))}return t(i,s),i.type="QuestionOptionResponse",i.underscore="question_option_response",i.prototype.nested_route=function(){return"/question_responses/"+this.question_response_id()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.QuestionOptions={},Handshake.QuestionOptions.QuestionOption=function(s){function i(t){this.saveSelf=e(this.saveSelf,this),this.stopEditing=e(this.stopEditing,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({question_id:{send:!0},value:{send:!0},added_institution_label_ids:{send:!0,array:!0},added_institution_label_names:{array:!0},skip_to_page_id:{send:!0,convert_undefined_to_null:!0},is_other:{send:!0}}),this.editMode=ko.observable(!1),this.focusInput=ko.observable(!1)}return t(i,s),i.type="QuestionOption",i.underscore="question_option",i.prototype.nested_route=function(){return"/questions/"+this.question_id()},i.prototype.stopEditing=function(){return this.editMode(!1)},i.prototype.saveSelf=function(){return this.save(),this.stopEditing()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.QuestionResponses={},Handshake.QuestionResponses.QuestionResponse=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d,p;this.reset=e(this.reset,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({survey_response_id:{send:!0},question_id:{send:!0},text:{send:!0},question:{belongs_to:Handshake.Questions.Question},question_option_responses:{belongs_to:Handshake.QuestionOptionResponses.QuestionOptionResponse,array:!0,send:!0,nested_attribute:!0},smart_text:{},scale:{send:!0}}),this.computed_smart_text=ko.computed((s=this,function(){var e;return s.question().isShortAnswer()||s.question().isEssay()?s.text():s.question().isChooseOne()||s.question().isChooseMany()?(e=_.filter(s.question_option_responses(),function(e){return e.checked()}),_.map(e,function(e){return e.question_option().value()}).join(",")):s.question().isScale()?s.scale():""})),this.scaleString=ko.computed({read:(o=this,function(){return(o.scale()||"").toString()}),write:(n=this,function(e){return n.scale(parseInt(e,10))})}),this.scale_options=ko.computed((r=this,function(){var e,t;if(r.question().isScale())return function(){t=[];for(var s=e=r.question().scale_min(),i=r.question().scale_max();e<=i?s<=i:s>=i;e<=i?s++:s--)t.push(s);return t}.apply(this)})),this.isValid=ko.computed((a=this,function(){var e,t;return e=a.scale?a.scale():null,t=a.scale_options?a.scale_options():[],a.question().isScale()?!a.question().required()||-1!==t.indexOf(e):!a.question().required()||a.computed_smart_text()&&""!==a.computed_smart_text()})),this.question_option_id=ko.computed({read:(l=this,function(){var e;return null!=(e=_.find(l.question_option_responses(),function(e){return e.checked()}))?e.question_option_id():void 0}),write:(c=this,function(e){return _.each(c.question_option_responses(),function(t){return t.checked(t.question_option_id()===e)})})}),this.question_option_checked=ko.computed({read:(h=this,function(){return String(h.question_option_id())}),write:(u=this,function(e){return u.question_option_id(parseInt(e))})}),this.other_option_response=ko.computed((d=this,function(){return _.find(d.question_option_responses(),function(e){return e.question_option().is_other()})})),this.show_other_option_input=ko.computed((p=this,function(){return!(!p.question().isChooseOne()&&!p.question().isChooseMany())&&null!=p.other_option_response()&&p.other_option_response().checked()}))}return t(i,s),i.type="QuestionResponse",i.underscore="question_response",i.prototype.nested_route=function(){return"/survey_responses/"+this.survey_response_id()},i.prototype.reset=function(){switch(this.question().question_type()){case"checkbox":case"radio":return _(this.question_option_responses()).invoke("checked",!1);default:return this.text(null)}},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Questions={},Handshake.Questions.Question=function(s){function i(t){var s,n,o,r,a,c,l,u,h,d,p;this.deep_dup_attributes=e(this.deep_dup_attributes,this),this.add_other_option=e(this.add_other_option,this),this.add_option=e(this.add_option,this),this.nested_route=e(this.nested_route,this),this.questionOptionsByIds=e(this.questionOptionsByIds,this),i.__super__.constructor.call(this,t),this.attributes({questionable_id:{send:!0},questionable_type:{send:!0},question:{send:!0},question_type:{send:!0},required:{send:!0},questionable_path:{},survey_page_id:{send:!0},skip_to_page_id:{send:!0,convert_undefined_to_null:!0},question_options:{belongs_to:Handshake.QuestionOptions.QuestionOption,array:!0,send:!0,nested_attribute:!0},sort_order:{send:!0},scale_min:{send:!0},scale_max:{send:!0},scale_min_text:{send:!0},scale_max_text:{send:!0}}),this.conditional_title=ko.computed((s=this,function(){return""!==s.question()&&s.question()?s.question():"(untitled question)"})),this.not_destroyed_question_options=ko.computed((n=this,function(){return _.chain(n.question_options()).filter(function(e){return!e.markedAsDestroyed()}).sortBy(function(e){return e.is_other()?1:-1}).value()})),this.other_option=ko.computed((o=this,function(){return _.find(o.not_destroyed_question_options(),function(e){return e.is_other()})})),this.question_types=[{id:"input",name:"Short Answer"},{id:"textarea",name:"Essay"},{id:"checkbox",name:"Choose Many"},{id:"radio",name:"Choose One"},{id:"scale",name:"Scale"}],this.isShortAnswer=ko.computed((r=this,function(){return"input"===r.question_type()})),this.isEssay=ko.computed((a=this,function(){return"textarea"===a.question_type()})),this.isChooseMany=ko.computed((c=this,function(){return"checkbox"===c.question_type()})),this.isChooseOne=ko.computed((l=this,function(){return"radio"===l.question_type()})),this.isScale=ko.computed((u=this,function(){return"scale"===u.question_type()})),this.editMode=ko.observable(!1),this.focusInput=ko.observable(!1),this.has_skip_logic=ko.computed((h=this,function(){return!h.isShortAnswer()&&!h.isEssay()&&(h.isChooseMany()||h.isChooseOne()?_(h.question_options()).any(function(e){return!!e.skip_to_page_id()}):void 0)})),this.has_multi_skipping_checkboxes=ko.computed((d=this,function(){return!(d.isShortAnswer()||d.isEssay()||d.isChooseOne())&&(d.isChooseMany()?_(d.question_options()).select(function(e){return!!e.skip_to_page_id()}).length>1:void 0)})),null==this.scale_min()&&this.scale_min(1),null==this.scale_max()&&this.scale_max(10),this.scale_min_options=ko.observableArray([0,1]),this.scale_max_options=ko.observableArray([2,3,4,5,6,7,8,9,10]),this.scale_summary=ko.computed((p=this,function(){var e,t;return t=_.isEmpty(p.scale_min_text())?"":" ("+p.scale_min_text()+")",e=_.isEmpty(p.scale_max_text())?"":" ("+p.scale_max_text()+")",""+p.scale_min()+t+" - "+p.scale_max()+e}))}return t(i,s),i.type="Question",i.underscore="question",i.prototype.questionOptionsByIds=function(e){return _.filter(this.question_options(),function(t){return _.contains(e,t.id())})},i.prototype.nested_route=function(){return""+this.questionable_path()},i.prototype.add_option=function(){var e;return e=new Handshake.QuestionOptions.QuestionOption({question_id:this.id()}),this.question_options.push(e)},i.prototype.add_other_option=function(){var e;return e=new Handshake.QuestionOptions.QuestionOption({question_id:this.id(),value:"Other",is_other:!0}),this.question_options.push(e)},i.prototype.deep_dup_attributes=function(){var e,t;return t=this.getJSON(!1),e=_.omit(t,["id","sort_order","question_options_attributes"]),t.question_options_attributes&&(e.question_options=_.map(t.question_options_attributes,function(e){return _.omit(e,["id","question_id"])})),e},i}(Handshake.Resource),Handshake.Questions.QuestionsView=function(s){function i(t,s){var n,o;this.survey=t,this.parent=s,this.remove_failure=e(this.remove_failure,this),this.validateFields=e(this.validateFields,this),this.reSort=e(this.reSort,this),this.copyQuestion=e(this.copyQuestion,this),this.createItem=e(this.createItem,this),this.buildNewItem=e(this.buildNewItem,this),this.initFormWidgets=e(this.initFormWidgets,this),i.__super__.constructor.call(this,this.survey.initial_prop.questions,{newAtBottom:!0}),this.currentItems=ko.computed((n=this,function(){return n.parent.currentSurveyPage()?ko.observableArray(ko.utils.arrayFilter(n.items(),function(e){return e.survey_page_id()===n.parent.currentSurveyPage()})):ko.observableArray([])})),this.show_skipping_questions_warning=ko.computed((o=this,function(){return ko.utils.arrayFilter(o.currentItems()(),function(e){return e.has_skip_logic()}).length>1}))}return t(i,s),i.prototype.initFormWidgets=function(){return console.log("Created Question")},i.prototype.buildNewItem=function(e){return e.survey_id=this.survey.id(),e.questionable_path||(e.questionable_path=this.survey.entity_path),e.questionable_type||(e.questionable_type="Survey"),e.questionable_id||(e.questionable_id=this.survey.id()),e.survey_page_id||(e.survey_page_id=this.parent.currentSurveyPage()),new Handshake.Questions.Question(e)},i.prototype.createItem=function(e){return e.update({sort_order:this.items().length-1}),e.create((t=this,function(){return t.itemToAdd(null)}));var t},i.prototype.copyQuestion=function(e){var t;return(t=this.buildNewItem(e.deep_dup_attributes())).is_editing(!0),this.items.push(t)},i.prototype.reSort=function(e){var t,s;return s=[],t=e.item,ko.utils.arrayForEach(e.targetParent(),function(e,t){return s.push(e.id()),e.update({sort_order:t})}),t.ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:function(){return Handshake.Helpers.notifyError(t.errors_full_messages())}})},i.prototype.validateFields=function(){return!0},i.prototype.remove_failure=function(e,t){return window.setTimeout((s=this,function(){if(confirm(e.confirmation_message))return s.removeItem(t,null,!0)}),0);var s},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Registrations={},Handshake.Registrations.Registration=function(s){function i(t){var s,n,o,r,a,c;this.mark_as_paid=e(this.mark_as_paid,this),this.resend_receipts=e(this.resend_receipts,this),this.reset=e(this.reset,this),this.cancel=e(this.cancel,this),this.decline=e(this.decline,this),this.approve=e(this.approve,this),this.nested_route=e(this.nested_route,this),this.collapse=e(this.collapse,this),this.expand=e(this.expand,this),this.friendly_booth_identifiers=e(this.friendly_booth_identifiers,this),this.friendly_booth_numbers=e(this.friendly_booth_numbers,this),this.major_names=e(this.major_names,this),this.employment_type_names=e(this.employment_type_names,this),this.job_type_names=e(this.job_type_names,this),i.__super__.constructor.call(this,t),this.attributes({career_fair_id:{},career_fair_sessions_count:{},company_description:{},employer:{belongs_to:Handshake.Employers.Employer},job_types:{belongs_to:Handshake.JobTypes.JobType,array:!0},employment_types:{belongs_to:Handshake.EmploymentTypes.EmploymentType,array:!0},located_in_us:{},accepts_opt_cpt_candidates:{},willing_to_sponsor_candidate:{},work_authorization_requirements:{},majors:{belongs_to:Handshake.Majors.Major,array:!0},major_groups:{belongs_to:Handshake.MajorGroups.MajorGroup,array:!0},accept_all_majors:{},employer_id:{},employer_name:{},created_by_id:{},employer_website:{},assigned_booth_numbers:{array:!0},booth_options:{belongs_to:Handshake.BoothOptions.BoothOption,array:!0},attending_career_fair_sessions:{belongs_to:Handshake.CareerFairSessions.CareerFairSession,array:!0},booth_option_names:{},payment_method_id:{},payment_method_name:{},status:{},job_titles:{},payment_status:{},career_fair_name:{},total_cost:{},amount:{},charges_paid:{},amount_due:{},created_at:{},public_institution_labels:{},registrant_contact_id:{},employer_schedule_owner_id:{},payment_processor:{},virtual_group_meetings_count:{},student_group_meeting_participant_count:{},virtual_one_on_one_meetings_count:{},filled_virtual_one_on_one_meetings_count:{},required_preferences:{},total_employer_rep_count:{},confirmed_employer_rep_count:{},discount_ids:{belongs_to:Handshake.Discount,array:!0,send:!0},employer_approval_status:{}}),this.required_preferences_text=ko.computed((s=this,function(){return!0===s.required_preferences()?"Yes":"No"})),this.expanded=ko.observable(!1),this.nice_created_at=ko.computed((n=this,function(){return window.Handshake.TimeZoneHelper.dateTime("month_day_year_time",n.created_at(),Handshake.passed.current_user_time_zone)})),this.taken_one_on_one_slots_percentage=ko.computed((o=this,function(){return o.virtual_one_on_one_meetings_count()>0&&o.filled_virtual_one_on_one_meetings_count()===o.virtual_one_on_one_meetings_count()?"100%":o.filled_virtual_one_on_one_meetings_count()/o.virtual_one_on_one_meetings_count()*100+"%"})),this.taken_one_on_one_slots_display=ko.computed((r=this,function(){return r.filled_virtual_one_on_one_meetings_count()+" / "+r.virtual_one_on_one_meetings_count()})),this.reps_with_claimed_schedules_percentage=ko.computed((a=this,function(){return a.total_employer_rep_count()>0&&a.confirmed_employer_rep_count()===a.total_employer_rep_count()?"100%":a.confirmed_employer_rep_count()/a.total_employer_rep_count()*100+"%"})),this.reps_with_claimed_schedules_display=ko.computed((c=this,function(){return c.confirmed_employer_rep_count()+" / "+c.total_employer_rep_count()}))}return t(i,s),i.type="Registration",i.underscore="registration",i.prototype.job_type_names=function(){return _.map(this.job_types(),function(e){return e.name()})},i.prototype.employment_type_names=function(){return _.map(this.employment_types(),function(e){return e.name()})},i.prototype.major_names=function(){return _.map(this.majors(),function(e){return e.name()})},i.prototype.friendly_booth_numbers=function(){return _.map(this.assigned_booth_numbers(),function(e){return"#"+e}).join(", ")},i.prototype.friendly_booth_identifiers=function(){return _.map(this.assigned_booth_identifiers(),function(e){return"#"+e}).join(", ")},i.prototype.expand=function(){return this.expanded(!0)},i.prototype.collapse=function(){return this.expanded(!1)},i.prototype.nested_route=function(){return"/career_fairs/"+this.career_fair_id()},i.prototype.approve=function(e){return this.ajax_call({type:"POST",method:"approve",on_member:!0,action:"approve",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.decline=function(e){return this.ajax_call({type:"POST",method:"decline",on_member:!0,action:"decline",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.cancel=function(e,t){return this.ajax_call({type:"POST",data:e,method:"cancel",on_member:!0,action:"cancel",success:function(e){if(_.isFunction(t))return t(e)}})},i.prototype.reset=function(e){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(t){if(_.isFunction(e))return e(t)}})},i.prototype.resend_receipts=function(e){return this.ajax_call({type:"POST",method:"resend_receipts",on_member:!0,action:"resend_receipts",success:function(t){return _.isFunction(e)&&e(t),window.Handshake.Helpers.notifySuccess("The receipts for this registration's charges have been emailed to the registrant.")}})},i.prototype.mark_as_paid=function(e){return this.ajax_call({type:"POST",method:"mark_as_paid",on_member:!0,action:"mark_as_paid",success:function(t){return _.isFunction(e)&&e(t),window.Handshake.Helpers.notifySuccess("The registration's payment status is now 'paid'.")}})},i}(Handshake.Resource),Handshake.BulkInvoiceRegistrations=function(){function t(t){this.props=t,this.success=e(this.success,this),this.confirm=e(this.confirm,this),this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.send_to_current_user=ko.observable(!0),this.send_to_creator=ko.observable(!0),this.send_to_registrant=ko.observable(!0),this.send_to_contacts=ko.observable(!1),this.subject=ko.observable("Registration Invoice for "+this.props.career_fair_name),this.message=ko.observable(this.props.default_approval_message)}return t.prototype.show_modal=function(){return $("#bulk-invoice-registrations-modal").modal("show"),!1},t.prototype.hide_modal=function(){return $("#bulk-invoice-registrations-modal").modal("hide"),!1},t.prototype.confirm=function(){return this.hide_modal(),this.props.searchable.performBulkAction({send_to_current_user:this.send_to_current_user(),send_to_creator:this.send_to_creator(),send_to_registrant:this.send_to_registrant(),send_to_contacts:this.send_to_contacts(),subject:this.subject(),message:this.message()},["ids","extra_data"]),!1},t.prototype.success=function(){return Handshake.Helpers.notifySuccess("Successfully created invoices.")},t}(),Handshake.RegistrationBoothAssignments=function(){function t(t){var s;this.props=t,this.showEditModal=e(this.showEditModal,this),this.registration_booth_for_career_fair_session=e(this.registration_booth_for_career_fair_session,this),this.career_fair_sessions=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.career_fair_sessions)),this.registration_booths=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.registration_booths)),this.active_registration_booth_select=ko.observable(),this.registration_booth_selects=ko.observableArray(),_.each(this.career_fair_sessions(),(s=this,function(e){return s.registration_booth_selects.push(new Handshake.RegistrationBoothSelect({registration:s.props.registration,career_fair_session:e,registration_booth:s.registration_booth_for_career_fair_session(e),highest_booth_number:s.props.highest_booth_number,school_id:s.props.school_id}))}))}return t.prototype.registration_booth_for_career_fair_session=function(e){return _.find(this.registration_booths(),function(t){return t.career_fair_session_id()===e.id()})},t.prototype.showEditModal=function(e){return this.active_registration_booth_select(e),e.modalSetup(),$("#select-booth-modal").modal("show")},t}(),Handshake.RegistrationBoothSelect=function(){function t(t){var s,i;this.props=t,this.getAvailableBooths=e(this.getAvailableBooths,this),this.previousPage=e(this.previousPage,this),this.nextPage=e(this.nextPage,this),this.saveNewBooth=e(this.saveNewBooth,this),this.saveBooth=e(this.saveBooth,this),this.selectBooth=e(this.selectBooth,this),this.cancelNewBooth=e(this.cancelNewBooth,this),this.unassignBooth=e(this.unassignBooth,this),this.clearBooth=e(this.clearBooth,this),this.modalSetup=e(this.modalSetup,this),this.roomSelect2Options=e(this.roomSelect2Options,this),this.registration=this.props.registration,this.available_booths=ko.observableArray(),this.career_fair_session=ko.observable(this.props.career_fair_session),this.registration_booth=ko.observable(this.props.registration_booth),this.attending_session=ko.observable(!1),this.attending_session(_.some(this.registration().booth_options(),(s=this,function(e){return e.career_fair_session_id()===s.career_fair_session().id()}))),this.highest_booth_number=ko.observable(0),this.props.highest_booth_number&&this.highest_booth_number(this.props.highest_booth_number),this.new_booth=ko.observable(),this.booth_changed=ko.computed((i=this,function(){return i.registration_booth()!==i.new_booth()})),this.current_booth_page=ko.observable(1),this.total_booth_pages=ko.observable(0)}return t.prototype.roomSelect2Options=function(){return{placeholder:"Room",url:"/schools/"+this.props.school_id+"/all_rooms",results_property:"rooms",allowClear:!0,primary_property:"full_name",full_data:(e=this,function(t){return t?(e.new_booth().room_name(t.full_name),e.new_booth().room_id(t.id)):e.new_booth()&&e.new_booth().room_id()?{id:e.new_booth().room_id(),full_name:e.new_booth().room_name()}:{}})};var e},t.prototype.modalSetup=function(){return this.registration_booth()&&this.new_booth(this.registration_booth()),this.getAvailableBooths()},t.prototype.clearBooth=function(){return this.unassignBooth((e=this,function(){return e.registration_booth(null),e.new_booth(null)}));var e},t.prototype.unassignBooth=function(e){return this.registration_booth().update({registration_id:null}),this.registration_booth().save(function(t){if(_.isFunction(e))return e(t)})},t.prototype.cancelNewBooth=function(){return this.new_booth()&&this.new_booth().revert(),this.new_booth(null)},t.prototype.selectBooth=function(e){return this.new_booth(Handshake.Resource.resourceFromObject(e))},t.prototype.saveBooth=function(){return this.registration_booth()&&this.booth_changed()?this.unassignBooth(this.saveNewBooth):this.saveNewBooth()},t.prototype.saveNewBooth=function(){return this.new_booth().registration_id(this.registration().id()),this.new_booth().save((e=this,function(){var t;return e.registration_booth(e.new_booth()),(t=Number(e.new_booth().identifier().replace(/[^0-9]/,"")))>e.highest_booth_number()&&e.highest_booth_number(t),e.new_booth(null)}));var e},t.prototype.nextPage=function(){return this.current_booth_page(this.current_booth_page()+1),this.getAvailableBooths()},t.prototype.previousPage=function(){return this.current_booth_page(this.current_booth_page()-1),this.getAvailableBooths()},t.prototype.getAvailableBooths=function(){var e,t;return e={per_page:15,page:this.current_booth_page(),career_fair_session_id:this.career_fair_session().id(),booth_options:_.map(this.registration().booth_options(),function(e){return e.id()}),open_booths_only:!0},Handshake.operations.add_worker(),$.getJSON(this.registration().nested_route()+"/booths",e,(t=this,function(e){return t.available_booths(e.results),t.current_booth_page(e.current_page),t.total_booth_pages(e.total_pages),Handshake.operations.remove_worker()}))},t}(),Handshake.RegistrationFormView=function(){function t(t){var s,i,n,o,r,a,c,l,u,h,d,p,m,f,b;this.props=t,this.create_discount_success=e(this.create_discount_success,this),this.submitFromView=e(this.submitFromView,this),this.contactSelect2RemovingFunction=e(this.contactSelect2RemovingFunction,this),this.clearEmployerScheduleOwner=e(this.clearEmployerScheduleOwner,this),this.contactSelect2DataFunction=e(this.contactSelect2DataFunction,this),this.edit_booth_options_registration_view=e(this.edit_booth_options_registration_view,this),this.accept_all_majors=ko.observable(this.props.registration.accept_all_majors),this.can_show_associated_jobs=ko.observable(this.props.can_show_associated_jobs),this.is_custom_job=ko.observable(!1),this.no_job=ko.observable(!this.can_show_associated_jobs()),n="handshake",0===this.props.jobs.length&&(n="None"===this.props.job_titles?"no_jobs":"custom"),this.edit_booth_options_views=ko.observableArray(),this.open_roles=ko.observable(n),this.open_roles.subscribe((a=this,function(e){if(a.job_titles(null),a.job_ids(null),"no_jobs"===e)return a.job_titles("None")})),this.is_custom_job.subscribe((c=this,function(e){return e?(c.job_ids(null),c.no_job(!1)):c.job_titles(null)})),this.no_job.subscribe((l=this,function(e){return e?(l.job_ids(null),l.is_custom_job(!1),l.job_titles("None")):l.job_titles(null)})),this.job_ids=ko.observable(this.props.jobs.map(function(e){return e.id})),this.job_ids.subscribe((u=this,function(){return u.job_titles(null)})),this.employer_id=ko.observable(this.props.registration.employer_id),this.employer_schedule_owner_id=ko.observable(this.props.registration.employer_schedule_owner_id),this.contact_ids=ko.observable(this.props.contact_ids),this.job_titles=ko.observable(this.no_job()?"None":this.props.job_titles),this.discounts=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.discounts,Handshake.Discount)),this.selected_discount_ids=ko.observableArray(this.props.selected_discount_ids),o=this,i={resource_type:"registration",school_id:this.props.school_id,parent_major_groups:ko.observableArray(this.props.parent_major_groups),selected_major_groups:ko.observableArray(this.props.selected_major_groups),selected_majors:ko.observableArray(this.props.selected_majors),limit_to_career_fair_majors:this.props.limit_to_career_fair_majors},this.selectMajorGroupsView=new Handshake.MajorGroups.SelectMajorGroupsView(i),this.contactModal=new Handshake.Contacts.CreateContactModal(null,o.employer_id),this.registration_id=this.props.registration.id,this.registration_employer=ko.observable(this.props.registration.employer),this.company_description=ko.observable(this.props.registration.company_description),this.maximum_description_length=this.props.maximum_description_length,this.registration_id?(this.located_in_us=ko.observable(this.props.located_in_us),this.accepts_opt_cpt_candidates=ko.observable(this.props.accepts_opt_cpt_candidates),this.willing_to_sponsor_candidate=ko.observable(this.props.willing_to_sponsor_candidate)):(this.located_in_us=ko.observable(null),this.accepts_opt_cpt_candidates=ko.observable(null),this.willing_to_sponsor_candidate=ko.observable(null),"Employers"===Handshake.passed.current_user_type&&this.employer_schedule_owner_id(Handshake.passed.current_user_id)),this.registration_contact_select2_options={placeholder:"Choose contacts...",initial_value:this.props.initial_contacts,value:this.contact_ids,url:"/contacts/possible_contacts",dataFunction:this.contactSelect2DataFunction,removingFunction:this.contactSelect2RemovingFunction},this.registration_employer_schedule_owner_select2_options={placeholder:"Choose a schedule owner...",url:"/users/employer_users",value:this.employer_schedule_owner_id,dataFunction:(h=this,function(e){return{query:e,only_active:!0,simple_search:!0,institution_id:h.employer_id()}}),initial_value:this.props.employer_schedule_owner},this.registration_registrant_contact_select2_options={placeholder:"Choose registrant...",initial_value:this.props.registrant_contact,url:"/contacts/possible_contacts",dataFunction:this.contactSelect2DataFunction},this.registration_employer_select2_options={placeholder:"Company/Organization...",url:"/employers/approved_employers",simple_search:!1,value:this.employer_id,initial_value:this.registration_employer,on_change:this.clearEmployerScheduleOwner},this.registration_jobs_select2_options={placeholder:"Choose jobs...",initial_value:this.props.jobs,value:this.job_ids,results_filter:function(e){return e=_(e).map(function(e){return{id:e.job_id,name:"#"+e.job_id+": "+e.job_name,job_name:e.job_name}}),_.uniq(e,"id").sort(function(e,t){return t.job_name<e.job_name?1:t.job_name===e.job_name?e.id-t.id:-1})},dataFunction:(d=this,function(e){return"Career Services"===Handshake.passed.current_user_type?{query:e,simple_search:!0,employer_ids:[d.employer_id()],status:"approved"}:{query:e,simple_search:!0,employer_id:d.props.registration.employer_id,schools:[d.props.school_id],status:["approved","pending"]}}),url:"/postings"},this.description_remaining=ko.computed((p=this,function(){var e;return e=p.company_description()?p.company_description().length:0,p.maximum_description_length-e})),this.description_helper_text=ko.computed((m=this,function(){return"The career fair organizer has set a limit. "+m.description_remaining()+" characters remaining"})),this.description_helper_class=ko.computed((f=this,function(){return f.description_remaining()<0?"text-danger":"text-muted"})),s=ko.computed((b=this,function(){return Handshake.Transducers.transduce(b.discounts()).filter(function(e){return _(b.selected_discount_ids()).contains(String(e.id()))}).map(function(e){return parseFloat(e.amount())}).reduce(Handshake.Combiners.add,0)})),this.one_off_discount_modal=new Handshake.OneOffDiscountModal({registration:this.props.registration,discounts_applied:s,create_discount_success:this.create_discount_success}),r={survey_id:this.props.survey_id,survey_response_id:this.props.survey_response_id},this.take_survey_view=new Handshake.TakeSurveyView(r),this.props.survey_response&&this.take_survey_view.survey_response(Handshake.Resource.resourceFromObject(this.props.survey_response))}return t.prototype.edit_booth_options_registration_view=function(e){var t,s;return t={booth_options_registration:_.find(this.props.booth_options_registrations,function(t){return+t.booth_option_id==+e}),booth_options:this.props.booth_options,employer_id:this.employer_id},s=new Handshake.EditBoothOptionsRegistrationsView(t),this.edit_booth_options_views.push(s),s},t.prototype.contactSelect2DataFunction=function(e){return{query:e,simple_search:!0,employer_id:$("#registration_employer_id").val(),class_name:"Registration",object_id:this.registration_id}},t.prototype.clearEmployerScheduleOwner=function(){return this.employer_schedule_owner_id(null)},t.prototype.contactSelect2RemovingFunction=function(e){return Handshake.passed.current_user_institution_id_type===e.choice.institution_id_type||confirm("This contact does not belong to you. If you remove it, you will not be able to add it again yourself. Please confirm that you would like to remove this contact. If you would like to keep this contact, click the cancel button.")},t.prototype.submitFromView=function(){var e,t;return Handshake.passed.should_display_us_work_authorization&&(null===this.located_in_us()||this.located_in_us()&&(null===this.accepts_opt_cpt_candidates()||null===this.willing_to_sponsor_candidate()))?Handshake.Helpers.notifyError("Please answer work authorization questions."):(t=null!==this.registration_id&&"Employers"===Handshake.passed.current_user_type||this.props.hs_hosted_virtual_career_fair,(this.props.use_per_session_representatives?_.all(this.edit_booth_options_views(),function(e){var t;return(null!=(t=e.contact_ids())?t.length:void 0)>0}):(null!=(e=this.contact_ids())?e.length:void 0)>0)||t?this.forceSubmit():this.showWarningModal())},t.prototype.forceSubmit=function(){return this.hideWarningModal(),$(".registration-form form").submit()},t.prototype.showWarningModal=function(){return $("#save-warning-modal").modal("show")},t.prototype.hideWarningModal=function(){if($("#save-warning-modal").length>0)return $("#save-warning-modal").modal("hide")},t.prototype.create_discount_success=function(e){return this.discounts.push(Handshake.Resource.resourceFromObject(e.discount,Handshake.Discount)),this.selected_discount_ids.push(String(e.discount.id)),this.one_off_discount_modal.close(),Handshake.Helpers.notifySuccess("Discount was successfully created.")},t}(),Handshake.ManageRegistrationsView=function(){function t(t){var s,i,n,o;this.props=t,this.select_mass_email_contacts_creators=e(this.select_mass_email_contacts_creators,this),this.sendMassEmailSuccess=e(this.sendMassEmailSuccess,this),this.cancel_mass_email=e(this.cancel_mass_email,this),this.confirm_mass_email_contacts_creators=e(this.confirm_mass_email_contacts_creators,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.approveRegistration=e(this.approveRegistration,this),this.initializeNewInvoiceModal=e(this.initializeNewInvoiceModal,this),this.initializeManageInvoiceModal=e(this.initializeManageInvoiceModal,this),this.invoiceCallback=e(this.invoiceCallback,this),this.currentInvoiceModalRegistration=ko.observable(),this.registrations=ko.observableArray([]),
(i=document.createElement("a").style).cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",this.browser_supports_sticky=ko.observable(-1!==i.position.indexOf("sticky")),this.searchable=new Handshake.Searchable($("#search-form"),"registrations",this.searchCallback),this.searchable.showPerPageOption(!0),this.bulkInvoicesModal=new Handshake.BulkInvoiceRegistrations({career_fair_name:this.props.career_fair_name,default_approval_message:this.props.default_approval_message,searchable:this.searchable}),s=[{label:"Add Fair Registration Label",type:"simple",bulk_action:"add_label",labellable_type:"Registration",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Fair Registration Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Add Employer Label",type:"simple",labellable_type:"Employer",bulk_action:"add_employer_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Email Registrants/Representatives",type:"simple",bulk_action:"mass_email_registration_contacts_creators",select_action:this.select_mass_email_contacts_creators,confirm_action:this.confirm_mass_email_contacts_creators,cancel_action:this.cancel_mass_email,success:this.sendMassEmailSuccess},{label:"Invoice Registrations",type:"simple",bulk_action:"invoice_registrations",select_action:this.bulkInvoicesModal.show_modal,confirm_action:this.bulkInvoicesModal.confirm,success:this.bulkInvoicesModal.success}],this.searchable.bulkActions(s),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"asc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"Employer Name",field:"employer_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Registration Date",field:"created_at",sort_direction:"desc"}]),n=Handshake.passed.current_user_feature_flags["university-multi-search-filters"],"Career Services"===(o=Handshake.passed.current_user_type)||"Admins"===o?(this.searchable.initialSetup("UniversityRegistrations"),n&&(this.searchable.filter_view_search_url("/university_multi_search/filters.json"),this.searchable.fetch_filter_views_url("/university_multi_search/filter_views.json"))):this.searchable.initialSetup("Registration"),this.manageInvoicesModal=new Handshake.Invoices.ManageInvoicesModal,this.mass_email_contacts_creators_modal=new Handshake.MassEmailContactsCreatorsModal(this.searchable)}return t.prototype.invoiceCallback=function(e){return this.currentInvoiceModalRegistration().payment_status(e.invoiceable.payment_status)},t.prototype.initializeManageInvoiceModal=function(e){return this.currentInvoiceModalRegistration(e),this.manageInvoicesModal.setInvoiceable(e),this.manageInvoicesModal.initialize()},t.prototype.initializeNewInvoiceModal=function(e){return this.currentInvoiceModalRegistration(e),this.manageInvoicesModal.setInvoiceable(e),this.manageInvoicesModal.createNewInvoice()},t.prototype.approveRegistration=function(e){return e.approve((t=this,function(s){var i;if(i="The registration for "+s.registration.employer.name+" was successfully approved.",Handshake.Helpers.notifySuccess(i),s.automatic_invoices)return t.initializeNewInvoiceModal(e)}));var t},t.prototype.searchCallback=function(e){var t;return t=Handshake.Resource.resourcesFromArray(e.results,Handshake.Registrations.Registration),this.registrations(t)},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.confirm_mass_email_contacts_creators=function(){return this.mass_email_contacts_creators_modal.confirm(),!1},t.prototype.cancel_mass_email=function(){return this.mass_email_contacts_creators_modal.show_modal()},t.prototype.sendMassEmailSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.select_mass_email_contacts_creators=function(){return this.mass_email_contacts_creators_modal.show_modal(),!1},t}(),Handshake.MassEmailContactsCreatorsModal=function(){function t(t){this.searchable=t,this.hide_modal=e(this.hide_modal,this),this.show_modal=e(this.show_modal,this),this.confirm=e(this.confirm,this),this.modal_element=$("#new-mass-email-modal"),this.initialized=ko.observable(!1),this.send_to_contacts=ko.observable(!1),this.send_to_schedule_representatives=ko.observable(!1),this.send_to_creators=ko.observable(!1),this.send_to_self=ko.observable(!1)}return t.prototype.confirm=function(){return this.hide_modal(),this.searchable.performBulkAction({send_to_contacts:this.send_to_contacts(),send_to_schedule_representatives:this.send_to_schedule_representatives(),send_to_creators:this.send_to_creators(),send_to_self:this.send_to_self()})},t.prototype.show_modal=function(){return this.modal_element.modal("show")},t.prototype.hide_modal=function(){return this.modal_element.modal("hide")},t}(),Handshake.PublicRegistrationsView=function(){function t(t){var s,i,n;this.props=t,this.searchCallback=e(this.searchCallback,this),this.cards=ko.observable(),this.registrations=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"registrations",this.searchCallback),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"asc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"Employer Name",field:"employer_name.case_insensitive_sorting",sort_direction:"asc"}]),this.searchable.including_all_facets_in_searches(!0),s=Handshake.passed.current_user_feature_flags,n=Handshake.passed.current_user_type,i=s["university-multi-search-filters"],"Career Services"===n||"Admins"===n?(this.searchable.initialSetup("UniversityRegistrationsPreview"),i&&(this.searchable.filter_view_search_url("/university_multi_search/filters.json"),this.searchable.fetch_filter_views_url("/university_multi_search/filter_views.json"))):"Students"===n?this.searchable.initialSetup("StudentRegistration"):"Employers"===n?this.searchable.initialSetup("Registration"):n?bugsnagClient.notify("Unexpected user type "+n+" encountered in Registrations"):(this.searchable.initialSetup("StudentRegistration"),this.searchable.filter_view_search_url("/multi_search/unauthenticated_filters.json"))}return t.prototype.searchCallback=function(e){var t,s;return this.props.render_in_react?setTimeout((s=this,function(){var t;return t=e.results.map(function(e){var t,i;return i=_(s.props.current_user_major_ids).intersection(e.major_ids),t=_(s.props.current_user_major_group_ids).intersection(e.major_group_ids),{registration:e,loggedIn:Boolean(Handshake.passed.current_user_id),currentUserType:Handshake.passed.current_user_type,hiringForMajor:Boolean(i.concat(t).length),favorite:_(s.props.employer_favorites).findWhere({favoritable_id:e.employer_id})}}),s.registrations(t)}),0):(t=Handshake.Resource.resourcesFromArray(e.results,Handshake.Registrations.Registration),this.registrations(t))},t}(),Handshake.CancelRegistrationModal=function(){function t(t){this.props=t,this.cancel_registration=e(this.cancel_registration,this),this.registration=this.props.registration,this.hs_hosted_virtual_career_fair=this.props.hs_hosted_virtual_career_fair,this.contacts=Handshake.Resource.resourcesFromArray(this.props.contacts),null!=this.props.registrant_contact&&this.contacts.push(Handshake.Resource.resourceFromObject(this.props.registrant_contact)),this.contacts=_.uniq(this.contacts,function(e){return e.id()}),this.contact_ids_to_notify=ko.observableArray([]),this.custom_message=ko.observable()}return t.prototype.after_cancel=function(){return window.Handshake.Helpers.notifySuccess("This registration has been cancelled and any selected recipients will be notified.",function(){return window.location.reload()})},t.prototype.cancel_registration=function(){var e;return e={contact_ids_to_notify:this.contact_ids_to_notify(),custom_message:this.custom_message()},this.registration().cancel(e,this.after_cancel)},t}(),Handshake.ShowRegistrationView=function(){function t(t){var s,i,n,o,r;this.props=t,this.create_discount_success=e(this.create_discount_success,this),this.messagesView=new Handshake.Conversations.CreateConversationView({to_user_id:this.props.message_to_user_id,body:this.props.message_body,redirect_after_sending:!1}),this.registration=ko.observable(Handshake.Resource.resourceFromObject(this.props.registration)),this.notesModal=new Handshake.Notes.NotesView(this.registration(),!0),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.registration,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))})),this.props.comments_enabled&&(this.commentsView=new Handshake.Comments.CommentsView(this.registration)),$(".charge-edit-form").length>0&&(this.chargeForm=new Handshake.Charges.ChargeForm({chargeable:this.registration,institution_id:this.registration().employer_id(),institution_type:Handshake.Employers.Employer.type,stripe_publishable_key:this.props.stripe_publishable_key,stripe_amount:this.props.stripe_amount,payment_processor:this.registration().payment_processor()})),$("#manual-charge-modal").length>0&&(this.manualChargeForm=new Handshake.Charges.ManualChargeForm(this.registration,this.registration().employer_id(),Handshake.Employers.Employer.type)),this.props.invoices_enabled&&(this.manageInvoicesModal=new Handshake.Invoices.ManageInvoicesModal(this.registration()),this.manageInvoicesModal.reloadPageOnCallback=!0),this.cancel_registration_modal=new Handshake.CancelRegistrationModal({registration:this.registration,registrant_contact:this.props.registrant_contact,contacts:this.props.use_per_session_representatives?this.props.contacts:this.props.all_contacts,hs_hosted_virtual_career_fair:this.props.hs_hosted_virtual_career_fair}),this.registration_booth_assignments=new Handshake.RegistrationBoothAssignments({registration:this.registration,career_fair_sessions:this.props.career_fair_sessions,registration_booths:this.props.registration_booths,highest_booth_number:this.props.highest_booth_number,school_id:this.props.school_id}),this.props.use_per_session_representatives?(s=(i=this.props.hs_hosted_virtual_career_fair?[this.props.registrant_contact]:this.props.all_contacts).concat(this.props.confirmed_schedule_representative_contacts),this.contactModal=new Handshake.Contacts.ShowContactModal(s,this.props.can_show_contact),this.representative_contacts=ko.observableArray(i)):(n=this.props.contacts.concat(this.props.confirmed_schedule_representative_contacts),this.contactModal=new Handshake.Contacts.ShowContactModal(n,this.props.can_show_contact),this.representative_contacts=ko.observableArray(this.props.contacts)),this.confirmed_schedule_representative_contacts=ko.observableArray(this.props.confirmed_schedule_representative_contacts),this.discounts=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.discounts,Handshake.Discount)),this.selected_discount_ids=ko.observableArray(this.props.selected_discount_ids),o=ko.computed((r=this,function(){return Handshake.Transducers.transduce(r.discounts()).filter(function(e){return _(r.selected_discount_ids()).contains(String(e.id()))}).map(function(e){return parseFloat(e.amount())}).reduce(Handshake.Combiners.add,0)})),this.one_off_discount_modal=new Handshake.OneOffDiscountModal({registration:this.props.registration,discounts_applied:o,create_discount_success:this.create_discount_success})}return t.prototype.create_discount_success=function(e){var t,s,i,n,o;for(t=Handshake.Resource.resourceFromObject(e.discount,Handshake.Discount),s=0,n=(o=this.props.selected_discount_ids).length;s<n;s++)i=o[s],this.registration().discount_ids().push(i);return this.registration().discount_ids().push(t.id()),this.registration().save(function(){return Handshake.Helpers.notifySuccess("Discount was successfully created."),window.location.reload()})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.ResumeParsings={},Handshake.ResumeParsings.ResumeParsing=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},document_id:{send:!0},aasm_state:{},error_text:{},updated_at:{},created_at:{}})}return t(i,s),i.type="ResumeParsing",i.underscore="resume_parsing",i.prototype.nested_route=function(){return"/documents/"+this.document_id()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Rooms={},Handshake.Rooms.Room=function(s){function i(t){var s,n,o,r;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({name:{},room_photo_url:{},full_name:{},building_id:{},building_name:{},capacity:{},available_start:{},available_end:{},moment_time_zone:{},building:{belongs_to:Handshake.Buildings.Building}}),this.available_start_formatted=ko.computed({read:(n=this,function(){return Handshake.Helpers.toTimePicker(n.available_start(),n.moment_time_zone())}),write:(s=this,function(e){return s.available_start(Handshake.Helpers.fromTimePicker(e,s.moment_time_zone()))})}),this.available_end_formatted=ko.computed({read:(r=this,function(){return Handshake.Helpers.toTimePicker(r.available_end(),r.moment_time_zone())}),write:(o=this,function(e){return o.available_end(Handshake.Helpers.fromTimePicker(e,o.moment_time_zone()))})}),this.slots=ko.observableArray([]),t.interview_slots&&this.slots(Handshake.Resource.resourcesFromArray(t.interview_slots,Handshake.InterviewSlots.InterviewSlot))}return t(i,s),i.type="Room",i.underscore="room",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.EditRoomView=function(){function e(e){this.props=e,this.room=ko.observable(Handshake.Resource.resourceFromObject(this.props.room))}return e}(),Handshake.ShowRoomView=function(){function e(e){this.props=e,this.room=ko.observable(Handshake.Resource.resourceFromObject(this.props.room)),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.room,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))}))}return e}(),Handshake.Rooms.Results=function(){function e(){}return e.group_by_building=function(e){var t,s;return s=[],t=_.uniq(_.pluck(e,"building_name")),_.forEach(t,function(e){return s.push({full_name:e,children:[]})}),_.forEach(e,function(e){return _.findWhere(s,{full_name:e.building_name}).children.push(e)}),s},e.group_by_availability=function(e){var t,s,i;return t=[],(null!=(s=e.available_rooms)?s.length:void 0)>0&&(t=t.concat({full_name:"Not assigned to an interview",children:e.available_rooms})),(null!=(i=e.unavailable_rooms)?i.length:void 0)>0&&(t=t.concat({full_name:"Assigned to an interview",children:e.unavailable_rooms})),t},e.name_with_reserved_status=function(e){var t;return t=e.full_name,e.is_reserved&&(t+=" (assigned)"),t},e}(),Handshake.ManageRoomsView=function(){function t(){var t;this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.rooms=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"contacts",this.searchCallback),this.searchable.bulkActions([{label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"Room",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess}]),"Career Services"===(t=Handshake.passed.current_user_type)||"Admins"===t?this.searchable.initialSetup("UniversityRoom"):this.searchable.initialSetup("Room")}return t.prototype.searchCallback=function(e){return this.rooms(Handshake.Resource.resourcesFromArray(e.results,Handshake.Rooms.Room))},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.SalaryTypes={},Handshake.SalaryTypes.SalaryType=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({name:{}})}return e(s,t),s.type="SalaryType",s.underscore="salary_type",s}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.SchoolExpertises={},Handshake.SchoolExpertises.SchoolExpertise=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{send:!0},expertise_id:{send:!0},expertise_name:{send:!0}})}return t(i,s),i.type="SchoolExpertise",i.underscore="school_expertise",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.SchoolExpertisesView=function(){function t(t){this.props=t,this.removeSchoolExpertise=e(this.removeSchoolExpertise,this),this.addSchoolExpertise=e(this.addSchoolExpertise,this),this.addSchoolExpertiseSuccess=e(this.addSchoolExpertiseSuccess,this),this.school_id=this.props.school_id,this.school_expertises=ko.observableArray([]),this.new_school_expertise_name=ko.observable(""),this.expertise_name_typeahead_options={path:"/expertises.json",onChange:this.addSchoolExpertise},this.school_expertises(Handshake.Resource.resourcesFromArray(this.props.school_expertises,Handshake.SchoolExpertises.SchoolExpertise))}return t.prototype.addSchoolExpertiseSuccess=function(e){return this.school_expertises.push(new Handshake.SchoolExpertises.SchoolExpertise(e.school_expertise)),this.new_school_expertise_name("")},t.prototype.addSchoolExpertise=function(){return new Handshake.SchoolExpertises.SchoolExpertise({school_id:this.school_id,expertise_name:this.new_school_expertise_name()}).create(this.addSchoolExpertiseSuccess)},t.prototype.removeSchoolExpertise=function(e){return e.destroy((t=this,function(){return t.school_expertises.remove(e)}));var t},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.SchoolMajors={},Handshake.SchoolMajors.SchoolMajor=function(s){function i(t){this.student_count=e(this.student_count,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{send:!0},major_id:{send:!0},major_name:{send:!0},major_group_names:{array:!0},major_group_ids:{send:!0,array:!0,convert_empty_to_blank:!0}})}return t(i,s),i.type="SchoolMajor",i.underscore="school_major",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i.prototype.student_count=function(e){return this.ajax_call({type:"GET",method:"student_count",on_member:!0,action:"student_count",success:function(t){if(e)return e(t)}})},i}(Handshake.Resource),Handshake.SchoolMajorsView=function(){function t(t){var s;this.props=t,this.deleteSchoolMajor=e(this.deleteSchoolMajor,this),this.closeConfirmRemoveModal=e(this.closeConfirmRemoveModal,this),this.removeSchoolMajor=e(this.removeSchoolMajor,this),this.addSchoolMajor=e(this.addSchoolMajor,this),this.addSchoolMajorSuccess=e(this.addSchoolMajorSuccess,this),this.setSelectedMajor=e(this.setSelectedMajor,this),this.save=e(this.save,this),this.searchCallback=e(this.searchCallback,this),this.school_id=this.props.school_id,this.school_majors=ko.observableArray([]),this.new_school_major_name=ko.observable(""),this.major_name_typeahead_options={path:"/majors.json",onChange:this.addSchoolMajor},this.selectedMajor=ko.observable(),this.parent_major_groups=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.parent_major_groups)),this.searchable=new Handshake.Searchable($("#search-form"),"school_majors",this.searchCallback),this.searchable.initialSetup("ManageSchoolMajors"),this.selectedMajorName=ko.computed((s=this,function(){return s.selectedMajor()?s.selectedMajor().major_name():"School Major Groups"})),this.major_to_delete=ko.observable(),this.major_student_count=ko.observable()}return t.prototype.searchCallback=function(e){return this.school_majors(Handshake.Resource.resourcesFromArray(e.results,Handshake.SchoolMajors.SchoolMajor))},t.prototype.save=function(){return this.selectedMajor().save()},t.prototype.setSelectedMajor=function(e){return this.selectedMajor(e)},t.prototype.addSchoolMajorSuccess=function(e){return this.school_majors.unshift(new Handshake.SchoolMajors.SchoolMajor(e.school_major)),this.searchable.currentResult(this.school_majors()),this.new_school_major_name("")},t.prototype.addSchoolMajor=function(){return new Handshake.SchoolMajors.SchoolMajor({school_id:this.school_id,major_name:this.new_school_major_name()}).create(this.addSchoolMajorSuccess)},t.prototype.removeSchoolMajor=function(e){return this.major_to_delete(e),e.student_count((t=this,function(e){return e.student_count>0?(t.major_student_count(e.student_count),$("#confirm-remove-school-major-modal").modal("show")):t.deleteSchoolMajor()}));var t},t.prototype.closeConfirmRemoveModal=function(){return $("#confirm-remove-school-major-modal").modal("hide"),this.major_to_delete(null),this.major_student_count(null)},t.prototype.deleteSchoolMajor=function(){return this.major_to_delete().destroy((e=this,function(){return e.school_majors.remove(e.major_to_delete()),e.closeConfirmRemoveModal()}));var e},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.SchoolMinors={},Handshake.SchoolMinors.SchoolMinor=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({school_id:{send:!0},minor_id:{send:!0},minor_name:{send:!0}})}return t(i,s),i.type="SchoolMinor",i.underscore="school_minor",i.prototype.nested_route=function(){return"/schools/"+this.school_id()},i}(Handshake.Resource),Handshake.SchoolMinorsView=function(){function t(t){this.props=t,this.removeSchoolMinor=e(this.removeSchoolMinor,this),this.addSchoolMinor=e(this.addSchoolMinor,this),this.addSchoolMinorSuccess=e(this.addSchoolMinorSuccess,this),this.searchCallback=e(this.searchCallback,this),this.school_id=this.props.school_id,this.school_minors=ko.observableArray([]),this.new_school_minor_name=ko.observable(""),this.minor_name_typeahead_options={path:"/minors.json",onChange:this.addSchoolMinor},this.searchable=new Handshake.Searchable($("#search-form"),"school_minors",this.searchCallback),this.searchable.initialSetup("ManageSchoolMinors")}return t.prototype.searchCallback=function(e){return this.school_minors(Handshake.Resource.resourcesFromArray(e.results,Handshake.SchoolMinors.SchoolMinor))},t.prototype.addSchoolMinorSuccess=function(e){return this.school_minors.unshift(new Handshake.SchoolMinors.SchoolMinor(e.school_minor)),this.searchable.currentResult(this.school_minors()),this.new_school_minor_name("")},t.prototype.addSchoolMinor=function(){return new Handshake.SchoolMinors.SchoolMinor({school_id:this.school_id,minor_name:this.new_school_minor_name()}).create(this.addSchoolMinorSuccess)},t.prototype.removeSchoolMinor=function(e){return e.destroy((t=this,function(){return t.school_minors.remove(e)}));var t},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Schools={},Handshake.Schools.regions={midwest:["Illinois","Indiana","Iowa","Kansas","Michigan","Minnesota","Missouri","Nebraska","North Dakota","Ohio","South Dakota","Wisconsin"],northeast:["Connecticut","Maine","Massachusetts","New Hampshire","New Jersey","New York","Pennsylvania","Rhode Island","Vermont"],south:["Alabama","Arkansas","Delaware","Florida","Georgia","Kentucky","Louisiana","Maryland","Mississippi","North Carolina","Oklahoma","South Carolina","Tennessee","Texas","Virginia","West Virginia","District of Columbia"],west:["Alaska","Arizona","California","Colorado","Hawaii","Idaho","Montana","Nevada","New Mexico","Oregon","Utah","Washington","Wyoming"]},Handshake.Schools.orderOptions=[{value:"default",name:"Default rank"},{value:"overall",name:"National rank"},{value:"engineering",name:"Undergrad engineering rank"},{value:"business",name:"Undergrad business rank"},{value:"liberal_arts",name:"Liberal arts rank"}],Handshake.Schools.rankOptions=[{value:"overall",name:"National"},{value:"engineering",name:"Undergrad engineering"},{value:"business",name:"Undergrad business"},{value:"liberal_arts",name:"Liberal arts"}],Handshake.Schools.getRegions=function(e){return _(e).map(function(e){return{value:e,name:capitalizeString(e)}})},Handshake.Schools.getSizeOptions=function(e){var t;return t=_([{name:"< 1,000 students",size_names:["1 - 10","50 - 100","100 - 250","250 - 1,000","< 1,000"]},{name:"1,000 - 5,000 students",size_names:["1,000 - 5,000"]},{name:"5,000 - 10,000 students",size_names:["5,000 - 10,000"]},{name:"10,000 - 25,000 students",size_names:["10,000 - 25,000"]},{name:"> 25,000 students",size_names:["25,000+"]}]).map(function(t){return t.value=[],_(e).each(function(e){if(_(t.size_names).contains(e.name))return t.value.push(e.id)}),t}),_(t).filter(function(e){return 0!==e.value.length})},Handshake.Schools.School=function(s){function i(t){var s,n,o,r;this.unhide=e(this.unhide,this),i.__super__.constructor.call(this,t),this.attributes({name:{},nickname:{},mission:{},description:{},institution_type_id:{},institution_size:{belongs_to:Handshake.InstitutionSizes.InstitutionSize},institution_type:{belongs_to:Handshake.InstitutionTypes.InstitutionType},registration_rank:{},location_name:{},logo_url:{},school_logo_url:{},student_count:{},favorite_path:{},website:{},email:{},email_domain:{},roles:{array:!0},posting_status:{},employer_approval_request_token:{},advanced_student_filters_token:{},appointment_cancellation_period:{},branding_image:{send:!0},logo:{send:!0},school_logo:{send:!0},header_image:{send:!0},branding_image_url:{},header_image_url:{},moment_time_zone:{},enrollment:{},consortium_distribution_schools:{array:!0},hidden:{send:!0}}),this.branding_image_present=ko.computed((s=this,function(){return s.branding_image_url()&&-1===s.branding_image_url().indexOf("missing")})),this.logo_present=ko.computed((n=this,function(){return n.logo_url()&&-1===n.logo_url().indexOf("default_institution")})),this.school_logo_present=ko.computed((o=this,function(){return o.school_logo_url()&&-1===o.school_logo_url().indexOf("default_institution")})),this.student_count_fancy=ko.computed((r=this,function(){return r.student_count()||"No"}))}return t(i,s),i.type="School",i.underscore="school",i.prototype.unhide=function(e,t){return this.ajax_call({type:"POST",method:"unhide",on_member:!0,action:"unhide",success:function(t){if(t.success&&e)return e(t)},failure:(s=this,function(e){if(s.errors_full_messages()&&Handshake.Helpers.notifyError(s.errors_full_messages()),t)return t(e)})});var s},i}(Handshake.Resource),Handshake.SearchSchoolsView=function(){function t(t){var s;this.props=t,this.requestAccessToSchool=e(this.requestAccessToSchool,this),this.schoolHasNoRequest=e(this.schoolHasNoRequest,this),this.school_is_in_progress=e(this.school_is_in_progress,this),this.school_is_declined=e(this.school_is_declined,this),this.school_is_pending=e(this.school_is_pending,this),this.school_is_approved=e(this.school_is_approved,this),this.is_favorite=e(this.is_favorite,this),this.searchCallback=e(this.searchCallback,this),this.items=ko.observableArray([]),this.approved_school_ids=ko.observableArray([]),this.pending_school_ids=ko.observableArray([]),this.declined_school_ids=ko.observableArray([]),this.in_progress_school_ids=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"schools",this.searchCallback),s=Handshake.passed.current_user_type,Handshake.passed.current_user_feature_flags,"Career Services"===s||"Admins"===s?this.searchable.initialSetup("UniversitySchool"):this.searchable.initialSetup("School")}return t.prototype.searchCallback=function(e){return this.items(Handshake.Resource.resourcesFromArray(e.results,Handshake.Schools.School)),this.approved_school_ids(e.approved_school_ids||[]),this.pending_school_ids(e.pending_school_ids||[]),this.declined_school_ids(e.declined_school_ids||[]),this.in_progress_school_ids(e.in_progress_school_ids||[])},t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.is_favorite=function(e){return!!this.props.favorite_school_ids&&_.contains(this.props.favorite_school_ids,parseInt(e.id()))},t.prototype.school_is_approved=function(e){return _.contains(this.approved_school_ids(),parseInt(e.id()))},t.prototype.school_is_pending=function(e){return _.contains(this.pending_school_ids(),parseInt(e.id()))},t.prototype.school_is_declined=function(e){return _.contains(this.declined_school_ids(),parseInt(e.id()))},t.prototype.school_is_in_progress=function(e){return _.contains(this.in_progress_school_ids(),parseInt(e.id()))},t.prototype.schoolHasNoRequest=function(e){return!(this.school_is_approved(e)||this.school_is_pending(e)||this.school_is_declined(e)||this.school_is_in_progress(e))},t.prototype.requestAccessToSchool=function(e){var t,s;return(t=new Handshake.EmployerApprovals.EmployerApproval).school_id(e.id()),t.employer_id(Handshake.passed.current_user_institution_id),t.create((s=this,function(){return s.pending_school_ids.push(parseInt(e.id())),Handshake.Helpers.notifySuccess("Approval successfully requested at "+e.name()+".")}))},t}(),Handshake.EditSchoolView=function(){function t(t){var s,i,n,o;this.props=t,this.generateNewAdvancedStudentFiltersToken=e(this.generateNewAdvancedStudentFiltersToken,this),this.generateNewEmployerApprovalRequestToken=e(this.generateNewEmployerApprovalRequestToken,this),this.school=ko.observable(Handshake.Resource.resourceFromObject(this.props.school)),this.employer_request_url=ko.computed((i=this,function(){return Handshake.passed.app_url+"/login?school_approval_token="+i.school().employer_approval_request_token()})),this.advanced_student_filters_url=ko.computed((n=this,function(){return"https://"+Handshake.passed.app_url+"/students/enable_advanced_student_filters?token="+n.school().advanced_student_filters_token()})),s={
object_type:"school"},this.props.location&&(s.location=ko.observable(Handshake.Resource.resourceFromObject(this.props.location))),this.addLocationView=new Handshake.Locations.AddLocationView(s),this.period_time=ko.observable(0),+this.school().appointment_cancellation_period()%1440==0?this.period_time(1440):+this.school().appointment_cancellation_period()%60==0?this.period_time(60):this.period_time(1),this.period_value=ko.observable(+this.school().appointment_cancellation_period()/this.period_time()),this.computed_period=ko.computed((o=this,function(){return+o.period_value()*+o.period_time()})),this.continuing_education_select2_options={url:"/continuing_education_schools",results_property:"results",placeholder:"Select All School Mapping",infinite_scroll:!0,initial_value:this.props.continuing_education_school}}return t.prototype.generateNewEmployerApprovalRequestToken=function(){return this.school().ajax_call({type:"POST",on_member:!0,action:"generate_new_employer_approval_request_token",method:"generate_new_employer_approval_request_token",success:(e=this,function(t){return e.school().employer_approval_request_token(t.token)})});var e},t.prototype.generateNewAdvancedStudentFiltersToken=function(){return this.school().ajax_call({type:"POST",on_member:!0,action:"generate_new_advanced_student_filters_token",method:"generate_new_advanced_student_filters_token",success:(e=this,function(t){return e.school().advanced_student_filters_token(t.token)})});var e},t}(),Handshake.Schools.ManageStaffTabbedView=function(e){function s(){var e,t;s.__super__.constructor.call(this),this.currentPage(0),this.pageOptions.push(new Handshake.TabbedPage.Page(0,"Active Staff","Staff with currently active accounts.")),this.onActiveStaffPage=ko.computed((e=this,function(){return 0===e.currentPage()})),this.pageOptions.push(new Handshake.TabbedPage.Page(1,"Archived Staff","Staff whose accounts are no longer active.")),this.onDisabledStaffPage=ko.computed((t=this,function(){return 1===t.currentPage()}))}return t(s,e),s}(Handshake.TabbedPage.View),Handshake.ShowSchoolView=function(){function t(t){this.props=t,this.changeImage=e(this.changeImage,this),this.setActiveCropView=e(this.setActiveCropView,this),this.school=ko.observable(Handshake.Resource.resourceFromObject(this.props.school)),this.props.notes_enabled&&(this.notesModal=new Handshake.Notes.NotesView(this.school(),!0)),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.school,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels))})),this.props.employer_approval_comments_enabled&&(this.employer=ko.observable(Handshake.Resource.resourceFromObject(this.props.employer)),this.employer_approval=ko.observable(Handshake.Resource.resourceFromObject(this.props.employer_approval)),this.employer_approval().isPersisted()&&(this.commentsView=new Handshake.Comments.CommentsView(this.employer_approval,"staff")),this.employerApprovalFormView=new Handshake.EmployerApprovals.EmployerApprovalFormView({employer:this.employer,employer_approval:this.employer_approval,employer_approval_roles:ko.observableArray(this.props.employer_approval_roles),employer_approval_preference:ko.observable(this.props.employer_approval_preference),finish_setup_observable:ko.observable(!0)})),this.brandingImageCropView=new Handshake.UserImages.CropImageView(this.school(),"branding","branding_image",".branding-image"),this.logoCropView=new Handshake.UserImages.CropImageView(this.school(),"logo","logo",".crop-logo"),this.schoolLogoCropView=new Handshake.UserImages.CropImageView(this.school(),"logo","school_logo",".crop-logo"),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.changeImage),this.active_crop_view=null}return t.prototype.setActiveCropView=function(e){return this.active_crop_view=e},t.prototype.changeImage=function(e){return this.active_crop_view.changeImage(e)},t}(),Handshake.AddCoreSchoolsView=function(){function t(t){var s,i;this.props=t,this.update_results=e(this.update_results,this),this.fetch_next_page=e(this.fetch_next_page,this),this.no_results_found_text=e(this.no_results_found_text,this),this.infinite_scroll_callback=e(this.infinite_scroll_callback,this),this.school_added=e(this.school_added,this),this.remove_school=e(this.remove_school,this),this.add_school=e(this.add_school,this),this.add_all_schools=e(this.add_all_schools,this),this.add_missing_schools=e(this.add_missing_schools,this),this.added_school_ids=ko.observableArray(this.props.added_school_ids||[]),this.results=ko.observableArray([]),this.vm={query:ko.observable(),page:ko.observable(1),per_page:ko.observable(200),results:ko.pureComputed((s=this,function(){return _(s.results()).reject(function(e){return s.added_school_ids().indexOf(e.id)>=0})})),add_all_schools:this.add_all_schools,add_school:this.add_school,infinite_scroll_callback:this.infinite_scroll_callback,no_results_found_text:this.no_results_found_text,find_more_schools:this.find_more_schools},this.update_results(),this.typing_or_loading=ko.observable(!1),this.infinite_scrolling=ko.observable(!1),this.more_to_load=ko.observable(!0),this.vm.query.subscribe((i=this,function(){return i.typing_or_loading(!0),i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(function(){return i.vm.page(1),i.update_results(function(){return i.typing_or_loading(!1)})},300)}))}return t.prototype.add_missing_schools=function(){var e,t,s,i,n;for(i=[],e=0,t=(s=this.vm.results()).length;e<t;e++)n=s[e],i.push(this.add_school(n));return i},t.prototype.add_all_schools=function(){var e;if(this.add_missing_schools(),this.more_to_load())return this.fetch_next_page((e=this,function(){if(e.add_missing_schools(),e.more_to_load())return bugsnagClient.notify("User with > 400 core schools")}))},t.prototype.add_school=function(e){if(this.added_school_ids.push(e.id),this.props.school_added)return this.props.school_added(e)},t.prototype.remove_school=function(e){return this.added_school_ids.remove(e)},t.prototype.school_added=function(e){return this.added_school_ids.push(e)},t.prototype.infinite_scroll_callback=function(){var e;if(!this.infinite_scrolling()&&this.more_to_load())return this.infinite_scrolling(!0),this.fetch_next_page((e=this,function(){return e.infinite_scrolling(!1)}))},t.prototype.no_results_found_text=function(){return!this.vm.query()&&this.added_school_ids().length>0&&!this.typing_or_loading()?"All schools added":"No results found"},t.prototype.find_more_schools=function(){return window.open("/user_core_schools/new")},t.prototype.fetch_next_page=function(e){return this.vm.page(this.vm.page()+1),this.update_results(e)},t.prototype.update_results=function(e){return $.ajax("/employers/approved_core_schools",{data:{query:this.vm.query(),page:this.vm.page(),per_page:this.vm.per_page(),permission:this.props.permission||"any",context:this.props.context},success:(t=this,function(s){var i;if(i=1===t.vm.page()?[]:t.results(),t.results(i.concat(s)),t.more_to_load(s.length===t.vm.per_page()),e)return e()})});var t},t}(),Handshake.Schools.AutoRequestConsortiaModal=function(s){function i(){this.show=e(this.show,this),i.__super__.constructor.call(this,{title:ko.observable(""),safe_body_html:ko.observable("")})}return t(i,s),i.prototype.show=function(e){var t,s,i,n,o,r,a;return i=e.consortia_information,r=e.removing,s=e.confirm,t=e.cancel,n=Handshake.Helpers.escapeString(i.consortium_names.join(" and ")),a=Handshake.Helpers.escapeString(i.school_name),o=_(i.consortium_distribution_schools).map(function(e){return"<li>"+Handshake.Helpers.escapeString(e.name)+"</li>"}).join("\n"),this.title("You have selected a school in "+n),this.safe_body_html("You have selected "+a+", which shares companies and jobs with fellow\n"+n+" schools. Because of this, we have "+(r?"removed":"auto-selected")+" the following\nschools for you:\n<ul>\n  "+o+"\n</ul>"),this.show_modal(s,t)},i}(Handshake.Application.ConfirmationModal),Handshake.Schools.AutoRequestSchoolGroupModal=function(s){function i(){this.show=e(this.show,this),this.show_modal=e(this.show_modal,this),this.close_modal=e(this.close_modal,this),this.cancel_button_text=ko.observable("Only add selected school"),i.__super__.constructor.call(this,{confirm_button_text:"Add all these schools",cancel_button_text:this.cancel_button_text,title:ko.observable(""),safe_body_html:ko.observable("")})}return t(i,s),i.prototype.close_modal=function(e){if($(".school-group-confirmation-modal").modal("hide"),_.isFunction(e))return e()},i.prototype.show_modal=function(e,t){return this.confirm_callback=e,this.cancel_callback=t,$(".school-group-confirmation-modal").modal("show")},i.prototype.show=function(e){var t,s,i,n,o,r,a,c;return o=e.selected_school,c=e.suggested_schools,a=e.selected_schools,e.removing,i=e.confirm,s=e.cancel,r=Handshake.Helpers.escapeString(o.name),n=_(c).map(function(e){return"<li>"+Handshake.Helpers.escapeString(e.name)+"</li>"}).join("\n"),t=_(a).map(function(e){return"<li>"+Handshake.Helpers.escapeString(e.name)+"</li>"}).join("\n"),this.cancel_button_text("Only add "+Handshake.Helpers.escapeString(o.name)),this.title("Recommended Schools"),this.safe_body_html(r+" suggests that you also connect with the following schools:\n<ul>\n  "+n+"\n</ul>"),a.length>0&&this.safe_body_html(this.safe_body_html()+"Suggested schools you've already added:\n<ul>\n  "+t+"\n</ul>"),this.show_modal(i,s)},i}(Handshake.Application.ConfirmationModal)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SidebarNav=function(){function t(t){this.props=t,this.get_sidebar_updates=e(this.get_sidebar_updates,this),this.shown_groups=e(this.shown_groups,this),this.build_groups=e(this.build_groups,this),this.highlight_selected_item=e(this.highlight_selected_item,this),this.unmount=e(this.unmount,this),this.current_user=new Handshake.Users.User({id:this.props.current_user_id,hidden_navigation_columns:this.props.hidden_navigation_columns}),this.groups=ko.observable(),this.build_groups(this.props.navigation_items),this.student_applications_updated_count=this.props.student_applications_updated_count,Handshake.passed.poll_for_notification_updates&&"Students"!==Handshake.passed.current_user_type&&$(document).on(window.PAGE_CHANGE_EVENT,this.get_sidebar_updates),$(document).on("page:update",this.highlight_selected_item)}return t.prototype.unmount=function(){return $(document).off(window.PAGE_CHANGE_EVENT,this.get_sidebar_updates),$(document).off("page:update",this.highlight_selected_item)},t.prototype.highlight_selected_item=function(){return $(".fb-nav .item a").each(function(){var e,t;return e=(t=$(this)).parents(".item"),t.attr("href")===window.location.pathname?e.addClass("selected"):e.removeClass("selected")})},t.prototype.build_groups=function(e){return this.groups(_.map(e,(t=this,function(e){return new Handshake.SidebarNavGroup(e,t.current_user)})));var t},t.prototype.shown_groups=function(){return _.filter(this.groups(),function(e){return!1!==e.show})},t.prototype.get_sidebar_updates=function(){return $.ajax({url:"/sidebar_updates.json",type:"GET",dataType:"json",contentType:"application/json",success:(e=this,function(t){return e.build_groups(t.navigation_items)})});var e},t}(),Handshake.SidebarNavGroup=function(){function t(t,s){var i;this.current_user=s,this.toggleCollapsed=e(this.toggleCollapsed,this),this.key=t.key,this.name=t.name,this.path=t.path,this.icon=t.icon,this.show=t.show,this.collapsed=ko.observable(t.collapsed||!1),this.items=ko.observableArray(t.items),this.shown_items=ko.computed((i=this,function(){return _.filter(i.items(),function(e){return e.show})}))}return t.prototype.toggleCollapsed=function(){return this.collapsed(!this.collapsed()),this.collapsed()?this.current_user.hidden_navigation_columns.push(this.key):this.current_user.hidden_navigation_columns.remove(this.key),this.current_user.save()},t}(),Handshake.StudentNavTop=function(){function e(e){this.props=e,this.student_applications_updated_count=ko.observable(this.props.student_applications_updated_count)}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Skills={},Handshake.Skills.Skill=function(s){function i(t){var s;this.bulk_add=e(this.bulk_add,this),this.nested_route=e(this.nested_route,this),this.mouseout=e(this.mouseout,this),this.mouseover=e(this.mouseover,this),i.__super__.constructor.call(this,t),this.moused_over=ko.observable(!1),this.css_class=ko.computed((s=this,function(){var e;return s.isResumeParsing?(e="",s.id()||(e="rp-skills-border "),s.id()&&!s.moused_over()&&(e+="btn-success"),!s.id()&&s.moused_over()&&(e+="btn-success"),s.id()&&s.moused_over()&&(e+="btn-danger"),e):""})),this.attributes({user_id:{send:!0},name:{send:!0}})}return t(i,s),i.type="Skill",i.underscore="skill",i.nested_methods=["new","create","index","bulk_add"],i.prototype.mouseover=function(){return this.moused_over(!0)},i.prototype.mouseout=function(){return this.moused_over(!1)},i.prototype.nested_route=function(){return"/users/"+this.user_id()},i.prototype.bulk_add=function(e,t){return this.ajax_call({type:"POST",action:"bulk_add",method:"bulk_add",on_member:!1,data:{skills_list:e},success:function(e){if(_.isFunction(t))return t(e)}})},i}(Handshake.Resource),Handshake.Skills.SkillsView=function(){function t(t){var s,i;this.props=t,this.addAllSkills=e(this.addAllSkills,this),this.clickItem=e(this.clickItem,this),this.deleteItem=e(this.deleteItem,this),this.createSkill=e(this.createSkill,this),this.createSkillFailure=e(this.createSkillFailure,this),this.createSkillSuccess=e(this.createSkillSuccess,this),this.initFormWidgets=e(this.initFormWidgets,this),this.items=ko.observableArray([]),this.items(Handshake.Resource.resourcesFromArray(this.props.skills,Handshake.Skills.Skill)),this.new_skill_name=ko.observable(""),this.isResumeParsing=this.props.is_resume_parsing,this.skill_name_typeahead_options={path:"/skill_options.json",onChange:this.createSkill},this.allSkillsPersisted=ko.computed((s=this,function(){return 0===_.reject(s.items(),function(e){return e.isPersisted()}).length})),this.showTile=ko.computed((i=this,function(){return"undefined"==typeof i.props.show_empty_tiles||i.props.show_empty_tiles||null!==i.items&&i.items().length>0})),this.disable_add_button=ko.observable(!1)}return t.prototype.initFormWidgets=function(){},t.prototype.createSkillSuccess=function(e){return this.items.push(new Handshake.Skills.Skill(e.skill)),this.disable_add_button(!1),this.new_skill_name("")},t.prototype.createSkillFailure=function(){return this.disable_add_button(!1)},t.prototype.createSkill=function(){var e;return this.disable_add_button(!0),e=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.Skills.Skill({name:this.new_skill_name(),user_id:e}).create(this.createSkillSuccess,this.createSkillFailure)},t.prototype.deleteItem=function(e){return!!this.isResumeParsing||e.destroy((t=this,function(){return t.items.remove(e)}));var t},t.prototype.clickItem=function(e){var t,s,i;return!this.isResumeParsing||(s=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,t=new Handshake.Skills.Skill({name:e.name(),user_id:s}),e.id()?(this.items.replace(e,t),e.destroy((i=this,function(){return i.items.remove(e)}))):(t.create(),this.items.replace(e,t)))},t.prototype.addAllSkills=function(){var e,t,s;return t=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,e=ko.utils.arrayMap(this.items(),function(e){return e.name()}),$.ajax({type:"POST",url:"/users/"+t+"/skills/bulk_add",data:{skills_list:e},success:(s=this,function(e){return s.items(Handshake.Resource.resourcesFromArray(e.skills,Handshake.Skills.Skill))})})},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.StatusMessageTemplates={},Handshake.StatusMessageTemplates.StatusMessageTemplate=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({user_id:{},message_type:{},subject:{send:!0},template:{send:!0}})}return e(s,t),s.type="StatusMessageTemplate",s.underscore="status_message_template",s}(Handshake.Resource),Handshake.EditStatusMessageTemplateView=function(){function e(e){this.props=e,this.handle_keydown=s(this.handle_keydown,this),this.next_tab=s(this.next_tab,this),this.previous_tab=s(this.previous_tab,this),this.focus_tab=s(this.focus_tab,this),this.check_selected_status=s(this.check_selected_status,this),this.current_message_type=s(this.current_message_type,this),this.reset_template=s(this.reset_template,this),this.reset_templates=s(this.reset_templates,this),this.save_template=s(this.save_template,this),this.saveAction=s(this.saveAction,this),this.update_selected_template=s(this.update_selected_template,this),this.switch_to_template=s(this.switch_to_template,this),this.wysihtml5_options=s(this.wysihtml5_options,this),this.pending_template=ko.observable({last_saved:new Handshake.StatusMessageTemplates.StatusMessageTemplate(this.props.status_message_templates.pending),current:new Handshake.StatusMessageTemplates.StatusMessageTemplate(this.props.status_message_templates.pending)}),this.reviewed_template=ko.observable({last_saved:new Handshake.StatusMessageTemplates.StatusMessageTemplate(this.props.status_message_templates.reviewed),current:new Handshake.StatusMessageTemplates.StatusMessageTemplate(this.props.status_message_templates.reviewed)}),this.declined_template=ko.observable({last_saved:new Handshake.StatusMessageTemplates.StatusMessageTemplate(this.props.status_message_templates.declined),current:new Handshake.StatusMessageTemplates.StatusMessageTemplate(this.props.status_message_templates.declined)}),this.selected_template=ko.observable(this.pending_template()),this.subject=ko.observable(this.selected_template().current.subject()),this.message=ko.observable(this.selected_template().current.template()),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView,this.tabs=ko.observable({"pending-tab":"pending","reviewed-tab":"reviewed","declined-tab":"declined"}),this.tab_ids=ko.observableArray(Object.keys(this.tabs()))}return e.prototype.wysihtml5_options=function(){return{wysihtml5_options:{toolbar:{insert_variable_dropdown:{student_first_name:"Student First Name",job_title:"Job Title"}}},on_load:function(){return $('a[data-wysihtml5-command="openInsertVariable"]').on("click",function(e){return $(e.target).closest(".dropdown").toggleClass("open"),!1}),$('a[data-wysihtml5-command="insertVariable"]').on("click",function(e){var t,s;return s=$(e.target).closest(".wysihtml5-toolbar").siblings("textarea").data("wysihtml5"),t=$(e.target).attr("data-wysihtml5-command-value"),s.editor.toolbar.execCommand("insertHTML","{{"+t+"}}")})}}},e.prototype.switch_to_template=function(e){switch(this.update_selected_template(),e){case"pending":this.selected_template(this.pending_template());break;case"reviewed":this.selected_template(this.reviewed_template());break;case"declined":this.selected_template(this.declined_template())}return this.message(this.selected_template().current.template()),this.subject(this.selected_template().current.subject())},e.prototype.update_selected_template=function(){return this.selected_template().current.subject(this.subject()),this.selected_template().current.template(this.message())},e.prototype.saveAction=function(){return this.update_selected_template(),this.save_template(this.pending_template()),this.save_template(this.reviewed_template()),this.save_template(this.declined_template())},e.prototype.save_template=function(e){var t;if(e.current.subject()!==e.last_saved.subject()||e.current.template()!==e.last_saved.template())return e.current.save((t=this,function(){return e.last_saved.subject(t.subject()),e.last_saved.template(t.message()),Handshake.Helpers.notifySuccess("Default messages have been successfully updated.")}),function(e){return Handshake.Helpers.notifyError("Default messages could not be saved: "+e.errors)})},e.prototype.reset_templates=function(){return this.reset_template(this.pending_template()),this.reset_template(this.reviewed_template()),this.reset_template(this.declined_template()),this.subject(this.selected_template().current.subject()),this.message(this.selected_template().current.template())},e.prototype.reset_template=function(e){return e.current.subject(e.last_saved.subject()),e.current.template(e.last_saved.template())},e.prototype.current_message_type=function(){return this.selected_template().current.message_type()},e.prototype.check_selected_status=function(e){return e===this.current_message_type()},e.prototype.focus_tab=function(e){var t;return t=this.tab_ids()[e],$("#"+t).focus()},e.prototype.previous_tab=function(e){var t;if((t=this.tab_ids().indexOf(e))>0)return this.focus_tab(t-1)},e.prototype.next_tab=function(e){var t;if((t=this.tab_ids().indexOf(e))<this.tab_ids().length-1)return this.focus_tab(t+1)},e.prototype.handle_keydown=function(e,t){var s,i,n;if(n=t.target.id,"Enter"===(s=t.key||t.keyCode)||13===s)return i=this.tabs()[n],void this.switch_to_template(i);if("ArrowLeft"!==s&&37!==s){if("ArrowRight"!==s&&39!==s)return!0;this.next_tab(n)}else this.previous_tab(n)},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.StudentInterviewPreferences={},Handshake.StudentInterviewPreferences.StudentInterviewPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({enabled:{send:!0},institution_label_name:{},institution_label_id:{send:!0},must:{send:!0},custom_message:{send:!0},school_id:{}})}return e(s,t),s.type="StudentInterviewPreference",s.underscore="student_interview_preference",s}(Handshake.Resource),Handshake.EditStudentInterviewPreferencesView=function(){function e(e){this.props=e,this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.student_interview_preference=ko.observable(Handshake.Resource.resourceFromObject(this.props.student_interview_preference)),this.preferenceLabelView=new Handshake.Labels.PreferenceLabelView(this.student_interview_preference)}return e.prototype.cancel=function(){return this.student_interview_preference().revert()},e.prototype.submit=function(){return this.student_interview_preference().save(function(){return Handshake.Helpers.notifySuccess("Your preferences have been successfully saved")})},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.StudentPreferences={},Handshake.StudentPreferences.StudentPreference=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({school_id:{},hide_student_profile_pictures_from_employers:{send:!0},lock_work_authorization:{send:!0},lock_school_year:{send:!0},lock_education_level:{send:!0},lock_education_majors:{send:!0},lock_education_minors:{send:!0},lock_education_department_gpa:{send:!0},lock_education_cumulative_gpa:{send:!0},lock_education_college:{send:!0},custom_job_interest_prompt:{send:!0},locked_fields_override_institution_label_name:{send:!0},locked_fields_override_institution_label_id:{send:!0,convert_undefined_to_null:!0}})}return e(s,t),s.type="StudentPreference",s.underscore="student_preference",s}(Handshake.Resource),Handshake.EditStudentPreferencesView=function(){function e(e){this.props=e,this.remove_custom_option=s(this.remove_custom_option,this),this.preview_remove_custom_option=s(this.preview_remove_custom_option,this),this.add_custom_option=s(this.add_custom_option,this),this.submit_custom_option=s(this.submit_custom_option,this),this.submit=s(this.submit,this),this.cancel=s(this.cancel,this),this.institutionLabelCallback=s(this.institutionLabelCallback,this),this.labelSelect2Options=s(this.labelSelect2Options,this),this.confirmation_modal_body=ko.observable(""),this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Remove Question Option",body:this.confirmation_modal_body}),this.student_preference=new Handshake.StudentPreferences.StudentPreference(this.props.student_preference),this.custom_job_interest_options=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.custom_job_interest_options)),this.edit_label_view=new Handshake.InstitutionLabels.EditLabelView("User",this.institutionLabelCallback),this.new_custom_option_text=ko.observable("")}return e.prototype.labelSelect2Options=function(){return{placeholder:"Add a label...",url:"/institution_labels",allowClear:!0,full_data:(t=this,function(e){return e?(t.student_preference.locked_fields_override_institution_label_name(e.name),t.student_preference.locked_fields_override_institution_label_id(e.id)):{name:t.student_preference.locked_fields_override_institution_label_name(),id:t.student_preference.locked_fields_override_institution_label_id()}}),dataFunction:(e=this,function(t){return{labellable_types:["User"],school_id:e.student_preference.school_id(),query:t,simple_search:!0}})};var e,t},e.prototype.institutionLabelCallback=function(e){return this.student_preference.locked_fields_override_institution_label_name(e.name()),this.student_preference.locked_fields_override_institution_label_id(e.id())},e.prototype.cancel=function(){return this.student_preference.revert()},e.prototype.submit=function(){return this.student_preference.save(function(){return Handshake.Helpers.notifySuccess("Student preferences saved successfully.")})},e.prototype.submit_custom_option=function(e){return 13!==e.keyCode||(this.add_custom_option(),!1)},e.prototype.add_custom_option=function(){var e,t;return(e=new Handshake.CustomJobInterestOptions.CustomJobInterestOption({name:this.new_custom_option_text(),school_id:this.student_preference.school_id()})).create((t=this,function(){return t.custom_job_interest_options.push(e),Handshake.Helpers.notifySuccess("Option added"),$("#new-custom-option").val("")}))},e.prototype.preview_remove_custom_option=function(e){return e.preview_destroy((t=this,function(s){return s.students?(t.confirmation_modal_body(s.text),t.confirmation_modal.show_modal(function(){return t.remove_custom_option(e)})):t.remove_custom_option(e)}));var t},e.prototype.remove_custom_option=function(e){return e.destroy((t=this,function(){return t.custom_job_interest_options.remove(e),Handshake.Helpers.notifySuccess("Option removed")}));var t},e}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.StudentScreens={},Handshake.StudentScreens.StudentScreen=function(t){function s(e){var t,i,n,o,r,a,c;s.__super__.constructor.call(this,e),this.attributes({school_year_ids:{array:!0,send:!0,convert_empty_to_blank:!0,convert_integer_to_string:!0},cumulative_gpa_required:{send:!0},cumulative_gpa:{send:!0},major_ids:{array:!0,send:!0,convert_empty_to_blank:!0},major_group_ids:{array:!0,send:!0,convert_empty_to_blank:!0},major_groups:{array:!0},majors:{array:!0,belongs_to:Handshake.Majors.Major},colleges:{array:!0},college_ids:{array:!0,send:!0,convert_empty_to_blank:!0},institution_labels:{array:!0},institution_label_ids:{array:!0,send:!0,convert_empty_to_blank:!0},located_in_us:{send:!0},accepts_opt_cpt_candidates:{send:!0},willing_to_sponsor_candidate:{send:!0},work_authorization_requirements:{},custom_job_interest_options:{array:!0},custom_job_interest_option_ids:{array:!0,send:!0,convert_empty_to_blank:!0},allow_interest_requirements:{},school_year_or_graduation_date_required:{send:!0},graduation_date_minimum:{send:!0},graduation_date_maximum:{send:!0}}),this.work_authorization_applicable=ko.computed(function(){var e;return(e=window.location.pathname.split("/")).length>1&&_.contains(["jobs","interview_schedules"],e[1])}),this.month_options=[{id:null,name:"month"}].concat(_(moment.months()).map(function(e,t){return{value:t,name:e}})),t=(new Date).getFullYear(),this.year_options=[{id:null,name:"year"}].concat(_(_.range(t-4,t+6)).map(function(e){return{value:e,name:e}})),this.earliest_month=ko.observable(),this.earliest_year=ko.observable(),this.latest_month=ko.observable(),this.latest_year=ko.observable(),this.graduation_date_minimum.subscribe((i=this,function(e){var t;return t=e&&moment(e),i.earliest_year(null!=t?t.year():void 0),i.earliest_month(null!=t?t.month():void 0)})),this.graduation_date_maximum.subscribe((n=this,function(e){var t;return t=e&&moment(e),n.latest_year(null!=t?t.year():void 0),n.latest_month(null!=t?t.month():void 0)})),ko.computed((o=this,function(){return o.earliest_year()&&null!=o.earliest_month()?new Date(o.earliest_year(),o.earliest_month(),1):null})).subscribe((r=this,function(e){return r.graduation_date_minimum(e)})),ko.computed((a=this,function(){return a.latest_year()&&null!=a.latest_month()?moment(new Date(a.latest_year(),a.latest_month())).endOf("month").startOf("day"):null})).subscribe((c=this,function(e){return c.graduation_date_maximum(e)}))}return e(s,t),s.type="StudentScreen",s.underscore="student_screen",s}(Handshake.Resource),Handshake.StudentScreenView=function(){function e(e,t){var i,n,o;this.props=e,this.update_drilldown=s(this.update_drilldown,this),_.isFunction(this.props.student_screen)?this.student_screen=this.props.student_screen:this.student_screen=ko.observable(Handshake.Resource.resourceFromObject(this.props.student_screen)),this.relevant_schools=ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.relevant_schools)),this.total_count=ko.computed((i=this,function(){return _.reduce(i.relevant_schools(),function(e,t){return e+t.student_count()},0)})),this.selectMajorGroupsView=new Handshake.MajorGroups.SelectMajorGroupsView({resource_type:"student_screen",parent_major_groups:ko.observableArray(this.props.parent_major_groups),school_major_group_ids:ko.observableArray(this.props.school_major_group_ids),selected_major_groups:ko.observableArray(this.props.selected_major_groups),selected_majors:ko.observableArray(this.props.selected_majors),current_school_major_ids:this.props.current_school_major_ids}),this.selectMajorGroupsView.selected_major_ids.subscribe((n=this,function(){return n.student_screen().major_ids(n.selectMajorGroupsView.selected_major_ids()),n.student_screen().major_group_ids(n.selectMajorGroupsView.selected_major_group_ids()),n.update_drilldown()})),this.selectMajorGroupsView.selected_major_group_ids.subscribe((o=this,function(){return o.student_screen().major_group_ids(o.selectMajorGroupsView.selected_major_group_ids()),o.update_drilldown()})),this.update_drilldown(),$("input",t).bind("keypress keydown keyup",function(e){if(13===e.keyCode)return e.preventDefault()})}return e.prototype.update_drilldown=function(){var e;if(this.relevant_schools().length>0)return setTimeout((e=this,function(){return e.student_screen().ajax_call({type:"POST",method:"drilldown",on_member:!1,action:"drilldown",data:{student_screen:e.student_screen().getJSON(),relevant_schools:_.map(e.relevant_schools(),function(e){return e.id()})},success:function(t){return e.relevant_schools(Handshake.Resource.resourcesFromArray(t.schools,Handshake.Schools.School))}})}),1)},e}(),Handshake.StudentScreens.ComponentForm=function(){function e(e){var t,i,n;this.update_drilldown=s(this.update_drilldown,this),this.student_screen=e.student_screen,this.relevant_schools=e.relevant_schools,this.institution_path=e.institution_path,this.colleges=e.colleges,this.labels=e.labels,this.parent_major_groups=e.parent_major_groups,this.selected_major_groups=e.selected_major_groups,this.selected_majors=e.selected_majors,this.total_count=ko.computed((t=this,function(){return _.reduce(t.relevant_schools(),function(e,t){return e+t.student_count()},0)})),e={resource_type:"student_screen",parent_major_groups:this.parent_major_groups,selected_majors:this.selected_majors,selected_major_groups:this.selected_major_groups},this.selectMajorGroupsView=new Handshake.MajorGroups.SelectMajorGroupsView(e),
this.selectMajorGroupsView.selected_major_ids.subscribe((i=this,function(){return i.student_screen().major_ids(i.selectMajorGroupsView.selected_major_ids()),i.student_screen().major_group_ids(i.selectMajorGroupsView.selected_major_group_ids()),i.update_drilldown()})),this.selectMajorGroupsView.selected_major_group_ids.subscribe((n=this,function(){return n.student_screen().major_group_ids(n.selectMajorGroupsView.selected_major_group_ids()),n.update_drilldown()})),this.colleges_select2_options={on_change:this.update_drilldown,placeholder:"Choose a college...",url:this.institution_path()+"/colleges",initial_value:this.student_screen().colleges,value:this.student_screen().college_ids,allow_blank:!0},this.labels_select2_options={url:this.institution_path()+"/institution_labels",on_change:this.update_drilldown,initial_value:this.student_screen().institution_labels,value:this.student_screen().institution_label_ids,placeholder:"Students with these labels...",allow_blank:!0,dataFunction:function(e){return{query:e,simple_search:!0,labellable_types:["User"]}}},this.interests_select2_options={url:"/custom_job_interest_options",on_change:this.update_drilldown,initial_value:this.student_screen().custom_job_interest_options,value:this.student_screen().custom_job_interest_option_ids,placeholder:"Students interested in these areas...",allow_blank:!0},this.update_drilldown()}return e.prototype.update_drilldown=function(){var e;if(this.relevant_schools().length>0)return setTimeout((e=this,function(){return e.student_screen().ajax_call({type:"POST",method:"drilldown",on_member:!1,action:"drilldown",data:{student_screen:e.student_screen().getJSON(),relevant_schools:_.map(e.relevant_schools(),function(e){return e.id()})},success:function(t){return e.relevant_schools(Handshake.Resource.resourcesFromArray(t.schools,Handshake.Schools.School))}})}),1)},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.ReviewDocumentsView=function(){function t(t){var s,i,n,o,r,a,c,l;this.props=t,this.skipUser=e(this.skipUser,this),this.approveAllAndFuture=e(this.approveAllAndFuture,this),this.setReviewableStatus=e(this.setReviewableStatus,this),this.declineReviewable=e(this.declineReviewable,this),this.suggestChangesReviewable=e(this.suggestChangesReviewable,this),this.approveReviewable=e(this.approveReviewable,this),this.resetReviewable=e(this.resetReviewable,this),this.select_reviewable=e(this.select_reviewable,this),this.select_next_reviewable=e(this.select_next_reviewable,this),this.load_next_user=e(this.load_next_user,this),this.templateName=e(this.templateName,this),this.specific_user_id=ko.observable(getUrlVar("user_id",window.location.search)),this.current_page=0,this.total_count=ko.observable(0),this.automatically_skip_to_next_user=ko.observable(!1),this.selected_user=ko.observable(null),this.selected_reviewable=ko.observable(null),this.reviewables=ko.observableArray([]),this.filter=ko.observable(""),this.currentUserApproved=ko.observable(!1),this.selected_document=ko.computed((s=this,function(){if(s.selected_reviewable())return s.selected_reviewable()})),this.commentsView=new Handshake.Comments.CommentsView(this.selected_document),this.filtered_reviewables=ko.computed((i=this,function(){return i.filter()?ko.utils.arrayFilter(i.reviewables(),function(e){return e.name().toLowerCase().indexOf(i.filter().toLowerCase())>-1}):i.reviewables()})),this.load_next_user(),this.educationsView=new Handshake.Educations.EducationsView(this.props),this.workExperiencesView=new Handshake.WorkExperiences.WorkExperiencesView(this.props),this.extraCurricularsView=new Handshake.ExtraCurriculars.ExtraCurricularsView(this.props),this.projectsView=new Handshake.Projects.ProjectsView(this.props),this.externalLinksView=new Handshake.ExternalLinks.ExternalLinksView(this.props),this.organizationMembershipsView=new Handshake.OrganizationMemberships.OrganizationMembershipsView(this.props),this.skillsView=new Handshake.Skills.SkillsView(this.props),this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1}),this.selectedReviewableStatus=ko.computed((n=this,function(){if(n.selected_reviewable())return n.selected_reviewable().status()})),this.selectedReviewableDisplayStatus=ko.computed((o=this,function(){if(o.selected_reviewable())return o.selected_reviewable().displayStatus()})),this.selectedReviewableStatusBootstrapClass=ko.computed((r=this,function(){if(r.selected_reviewable())return r.selected_reviewable().statusBootstrapClass()})),this.selected_reviewable.subscribe((a=this,function(){if(a.selected_reviewable())return setTimeout(function(){var e;return $("#pdf_container").empty(),e=a.selected_reviewable().entity_path+"/download_pdf",$("#pdf_container").append("<object type='application/pdf' data='"+e+"' style='width: 100%; height: 800px;'></object>")},1)})),this.approveReviewableText=ko.computed((c=this,function(){return c.selected_reviewable()?"feedback_only"===c.selected_document().document_feedback_preference().status?"Complete Review":"Approve Document":"Approve"})),this.approveAllReviewableText=ko.computed((l=this,function(){return l.selected_reviewable()&&"feedback_only"===l.selected_document().document_feedback_preference().status?"Complete Review For All And Future":"Approve All And Future"}))}return t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.load_next_user=function(){var e,t;return Handshake.operations.add_worker(),this.current_page>=this.total_count()&&(this.current_page=0),e=(e=(e="&"+(e=window.location.search).substring(1)).replace(/&user_id=[^&]*/,"")).replace(/&page=[^&]*/,""),$.getJSON("/students/reviews.json?user_id="+this.specific_user_id()+"&page="+this.current_page+e,(t=this,function(e){var s;return t.specific_user_id(null),Handshake.operations.remove_worker(),e.success?(t.currentUserApproved(!1),t.total_count(e.total_count),t.selected_user(Handshake.Resource.resourceFromObject(e.user)),t.educationsView.items(Handshake.Resource.resourcesFromArray(e.educations)),t.workExperiencesView.items(Handshake.Resource.resourcesFromArray(e.work_experiences)),t.extraCurricularsView.items(Handshake.Resource.resourcesFromArray(e.extra_curriculars)),t.projectsView.items(Handshake.Resource.resourcesFromArray(e.projects)),t.externalLinksView.items(Handshake.Resource.resourcesFromArray(e.external_links)),t.organizationMembershipsView.items(Handshake.Resource.resourcesFromArray(e.organization_memberships)),t.skillsView.items(Handshake.Resource.resourcesFromArray(e.skills)),t.messagesView.new_conversation_to_user_id(e.user.id),s=_(e.documents).sortBy(function(e){return moment(e.created_at)}),t.selected_user().documents(Handshake.Resource.resourcesFromArray(s)),t.select_next_reviewable()):Handshake.Helpers.notifyError(e.error)}))},t.prototype.select_next_reviewable=function(){var e;return e=[],this.props.require_resume_review&&(e=_.filter(this.selected_user().documents(),function(e){return"pending"===e.status()})),e.length>0?this.select_reviewable(_.min(e,function(e){return moment(e.created_at())})):this.automatically_skip_to_next_user()?this.load_next_user():this.currentUserApproved(!0)},t.prototype.select_reviewable=function(e){return this.selected_reviewable(e)},t.prototype.resetReviewable=function(){return this.setReviewableStatus("pending")},t.prototype.approveReviewable=function(){return this.setReviewableStatus("approved")},t.prototype.suggestChangesReviewable=function(){return this.setReviewableStatus("changes_suggested")},t.prototype.declineReviewable=function(){return this.setReviewableStatus("declined")},t.prototype.setReviewableStatus=function(e){return this.selected_reviewable().update({status:e}),this.selected_reviewable().save(this.select_next_reviewable)},t.prototype.approveAllAndFuture=function(){return this.selected_user().ajax_call({type:"POST",method:"automatically_approve_all_and_future",on_member:!0,action:"automatically_approve_all_and_future",success:(t=this,function(e){var s;if(e.success)return s=_.filter(t.selected_user().documents(),function(e){return"pending"===e.status()}),_.each(s,function(e){return e.status("approved")}),t.select_next_reviewable()}),failure:(e=this,function(){if(e.errors_full_messages())return Handshake.Helpers.notifyError(e.errors_full_messages())})});var e,t},t.prototype.skipUser=function(){return this.currentUserApproved()||this.current_page++,this.selected_user().save(this.load_next_user)},t}(),Handshake.LabelPermissionDeniedModal=function(){function e(e){this.props=e,this.props.show_modal&&$("#label-permission-denied-modal").modal("show")}return e}(),Handshake.Modals=function(){function t(t){var s;this.props=t,this.unmount=e(this.unmount,this),this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1,to_user_id:this.props.user.id}),this.notesModal=new Handshake.Notes.NotesView(this.props.user),this.modal_element=$("#notes-modal"),this.modal_element.on("shown.bs.modal",(s=this,function(e){if(e.target===s.modal_element[0])return s.notesModal.initialized(!0),s.notesModal.resetNewNote(),s.notesModal.loadNotes()}))}return t.prototype.unmount=function(){return this.modal_element.off("shown.bs.modal")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.SurveyPages={},Handshake.SurveyPages.SurveyPage=function(s){function i(t){this.toggleSpecifyAudience=e(this.toggleSpecifyAudience,this),this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({survey_id:{send:!0},name:{send:!0},description:{send:!0},order:{send:!0},skip_to_page_id:{send:!0},specify_audience:{send:!0},student_screen:{send:!0,nested_attribute:!0,belongs_to:Handshake.StudentScreens.StudentScreen},skip_to_page_name:{},created_at:{}}),this.specifyAudienceChecked=ko.observable(this.specify_audience()),this.major_group_select2_options={url:"/major_groups",placeholder:"Majors",initial_value:this.student_screen().major_groups(),value:this.student_screen().major_group_ids,multiple:"multiple"},this.school_select2_options={url:"/schools/"+Handshake.passed.current_user_institution_id+"/colleges",placeholder:"Schools",multiple:"multiple",initial_value:this.student_screen().colleges,value:this.student_screen().college_ids}}return t(i,s),i.type="SurveyPage",i.underscore="survey_page",i.prototype.nested_route=function(){return"/surveys/"+this.survey_id()},i.prototype.toggleSpecifyAudience=function(){return this.specify_audience(!this.specify_audience()),this.specifyAudienceChecked(this.specify_audience()),!0},i}(Handshake.Resource),Handshake.SurveyPages.SurveyPagesView=function(s){function i(t){var s,n;this.survey=t,this.reSort=e(this.reSort,this),this.postRemove=e(this.postRemove,this),this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),this.initFormWidgets=e(this.initFormWidgets,this),this.nextPageByOrder=e(this.nextPageByOrder,this),s={newAtBottom:!0,confirmOnDelete:"Are you sure you want to remove this page? All of its questions will also be deleted."},i.__super__.constructor.call(this,this.survey.initial_prop.survey_pages,s),this.persisted_items=ko.computed((n=this,function(){return _.filter(n.items(),function(e){return e.isPersisted()})}))}return t(i,s),i.prototype.nextPageByOrder=function(e){var t;return(t=_.find(this.items(),function(t){return parseInt(t.order())===parseInt(e.order()+1)}))?t.name():"end of survey"},i.prototype.initFormWidgets=function(){return console.log("Created Survey Page")},i.prototype.buildNewItem=function(e){return e.survey_id=this.survey.id(),new Handshake.SurveyPages.SurveyPage(e)},i.prototype.validateFields=function(){return!0},i.prototype.postRemove=function(e){return this.items(Handshake.Resource.resourcesFromArray(e.survey_pages))},i.prototype.reSort=function(e){var t,s,i;return s=[],t=e.item,ko.utils.arrayForEach(e.targetParent(),function(e,t){return s.push(e.id()),e.update({order:t})}),t.ajax_call({type:"POST",method:"sort",on_member:!0,action:"update_sort_order",data:{ordered_ids:s},failure:(i=this,function(e){return i.items(Handshake.Resource.resourcesFromArray(e.survey_pages))})})},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.SurveyResponses={},Handshake.SurveyResponses.SurveyResponse=function(s){function i(t){var s;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},user_name:{},survey_id:{send:!0},survey_name:{},created_at:{},question_responses:{belongs_to:Handshake.QuestionResponses.QuestionResponse,array:!0,send:!0,nested_attribute:!0},survey_page_history:{array:!0,send:!0}}),this.nice_title=ko.computed((s=this,function(){if(s.user_name()&&s.created_at())return s.user_name()+", on "+Handshake.Helpers.straightDateTime(s.created_at())}))}return t(i,s),i.type="SurveyResponse",i.underscore="survey_response",i.nested_methods=["new","create","index","next_page","csv_download"],i.prototype.nested_route=function(){return"/surveys/"+this.survey_id()},i}(Handshake.Resource),Handshake.SurveyResponses.SurveyResponsesView=function(){function e(){this.survey_responses=ko.observableArray([])}return e}(),Handshake.TakeSurveyView=function(){function t(t){var s,i,n,o,r,a,c,l,u,h;this.props=t,this.build_survey_response=e(this.build_survey_response,this),this.fetch_survey_response=e(this.fetch_survey_response,this),this.survey_save_success=e(this.survey_save_success,this),this.finishResponse=e(this.finishResponse,this),this.completed=e(this.completed,this),this.add_page_id_to_history=e(this.add_page_id_to_history,this),this.reset_all_pages_after_current_page=e(this.reset_all_pages_after_current_page,this),this.remove_pages_in_history_after_current_page=e(this.remove_pages_in_history_after_current_page,this),this.skip_logic_has_changed_flow=e(this.skip_logic_has_changed_flow,this),this.moving_to_next_page_in_question_history=e(this.moving_to_next_page_in_question_history,this),this.update_survey_page_history=e(this.update_survey_page_history,this),this.goToNextPage=e(this.goToNextPage,this),this.checkAllRequiredQuestionsAnswered=e(this.checkAllRequiredQuestionsAnswered,this),this.nextPage=e(this.nextPage,this),this.previousPage=e(this.previousPage,this),this.redirectOnSubmit=this.props.redirectOnSubmit||null,this.redirectToIndex=this.props.redirectToIndex||null,this.callback=this.props.callback||null,this.previous_page_callback=this.props.previous_page_callback||null,this.use_finish_button=this.props.use_finish_button||!1,this.submit_from_any_page=this.props.submit_from_any_page||!1,this.showSurveyQuestions=ko.observable(!0),this.survey=ko.observable(),this.current_page=ko.observable(),this.current_page_index_in_history=ko.observable(),this.survey_response=ko.observable(),this.props.survey_response_id?this.fetch_survey_response(this.props.survey_response_id):this.props.survey_id&&(s=null!=this.props.user_id?this.props.user_id:Handshake.passed.current_user_id,this.build_survey_response(this.props.survey_id,s)),this.initial_starting_page=ko.observable(this.props.starting_page),this.starting_page=ko.computed((i=this,function(){return i.initial_starting_page()?i.initial_starting_page():i.survey()?i.survey().survey_pages()[0]:void 0})),this.onFirstPage=ko.computed((n=this,function(){return!n.current_page()||!n.starting_page()||n.current_page().id()===n.starting_page().id()})),this.onLastPage=ko.computed((o=this,function(){var e,t;return!o.current_page()||!o.survey()||(e=(t=o.survey().survey_pages())[t.length-1],o.current_page().id()===e.id())})),this.show_finish_button=ko.computed((r=this,function(){return r.survey()&&r.onLastPage()&&r.use_finish_button})),this.show_previous_button=ko.computed((a=this,function(){return!a.onFirstPage()||_.isFunction(a.previous_page_callback)})),this.current_question_responses=ko.computed((c=this,function(){var e;return e=[],c.survey_response()&&c.current_page()&&(e=ko.utils.arrayFilter(c.survey_response().question_responses(),function(e){return e.question().survey_page_id()===c.current_page().id()})),_.sortBy(e,function(e){return e.question().sort_order()})})),this.next_page_id_in_history=ko.computed((l=this,function(){var e;if(null!=(e=l.survey_response())?e.survey_page_history().length:void 0)return l.survey_response().survey_page_history()[l.current_page_index_in_history()+1]})),this.previous_page_id_in_history=ko.computed((u=this,function(){var e;if(null!=(e=u.survey_response())?e.survey_page_history().length:void 0)return u.survey_response().survey_page_history()[u.current_page_index_in_history()-1]})),this.survey_response_json=ko.computed((h=this,function(){return h.survey_response()?$.extend(h.survey_response().getJSON(!1),{id:h.survey_response().id()}):{}})),$(".survey-description").popover()}return t.prototype.previousPage=function(){var e;if(!this.onFirstPage())return e=this.survey().getPageById(this.previous_page_id_in_history()),this.current_page(e),this.current_page_index_in_history(this.current_page_index_in_history()-1);this.previous_page_callback()},t.prototype.nextPage=function(){if(!this.onLastPage()&&this.checkAllRequiredQuestionsAnswered())return this.goToNextPage()},t.prototype.checkAllRequiredQuestionsAnswered=function(){var e,t,s;return s=[],e=!1,_.each(this.current_question_responses(),function(t){if(t.isValid()||s.push(t.question().question()),!_.every(t.question_option_responses(),function(e){return e.is_valid()}))return e=!0}),t=[],s.length>0&&"Career Services"!==Handshake.passed.current_user_type&&t.push('Please answer the following questions: "'+s.join('", "')+'"'),e&&t.push('"Other" response can\'t be blank'),this.survey_response().errors(t),this.scrollToTop(),0===t.length},t.prototype.goToNextPage=function(){return this.current_page()?this.survey_response().ajax_call({type:"POST",method:"next_page",on_member:!1,action:"next_page",data:{survey_response:$.extend(this.survey_response().getJSON(),{id:this.survey_response().id()}),current_page_id:this.current_page().id()},success:(e=this,function(t){var s;return s=e.survey().getPageById(t.survey_page_id),e.update_survey_page_history(s.id()),e.current_page(s)})}):(bugsnagClient.notify("Could not get next page for null current page"),void Handshake.Helpers.notifyError("Sorry, we're having some trouble getting the next page for your survey."));var e},t.prototype.update_survey_page_history=function(e){return this.moving_to_next_page_in_question_history(e)?this.current_page_index_in_history(this.current_page_index_in_history()+1):(this.skip_logic_has_changed_flow()&&(this.reset_all_pages_after_current_page(),this.remove_pages_in_history_after_current_page()),this.add_page_id_to_history(e))},t.prototype.moving_to_next_page_in_question_history=function(e){return this.next_page_id_in_history()===e},t.prototype.skip_logic_has_changed_flow=function(){return this.current_page_index_in_history()!==this.survey_response().survey_page_history().length-1},t.prototype.remove_pages_in_history_after_current_page=function(){var e;return e=_(this.survey_response().survey_page_history()).first(this.current_page_index_in_history()+1),this.survey_response().survey_page_history(e)},t.prototype.reset_all_pages_after_current_page=function(){var e,t;return e=_(this.survey_response().survey_page_history()).rest(this.current_page_index_in_history()+1),_(e).each((t=this,function(e){var s;return t.survey().getPageById(e),s=_(t.survey_response().question_responses()).filter(function(t){return t.question().survey_page_id()===e}),_(s).invoke("reset")}))},t.prototype.add_page_id_to_history=function(e){return this.survey_response().survey_page_history.push(e),this.current_page_index_in_history(this.survey_response().survey_page_history().length-1)},t.prototype.completed=function(){return!!this.checkAllRequiredQuestionsAnswered()&&(!(!this.onLastPage()&&!this.submit_from_any_page)||(Handshake.Helpers.notifyError("Please complete each page of the survey to continue."),!1))},t.prototype.finishResponse=function(){var e,t,s;if(this.completed())return t=this.props.appointment_type,e=this.props.appointment_id,s=t&&e?{appointment_type:t,appointment_id:e}:getUrlParams(),this.survey_response().isNew()?this.survey_response().create(this.survey_save_success,null,s):this.survey_response().save(this.survey_save_success)},t.prototype.survey_save_success=function(e){var t;if(this.showSurveyQuestions(!1),e.success)return this.redirectOnSubmit?(Handshake.Helpers.notifySuccess("Your response was successfully submitted."),setTimeout((t=this,function(){return t.redirectToIndex?window.location.href="/surveys":window.location.reload()}),1500)):_.isFunction(this.callback)?this.callback(e):void 0},t.prototype.scrollToTop=function(){return(this.props.selector?$(this.props.selector):$(".take-survey-view")).animate({scrollTop:0},"200","swing")},t.prototype.fetch_survey_response=function(e){return this.survey_response(new Handshake.SurveyResponses.SurveyResponse({id:e})),this.survey_response().fetch((t=this,function(e){if(t.survey(new Handshake.Surveys.Survey(e.survey)),t.current_page(t.starting_page()),t.current_page())return t.survey_response().survey_page_history.push(t.current_page().id()),t.current_page_index_in_history(0)}));var t},t.prototype.build_survey_response=function(e,t){return e?(this.survey_response(new Handshake.SurveyResponses.SurveyResponse({survey_id:e,user_id:t})),this.survey_response()["new"]((s=this,function(e){if(s.survey(new Handshake.Surveys.Survey(e.survey)),s.current_page(s.starting_page()),s.current_page())return s.survey_response().survey_page_history.push(s.current_page().id()),s.current_page_index_in_history(0)}),null,{survey_token:this.props.token})):(this.survey(null),this.survey_response(null),this.current_page(null));var s},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.Surveys={},Handshake.Surveys.Survey=function(s){function i(t){var s;this.duplicate=e(this.duplicate,this),this.sendInvites=e(this.sendInvites,this),this.finish=e(this.finish,this),this.getPageById=e(this.getPageById,this),this.getPageByOrder=e(this.getPageByOrder,this),i.__super__.constructor.call(this,t),this.attributes({title:{send:!0},name:{},description:{send:!0},start_date:{send:!0},end_date:{send:!0},required:{send:!0},created_by_id:{},created_by_name:{},created_by_first_name:{},created_by_last_name:{},institution_id:{},institution_name:{},institution_logo:{},institution_path:{},question_count:{"default":0},response_count:{"default":0},ask_approved_employers_to_take_survey:{send:!0},recipient_count:{},entity_path:{},finished:{},questions:{array:!0,belongs_to:Handshake.Questions.Question},survey_pages:{array:!0,belongs_to:Handshake.SurveyPages.SurveyPage},completion_institution_label_name:{},completion_institution_label_id:{send:!0,convert_undefined_to_null:!0},responses_exist:{},status:{send:!0},display_status:{}}),this.conditional_title=ko.computed((s=this,function(){return""!==s.title()&&s.title()?s.title():"(untitled)"}))}return t(i,s),i.type="Survey",i.underscore="survey",i.prototype.getPageByOrder=function(e){return _.filter(this.survey_pages(),function(t){return t.order()===e})[0]},i.prototype.getPageById=function(e){return _.filter(this.survey_pages(),function(t){return t.id()===e})[0]},i.prototype.finish=function(e){return this.ajax_call({type:"POST",method:"finish",on_member:!0,action:"finish",success:function(t){if(e)return e(t)}})},i.prototype.sendInvites=function(e,t){return this.ajax_call({type:"POST",method:"send_invite",on_member:!0,action:"send_invite",data:e,success:function(e){if(t)return t(e)}})},i.prototype.duplicate=function(e){return this.ajax_call({type:"POST",method:"duplicate",on_member:!0,action:"duplicate",success:function(t){return e(t)}})},i}(Handshake.Resource),Handshake.EditSurveyView=function(s){function i(t){var s,n,o,r,a;this.props=t,this.emptyPagesCount=e(this.emptyPagesCount,this),this.onBeforeMove=e(this.onBeforeMove,this),this.hasSkipLogic=e(this.hasSkipLogic,this),this.questionHasSkipLogicForPage=e(this.questionHasSkipLogicForPage,this),this.questionCountForPage=e(this.questionCountForPage,this),this.selectCurrentSurveyPage=e(this.selectCurrentSurveyPage,this),this.finishSurveySuccess=e(this.finishSurveySuccess,this),this.finalizeAction=e(this.finalizeAction,this),this.selectReviewPage=e(this.selectReviewPage,this),this.selectQuestionsPage=e(this.selectQuestionsPage,this),this.selectPagesPage=e(this.selectPagesPage,this),this.selectSetupPage=e(this.selectSetupPage,this),this.postSelectPage=e(this.postSelectPage,this),this.saveChangesSuccess=e(this.saveChangesSuccess,this),this.saveChanges=e(this.saveChanges,this),this.unmount=e(this.unmount,this),this.completion_label_select2_options=e(this.completion_label_select2_options,this),this.survey=ko.observable(),this.survey(new Handshake.Surveys.Survey(this.props.survey)),s={},i.__super__.constructor.call(this,this.survey,null,null,s),this.currentSurveyPage=ko.observable(),this.finalizeText(this.survey().finished()?null:"Create"),this.surveyPagesView=new Handshake.SurveyPages.SurveyPagesView(this.survey()),this.questionsView=new Handshake.Questions.QuestionsView(this.survey(),this),this.onSetupPage=ko.computed((n=this,function(){return 0===n.currentPage()})),this.onPagesPage=ko.computed((o=this,function(){return 1===o.currentPage()})),this.onQuestionsPage=ko.computed((r=this,function(){return 2===r.currentPage()})),this.onReviewPage=ko.computed((a=this,function(){return 3===a.currentPage()})),this.pageOptions.push(new Handshake.PagedForm.Page({index:0,name:"Setup",description:"Fill out the title, description and other details."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:1,name:"Pages",description:"Add pages to the survey which hold questions."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:2,name:"Questions",description:"Write the questions for the survey."})),this.pageOptions.push(new Handshake.PagedForm.Page({index:3,name:"Review",description:"Make sure that everything is in place and create the survey."})),this.reselectPage(),this.surveyPagesView.items().length>0&&this.currentSurveyPage(this.surveyPagesView.items()[0].id()),$("#new_survey").length>0&&(this.form=$("#new_survey"))}return t(i,s),i.prototype.completion_label_select2_options=function(){return{placeholder:"Add a label...",url:"/institution_labels",allowClear:!0,full_data:(e=this,function(t){return t?(e.survey().completion_institution_label_name(t.name),e.survey().completion_institution_label_id(t.id)):{name:e.survey().completion_institution_label_name(),id:e.survey().completion_institution_label_id()}})};var e},i.prototype.unmount=function(){return this.unmount_paged_form()},i.prototype.saveChanges=function(){return this.survey().save(this.saveChangesSuccess),!1},i.prototype.saveChangesSuccess=function(e){if(this.survey().finished())return this.finishSurveySuccess(e)},i.prototype.postSelectPage=function(){},i.prototype.selectSetupPage=function(){return this.selectPage(this.pageOptions()[0])},i.prototype.selectPagesPage=function(){return this.selectPage(this.pageOptions()[1])},i.prototype.selectQuestionsPage=function(){return this.selectPage(this.pageOptions()[2])},i.prototype.selectReviewPage=function(){return this.selectPage(this.pageOptions()[3])},i.prototype.finalizeAction=function(){return this.survey().finish(this.finishSurveySuccess,!1)},i.prototype.finishSurveySuccess=function(e){return Handshake.SPA.navigate(new Handshake.Surveys.Survey(e.survey).entity_path)},i.prototype.selectCurrentSurveyPage=function(e){return this.currentSurveyPage(e.id())},i.prototype.questionCountForPage=function(e){return ko.utils.arrayFilter(this.questionsView.items(),function(t){return t.survey_page_id()===e.id()}).length},i.prototype.questionHasSkipLogicForPage=function(e){return _.any(this.questionsView.items(),function(t){return t.survey_page_id()===e.id()&&t.has_skip_logic()})},i.prototype.hasSkipLogic=function(){return _.any(this.questionsView.items(),function(e){return e.has_skip_logic()})},i.prototype.onBeforeMove=function(e){var t;if(this.hasSkipLogic())return e.cancelDrop=!0,t=UNSAFE__i18n.t("survey_reorder_skip_logic_error"),Handshake.Helpers.notifyError(t)},i.prototype.emptyPagesCount=function(){return ko.utils.arrayFilter(this.surveyPagesView.items(),(e=this,function(t){return 0===e.questionCountForPage(t)})).length;var e},i}(Handshake.PagedForm.View),Handshake.ManageSurveysView=function(){function t(t){var s;this.props=t,this.destroySurvey=e(this.destroySurvey,this),this.searchCallback=e(this.searchCallback,this),this.surveys=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"surveys",this.searchCallback),"Career Services"===(s=Handshake.passed.current_user_type)||"Admins"===s?this.searchable.initialSetup("ManageUniversitySurveys"):this.searchable.initialSetup("ManageSurveys")}return t.prototype.searchCallback=function(e){return this.surveys(Handshake.Resource.resourcesFromArray(e.results,Handshake.Surveys.Survey))},t.prototype.destroySurvey=function(e){return e.destroy((t=this,function(){return t.surveys.remove(e)}));var t},t}(),Handshake.SurveyShowView=function(){function t(t){this.props=t,this.open_survey=e(this.open_survey,this),this.open_close_survey_confirmation=e(this.open_close_survey_confirmation,this),this.close_survey=e(this.close_survey,this),this.duplicate_survey=e(this.duplicate_survey,this),this.download_survey_responses=e(this.download_survey_responses,this),this.survey=Handshake.Resource.resourceFromObject(this.props.survey),this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,this.status_saving=ko.observable(!1),this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Close Survey",safe_body_html:"Closing this survey hides it from students, but students with the link will still be able to submit responses. Are you sure you want to do this?",confirm_button_text:"Yes, close survey",cancel_button_text:"No, keep survey open"}),$(".survey-description").popover()}return t.prototype.download_survey_responses=function(){var e;return e=new Handshake.SurveyResponses.SurveyResponse({survey_id:this.survey.id()}).base_route("csv_download")+"/csv_download",this.ajax_download_view.download_results(e)},t.prototype.duplicate_survey=function(){return this.survey.duplicate(function(e){return Handshake.Helpers.notifySuccess("Survey was successfully duplicated.",function(){return Handshake.SPA.navigate(new Handshake.Surveys.Survey(e.survey).edit_entity_path)})})},t.prototype.close_survey=function(){return this.survey.status("closed"),this.status_saving(!0),this.survey.save((e=this,function(){return e.status_saving(!1),Handshake.Helpers.notifySuccess("Survey was successfully closed.")}));var e},t.prototype.open_close_survey_confirmation=function(){return this.confirmation_modal.show_modal((e=this,function(){return e.close_survey()}));var e},t.prototype.open_survey=function(){return this.survey.status("active"),this.status_saving(!0),this.survey.save((e=this,function(){return e.status_saving(!1),Handshake.Helpers.notifySuccess("Survey was successfully opened.")}));var e},t}(),Handshake.InviteSurveysView=function(){function t(t){var s;this.props=t,this.redrawCharts=e(this.redrawCharts,this),this.inviteUsers=e(this.inviteUsers,this),this.searchCallback=e(this.searchCallback,this),this.count=ko.observable(),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback),this.searchable.including_all_facets_in_searches(!0),this.searchable.pushHistoryOnSearchPerformed(!1),this.searchable.showPagination=!1,s=Handshake.passed.current_user_type,this.use_students_university_index="Career Services"===s||"Admins"===s||"Mentors"===s,this.use_students_university_index?this.searchable.initialSetup("UniversitySurveyInviteStudents"):Bugsnag.notify("Unexpected user type "+s+" encountered in InviteSurveysView"),this.survey=ko.observable(Handshake.Resource.resourceFromObject(this.props.survey))}return t.prototype.searchCallback=function(e){var t,s;return this.count(e.total),t={majors:(_.find(e.filter_views.filter_views,function(e){
return"majors"===e.type})||{options:[]}).options,school_years:(_.find(e.filter_views.filter_views,function(e){return"school_years"===e.type})||{options:[]}).options},setTimeout((s=this,function(){return s.redrawCharts(t)}),1e3)},t.prototype.inviteUsers=function(){var e,t;return e=this.searchable.searchParams(),this.searchable.query()&&(e.query=this.searchable.query()),this.survey().sendInvites(e,(t=this,function(){return $("#survey-invite").modal("hide"),window.location.href=t.survey().entity_path}))},t.prototype.redrawCharts=function(e){return window.Handshake.Helpers.initPieChart($("#student_majors_chart"),e.majors,null),window.Handshake.Helpers.initPieChart($("#student_years_chart"),e.school_years,null)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.TwoFactorSettings={},Handshake.TwoFactorSettings.TwoFactorSetting=function(s){function i(t){this.reset=e(this.reset,this),this.extend_unenforcement=e(this.extend_unenforcement,this),i.__super__.constructor.call(this,t)}return t(i,s),i.type="TwoFactorSetting",i.underscore="two_factor_setting",i.prototype.extend_unenforcement=function(){return this.ajax_call({type:"POST",method:"extend_unenforcement",on_member:!0,action:"extend_unenforcement",success:function(e){var t;return t=e.two_factor_setting.activation_unenforced_until,Handshake.Helpers.notifySuccess("Two factor activation unenforced until "+moment(t).format("MMMM Do h:mm a"))}})},i.prototype.reset=function(){return this.ajax_call({type:"POST",method:"reset",on_member:!0,action:"reset",success:function(e){var t;return t=e.two_factor_setting.activation_unenforced_until,Handshake.Helpers.notifySuccess("Two factor activation reset and unenforced until "+moment(t).format("MMMM Do h:mm a"))}})},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.UserAppointmentTypes={},Handshake.UserAppointmentTypes.UserAppointmentType=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},appointment_type_id:{send:!0}})}return t(i,s),i.type="UserAppointmentType",i.underscore="user_appointment_type",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.EditUserAppointmentTypes=function(){function t(t){var s,i,n;this.props=t,this.removeAppointmentType=e(this.removeAppointmentType,this),this.addAppointmentType=e(this.addAppointmentType,this),this.show_add_appointment_type_modal=e(this.show_add_appointment_type_modal,this),this.appointment_category_name_for_type=e(this.appointment_category_name_for_type,this),this.vm={user:new Handshake.Users.User({id:this.props.user_appointment_types_user_id}).isLoading(!0),schoolAppointmentTypes:ko.observableArray().trackHasItems(),schoolAppointmentCategories:ko.observableArray().trackHasItems(),addAppointmentType:this.addAppointmentType,removeAppointmentType:this.removeAppointmentType},this.selected_appointment_type=ko.observable(),this.userAppointmentTypes=ko.observableArray(),this.vm.appointment_type_ids=ko.computed((s=this,function(){return _.map(s.userAppointmentTypes(),function(e){return e.appointment_type_id()})})),this.vm.schoolAppointmentTypesPath=ko.computed((i=this,function(){return new Handshake.Schools.School({id:i.vm.user.institution_id()}).member_route("appointment_types")})),new Handshake.UserAppointmentTypes.UserAppointmentType({user_id:this.vm.user.id()}).index((n=this,function(e){if(e.success)return n.vm.schoolAppointmentTypes(Handshake.Resource.resourcesFromArray(e.school_appointment_types)),n.vm.schoolAppointmentCategories(_.sortBy(Handshake.Resource.resourcesFromArray(e.school_appointment_categories),function(e){return e.calculated_sort_order()})),n.userAppointmentTypes(Handshake.Resource.resourcesFromArray(e.user_appointment_types))}))}return t.prototype.appointment_category_name_for_type=function(e){var t;return t=_.filter(this.vm.schoolAppointmentCategories(),function(t){return-1!==t.appointment_type_ids().indexOf(e.id())}),_.map(t,function(e){return e.name()}).join(", ")},t.prototype.show_add_appointment_type_modal=function(e){return this.selected_appointment_type(e),this.props.existing_appointment_blocks_present?$("#add-appointment-type-modal").modal("show"):this.addAppointmentType(!1)},t.prototype.addAppointmentType=function(e){return this.newUserAppointmentType=new Handshake.UserAppointmentTypes.UserAppointmentType({user_id:this.vm.user.id(),appointment_type_id:this.selected_appointment_type().id()}),this.newUserAppointmentType.create((t=this,function(){return t.userAppointmentTypes.push(t.newUserAppointmentType)}),null,{update_existing_appointment_block:e});var t},t.prototype.removeAppointmentType=function(e){var t,s;return(t=_.find(this.userAppointmentTypes(),function(t){return t.appointment_type_id()===e.id()})).destroy((s=this,function(){return s.userAppointmentTypes.remove(t)}))},t}()}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty;Handshake.UserGoals={},Handshake.UserGoals.UserGoal=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({user_id:{send:!0},goal_option_id:{send:!0}})}return e(s,t),s.type="UserGoal",s.underscore="user_goal",s}(Handshake.Resource)}.call(this),function(){var e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e},t={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.UserImages={},Handshake.UserImages.UserImage=function(t){function s(e){s.__super__.constructor.call(this,e),this.attributes({preview_url:{},image_url:{},s3_key:{send:!0}})}return e(s,t),s.type="UserImage",s.underscore="user_image",s}(Handshake.Resource),Handshake.UserImages.UserImageUploadView=function(){function e(e){var t;this.saveImageFunction=e,this.loadImages=s(this.loadImages,this),this.deleteImage=s(this.deleteImage,this),this.loadMoreImages=s(this.loadMoreImages,this),this.selectDeleteImage=s(this.selectDeleteImage,this),this.selectImage=s(this.selectImage,this),this.showErrors=s(this.showErrors,this),this.pollComplete=s(this.pollComplete,this),this.userImageCreated=s(this.userImageCreated,this),this.setupFileUploader=s(this.setupFileUploader,this),this.saveImage=s(this.saveImage,this),this.defaultSaveImage=s(this.defaultSaveImage,this),this.perPage=10,this.currentPage=0,this.initialLoaded=ko.observable(!1),this.target=null,this.images=ko.observableArray(),this.selectedImage=ko.observable(),this.showLoadMore=ko.observable(!1),this.selectedDeleteImage=ko.observable(),this.showPlaceholder=ko.observable(!1),this.checks=0,this.timeout=1e3,$(document.body).on("show.bs.modal","#upload-image-modal",(t=this,function(e){return t.initialLoaded()||t.loadImages(),t.setupFileUploader(),t.target=$(e.relatedTarget).closest(".wysihtml5-toolbar").siblings("textarea").data("wysihtml5")}))}return e.prototype.defaultSaveImage=function(e){return this.target.editor.toolbar.execCommand("insertImage",new URL(e.image_url(),window.location.href).href)},e.prototype.saveImage=function(){return this.saveImageFunction?this.saveImageFunction(this.selectedImage()):this.defaultSaveImage(this.selectedImage())},e.prototype.setupFileUploader=function(){return this.new_user_image=new Handshake.UserImages.UserImage,this.uploader=new Handshake.FileUploader({file_input:$("#new-user-image"),record:this.new_user_image,attachment_name:"image",upload_on_select:!0,success:(s=this,function(e){return s.new_user_image.s3_key(e),s.new_user_image.create(function(e){return s.new_user_image=new Handshake.UserImages.UserImage,s.uploader.record=s.new_user_image,s.userImageCreated(e)},function(e){return s.showErrors(e.errors.join(", "))})}),error:(t=this,function(e){return t.showErrors(e.join(", "))}),before_upload:(e=this,function(){return e.showPlaceholder(!0)})});var e,t,s},e.prototype.userImageCreated=function(e){var t;return e.success?((t=e.user_image||e.image)&&this.pollComplete(Handshake.Resource.resourceFromObject(t)),this.showLoadMore()?this.images.pop():void 0):this.showErrors(e.errors)},e.prototype.pollComplete=function(e){return this.checks=this.checks+1,setTimeout((t=this,function(){return e.fetch(function(s){return s.complete?(t.showPlaceholder(!1),t.images.unshift(Handshake.Resource.resourceFromObject(s.image)),t.selectedImage(t.images()[0]),t.timeout=1e3,t.checks=0):(t.checks>10&&(t.timeout=t.timeout+1e3),t.pollComplete(e))})}),this.timeout);var t},e.prototype.showErrors=function(e){return this.showPlaceholder(!1),Handshake.Helpers.notifyError(e)},e.prototype.selectImage=function(e){return this.selectedImage(e)},e.prototype.selectDeleteImage=function(e){return this.selectedDeleteImage(e)},e.prototype.loadMoreImages=function(){return this.currentPage+=1,this.loadImages()},e.prototype.deleteImage=function(){return this.selectedDeleteImage().destroy((e=this,function(t){return e.images.remove(e.selectedDeleteImage()),t.user_image&&e.images.push(Handshake.Resource.resourceFromObject(t.user_image)),e.showLoadMore(t.show_more)}),null,{page:this.currentPage,per_page:this.perPage});var e},e.prototype.loadImages=function(){return $.ajax({url:"/user_images",type:"GET",dataType:"json",data:{page:this.currentPage,per_page:this.perPage},success:(e=this,function(t){if(e.initialLoaded(!0),t&&t.success)return $("#upload-image-modal .previews").animate({scrollTop:$("#upload-image-modal .previews")[0].scrollHeight},500),e.showLoadMore(t.show_more),t.user_images.forEach(function(t){return e.images.push(Handshake.Resource.resourceFromObject(t))})})});var e},e}(),Handshake.UserImages.CropImageView=function(){function e(e,t,i,n,o,r,a){var c,l,u;this.object=e,this.type=t,this.image_name=i,this.selector=n,this.save_object=null==o||o,this.save_callback=null!=r?r:null,this.options=null!=a?a:{},this.name=s(this.name,this),this.inline_image_update=s(this.inline_image_update,this),this.fitToBox=s(this.fitToBox,this),this.zoomOut=s(this.zoomOut,this),this.zoomIn=s(this.zoomIn,this),this.changeImage=s(this.changeImage,this),this.adjustImage=s(this.adjustImage,this),this.uploadDirectly=s(this.uploadDirectly,this),this.saveCrop=s(this.saveCrop,this),this.cancelCrop=s(this.cancelCrop,this),this.removeImage=s(this.removeImage,this),this.cropper=null,this.cropping=ko.observable(!1),this.image_present=ko.computed((c=this,function(){return c.object[c.image_name+"_present"]()})),this.image_url=ko.computed((l=this,function(){return l.object[l.image_name+"_url"]()})),this.new_class=this.options.add_image_class||"btn-success",this.new_text=ko.computed((u=this,function(){return"Add a "+("User"===u.object.type||"Article"===u.object.type||"CareerPlan"===u.object.type?"photo":"logo"===u.type?"logo":"branding image")})),this.first_save=!0,this.cancel_data=null}return e.prototype.LOGO_CROP_OPTIONS={minCropBoxHeight:150,minCropBoxWidth:150,aspectRatio:1},e.prototype.BRANDING_CROP_OPTIONS={minCropBoxHeight:200,minCropBoxWidth:1120},e.prototype.LARGE_CROP_OPTIONS={minCropBoxHeight:225,minCropBoxWidth:840},e.prototype.removeImage=function(){var e;return(e={})[this.image_name]=null,this.object.update(e),this.save_object?this.object.save():(this.inline_image_update(null),_.isFunction(this.save_callback)?this.save_callback(null):void 0)},e.prototype.cancelCrop=function(){var e;return this.cropping(!1),this.cropper.cropper("destroy"),this.save_object?((e={})[this.image_name]=this.object.getLatestData()[this.image_name],e[this.name()+"_url"]=this.object.getLatestData()[this.name()+"_url"],this.object.update(e)):this.first_save?void 0:this.inline_image_update(this.cancel_data)},e.prototype.saveCrop=function(){var e,t;return(e={})[this.image_name]=this.cropper.cropper("getDataURL"),this.object.update(e),this.first_save=!0,this.save_object?this.object.save((t=this,function(){return t.cancelCrop()})):(this.cancelCrop(),this.inline_image_update(e[this.image_name]),this.cancel_data=e[this.image_name],_.isFunction(this.save_callback)?this.save_callback(e[this.image_name]):void 0)},e.prototype.uploadDirectly=function(){return $("#upload-image-modal").modal("show"),$("#new-user-image").click()},e.prototype.adjustImage=function(){var e;return e={guides:!1,highlight:!0,background:!1,dragCrop:!1,movable:!1,resizable:!1,mouseWheelZoom:!1},"logo"===this.type?$.extend(e,this.LOGO_CROP_OPTIONS):"branding"===this.type?$.extend(e,this.BRANDING_CROP_OPTIONS):"large"===this.type&&$.extend(e,this.LARGE_CROP_OPTIONS),this.cropper=$(this.selector).cropper(e),this.cropper.one("built.cropper",this.fitToBox),this.cropping(!0)},e.prototype.changeImage=function(e){return this.inline_image_update(e.image_url()),this.first_save=!1,this.adjustImage()},e.prototype.zoomIn=function(){return this.cropper.cropper("zoom",.05)},e.prototype.zoomOut=function(){return this.cropper.cropper("zoom",-.05)},e.prototype.fitToBox=function(){var e;return e=this.cropper.cropper("getCropBoxData"),this.cropper.cropper("setImageData",e)},e.prototype.inline_image_update=function(e){return this.object[this.name()+"_url"](e)},e.prototype.name=function(){return"photo"===this.image_name&&"User"===this.object.type?"user_photo":this.image_name},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.UserLogs={},Handshake.UserLogs.UserLog=function(s){function i(t){this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.attributes({user_id:{send:!0},core_schools_introduced_at:{send:!0},last_onboarded_at:{send:!0}})}return t(i,s),i.type="UserLog",i.underscore="user_log",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty,i=[].indexOf||function(e){for(var t=0,s=this.length;t<s;t++)if(t in this&&this[t]===e)return t;return-1};Handshake.Users={},Handshake.Users.User=function(s){function i(t){var s,n,o,r;this.safe_destroy=e(this.safe_destroy,this),this.get_profile_data=e(this.get_profile_data,this),this.field_update=e(this.field_update,this),this.institution_path=e(this.institution_path,this),i.__super__.constructor.call(this,t),this.attributes({first_name:{send:!0},preferred_name:{},middle_name:{},last_name:{send:!0},calculated_first_name:{},user_type:{},name:{},school_year_id:{send:!0},visa_status_id:{send:!0},opt_cpt_eligible:{send:!0},institution_managed_email:{},primary_email:{},mobile_number:{},title:{send:!0},institution_id:{},institution_type:{},institution_name:{},institution_logo:{},user_photo_url:{},has_public_resume:{},public_resume_id:{},school_year_name:{},visa_status_name:{},job_titles:{array:!0},bio:{send:!0},is_confirmed:{},is_contact:{},progress:{send:!0},documents:{array:!0,belongs_to:Handshake.Documents.Document},document_review_status:{},profile_or_document_submit_time:{send:!0},created_at:{},last_logged_in:{},requested_action_id:{},requested_institution:{},photo:{send:!0},all_major_names:{array:!0},hidden_navigation_columns:{send:!0,array:!0,convert_empty_to_blank:!0},time_zone:{send:!0},role_names:{array:!0},assigned_to_id:{send:!0},primary_education:{belongs_to:Handshake.Educations.Education},mentor_information_student_contact_preference:{},mentor_information_maximum_mentees:{},mentor_information_industry_id:{},mentor_information_industry_name:{},recent_organizations:{array:!0,belongs_to:Handshake.Organizations.RecentOrganization},recent_work_experiences:{array:!0,belongs_to:Handshake.WorkExperiences.RecentWorkExperience},status:{},self_reported_graduation_date:{send:!0},user_goals:{send:!0,array:!0,nested_attribute:!0,belongs_to:Handshake.UserGoals.UserGoal},post_graduation_interests:{send:!0,array:!0,nested_attribute:!0,belongs_to:Handshake.PostGraduationInterests.PostGraduationInterest},graduate_program_interests:{send:!0,array:!0,nested_attribute:!0,belongs_to:Handshake.GraduateProgramInterests.GraduateProgramInterest},custom_job_interests:{send:!0,array:!0,nested_attribute:!0,belongs_to:Handshake.CustomJobInterests.CustomJobInterest},interests:{send:!0,array:!0,nested_attribute:!0,belongs_to:Handshake.Interests.Interest},onboarding_completed_at:{send:!0},user_log:{send:!0,nested_attribute:!0,belongs_to:Handshake.UserLogs.UserLog},disabled:{}}),this.photo_present=ko.computed((s=this,function(){return s.user_photo_url()&&-1===s.user_photo_url().indexOf("default_user")})),this.photo_url=ko.computed((n=this,function(){return n.user_photo_url()})),t&&t.requested_institution&&this.requested_institution(Handshake.Resource.resourceFromObject(t.requested_institution)),this.year_status=ko.computed((o=this,function(){return o.primary_education().education_level_name()?o.primary_education().education_level_name():o.school_year_name()})),this.job_titles_joined=ko.computed((r=this,function(){return r.job_titles().join(", ")}))}return t(i,s),i.type="User",i.underscore="user",i.prototype.institution_path=function(){return this.institution_id()?Handshake.Resource.resourceFromObject({id:this.institution_id(),type:this.institution_type()}).entity_path:null},i.prototype.field_update=function(){return this.save()},i.prototype.get_profile_data=function(e){return this.ajax_call({type:"GET",method:"profile_data",on_member:!0,action:"profile_data",success:function(t){if(t.success&&e)return e(t)},failure:(t=this,function(){if(t.errors_full_messages())return Handshake.Helpers.notifyError(t.errors_full_messages())})});var t},i.prototype.safe_destroy=function(e,t){return this.ajax_call({type:"POST",method:"safe_destroy",on_member:!0,action:"safe_destroy",data:t,success:function(t){if(t.success&&e)return e(t)},failure:(s=this,function(){if(s.errors_full_messages())return Handshake.Helpers.notifyError(s.errors_full_messages())})});var s},i}(Handshake.Resource),Handshake.NoInstitutionUsersView=function(){function t(){this.reject_institution=e(this.reject_institution,this),this.approve_institution=e(this.approve_institution,this),this.fetch_modal_info=e(this.fetch_modal_info,this),this.set_modal_info=e(this.set_modal_info,this),this.showModal=e(this.showModal,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.selected_user=ko.observable(null),this.users=ko.observableArray([]),this.status=ko.observable(""),this.approved_staff_count=ko.observable(""),this.approved_staff=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"desc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"First Name",field:"first_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Last Name",field:"last_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Created At",field:"created_at",sort_direction:"asc"},{label:"Last Logged In",field:"last_logged_in",sort_direction:"asc"}]),this.searchable.bulkActions([{label:"Add Label",type:"simple",key_action:!0,bulk_action:"add_label",labellable_type:"User",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",key_action:!0,bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Users",type:"simple",key_action:!0,bulk_action:"mass_email_users",success:this.massEmailUsersSuccess}]),this.searchable.initialSetup("NoInstitutionUsers")}return t.prototype.searchCallback=function(e){return this.users(Handshake.Resource.resourcesFromArray(e.results,Handshake.Users.User))},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.showModal=function(e){return this.set_modal_info("",null,""),this.selected_user(e),this.selected_user().requested_action_id()&&this.fetch_modal_info(),$("#no-institution-modal").modal("show")},t.prototype.set_modal_info=function(e,t,s){return this.status(e),this.approved_staff(t),this.approved_staff_count(s)},t.prototype.fetch_modal_info=function(){var e;return new Handshake.EmailActions.EmailAction({id:this.selected_user().requested_action_id()}).fetch_details((e=this,function(t){return e.set_modal_info(t.status,t.staff,t.staff_count)}))},t.prototype.approve_institution=function(){var e;return new Handshake.EmailActions.EmailAction({id:this.selected_user().requested_action_id()}).approve((e=this,function(){return e.users.remove(e.selected_user()),Handshake.Helpers.notifySuccess("Successfully approved institution request")}))},t.prototype.reject_institution=function(){return new Handshake.EmailActions.EmailAction({id:this.selected_user().requested_action_id()}).reject(function(){return Handshake.Helpers.notifySuccess("Successfully rejected institution request")})},t}(),Handshake.ManageUsersView=function(){function t(t,s){var i,n;this.props=t,this.downloadResumesSuccess=e(this.downloadResumesSuccess,this),this.sendDigestEmailSuccess=e(this.sendDigestEmailSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.massEmailUsersSuccess=e(this.massEmailUsersSuccess,this),this.addExistingStudent=e(this.addExistingStudent,this),this.searchCallback=e(this.searchCallback,this),this.users=ko.observableArray([]),this.ajaxDownloadView=new Handshake.Downloads.AjaxBulkDownloadView,this.school_id=this.props.school_id,this.existingStudentEmail=ko.observable(),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback,s),this.fds_survey_modal=new Handshake.FirstDestinationBulkAdd({searchable:this.searchable,school_id:this.props.school_id}),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"desc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"First Name",field:"first_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Last Name",field:"last_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Major",field:"primary_education.major_names.case_insensitive_sorting",sort_direction:"asc"},{label:"Profile or Document Submission Date",field:"profile_or_document_submit_time",sort_direction:"asc"}]),i=[{label:"Add Label",type:"simple",key_action:!0,bulk_action:"add_label",labellable_type:"User",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",key_action:!0,bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Users",type:"simple",key_action:!0,bulk_action:"mass_email_users",success:this.massEmailUsersSuccess},{label:"Reset Document Review Status",type:"simple",bulk_action:"reset_user_document_review_status",success:function(e){return Handshake.Helpers.notifySuccess(e.message)}},{label:"Download Public Resumes: PDF",type:"simple",bulk_action:"download_public_resumes_pdf",success:this.downloadResumesSuccess},{label:"Download Public Resumes: Zip",type:"simple",bulk_action:"download_public_resumes_zip",success:this.downloadResumesSuccess}],this.props.fds_active&&(i=i.concat([{label:"Add to First Destination Survey",type:"simple",bulk_action:"existing_first_destination_survey",select_action:this.fds_survey_modal.show_modal,confirm_action:this.fds_survey_modal.perform,success:this.fds_survey_modal.success,hide_modal:this.fds_survey_modal.hide_modal}])),this.searchable.bulkActions(i),n=Handshake.passed.current_user_type,this.use_students_university_index="Career Services"===n||"Admins"===n||"Mentors"===n,this.use_students_university_index?this.searchable.initialSetup("UniversityManageStudents"):Bugsnag.notify("Unhandled user type "+n+" encountered in ManageUsersView"),this.searchable.showPerPageOption(!0)}return t.prototype.searchCallback=function(e){return this.users(Handshake.Resource.resourcesFromArray(e.results,Handshake.Users.User))},t.prototype.addExistingStudent=function(){return $.ajax({type:"POST",url:"/schools/"+this.school_id+"/add_existing_student",dataType:"json",data:{email_address:this.existingStudentEmail()},success:function(e){return e.success?window.location.reload():Handshake.Helpers.notifyError(e.errors[0])},error:function(e){if(e&&e.responseJSON)return Handshake.Helpers.notifyError(e.responseJSON.errors)}})},t.prototype.massEmailUsersSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.sendDigestEmailSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.digest_email,Handshake.DigestEmails.DigestEmail).entity_path},t.prototype.downloadResumesSuccess=function(e){return this.ajaxDownloadView.bulkActionSuccess(e)},t}(),Handshake.SearchStudentsBase=function(){function t(t){var s;this.props=t,this.decorate_students_with_react_props=e(this.decorate_students_with_react_props,this),this.is_favorite=e(this.is_favorite,this),this.bulk_message_users_failure=e(this.bulk_message_users_failure,this),this.bulk_message_users_success=e(this.bulk_message_users_success,this),this.bulk_message_users_cancel=e(this.bulk_message_users_cancel,this),this.bulk_message_users_confirm=e(this.bulk_message_users_confirm,this),this.bulk_message_users_select=e(this.bulk_message_users_select,this),this.downloadResumesSuccess=e(this.downloadResumesSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.unmount=e(this.unmount,this),this.items=ko.observableArray([]),this.ajaxDownloadView=new Handshake.Downloads.AjaxBulkDownloadView,this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1,to_user_id:null}),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback),null!=this.props.default_search_params&&this.searchable.defaultParams(this.props.default_search_params),s=[{label:"Add Label",type:"simple",bulk_action:"add_label",labellable_type:"User",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess}],this.props.can_bulk_message_students&&(this.message_students_bulk_action={label:"Message Students",type:"simple",key_action:!0,abbreviated_label:"Message",bulk_action:"message_users",select_action:this.bulk_message_users_select,confirm_action:this.bulk_message_users_confirm,cancel_action:this.bulk_message_users_cancel,success:this.bulk_message_users_success,failure:this.bulk_message_users_failure},s=s.concat([this.message_students_bulk_action]),this.props.render_100_students_per_page&&this.searchable.perPage(100)),this.download_public_resumes_bulk_action={label:"Download Resumes",type:"simple",key_action:!0,abbreviated_label:"Download",bulk_action:"download_public_resumes_pdf",success:this.downloadResumesSuccess},this.props.can_download_public_resumes&&(s=s.concat([this.download_public_resumes_bulk_action,{label:"Download Resumes: Zip",abbreviated_label:"Download",type:"simple",bulk_action:"download_public_resumes_zip",success:this.downloadResumesSuccess}])),this.searchable.bulkActions(s),"Employers"===Handshake.passed.current_user_type&&(this.searchable.sortingInfo.sortOptions([{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"Last Name",field:"last_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Recently Updated",field:"profile_updated_at",sort_direction:"desc"}]),this.props.render_in_react&&this.searchable.sortingInfo.show_sort_label(!0))}return t.prototype.unmount=function(){if(null!=this.searchable.bulk_message_panel)return this.searchable.bulk_message_panel.unmount()},t.prototype.templateName=function(e){return e.type+"-template"},t.prototype.searchCallback=function(e){var t;return t=Handshake.Resource.resourcesFromArray(e.results,Handshake.Users.User),this.props.render_in_react&&this.decorate_students_with_react_props(t),document.body.scrollTop=document.documentElement.scrollTop=0,this.items(t)},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.downloadResumesSuccess=function(e){return this.ajaxDownloadView.bulkActionSuccess(e)},t.prototype.bulk_message_users_select=function(){return this.searchable.bulk_message_panel.show_panel(!0),!1},t.prototype.bulk_message_users_confirm=function(){return this.searchable.bulk_message_panel.confirm(),!1},t.prototype.bulk_message_users_cancel=function(){return this.searchable.bulk_message_panel.show_panel()},t.prototype.bulk_message_users_success=function(e){if(e.message)return Handshake.Helpers.notifySuccess(e.message)},t.prototype.bulk_message_users_failure=function(e){return e.error&&Handshake.Helpers.notifyError(e.error),this.searchable.bulk_message_panel.show_panel()},t.prototype.is_favorite=function(e){return!!this.props.favorite_user_ids&&_.contains(this.props.favorite_user_ids,parseInt(e.id()))},t.prototype.decorate_students_with_react_props=function(e){return e.forEach((t=this,function(e){var s,i;return s=Object.assign({},t.props,{resource:e,searchable:t.searchable,messagesView:t.messagesView}),i=new Handshake.SearchStudentsView.ResultCard(s).vm,e.react_props=i}));var t},t}(),Handshake.SearchStudentsView=function(e){function s(e,t){var i;this.props=e,
s.__super__.constructor.call(this,this.props,t),i=Handshake.passed.current_user_type,this.use_students_university_index="Career Services"===i||"Admins"===i||"Mentors"===i,this.use_students_university_index?this.searchable.initialSetup("UniversitySearchStudents"):this.searchable.initialSetup("SearchStudents")}return t(s,e),s}(Handshake.SearchStudentsBase),Handshake.MessageCampaignStudentsView=function(s){function i(t,s){var n,o,r,a,c,l;this.props=t,this.message_students_click=e(this.message_students_click,this),i.__super__.constructor.call(this,this.props,s),this.searchable.addExternalParam("campaign_object_id",ko.observable(this.props.campaign_object_id)),this.searchable.addExternalParam("campaign_object_type",ko.observable(this.props.campaign_object_type)),this.searchable.pushHistoryOnSearchPerformed(!1),this.searchable.initialSetup("EmployerSearchStudents"),r=ko.observable(0),a=this.searchable.totalResults.subscribe((c=this,function(){var e;return r(c.searchable.totalResults()),e=_.extend({},c.searchable.searchParams(),{including_all_facets_in_searches:!0}),c.searchable.defaultParams(e),a.dispose()})),"Event"===this.props.campaign_object_type?(n="Here is an upcoming event from "+this.props.employer_name+" you might be interested in:<br/>",o="qualify to attend this event at "+this.props.school_name):"Job"===this.props.campaign_object_type||"Posting"===this.props.campaign_object_type?(n="Here is a job at "+this.props.employer_name+" you might be interested in:<br/>",o="match the preferences for this job"):"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify("Unknown message campaign object type of "+this.props.campaign_object_type),n+="<a href='"+this.props.campaign_object_url+"'>"+this.props.campaign_object_title+"</a>",this.searchable.bulk_message_panel.set_message_campaign_fields(n,this.props.campaign_object_id,this.props.campaign_object_type),this.react_props=ko.computed((l=this,function(){return{studentsMeetingPreferences:r(),studentCountExplanation:o,campaignObjectTitle:l.props.campaign_object_title,campaignObjectId:l.props.campaign_object_id,campaignObjectType:l.props.campaign_object_type,resetSearchFilters:l.searchable.resetToDefaults,canBulkMessageStudents:l.props.can_bulk_message_students,messageStudentsClick:l.message_students_click,messageStudentsDisabled:0===l.searchable.checked_results().length&&!l.searchable.all_pages_checked()}}))}return t(i,s),i.prototype.message_students_click=function(){return this.searchable.selectBulkAction(this.message_students_bulk_action)},i}(Handshake.SearchStudentsBase),Handshake.SearchStudentsView.ResultCard=function(){function e(e){var t,s,i,n;this.props=e,n=this.props.resource,s=this.props.searchable,t=this.props.messagesView,i=n.has_public_resume()&&this.props.can_download_public_resumes,this.vm=ko.computed(function(){return{studentId:n.id(),user:{firstName:n.first_name(),lastName:n.last_name(),schoolYearName:n.school_year_name(),institutionName:n.institution_name(),entityPath:n.entity_path,id:n.id(),name:n.name(),userProfilePhotoUrl:n.user_profile_photo_url,publicResumeId:n.public_resume_id(),hasPublicResume:i,recentWorkExperiences:_.map(n.recent_work_experiences(),function(e){return e.id()}),recentOrganizations:_.map(n.recent_organizations(),function(e){return e.id()})},workExperiences:_(n.recent_work_experiences()).reduce(function(e,t){return t.employer_name()&&(e[t.id()]={logo:t.logo(),jobPositionName:t.job_position_name(),employerName:t.employer_name()}),e},{}),organizations:_(n.recent_organizations()).reduce(function(e,t){return e[t.id()]={logo:t.logo(),organizationName:t.organization_name(),organizationChapterName:t.organization_chapter_name()},e},{}),primaryEducation:{endDate:n.primary_education().end_date(),majorNames:[n.primary_education().major_names()],cumulativeGpa:n.primary_education().cumulative_gpa()},viewAsUserType:"Employers",isChecked:s.item_checked(n.id()),toggleInput:function(){return s.toggle_checkbox(n.id())},switchUser:function(){return t.switchUser(n.id(),n.name())}}})}return e}(),Handshake.ManageMentorsView=function(){function t(t,s){var i;this.props=t,this.addExistingMentor=e(this.addExistingMentor,this),this.massEmailUsersSuccess=e(this.massEmailUsersSuccess,this),this.bulkRemoveLabelSuccess=e(this.bulkRemoveLabelSuccess,this),this.bulkAddLabelSuccess=e(this.bulkAddLabelSuccess,this),this.bulkLabelCancel=e(this.bulkLabelCancel,this),this.bulkLabelConfirm=e(this.bulkLabelConfirm,this),this.bulkLabelSelect=e(this.bulkLabelSelect,this),this.searchCallback=e(this.searchCallback,this),this.users=ko.observableArray([]),this.school_id=this.props.school_id,this.existingMentorEmail=ko.observable(),this.searchable=new Handshake.Searchable($("#search-form"),"mentors",this.searchCallback,s),this.searchable.sortingInfo.sortOptions([{label:"Default",field:"default",sort_direction:"desc"},{label:"Relevancy",field:"relevancy",sort_direction:""},{label:"First Name",field:"first_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Last Name",field:"last_name.case_insensitive_sorting",sort_direction:"asc"},{label:"Major",field:"primary_education.major_names.case_insensitive_sorting",sort_direction:"asc"}]),this.searchable.bulkActions([{label:"Add Label",type:"simple",key_action:!0,bulk_action:"add_label",labellable_type:"User",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkAddLabelSuccess},{label:"Remove Label",type:"simple",key_action:!0,bulk_action:"remove_label",select_action:this.bulkLabelSelect,confirm_action:this.bulkLabelConfirm,cancel_action:this.bulkLabelCancel,success:this.bulkRemoveLabelSuccess},{label:"Send Email to Mentors",type:"simple",key_action:!0,bulk_action:"mass_email_users",success:this.massEmailUsersSuccess}]),"Career Services"===(i=Handshake.passed.current_user_type)||"Admins"===i||"Mentors"===i?this.searchable.initialSetup("UniversityMentorUsers"):this.searchable.initialSetup("ManageMentors")}return t.prototype.searchCallback=function(e){return this.users(Handshake.Resource.resourcesFromArray(e.results,Handshake.Users.User))},t.prototype.bulkLabelSelect=function(){return this.searchable.bulkLabelModal.showModal(!0),!1},t.prototype.bulkLabelConfirm=function(){return this.searchable.bulkLabelModal.confirm(),!1},t.prototype.bulkLabelCancel=function(){return this.searchable.bulkLabelModal.showModal()},t.prototype.bulkAddLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully added label to items.")},t.prototype.bulkRemoveLabelSuccess=function(e){return Handshake.Helpers.notifySuccess(e.message||"Successfully removed label from items.")},t.prototype.massEmailUsersSuccess=function(e){return window.location.href=Handshake.Resource.resourceFromObject(e.mass_email,Handshake.MassEmails.MassEmail).entity_path},t.prototype.addExistingMentor=function(){return $.ajax({type:"POST",url:"/schools/"+this.school_id+"/add_existing_mentor",dataType:"json",data:{email_address:this.existingMentorEmail()},success:function(e){return e.success?window.location.reload():Handshake.Helpers.notifyError(e.errors[0])},error:function(e){if(e&&e.responseJSON)return Handshake.Helpers.notifyError(e.responseJSON.errors)}})},t}(),Handshake.SearchMentorsView=function(){function t(t,s){this.props=t,this.searchCallback=e(this.searchCallback,this),this.users=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback,s),this.searchable.initialSetup("SearchMentors")}return t.prototype.searchCallback=function(e){return this.users(Handshake.Resource.resourcesFromArray(e.results,Handshake.Users.User))},t}(),Handshake.Users.FilterStudentsView=function(){function t(t,s,i){this.searchCallback=e(this.searchCallback,this),this.additionalCallback=s,this.users=ko.observableArray([]),this.searchable=new Handshake.Searchable($("#search-form"),"users",this.searchCallback,t),this.searchable.pushHistoryOnSearchPerformed(!1),this.searchable.including_all_facets_in_searches(!0),i?this.searchable.category("SearchStudents"):this.searchable.initialSetup("SearchStudents")}return t.prototype.searchCallback=function(e){if(this.users(Handshake.Resource.resourcesFromArray(e.results,Handshake.Users.User)),this.additionalCallback)return this.additionalCallback(e)},t}(),Handshake.ProfileView=function(){function t(t){this.props=t,this.loadUser=e(this.loadUser,this),this.user=ko.observable(),this.student_preference=ko.observable(),this.educationsView=new Handshake.Educations.EducationsView(_.extend(this.props,{student_preference:this.student_preference})),this.workExperiencesView=new Handshake.WorkExperiences.WorkExperiencesView(this.props),this.extraCurricularsView=new Handshake.ExtraCurriculars.ExtraCurricularsView(this.props),this.projectsView=new Handshake.Projects.ProjectsView(this.props),this.externalLinksView=new Handshake.ExternalLinks.ExternalLinksView(this.props),this.coursesView=new Handshake.Courses.CoursesView(this.props),this.organizationMembershipsView=new Handshake.OrganizationMemberships.OrganizationMembershipsView(this.props),this.skillsView=new Handshake.Skills.SkillsView(this.props)}return t.prototype.loadUser=function(e){return new Handshake.Users.User({id:e}).get_profile_data((t=this,function(e){var s,i;return t.educationsView.items(Handshake.Resource.resourcesFromArray(e.educations)),t.workExperiencesView.items(Handshake.Resource.resourcesFromArray(e.work_experiences)),t.extraCurricularsView.items(Handshake.Resource.resourcesFromArray(e.extra_curriculars)),t.projectsView.items(Handshake.Resource.resourcesFromArray(e.projects)),t.externalLinksView.items(Handshake.Resource.resourcesFromArray(e.external_links)),t.organizationMembershipsView.items(Handshake.Resource.resourcesFromArray(e.organization_memberships)),t.skillsView.items(Handshake.Resource.resourcesFromArray(e.skills)),t.coursesView.items(Handshake.Resource.resourcesFromArray(e.courses)),t.student_preference(Handshake.Resource.resourceFromObject(e.student_preference)),s="This field is locked by your school. To get the full potential out of Handshake, contact your career office to have it updated.",i="Fill out this section of your profile to get the full potential out of Handshake.","Students"===Handshake.passed.current_user_type&&t.student_preference().lock_school_year()?$(".profile-tooltip-school-year").tooltip({title:s}):$(".profile-tooltip-school-year").tooltip({title:i}),"Students"===Handshake.passed.current_user_type&&t.student_preference().lock_work_authorization()?$(".profile-tooltip-work-authorization").tooltip({title:s}):$(".profile-tooltip-work-authorization").tooltip({title:i})}));var t},t}(),Handshake.UserShowView=function(){function e(e){this.props=e,null!=this.props.user&&(this.userSidebarView=new Handshake.UserSidebarView(this.props),this.profileView=new Handshake.ProfileView(this.props),this.profileView.loadUser(this.props.user.id))}return e}(),Handshake.UserSidebarView=function(){function t(t){var s,i;this.props=t,this.field_update=e(this.field_update,this),this.updatePhoto=e(this.updatePhoto,this),this.changeImage=e(this.changeImage,this),this.user=ko.observable(new Handshake.Users.User(this.props.user)),this.props.notes_enabled&&(this.notesModal=new Handshake.Notes.NotesView(this.user(),!0)),this.props.labels_enabled&&(this.labelView=new Handshake.Labels.LabelView({labellable:this.user,labels:ko.observableArray(Handshake.Resource.resourcesFromArray(this.props.labels)),can_label:this.props.can_label,hide_when_empty:"Students"===Handshake.passed.current_user_type})),this.messagesView=new Handshake.Conversations.CreateConversationView({redirect_after_sending:!1,to_user_id:this.props.to_user_id}),this.editing_work_auth=ko.observable(!1),this.work_authorization_text=ko.computed((s=this,function(){return s.user().visa_status_name()?s.user().visa_status_name():"N/A"})),this.editing_school_year=ko.observable(!1),this.school_year_text=ko.computed((i=this,function(){return i.user().school_year_name()?i.user().school_year_name():"N/A"})),this.logoCropView=new Handshake.UserImages.CropImageView(this.user(),"logo","photo",".crop-logo",!1,this.updatePhoto),this.userImageUploadView=new Handshake.UserImages.UserImageUploadView(this.changeImage)}return t.prototype.changeImage=function(e){return this.logoCropView.changeImage(e)},t.prototype.updatePhoto=function(e){var t;return null===e?this.user().ajax_call({type:"POST",method:"update_photo",on_member:!0,action:"update_photo",data:{remove:!0}}):new Handshake.FileUploader({record:this.user(),attachment_name:"photo",success:(t=this,function(s){return t.user().ajax_call({type:"POST",method:"update_photo",on_member:!0,action:"update_photo",data:{s3_key:s},success:function(){return t.user().user_photo_url(e)}})}),error:function(e){return Handshake.Helpers.notifyError("Error updating photo: "+e.join(", "))}}).upload(e)},t.prototype.field_update=function(){return this.user().save((e=this,function(){return e.editing_work_auth(!1),e.editing_school_year(!1)}));var e},t}(),Handshake.UserEditView=function(){function t(t){var s;this.props=t,this.stopApproveAllAndFuture=e(this.stopApproveAllAndFuture,this),this.reset_tfa=e(this.reset_tfa,this),this.unenforce_tfa_three_days=e(this.unenforce_tfa_three_days,this),this.generate_password_reset=e(this.generate_password_reset,this),this.visa_status_id=ko.observable(this.props.visa_status_id),this.opt_cpt_eligible=ko.observable(this.props.opt_cpt_eligible),this.show_opt_cpt_eligible=ko.computed((s=this,function(){return!!s.visa_status_id()&&_.contains(s.props.visa_statuses_requiring_us_sponsorship,parseInt(s.visa_status_id()))}))}return t.prototype.generate_password_reset=function(){return new Handshake.Users.User({id:this.props.user_id}).ajax_call({type:"POST",method:"generate_password_reset",on_member:!0,action:"generate_password_reset",success:function(e){return $("#reset_link_container").show(),$("#reset_link").val(e.link).select()}})},t.prototype.unenforce_tfa_three_days=function(){return new Handshake.TwoFactorSettings.TwoFactorSetting({id:this.props.two_factor_setting_id}).extend_unenforcement()},t.prototype.reset_tfa=function(){return new Handshake.TwoFactorSettings.TwoFactorSetting({id:this.props.two_factor_setting_id}).reset()},t.prototype.stopApproveAllAndFuture=function(){return new Handshake.Users.User({id:this.props.user_id}).ajax_call({type:"POST",method:"stop_automatically_approving_all_and_future",on_member:!0,action:"stop_automatically_approving_all_and_future",success:function(){return Handshake.Helpers.notifySuccess("No longer approving all and future documents")},failure:(e=this,function(){if(e.errors_full_messages())return Handshake.Helpers.notifyError(e.errors_full_messages())})});var e},t}(),Handshake.StudentEditView=function(s){function i(t){var s;this.props=t,this.delete_success=e(this.delete_success,this),this.delete_user=e(this.delete_user,this),i.__super__.constructor.call(this,this.props),this.props.new_record?this.exclude_from_sync=ko.observable(!0):this.exclude_from_sync=ko.observable(this.props.exclude_from_sync),this.disabled=ko.observable(this.props.disabled),this.assigned_to=ko.observable(this.props.assigned_to),this.user_deletion_confirmation_email=ko.observable(),this.user_deletion_confirmation_correct=ko.computed((s=this,function(){return s.user_deletion_confirmation_email()===s.props.deletion_confirmation_email}))}return t(i,s),i.prototype.delete_user=function(){return new Handshake.Users.User({id:this.props.user_id}).safe_destroy(this.delete_success,{user_deletion_confirmation_email:this.user_deletion_confirmation_email()})},i.prototype.delete_success=function(e){return Handshake.SPA.navigate(e.path)},i}(Handshake.UserEditView),Handshake.MentorEditView=function(e){function s(e){this.props=e,s.__super__.constructor.call(this,this.props),this.take_survey_view=new Handshake.TakeSurveyView({survey_id:this.props.survey_id}),this.props.survey_response&&this.take_survey_view.survey_response(Handshake.Resource.resourceFromObject(this.props.survey_response))}return t(s,e),s}(Handshake.UserEditView),Handshake.StaffEditView=function(s){function n(t){var s,i,o;this.props=t,this.office_location_select2_options=e(this.office_location_select2_options,this),this.confirmInstitutionChange=e(this.confirmInstitutionChange,this),this.confirm_change_email_domain=e(this.confirm_change_email_domain,this),this.check_domain_matches=e(this.check_domain_matches,this),this.should_check_generic_domain=e(this.should_check_generic_domain,this),n.__super__.constructor.call(this,this.props),this.institution_type=ko.observable(this.props.institution_type),this.office_location=ko.observable(this.props.office_location),this.career_center_ids=ko.observable(this.props.career_center_ids),this.institution_id=ko.observable(this.props.institution_id),this.selected_institution_id=ko.observable(this.props.institution_id),i=ko.observableArray([]),this.props.alma_maters&&i(Handshake.Resource.resourcesFromArray(this.props.alma_maters)),this.almaMatersFormView=new Handshake.AlmaMatersFormView({alma_maters:i}),this.company_domains=this.props.company_domains,this.email_validator=new Handshake.Validator.Runner({format:"email"}),s=null!=(o=this.company_domains)?o.join(", "):void 0,this.confirmation_modal=new Handshake.Application.ConfirmationModal({title:"Warning",safe_body_html:"The email address you have entered does not match your company\u2019s email domain ("+s+"). For security reasons, if you proceed with this change your access will be pending until a team member re-approves you.\n<br><br><strong>If you have joined a new company</strong> you must create a new account instead of changing your email.",confirm_button_css:"btn-primary"}),this.target_email_address=ko.observable(),this.props.user_is_admin?this.role_type=ko.observable("All"):this.role_type=ko.observable("Specific"),this.props.user_is_school&&this.props.user_id?this.disable_institution_selection=ko.observable(!0):this.disable_institution_selection=ko.observable(!1)}return t(n,s),n.prototype.should_check_generic_domain=function(){var e,t;return!(!this.target_email_address()||!this.email_validator.validate(this.target_email_address()))&&(t=this.target_email_address().split("@").pop(),this.company_domains&&(e=t.toLowerCase(),i.call(this.company_domains,e)<0))},n.prototype.check_domain_matches=function(e){return this.should_check_generic_domain()?$.post("/generic_email",{email:this.target_email_address()},function(t){return t.is_generic?Handshake.Helpers.notifyError("For security reasons, you are unable to update your email to a generic domain (@gmail, @yahoo, @hotmail, etc). Please choose an email address that matches your company\u2019s email domain."):e()}):$("#email-change-request-form").submit()},n.prototype.confirm_change_email_domain=function(){return this.check_domain_matches((e=this,function(){return e.confirmation_modal.show_modal(function(){return $("#email-change-request-form").submit()})}));var e},n.prototype.confirmInstitutionChange=function(){var e;return parseInt(this.institution_id(),10)!==(e=parseInt($("#user_institution_id").val(),10))&&this.props.user_id?(this.selected_institution_id(e),$("#institution-change-confirmation-modal").modal("show")):this.enableRoles()},n.prototype.select2InstitutionOptions=function(){return{placeholder:"Choose an institution...",url:(t=this,function(){return"School"===t.institution_type()?(new Handshake.Schools.School).base_route("index"):"Employer"===t.institution_type()?(new Handshake.Employers.Employer).base_route("index"):bugsnagClient.notify("Invalid institution_type on user form for user")}),full_data:(e=this,function(t){return t?t.id!==e.props.institution_id?(e.props.institution_id=t.id,e.office_location(null)):void 0:{id:e.props.institution_id,name:e.props.institution_name}})};var e,t},n.prototype.office_location_select2_options=function(){return{allowClear:!0,url:(e=this,function(){return new Handshake.OfficeLocations.OfficeLocation({school_id:e.props.institution_id}).base_route("index")}),initial_value:this.office_location,value:this.office_location};var e},n.prototype.setAllRoles=function(){return $(".user_roles .checkbox input").each(function(){return $(this).prop("checked","checked")}),!0},n.prototype.enableRoles=function(){return $(".user_roles .checkbox input").each(function(){return $(this).prop("disabled",!1)}),!0},n}(Handshake.UserEditView),Handshake.StudentRecordView=function(){function e(e){this.props=e,this.noteViews=_.map(this.props.student_appointments,function(e){return new Handshake.Notes.NotesView(Handshake.Resource.resourceFromObject(e),!1,!0)})}return e}(),Handshake.NotesFromEmail=function(){function e(e){var t;this.props=e,this.user=new Handshake.Users.User({id:this.props.notes_from_email_user_id}).isLoading(!0),this.pending_notes=ko.observableArray().trackHasItems(),this.applied_notes=ko.observableArray().trackHasItems(),this.notes_email=ko.observable(),this.user.ajax_call({type:"GET",method:"notes_from_email",on_member:!0,action:"notes_from_email",success:(t=this,function(e){if(e.success)return t.pending_notes(Handshake.Resource.resourcesFromArray(e.pending_notes)),t.applied_notes(Handshake.Resource.resourcesFromArray(e.applied_notes)),t.notes_email(e.notes_email)})})}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.WorkExperiences={},Handshake.WorkExperiences.WorkExperience=function(s){function i(t){var s,n,o,r,a,c;this.nested_route=e(this.nested_route,this),i.__super__.constructor.call(this,t),this.always_send_all_properties(!0),this.attributes({user_id:{send:!0},start_date:{send:!0},end_date:{send:!0},current_position:{send:!0},description:{send:!0},job_id:{send:!0},job_title:{send:!0},employer_id:{send:!0},employer_name:{send:!0},employer_path:{},job_type_id:{send:!0},job_type_name:{},employment_type_id:{send:!0},employment_type_name:{},job_position_name:{send:!0,validations:{presence:!0}},job_function_id:{send:!0},job_function_name:{},location:{belongs_to:Handshake.Locations.Location,nested_attribute:!0,send:!0},nice_job_type:{}}),this.update(t),this.form_id_prefix=this.id()||"new",this.start_date_formatted=ko.computed({read:(o=this,function(){return Handshake.Helpers.toMonthPicker(o.start_date())}),write:(n=this,function(e){return n.start_date(Handshake.Helpers.fromMonthPicker(e))})}),this.end_date_formatted=ko.computed({read:(a=this,function(){return Handshake.Helpers.toMonthPicker(a.end_date())}),write:(r=this,function(e){return r.end_date(Handshake.Helpers.fromMonthPicker(e))})}),this.start_to_end_date_fancy=ko.computed((c=this,function(){return Handshake.Helpers.startToEndMonthsFancy(c.start_date(),c.end_date())})),this.location_input_id="work-experience-location-name-"+this.form_id_prefix,s={location:this.location,input_id:this.location_input_id},this.addLocationView=new Handshake.Locations.AddLocationView(s)}return t(i,s),i.type="WorkExperience",i.underscore="work_experience",i.prototype.nested_route=function(){return"/users/"+this.user_id()},i}(Handshake.Resource),Handshake.WorkExperiences.RecentWorkExperience=function(e){function s(e){s.__super__.constructor.call(this,e),this.attributes({job_position_name:{},employer_name:{},logo:{}})}return t(s,e),s.type="WorkExperience",s.underscore="work_experience",s}(Handshake.Resource),Handshake.WorkExperiences.WorkExperiencesView=function(s){function i(t){this.props=t,this.saveItem=e(this.saveItem,this),this.validateFields=e(this.validateFields,this),this.buildNewItem=e(this.buildNewItem,this),this.employer_name_typeahead_options={path:"/employers",params:{simple_search:!0,category:Handshake.Employers.Employer.type}},this.isResumeParsing=this.props.is_resume_parsing,i.__super__.constructor.call(this,this.props.work_experiences,this.props)}return t(i,s),i.prototype.buildNewItem=function(e){return e.user_id=this.props.editing_user_profile?this.props.user.id:Handshake.passed.current_user_id,new Handshake.WorkExperiences.WorkExperience(e)},i.prototype.validateFields=function(){return!0},i.prototype.saveItem=function(e){if(!this.isResumeParsing)return i.__super__.saveItem.apply(this,arguments);e.is_editing(!1)},i}(Handshake.ResourceEditor)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.FilterView=function(){function t(t,s){var i;this.searchable=t,this.domContext=s,this.fetch_filter_views_if_needed=e(this.fetch_filter_views_if_needed,this),this.showFilterModal=e(this.showFilterModal,this),this.useValues=e(this.useValues,this),this.getValues=e(this.getValues,this),this.uncheckAll=e(this.uncheckAll,this),this.onCustomFilterInput=e(this.onCustomFilterInput,this),this.typeaheadOptionChosen=e(this.typeaheadOptionChosen,this),this.addSelectedFilter=e(this.addSelectedFilter,this),this.typeaheadQueryParams=e(this.typeaheadQueryParams,this),this.removeSectionsNotPresentInData=e(this.removeSectionsNotPresentInData,this),this.setFilterViews=e(this.setFilterViews,this),this.filterSections=ko.observableArray([]),this.category=this.searchable.category,this.skip_sort=!1,i=this.domContext&&this.domContext.closestChild&&this.domContext.closestChild("#filter-modal")||$("#filter-modal"),this.filterModal=new Handshake.FilterModal({modal:i,category:this.category,url:this.searchable.filter_view_search_url})}return t.prototype.setFilterViews=function(e,t,s){var i;return null==t&&(t=!1),null==s&&(s=!1),this.removeSectionsNotPresentInData(e,t,s),_.each(e,(i=this,function(e,t){var s,n;return(s=_.find(i.filterSections(),function(t){return t.type===e.type}))?0!==s.selectedItems().length?(s.updateCountsForExistingOptions(e),s.addOptionsInNewData(e)):(s.removeOptionsNotInNewData(e),s.addOptionsInNewData(e),i.skip_sort?void 0:s.sortFilterValues()):(n=new Handshake.FilterSection(e,i.domContext,i.fetch_filter_views_if_needed,t,i.category()),i.filterSections.push(n))})),this.setStopPropagation()},t.prototype.removeSectionsNotPresentInData=function(e,t,s){var i,n;return i=[],_.each(this.filterSections(),function(s){var n;if(n=_.find(e,function(e){return e.type===s.type}),!s.never_remove&&(t||!n))return i.push(s)}),_.each(i,(n=this,function(e){return s&&delete n.searchable.cachedSearchParams[e.type],n.filterSections.remove(e)}))},t.prototype.setStopPropagation=function(){return $(".filter-view-dropdown.dropdown-menu li",this.domContext).on("click",function(e){return e.stopPropagation()})},t.prototype.typeaheadQueryParams=function(e){return{type:e.type,context:getPath(),category:this.category()}},t.prototype.addSelectedFilter=function(e,t,s){var i,n,o,r,a;if(r=ko.utils.unwrapObservable(s),(a=_.filter(this.filterSections(),function(e){return e.type===r})).length>0&&(o=ko.utils.unwrapObservable(t),n=ko.utils.unwrapObservable(e),""!==o))return(i=new Handshake.FilterValue(n,r,o)).checked(!0),a[0].checkOrAdd(i),i},t.prototype.typeaheadOptionChosen=function(e){return this.addSelectedFilter(e.id,e.name,e.type)?($(".add-filter-input",this.domContext).typeahead("val",""),!0):alert("Could not find corresponding section for "+name)},t.prototype.onCustomFilterInput=function(e,t){var s,i;return"Enter"!==(s=t.key||t.keyCode)&&13!==s||(i=t.target.value,this.addSelectedFilter(i,i,e.type)?(t.target.value="",!1):void 0)},t.prototype.uncheckAll=function(){var e,t,s,i,n;for(i=[],e=0,t=(s=this.filterSections()).length;e<t;e++)n=s[e],i.push(n.uncheckAll());return i},t.prototype.getValues=function(){var e,t,s,i,n,o,r,a;for(a=[],e=0,s=(n=this.filterSections()).length;e<s;e++)for(t=0,i=(o=n[e].filterValues()).length;t<i;t++)(r=o[t]).checked()&&a.push(r);return a},t.prototype.useValues=function(e){var t,s,i,n,o,r;for(o=[],s=0,i=(n=this.filterSections()).length;s<i;s++)r=n[s],t={},e[r.type]&&(e[r.type]instanceof Array?_(e[r.type]):_(e[r.type].split(","))).each(function(e){return t[e]=!0}),o.push(_(r.filterValues()).each(function(e){var s;return null!=e&&t[e.id]?(s=new Handshake.FilterValue(e.id,r.type),r.checkOrAdd(s)):null!=e?e.uncheck():void 0}));return o},t.prototype.showFilterModal=function(e){return this.filterModal.openForSection(e)},t.prototype.fetch_filter_views_if_needed=function(){var e,t;if(!this.searchable.including_all_facets_in_searches())return Handshake.operations.add_worker(),e=_.extend(this.searchable.getSearchParamsFromInterface(),{context:getPath()}),$.ajax({type:"GET",url:this.searchable.fetch_filter_views_url(),dataType:"json",data:e,success:(t=this,function(e){return t.searchable.including_all_facets_in_searches(!0),t.setFilterViews(e.filter_views.filter_views||[]),Handshake.operations.remove_worker()}),error:function(e){if(e&&e.responseJSON&&_.has(e.responseJSON,"errors"))return Handshake.Helpers.notifyError(e.responseJSON.errors)}})},t}(),Handshake.FilterSection=function(){function t(t,s,i,n,o){var r,a,c,l;this.domContext=s,this.fetch_filter_views_if_needed=i,this.getFilterValues=e(this.getFilterValues,this),this.updateCountsForExistingOptions=e(this.updateCountsForExistingOptions,this),this.addOptionsInNewData=e(this.addOptionsInNewData,this),this.removeOptionsNotInNewData=e(this.removeOptionsNotInNewData,this),this.sortFilterValues=e(this.sortFilterValues,this),this.uncheckAll=e(this.uncheckAll,this),this.clear=e(this.clear,this),this.selectedItems=e(this.selectedItems,this),this.removeFilter=e(this.removeFilter,this),this.addFilter=e(this.addFilter,this),this.checkOrAdd=e(this.checkOrAdd,this),this.findFilterByID=e(this.findFilterByID,this),this.topbarDropdownToggled=e(this.topbarDropdownToggled,this),this.jqueryElement=e(this.jqueryElement,this),this.toggleSection=e(this.toggleSection,this),this.setCollapse=e(this.setCollapse,this),this.name=t.name,this.type=t.type,this.initialOptions=t.options,this.all_choice=t.all_choice,this.never_remove=t.configuration.never_remove,this.tooltip_type=t.tooltip_type,this.tooltip_message=t.tooltip_message,this.index=n,this.hidden=t.hidden,this.premium=t.premium,this.no_facets=t.configuration.no_facets,this.all_value=ko.observable("0"),this.defaultVisible=ko.observable(2),this.filterValues=ko.observableArray([]),this.filterValueIDs=ko.observableArray([]),this.html_safe_type=this.type.replace(/\./g,"-"),this.empty=ko.computed((c=this,function(){return 0===c.filterValues().length})),this.is_collapsed=ko.observable(!this.shouldBeExpanded(n)),_.each(this.initialOptions,(l=this,function(e){var t;return t=new Handshake.FilterValue(e.id,l.type,e.name,e.count,e.remove_when_empty,e.hide_count||l.no_facets),l.addFilter(t)})),a=["skill_names"],r=["UniversityManageStudents","UniversityRecipientsFilter","UniversityApplications"],this.use_type_ahead=-1===a.indexOf(t.id)||-1===r.indexOf(o)}return t.prototype.setCollapse=function(){if($(".unified-sidebar").length&&this.shouldBeExpanded(this.index))return this.jqueryElement().addClass("in")},t.prototype.toggleSection=function(){var e;return(e=this.jqueryElement()).length>0?(this.is_collapsed(e.is(".in")),e.collapse("toggle"),this.fetch_filter_views_if_needed()):"undefined"!=typeof bugsnagClient&&null!==bugsnagClient?bugsnagClient.notify({errorClass:"ElementNotFoundError",errorMessage:"Could not find element to toggle collapse",metaData:{selector:e.selector}}):void 0},t.prototype.jqueryElement=function(){return $("#collapsible-filter-"+this.html_safe_type,this.domContext)},t.prototype.topbarDropdownToggled=function(){return this.fetch_filter_views_if_needed(),!1},t.prototype.findFilterByID=function(e){return _.find(this.filterValues(),function(t){return t.id===e})},t.prototype.checkOrAdd=function(e){var t;if(null!=e.id)return(t=this.findFilterByID(e.id))?t.checked(!0):(e.checked(!0),this.addFilter(e)),this.setCollapse()},t.prototype.addFilter=function(e){this.findFilterByID(e.id)||this.filterValues.push(e)},t.prototype.removeFilter=function(e){this.filterValues.remove(function(t){return t.id===e.id})},t.prototype.selectedItems=function(){return _.filter(this.filterValues(),function(e){return e.checked()})},t.prototype.clear=function(){this.filterValues.splice(0,this.filterValues().length)},t.prototype.uncheckAll=function(){return _.invoke(this.selectedItems(),"uncheck")},t.prototype.sortFilterValues=function(){return this.filterValues.sort(function(e,t){return t.count()-e.count()})},t.prototype.setCollapseDefault=function(e,t){return!t&&this.shouldBeExpanded(e)?"collapse in":"collapse"},t.prototype.shouldBeExpanded=function(e){return e<this.defaultVisible()||this.selectedItems().length>0},t.prototype.removeOptionsNotInNewData=function(e){var t,s;return t=[],_.each(this.filterValues(),function(s){var i;return(i=_.find(e.options,function(e){return e.id===s.id
}))?s.count(i.count):s.remove_when_empty?t.push(s):void 0}),_.each(t,(s=this,function(e){return s.removeFilter(e)}))},t.prototype.addOptionsInNewData=function(e){return _.each(e.options,(t=this,function(e){var s;return s=new Handshake.FilterValue(e.id,t.type,e.name,e.count,!0,t.no_facets),t.addFilter(s)}));var t},t.prototype.updateCountsForExistingOptions=function(e){return _.each(this.filterValues(),function(t){var s;return t.checked()?(s=_.find(e.options,function(e){return e.id===t.id}))?t.count(s.count):void 0:t.count(null)})},t.prototype.getFilterValues=function(){return this.no_facets?_(this.filterValues()).filter(function(e){return e.checked()}):this.filterValues()},t}(),Handshake.FilterValue=function(){function t(t,s,i,n,o,r){var a,c;this.id=t,this.type=s,this.label=i,this.remove_when_empty=null==o||o,this.hide_count=null!=r&&r,this.uncheck=e(this.uncheck,this),isNaN(this.id)||(this.id=parseInt(this.id)),this.checked=ko.observable(!1),this.count=ko.observable(n),this.id_type=ko.computed((a=this,function(){return a.id+"_"+a.type})),this.filterLabel=ko.computed((c=this,function(){return c.count()&&!c.hide_count?c.label+" ("+c.count()+")":c.label}))}return t.prototype.uncheck=function(){return this.checked(!1)},t}(),Handshake.FilterModal=function(){function t(t){this.hide=e(this.hide,this),this.show=e(this.show,this),this.search=e(this.search,this),this.query_changed=e(this.query_changed,this),this.reset_search=e(this.reset_search,this),this.nextPage=e(this.nextPage,this),this.openForSection=e(this.openForSection,this),this.modal=t.modal,this.category=t.category,this.url=t.url,this.filterSection=ko.observable(null),this.items=ko.observableArray([]),this.query=ko.observable(""),this.page=ko.observable(1),this.loading=ko.observable(!1),this.end_reached=ko.observable(!1)}return t.prototype.openForSection=function(e){return e!==this.filterSection()?(this.reset_search(),this.query(""),this.items([]),this.filterSection(e),this.search(!0),this.show()):(this.filterSection(e),this.show())},t.prototype.nextPage=function(){if(!this.loading()&&!this.end_reached())return this.page(this.page()+1),this.search()},t.prototype.reset_search=function(){return this.page(1),this.end_reached(!1)},t.prototype.query_changed=function(){return this.reset_search(),this.search(!0)},t.prototype.search=function(e){var t,s;return null==e&&(e=!1),this.loading(!0),t={page:this.page(),per_page:25,type:this.filterSection().type,query:this.query(),category:this.category(),context:getPath()},$.ajax({type:"GET",url:this.url(),dataType:"json",data:t,success:(s=this,function(t){var i;return 0!==t.length||e?(i=[],$.each(t,function(e,t){var n,o;return o=new Handshake.FilterValue(t.id,t.type,t.name,0,!0,s.filterSection().no_facets),(n=s.filterSection().findFilterByID(o.id))?i.push(n):(i.push(o),o.checked.subscribe(function(){return o.checked()?s.filterSection().addFilter(o):s.filterSection().removeFilter(o)}))}),e&&s.items([]),ko.utils.arrayPushAll(s.items,i),s.loading(!1)):(s.loading(!1),void s.end_reached(!0))}),error:function(e){if(e&&e.responseJSON&&_.has(e.responseJSON,"errors"))return Handshake.Helpers.notifyError(e.responseJSON.errors)}})},t.prototype.show=function(){return this.modal.modal("show")},t.prototype.hide=function(){return this.modal.hide("hide")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s={}.hasOwnProperty;Handshake.SavedSearches={},window.Handshake.Helpers.canUseDefaultSavedSearch=function(){return"Employers"!==Handshake.passed.current_user_type},Handshake.SavedSearches.SavedSearch=function(s){function i(t,s){var n;null==s&&(s=!1),this.toKeyBasedParams=e(this.toKeyBasedParams,this),this.criteria_summary=e(this.criteria_summary,this),this.friendly_name=e(this.friendly_name,this),this.removeDefault=e(this.removeDefault,this),this.setDefault=e(this.setDefault,this),i.__super__.constructor.call(this,t,s),this.attributes({"default":{send:!0},controller:{send:!0},name:{send:!0},description:{send:!0},query:{send:!0},category:{send:!0},sort_column:{send:!0},sort_direction:{send:!0},values:{send:!0},booleans:{send:!0},ranges:{send:!0},locations_hstore:{send:!0},qualified_only:{convert_undefined_to_null:!0,send:!0},fulltext_queries:{send:!0}}),this.page=ko.observable(1),this.is_default=ko.computed((n=this,function(){return n["default"]()}))}return t(i,s),i.type="SavedSearch",i.underscore="saved_search",i.underscore_plural="saved_searches",i.prototype.setDefault=function(e){return this.ajax_call({type:"POST",method:"set_default",on_member:!0,action:"set_default",success:function(t){if(e)return e(t)}})},i.prototype.removeDefault=function(e){return this["default"](!1),this.save(e)},i.prototype.friendly_name=function(){var e;return e=this.name()&&this.name().length>0?this.name():"(No Name)",this.category()&&this.category().length>0&&(e+=" ("+this.category()+")"),e},i.prototype.criteria_summary=function(e){var t,s,i;return i=[],s=e.getIdToLabelObject(),this.query()&&i.push("Query: "+this.query()),this.values()&&(t={},_.each(this.values(),function(e){var s;return t[s=e.type]||(t[s]=[]),t[e.type].push(e.label)}),_.each(_.keys(t),function(e){return i.push(s[e]+": "+t[e].join(", "))})),this.booleans()&&_.each(this.booleans(),function(e){return i.push(s[e])}),this.ranges()&&_.each(this.ranges(),function(e){return i.push(s[e.id]+": "+e.value)}),this.locations_hstore()&&_.each(this.locations_hstore(),function(e){return i.push(e.label+": "+e.distance+" miles")}),this.fulltext_queries()&&_.each(this.fulltext_queries(),function(e){return i.push(s[e.id]+": "+e.queries.join(", "))}),"applications"===this.controller()&&"Career Services"===Handshake.passed.current_user_type&&(null===this.qualified_only()?i.push("All Applicants"):this.qualified_only()?i.push("Fully Qualified Applicants"):i.push("Not Fully Qualified Applicants")),"postings"===this.controller()&&"Students"===Handshake.passed.current_user_type&&(this.qualified_only()?i.push("Show Qualified Only: Yes"):i.push("Show Qualified Only: No")),0===i.length&&i.push("No criteria specified"),i.join(" \u2027 ")},i.prototype.toKeyBasedParams=function(){var e,t;return t={},this.values()&&(e={},_.each(this.values(),function(t){var s;return e[s=t.type]||(e[s]=[]),e[t.type].push(t.id)}),_.each(_.keys(e),function(s){return t[s]=e[s]})),this.booleans()&&_.each(this.booleans(),function(e){return t[e]=!0}),this.ranges()&&_.each(this.ranges(),function(e){return t[e.id]=e.value}),this.locations_hstore()&&_.each(this.locations_hstore(),function(e,s){return t["locations["+s+"][point]"]=e.point,t["locations["+s+"][distance]"]=e.distance,t["locations["+s+"][label]"]=e.label}),this.fulltext_queries()&&_.each(this.fulltext_queries(),function(e){return t[e.id]=e.queries}),t},i}(Handshake.Resource),Handshake.SavedSearches.View=function(){function t(t,s,i,n){var o;this.wrapper=t,this.controller=s,this.savedSearchSelected=i,this.full_search_wrapper=n,this.destroySavedSearch=e(this.destroySavedSearch,this),this.createSavedSearch=e(this.createSavedSearch,this),this.createSavedSearchSuccess=e(this.createSavedSearchSuccess,this),this.selectSavedSearch=e(this.selectSavedSearch,this),this.open_new_saved_search_modal=e(this.open_new_saved_search_modal,this),this.unsetDefault=e(this.unsetDefault,this),this.setDefault=e(this.setDefault,this),this.savedSearches=ko.observableArray([]),this.selectedSavedSearch=null,this.currentDefault=null,$.getJSON("/saved_searches.json",{type:this.controller},(o=this,function(e){return o.savedSearches(_.map(e.saved_searches,function(e){var t;return(t=new Handshake.SavedSearches.SavedSearch(e,!0))["default"]()&&(o.currentDefault=t),t}))}))}return t.prototype.setDefault=function(e){return e.setDefault((t=this,function(){return t.currentDefault&&t.currentDefault["default"](!1),t.currentDefault=e,Handshake.passed.default_searches[t.controller]=e.getJSON(),Handshake.Helpers.notifySuccess("Default set successfully")}));var t},t.prototype.unsetDefault=function(e){return e.removeDefault((t=this,function(){return t.currentDefault===e&&(t.currentDefault=!1),delete Handshake.passed.default_searches[t.controller],Handshake.Helpers.notifySuccess("Default removed successfully")}));var t},t.prototype.open_new_saved_search_modal=function(){return $(".new-saved-search",this.full_search_wrapper).modal("show")},t.prototype.selectSavedSearch=function(e){return this.selectedSavedSearch=e,this.savedSearchSelected(e)},t.prototype.createSavedSearchSuccess=function(e){return this.savedSearches.push(new Handshake.SavedSearches.SavedSearch(e.saved_search,!0)),$(".new-saved-search",this.full_search_wrapper).modal("hide"),$(".new-name",this.full_search_wrapper).val(""),$(".new-description",this.full_search_wrapper).val(""),Handshake.Helpers.notifySuccess("Search saved successfully.")},t.prototype.createSavedSearch=function(e){return e.controller(this.controller),e.create(this.createSavedSearchSuccess)},t.prototype.destroySavedSearch=function(e,t){var s;return e.destroy((s=this,function(){return s.savedSearches.remove(e)})),t.stopPropagation()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SearchBooleans={},Handshake.SearchBooleans.SearchBoolean=function(){function t(t,s,i){this.changed=s,null==i&&(i=!1),this.uncheck=e(this.uncheck,this),this.id=t.id,this.name=t.name,this.premium=t.premium,this.tooltip_type=t.tooltip_type,this.tooltip_message=t.tooltip_message,this.hidden=t.hidden,this.checked=ko.observable(i),this.filterLabel=this.name}return t.prototype.uncheck=function(){return this.checked(!1)},t}(),Handshake.SearchBooleans.View=function(){function t(t){this.changed=t,this.useValues=e(this.useValues,this),this.getFilterValues=e(this.getFilterValues,this),this.getValues=e(this.getValues,this),this.setBooleans=e(this.setBooleans,this),this.reset=e(this.reset,this),this.initWidgets=e(this.initWidgets,this),this.booleans=ko.observableArray([])}return t.prototype.initWidgets=function(){return $(".boolean-view-dropdown.dropdown-menu li").on("click",function(e){return e.stopPropagation()})},t.prototype.reset=function(){return _.each(this.booleans(),function(e){return e.checked(!1)})},t.prototype.setBooleans=function(e){var t,s,i;if(s=_.map(e,function(e){return e.id}),t=_.map(this.booleans(),function(e){return e.id}),0!==_.difference(s,t).length||0!==_.difference(t,s).length)return this.booleans(_.map(e,(i=this,function(e){return new Handshake.SearchBooleans.SearchBoolean(e,i.changed,e.checked)})))},t.prototype.getValues=function(){return _.map(_.filter(this.booleans(),function(e){return e.checked()}),function(e){return e.id})},t.prototype.getFilterValues=function(){return _.filter(this.booleans(),function(e){return e.checked()})},t.prototype.useValues=function(e){return _.each(this.booleans(),function(t){return t.checked(e[t.id])})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SearchCategories={},Handshake.SearchCategories.SearchCategory=function(){function e(e,t){this.id=e,this.name=t}return e}(),Handshake.SearchCategories.View=function(){function t(t,s,i){this.wrapper=t,this.categorySelected=s,this.category=i,this.selectCategoryId=e(this.selectCategoryId,this),this.selectCategory=e(this.selectCategory,this),this.categories=ko.observableArray([])}return t.prototype.selectCategory=function(e){return this.selectCategoryId(e.id)},t.prototype.selectCategoryId=function(e){return this.category(e),this.categorySelected()},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SearchRanges={},Handshake.SearchRanges.SearchRange=function(){function t(t,s){var i,n,o,r,a,c,l,u,h;this.changed=s,this.triggerChange=e(this.triggerChange,this),this.is_valid_range_value=e(this.is_valid_range_value,this),this.start_id=t.start_id,this.end_id=t.end_id,this.name=t.name,this.range_type=t.range_type,this.tooltip_type=t.tooltip_type,this.tooltip_message=t.tooltip_message,this.hidden=t.hidden,this.single_input=t.configuration.single_input,this.range_start=ko.observable(""),this.range_end=ko.observable(""),this.iso_formatted_range_start=ko.computed({read:(n=this,function(){return n.read_range_value(n.range_start)}),write:(i=this,function(e){return i.write_range_value(i.range_start,e)})}),this.iso_formatted_range_end=ko.computed({read:(r=this,function(){return r.read_range_value(r.range_end,!0)}),write:(o=this,function(e){return o.write_range_value(o.range_end,e,!0)})}),this.filterLabel=ko.computed((a=this,function(){return"date"===a.range_type||"datetime"===a.range_type?a.single_input?a.name+": "+a.range_start():_.isEmpty(a.range_start())||_.isEmpty(a.range_end())?_.isEmpty(a.range_start())?a.name+": before "+a.range_end():a.name+": after "+a.range_start():a.name+": "+a.range_start()+" - "+a.range_end():a.name+": "+a.range_start()+" - "+a.range_end()})),this.valid_range_start=ko.computed((c=this,function(){return c.is_valid_range_value(c.range_start())})),this.valid_range_end=ko.computed((l=this,function(){return l.is_valid_range_value(l.range_end())})),this.datepicker_class=ko.computed((u=this,function(){return"datetime"===u.range_type?"datetimepicker":"date"===u.range_type?"datetimepicker date-only":void 0})),this.datepicker_format=(h=this,function(){return"datetime"===h.range_type?"yyyy-mm-dd H:ii p":"date"===h.range_type?"yyyy-mm-dd":void 0})}return t.prototype.read_range_value=function(e,t){var s;return null==t&&(t=!1),_.isEmpty(e())?"":"datetime"===this.range_type?Handshake.Helpers.fromDateTimePicker(e()):"date"===this.range_type?(s=moment.tz(e(),"YYYY-MM-DD",Handshake.passed.current_user_time_zone),t&&(s=s.endOf("day")),s.format()):e()},t.prototype.write_range_value=function(e,t,s){return null==s&&(s=!1),"datetime"===this.range_type&&Handshake.Helpers.isISO8601(t)?e(Handshake.Helpers.toDateTimePicker(t)):"date"===this.range_type&&Handshake.Helpers.isISO8601(t)?e(Handshake.Helpers.toDatePicker(t)):e(t)},t.prototype.is_valid_range_value=function(e){return!!_.isEmpty(e)||("datetime"===this.range_type?Handshake.Helpers.isValidDateTime(e):"date"!==this.range_type||Handshake.Helpers.isValidDate(e))},t.prototype.uncheck=function(){return this.range_start(""),this.range_end("")},t.prototype.triggerChange=function(e){return $(e).trigger("change")},t}(),Handshake.SearchRanges.View=function(){function t(t){this.changed=t,this.all_dates_valid=e(this.all_dates_valid,this),this.useValues=e(this.useValues,this),this.getFilterValues=e(this.getFilterValues,this),this.getValues=e(this.getValues,this),this.setRanges=e(this.setRanges,this),this.reset=e(this.reset,this),this.initWidgets=e(this.initWidgets,this),this.ranges=ko.observableArray([])}return t.prototype.initWidgets=function(e){return $(".datetimepicker",e).each(function(e,t){var s,i;return i={autoclose:!0,format:"yyyy-mm-dd H:ii p",showMeridian:!0},(s=$(t)).hasClass("date-only")&&(i.minView=2,i.maxView=4,i.format="yyyy-mm-dd"),s.datetimepicker(i)}),$(".range-view-dropdown.dropdown-menu li").on("click",function(e){return e.stopPropagation()})},t.prototype.reset=function(){return _.each(this.ranges(),function(e){return e.range_start(""),e.range_end("")})},t.prototype.setRanges=function(e){var t,s,i;if(s=_.map(e,function(e){return""+e.start_id+e.end_id}),t=_.map(this.ranges(),function(e){return""+e.start_id+e.end_id}),0!==_.difference(s,t).length||0!==_.difference(t,s).length)return this.ranges(_.map(e,(i=this,function(e){return new Handshake.SearchRanges.SearchRange(e,i.changed)})))},t.prototype.getValues=function(){var e;return e=[],_.each(this.ranges(),function(t){if(t.iso_formatted_range_start()&&e.push({id:t.start_id,value:t.iso_formatted_range_start()}),t.iso_formatted_range_end())return e.push({id:t.end_id,value:t.iso_formatted_range_end()})}),e},t.prototype.getFilterValues=function(){return _.filter(this.ranges(),function(e){return e.iso_formatted_range_start()||e.iso_formatted_range_end()})},t.prototype.useValues=function(e){return _.each(this.ranges(),function(t){return e[t.start_id]?t.iso_formatted_range_start(e[t.start_id]):t.iso_formatted_range_start(null),e[t.end_id]?t.iso_formatted_range_end(e[t.end_id]):t.iso_formatted_range_end(null)})},t.prototype.all_dates_valid=function(){return 0===_.filter(this.ranges(),function(e){return!(e.valid_range_start()&&e.valid_range_end())}).length},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SearchFulltext={},Handshake.SearchFulltext.QueryFilter=function(){function t(t){this.setInitialValues=e(this.setInitialValues,this),this.inputQueries=e(this.inputQueries,this),this.uncheck=e(this.uncheck,this),this.clearQueries=e(this.clearQueries,this),this.addQuery=e(this.addQuery,this),this.onEnter=e(this.onEnter,this),this.queries=ko.observableArray([]),this.currentQuery=ko.observable(""),this.count=0,this.name=t.name,this.type=t.type,this.premium=t.premium,this.tooltip_type=t.tooltip_type,this.tooltip_message=t.tooltip_message,this.tooltip_message_type=t.tooltip_message_type,this.filterLabel=this.name,this.hidden=t.hidden,this.placeholder=t.placeholder,this.html_safe_type=this.type.replace(/\./g,"-"),this.expanded=ko.observable(!1)}return t.prototype.onEnter=function(e,t){var s,i;return 13!==t.keyCode||0!==this.currentQuery().length&&((s=ko.utils.arrayFirst(this.queries(),(i=this,function(e){return e.searchTerm===i.currentQuery()})))?$("#"+s.id+" a").effect("highlight",{color:"#47b68e"}):this.addQuery(this.currentQuery()),this.currentQuery(""),!1)},t.prototype.addQuery=function(e){return this.queries.push({id:"query-"+this.count,query:e}),this.count++},t.prototype.clearQueries=function(){return this.queries([])},t.prototype.uncheck=function(e){return e instanceof t?e.clearQueries():this.queries.remove(e)},t.prototype.inputQueries=function(){return this.queries().map(function(e){return e.query})},t.prototype.setInitialValues=function(){return this.expanded(this.queries().length>0)},t}(),Handshake.SearchFulltext.View=function(){function t(t){this.changed=t,this.reset=e(this.reset,this),this.useValues=e(this.useValues,this),this.getValues=e(this.getValues,this),this.getFilterValues=e(this.getFilterValues,this),this.setFulltextFilters=e(this.setFulltextFilters,this),this.filters=ko.observableArray([])}return t.prototype.setFulltextFilters=function(e){var t,s;return t=this.filters().map(function(e){return e.type}),e.forEach((s=this,function(e){if(-1===t.indexOf(e.type))return s.filters.push(new Handshake.SearchFulltext.QueryFilter(e))}))},t.prototype.getFilterValues=function(){return _.filter(this.filters(),function(e){return e.queries().length>0})},t.prototype.getValues=function(){var e,t,s,i,n;for(n=[],s=0,i=(t=_.filter(this.filters(),function(e){return e.queries().length>0})).length;s<i;s++)e=t[s],n.push({id:e.type,queries:e.inputQueries()});return n},t.prototype.useValues=function(e){var t,s,i,n,o,r;for(o=[],s=0,i=(n=this.filters()).length;s<i;s++)(t=n[s]).clearQueries(),e[t.type]?(r=e[t.type],_.each(r,function(e){return t.addQuery(e)}),o.push(t.setInitialValues())):o.push(void 0);return o},t.prototype.reset=function(){return _.each(this.filters(),function(e){return e.clearQueries()})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SearchHiddens={},Handshake.SearchHiddens.View=function(){function t(){this.allFilters=e(this.allFilters,this),this.hasSelectedHiddenFilters=e(this.hasSelectedHiddenFilters,this),this.hasHiddenFilters=e(this.hasHiddenFilters,this),this.toggleAdditionalFilters=e(this.toggleAdditionalFilters,this),this.initializeView=e(this.initializeView,this),this.hiddenView=$("#hidden-view"),this.hiddenFilters=$("#searchable-hidden-filters"),this.baseText=this.hiddenView.data("toggle-text")||"additional filters",this.additionalFiltersText=ko.observable("Show "+this.baseText)}return t.prototype.initializeView=function(e,t){if(this.hasHiddenFilters(e.filter_views)&&(this.hiddenView.show(),this.hasSelectedHiddenFilters(e.filter_views,t)))return this.hiddenFilters.show(),this.additionalFiltersText("Hide "+this.baseText)},t.prototype.toggleAdditionalFilters=function(){return this.hiddenFilters.is(":visible")?(this.hiddenFilters.slideUp(),this.additionalFiltersText("Show "+this.baseText)):(this.hiddenFilters.slideDown(),this.additionalFiltersText("Hide "+this.baseText))},t.prototype.hasHiddenFilters=function(e){return _(this.allFilters(e)).some(function(e){return e.hidden})},t.prototype.hasSelectedHiddenFilters=function(e,t){return _(this.allFilters(e)).some(function(e){return e.hidden&&t[e.type]})},t.prototype.allFilters=function(e){return[].concat(e.filter_views,e.booleans,e.range_views,e.fulltext_views)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.SearchLocations={},Handshake.SearchLocations.SearchLocation=function(){function t(t,s,i,n){var o,r;this.destroyFunction=n,this.uncheck=e(this.uncheck,this),this.point=ko.observable(t),this.distance=ko.observable(s),this.label=ko.observable(i),this.filterLabel=this.label,this.display=ko.computed((o=this,function(){return"state"===o.distance()||"country"===o.distance()?o.label():o.label()+": "+o.distance()+" miles"})),this.computedDistance=ko.computed((r=this,function(){return r.distance()+"mi"}))}return t.prototype.uncheck=function(){return this.destroyFunction(this)},t}(),Handshake.SearchLocations.View=function(){function t(t){this.changeCallback=t,this.useValues=e(this.useValues,this),this.initWidgets=e(this.initWidgets,this),this.getFilterValues=e(this.getFilterValues,this),this.reset=e(this.reset,this),this.getValues=e(this.getValues,this),this.removeLocation=e(this.removeLocation,this),this.setLocation=e(this.setLocation,this),this.distanceAdjusted=e(this.distanceAdjusted,this),this.mapboxCallback=e(this.mapboxCallback,this),this.locationDestroyed=e(this.locationDestroyed,this),this.locations=ko.observableArray([]),this.title=ko.observable("Location"),this.premium=ko.observable(!1),this.point="",this.distance="",$(".location-view-dropdown.dropdown-menu li").on("click",function(e){return e.stopPropagation()})}return t.prototype.locationDestroyed=function(e){return this.locations.remove(e)},t.prototype.mapboxCallback=function(e){if(this.input=$("#location-search-autocomplete"),e&&!_.filter(this.locations(),function(t){return t.label()===e.name}).length){if(_.contains(e.types,"region")&&null!=e.state)this.point=e.state,this.distance="state";else if(_.contains(e.types,"country")&&null!=e.country)this.point=e.country,this.distance="country";else{if(!e.latitude||!e.longitude)return void Handshake.Helpers.notifyError("Please select a location from the list of suggestions.");this.point=e.latitude+", "+e.longitude,this.distance=50}return this.locations.unshift(new Handshake.SearchLocations.SearchLocation(this.point,this.distance,e.name,this.locationDestroyed)),setTimeout((t=this,function(){return t.input.val("")}),0);var t}},t.prototype.distanceAdjusted=function(){return this.changeCallback()},t.prototype.setLocation=function(e){if(e.title&&this.title(e.title),e.premium)return this.premium(!0)},t.prototype.removeLocation=function(e){return this.locations.remove(e)},t.prototype.getValues=function(){var e;return e=[],_.each(this.locations(),function(t){var s;return s="state"===t.distance()||"country"===t.distance()?t.distance():t.computedDistance(),e.push({point:t.point(),distance:s,label:t.label()})}),e},t.prototype.reset=function(){return this.locations.removeAll()},t.prototype.getFilterValues=function(){return this.locations().length?this.locations():[]},t.prototype.initWidgets=function(){return $(".location-view-dropdown.dropdown-menu li").on("click",function(e){return e.stopPropagation()})},t.prototype.useValues=function(e){var t,s,i;if(this.reset(),e)return s=[],t=[],_.each(_.keys(e),function(i){var n,o,r;if(-1!==i.indexOf("locations")&&(r=/locations\[([0-9])+\]/g.exec(i))&&(o=r[1],-1===t.indexOf(o)))return"state"!==(n=e["locations["+o+"][distance]"])&&"country"!==n&&(n=n.slice(0,-2)),s.push({point:e["locations["+o+"][point]"],distance:n,label:e["locations["+o+"][label]"]}),t.push(o)}),this.locations(_.map(s,(i=this,function(e){return new Handshake.SearchLocations.SearchLocation(e.point,e.distance,e.label,i.locationDestroyed)})))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Handshake.Searchable=function(){function t(t,s,i,n){var o,r,a,c,l,u,h,d,p,m,f,b,y,v,g;this.form=t,this.controller=s,this.searchCallback=i,this.domContext=n,this.filter_view_typeahead_options=e(this.filter_view_typeahead_options,this),this.getIdToLabelObject=e(this.getIdToLabelObject,this),this.ajax_download_results=e(this.ajax_download_results,this),this.performBulkAction=e(this.performBulkAction,this),this.onEnter=e(this.onEnter,this),this.cancelBulkAction=e(this.cancelBulkAction,this),this.bulk_action_hide_confirm_modal=e(this.bulk_action_hide_confirm_modal,this),this.confirmBulkAction=e(this.confirmBulkAction,this),this.itemCountConfirmed=e(this.itemCountConfirmed,this),this.selectBulkAction=e(this.selectBulkAction,this),this.unselectAll=e(this.unselectAll,this),this.current_result_ids=e(this.current_result_ids,this),this.toggle_checkbox=e(this.toggle_checkbox,this),this.item_checked=e(this.item_checked,this),this.toggle_checking_all_pages=e(this.toggle_checking_all_pages,this),this.uncheck_all_pages=e(this.uncheck_all_pages,this),this.check_all_pages=e(this.check_all_pages,this),this.bulkToggleChecks=e(this.bulkToggleChecks,this),this.toggleShowSavedSearches=e(this.toggleShowSavedSearches,this),this.saveCurrentSearch=e(this.saveCurrentSearch,this),this.getSavedSearch=e(this.getSavedSearch,this),this.getCurrentSearch=e(this.getCurrentSearch,this),this.initialSetup=e(this.initialSetup,this),this.resetToDefaults=e(this.resetToDefaults,this),this.reset=e(this.reset,this),this.clear=e(this.clear,this),this.fetchFacetDetails=e(this.fetchFacetDetails,this),this.performSearch=e(this.performSearch,this),this.performExternalParamsSearch=e(this.performExternalParamsSearch,this),this.performSearchFromUrl=e(this.performSearchFromUrl,this),this.performSearchFromSavedSearchInReact=e(this.performSearchFromSavedSearchInReact,this),this.performSearchFromSavedSearch=e(this.performSearchFromSavedSearch,this),this.performSearchFromQuickFilters=e(this.performSearchFromQuickFilters,this),this.performSearchFromInterface=e(this.performSearchFromInterface,this),this.linkToDownloadDocument=e(this.linkToDownloadDocument,this),this.hideJumpToPagePopover=e(this.hideJumpToPagePopover,this),this.jumpToPage=e(this.jumpToPage,this),this.jumpToPagePopoverKeypress=e(this.jumpToPagePopoverKeypress,this),this.focusJumpToPageInput=e(this.focusJumpToPageInput,this),this.infiniteScrollNextPage=e(this.infiniteScrollNextPage,this),this.nextPageClick=e(this.nextPageClick,this),this.previousPageClick=e(this.previousPageClick,this),this.savedSearchSelected=e(this.savedSearchSelected,this),this.resetQuery=e(this.resetQuery,this),this.qualifiedOnlyClick=e(this.qualifiedOnlyClick,this),this.followedOnlyClick=e(this.followedOnlyClick,this),this.coreSchoolsOnlyClick=e(this.coreSchoolsOnlyClick,this),this.setSortOption=e(this.setSortOption,this),this.simpleChangeWithPageReset=e(this.simpleChangeWithPageReset,this),this.locationDistanceAdjusted=e(this.locationDistanceAdjusted,this),this.queryChange=e(this.queryChange,this),this.categoryChanged=e(this.categoryChanged,this),this.getSearchParamsFromSavedSearch=e(this.getSearchParamsFromSavedSearch,this),this.getSearchParamsFromInterface=e(this.getSearchParamsFromInterface,this),this.getSearchParamsFromUrl=e(this.getSearchParamsFromUrl,this),this.addExternalParam=e(this.addExternalParam,this),this.toggle_checking_all_pages_text=e(this.toggle_checking_all_pages_text,this),this.checked_ids_text=e(this.checked_ids_text,this),this.requestCount=ko.observable(0),this.searchTimer=null,this.conductingSearch=ko.observable(!1),this.firstSearch=ko.observable(!0),this.currentResult=ko.observableArray().trackHasItems(),this.followedOnly=ko.observable(!1),this.coreSchoolsOnly=ko.observable(!1),this.qualifiedOnly=ko.observable(null),this.queryString=ko.observable(null),this.including_all_facets_in_searches=ko.observable(!1),"true"===getUrlParams().including_all_facets_in_searches&&this.including_all_facets_in_searches(!0),this.ignoreInterfaceChanges=ko.observable(!0),this.performingBackButtonPress=ko.observable(!1),this.pushHistoryOnSearchPerformed=ko.observable(!0),this.defaultParams=ko.observable({}),this.searchParams=ko.observable({}),this.facetDetails=ko.observable({}),this.query=ko.observable(""),this.showPagination=ko.observable(!0),this.showPerPageOption=ko.observable(!1),this.currentPage=ko.observable(1),this.totalPages=ko.observable(1),this.totalResults=ko.observable(0),this.perPage=ko.observable(25),this.perPageOptions=ko.observableArray([25,50,100]),this.pageText=ko.computed((o=this,function(){return null!=o.currentPage()&&null!=o.totalPages()?o.currentPage()+"/"+o.totalPages():"N/A"})),this.showPaginationControls=ko.computed((r=this,function(){return r.totalPages()>1||25!==r.perPage()})),this.searchIsFromInterface=ko.observable(!1),this.category=ko.observable(""),this.filter_view_search_url=ko.observable("/multi_search/filters.json"),this.fetch_filter_views_url=ko.observable("/multi_search/filter_views.json"),this.checked_ids=ko.observableArray([]),this.all_current_results_checked=ko.computed((a=this,function(){return!a.currentResult.isLoading()&&(a.all_pages_checked()||_.intersection(a.current_result_ids(),a.checked_ids()).length===a.currentResult().length)})),this.checked_results=ko.observableArray([]),this.checked_ids.subscribe((c=this,function(e){var t,s,i,n,o;for(o=[],i=0,n=e.length;i<n;i++)"added"===(t=e[i]).status?(s=_.find(c.currentResult(),function(e){return e.id===t.value}),o.push(c.checked_results.push(s))):o.push(c.checked_results.remove(function(e){return e.id===t.value}));return o}),null,"arrayChange"),this.show_select_all_options=ko.observable(!1),this.all_pages_checked=ko.observable(!1),this.cached_checked_ids=ko.observableArray([]),this.currentResult.subscribe((l=this,function(){if(l.show_select_all_options(!1),l.all_pages_checked())return l.uncheck_all_pages()})),this.all_current_results_checked.subscribe((u=this,function(e){if(!u.all_pages_checked())return u.show_select_all_options(e)})),this.item_name=ko.computed((h=this,function(){switch(h.category()){case"JobPostings":case"UniversityPostings":case"EmployerPostings":return"job";case"UniversityApplications":return"student";case"ManageInterviewSchedules":case"UniversityManageInterviewSchedules":case"StudentInterviewSchedule":return"interview";case"UniversityManageStudents":case"Experience":case"SearchStudents":case"UniversitySearchStudents":return"student";case"Article":return"resource";case"ManageEvents":case"UniversityManageEvents":return"event";case"EmployerApproval":return"employer";case"Contact":case"UniversityContact":return"contact";case"ManageMentors":return"mentor";case"CareerFair":return"career fair";case"ManageLabels":case"UniversityManageLabels":return"institution_label";default:return"item"}})),this.bulkActions=ko.observableArray([]),this.currentBulkActions=ko.computed((d=this,function(){return ko.utils.arrayFilter(d.bulkActions(),function(e){return!e.category||e.category===d.category()})})),this.keyBulkActions=ko.computed((p=this,function(){return ko.utils.arrayFilter(p.currentBulkActions(),function(e){return e.key_action})})),this.moreBulkActions=ko.computed((m=this,function(){return ko.utils.arrayFilter(m.currentBulkActions(),function(e){return!e.key_action})})),this.selectedBulkAction=ko.observable({label:"Confirm Bulk Action"}),this.confirmBulkActionData=ko.observable(),this.itemCountConfirmation=ko.observable(null),this.ajax_download_view=new Handshake.Downloads.AjaxBulkDownloadView,this.sortingInfo=new Handshake.Searchable.SortingInfo,this.performingSavedSearchSearch=ko.observable(!1),this.show_saved_searches=ko.observable(!1),$("#saved-searches",this.domContext).length>0&&(this.savedSearchView=new Handshake.SavedSearches.View($("#saved-searches",this.domContext),this.controller,this.savedSearchSelected,this.domContext)),$("#search-categories",this.domContext).length>0&&(this.searchCategoriesView=new Handshake.SearchCategories.View($("#search-categories",this.domContext),this.categoryChanged,this.category)),$(".filter-view",this.domContext).length>0&&(this.filterView=new Handshake.FilterView(this,this.domContext)),
$(".fulltext-view",this.domContext).length>0&&(this.fulltextView=new Handshake.SearchFulltext.View),$(".boolean-view",this.domContext).length>0&&(this.booleanView=new Handshake.SearchBooleans.View),$(".ranges-view",this.domContext).length>0&&(this.rangeView=new Handshake.SearchRanges.View),$("#location-view",this.domContext).length>0&&(this.locationView=new Handshake.SearchLocations.View(this.locationDistanceAdjusted)),$("#bulk-label-modal",this.domContext).length>0&&(this.bulkLabelModal=new Handshake.Labels.BulkLabelModal(this)),$("#bulk-message-panel",this.domContext).length>0&&(this.bulk_message_panel=new Handshake.BulkMessagePanel(this)),$("#bulk-update-roles-modal",this.domContext).length>0&&(this.bulkUpdateRolesModal=new Handshake.EmployerApprovals.BulkUpdateRolesModal(this)),$("#hidden-view",this.domContext).length>0&&(this.hiddenView=new Handshake.SearchHiddens.View),this.pagination_options={html:!0,content:(f=this,function(){var e;return(e=$("#jump-to-page-popover-template",f.domContext).clone(!0).removeClass("hidden")).find("input").addClass("jump-to-page"),e})},this.cachedSearchParams={},this.allSelectedValues=ko.computed((b=this,function(){var e,t,s,i,n,o,r,a;return a=[],b.filterView&&(a=a.concat(b.filterView.getValues())),b.booleanView&&(a=a.concat(b.booleanView.getFilterValues())),b.rangeView&&(a=a.concat(b.rangeView.getFilterValues())),b.locationView&&(a=a.concat(b.locationView.getFilterValues())),b.fulltextView&&(a=a.concat(b.fulltextView.getFilterValues())),s=_.extend({},b.getSearchParamsFromInterface()),delete(e=_.extend({},b.cachedSearchParams)).ajax,delete e.query,delete s.query,delete e.page,delete s.page,delete e.per_page,delete s.per_page,delete e.sort_direction,delete s.sort_direction,delete e.sort_column,delete s.sort_column,delete e.followed_only,delete s.followed_only,delete e.core_schools_only,delete s.core_schools_only,delete e.category,delete s.category,delete e.including_all_facets_in_searches,delete s.including_all_facets_in_searches,_.each(b.external_params,function(t,i){return delete e[i],delete s[i]}),r=function(e){return"number"==typeof e?String(e):e},o=function(e,t){var s;return s=_.extend({},e),_.each(e,function(e,t){if(_.isArray(e))return s[t]=e.sort().map(r)}),JSON.stringify(e,t)},n=_.union(Object.keys(s),Object.keys(e)),i=o(s,n),t=o(e,n),_.isEqual(i,t)||b.ignoreInterfaceChanges()||b.simpleChangeWithPageReset(),a})).extend({rateLimit:50}),this.pagination_text=ko.computed((y=this,function(){return y.currentResult.isLoading()?"":"Showing "+y.currentResult().length+" of "+y.totalResults()+" matching jobs"})),this.pagination_students=ko.computed((v=this,function(){return v.currentResult.isLoading()?"":Handshake.Helpers.numberWithCommas(parseFloat(v.totalResults()))+" Students Found"})),this.has_taggable_filters=ko.computed((g=this,function(){return g.allSelectedValues().length||g.query()||g.qualifiedOnly()})),this.external_params={},this.bulk_action_external_params=[],this.paginating=!1}return t.prototype.checked_ids_text=function(e){var t,s,i;return null==e&&(e=!1),i=Handshake.Helpers.numberWithCommas(this.totalResults()),e||(s=i+" "+Handshake.Helpers.pluralizeString(this.item_name(),this.totalResults(),"s")),this.all_pages_checked()?e?i+" of "+i:i+" of "+s+" selected":(t=Handshake.Helpers.numberWithCommas(this.checked_ids().length),e?t+" of "+i:t+" of "+s+" selected")},t.prototype.toggle_checking_all_pages_text=function(e){return null==e&&(e=!1),this.all_pages_checked()?e?"Clear":"Clear selection":"Select all"},t.prototype.addExternalParam=function(e,t,s){if(null==s&&(s={}),this.external_params[e]=t,s.include_in_bulk_actions)return this.bulk_action_external_params.push(e)},t.prototype.getSearchParamsFromUrl=function(){var e;return delete(e=getUrlParams()).utf8,_.each(_.keys(e),function(t){if(e[t]||delete e[t],"true"===e[t]||"false"===e[t])return e[t]=Boolean("true"===e[t])}),e},t.prototype.getSearchParamsFromInterface=function(){var e,t;return(e={}).query=this.query(),e.category=this.category(),e.page=this.currentPage(),e.per_page=this.perPage(),$.extend(e,this.sortingInfo.sortParams()),e.followed_only=this.followedOnly(),e.qualified_only=this.qualifiedOnly(),e.core_schools_only=this.coreSchoolsOnly(),e.including_all_facets_in_searches=this.including_all_facets_in_searches(),_.each(this.external_params,function(t,s){return e[s]=t()}),t=this.getSavedSearch(),_.extend(e,t.toKeyBasedParams()),e},t.prototype.getSearchParamsFromSavedSearch=function(e){var t;return(t={}).category=this.category(),t.query=e.query(),t.page=1,t.per_page=this.perPage(),t.followed_only=!1,t.core_schools_only=!1,e.sort_direction()&&(t.sort_direction=e.sort_direction()),e.sort_column()&&(t.sort_column=e.sort_column()),t.qualified_only=e.qualified_only(),_.extend(t,e.toKeyBasedParams()),t},t.prototype.categoryChanged=function(){return this.query(""),this.currentPage(1),this.ignoreInterfaceChanges(!0),this.performSearchFromInterface({changingSearchCategoryForSavedSearch:!1})},t.prototype.queryChange=function(){if(this.setupFinished)return this.currentPage(1),this.ignoreInterfaceChanges(!0),this.performSearchFromInterface()},t.prototype.locationDistanceAdjusted=function(){if(this.setupFinished)return this.currentPage(1),this.ignoreInterfaceChanges(!0),this.performSearchFromInterface()},t.prototype.simpleChangeWithPageReset=function(){if(this.setupFinished&&!this.performingSavedSearchSearch())return this.currentPage(1),this.performSearchFromInterface()},t.prototype.setSortOption=function(e,t){if(null==t&&(t=!0),t&&this.ignoreInterfaceChanges(!0),this.sortingInfo.sortBy(e.field,e.sort_direction),t)return this.performSearchFromInterface()},t.prototype.coreSchoolsOnlyClick=function(e){return null==e&&(e=null),this.currentPage(1),this.ignoreInterfaceChanges(!0),"boolean"==typeof e?this.coreSchoolsOnly(e):this.coreSchoolsOnly(!this.coreSchoolsOnly()),this.performSearchFromInterface()},t.prototype.followedOnlyClick=function(e){return this.currentPage(1),this.ignoreInterfaceChanges(!0),"boolean"==typeof e?this.followedOnly(e):this.followedOnly(!this.followedOnly()),this.performSearchFromInterface()},t.prototype.qualifiedOnlyClick=function(e){return this.currentPage(1),this.ignoreInterfaceChanges(!0),this.qualifiedOnly(e),this.performSearchFromInterface()},t.prototype.resetQuery=function(){return this.ignoreInterfaceChanges(!0),this.query(""),this.performSearchFromInterface()},t.prototype.savedSearchSelected=function(e){return this.performSearchFromSavedSearch(e)},t.prototype.previousPageClick=function(){if(1!==this.currentPage())return this.hideJumpToPagePopover(),this.conductingSearch()?void 0:(this.ignoreInterfaceChanges(!0),this.currentPage(this.currentPage()-1),this.scrollToTop(),this.performSearchFromInterface(),this.paginating=!0)},t.prototype.nextPageClick=function(){if(this.currentPage()!==this.totalPages()&&0!==this.totalPages)return this.hideJumpToPagePopover(),this.conductingSearch()?void 0:(this.ignoreInterfaceChanges(!0),this.currentPage(this.currentPage()+1),this.scrollToTop(),this.performSearchFromInterface(),this.paginating=!0)},t.prototype.infiniteScrollNextPage=function(){var e;if(this.currentPage()!==this.totalPages()&&0!==this.totalPages)return this.conductingSearch()?void 0:(this.infiniteScrolling=!0,Handshake.operations.add_worker(),this.ignoreInterfaceChanges(!0),this.currentPage(this.currentPage()+1),this.performSearchFromInterface().always((e=this,function(){return e.infiniteScrolling=!1,Handshake.operations.remove_worker()})))},t.prototype.focusJumpToPageInput=function(){return $(".jump-to-page",this.domContext).focus()},t.prototype.jumpToPagePopoverKeypress=function(e,t){return 13!==t.keyCode||(this.jumpToPage(),!1)},t.prototype.jumpToPage=function(){var e;if(0!==this.totalPages())return this.conductingSearch()?Handshake.Helpers.notifyError("Please wait until the current search finishes."):(e=parseInt($(".jump-to-page",this.domContext).val()))!=e?void Handshake.Helpers.notifyError("Page must be a number."):(e>this.totalPages()&&(e=this.totalPages()),e<1&&(e=1),this.ignoreInterfaceChanges(!0),this.hideJumpToPagePopover(),this.currentPage(e),this.scrollToTop(),this.performSearchFromInterface(),this.paginating=!0)},t.prototype.hideJumpToPagePopover=function(){return $("#jump-to-page-popover",this.domContext).popover("hide")},t.prototype.linkToDownloadDocument=function(e){return"/documents/"+e+"/download"},t.prototype.scrollToTop=function(){return $("html,body").animate({scrollTop:$(".search_wrapper").offset().top},"200","swing")},t.prototype.performSearchFromInterface=function(e){return this.searchIsFromInterface(!0),this.searchParams(this.getSearchParamsFromInterface()),this.performSearch(e)},t.prototype.performSearchFromQuickFilters=function(e){return this.searchIsFromInterface(!0),this.ignoreInterfaceChanges(!0),this.searchParams(e),this.performSearch()},t.prototype.performSearchFromSavedSearch=function(e,t){return this.searchIsFromInterface(!1),this.performingSavedSearchSearch(!0),this.searchParams(this.getSearchParamsFromSavedSearch(e)),this.performSearch(t)},t.prototype.performSearchFromSavedSearchInReact=function(e){var t;return t=new Handshake.SavedSearches.SavedSearch(e),this.performSearchFromSavedSearch(t)},t.prototype.performSearchFromUrl=function(e){return this.searchParams(this.getSearchParamsFromUrl()),this.ignoreInterfaceChanges(!0),this.performSearch(e)},t.prototype.performExternalParamsSearch=function(e){return this.currentPage(1),this.ignoreInterfaceChanges(!0),this.performSearchFromInterface(e)},t.prototype.performSearch=function(e){var t,s,i,n,o,r,a;if(null==e&&(e={}),this.show_saved_searches(!1),n=this.searchParams(),e.search_params&&_.extend(n,e.search_params),n.query&&n.query.length>100)Handshake.Helpers.notifyError("Please specify a search with fewer characters.");else{var c,l,u;if(!this.rangeView||this.rangeView.all_dates_valid())return t=this.form.attr("action"),i=0===(o=$.param(n)).length?"":"&",this.queryString("?ajax=true"+i+o),r=t+this.queryString(),this.requestCount(this.requestCount()+1),s=this.requestCount(),a=(a=!this.performingBackButtonPress()&&this.setupFinished&&!e.changingSearchCategoryForSavedSearch)||e.force_history,this.conductingSearch(!0),this.currentResult.clear(),Handshake.operations.add_worker(),null!=n.category&&this.category(n.category),null!=n.query&&this.query(n.query),null!=n.page&&this.currentPage(n.page),null!=n.per_page&&this.perPage(n.per_page),this.sortingInfo.setFromParams(n),null!=n.followed_only&&this.followedOnly(Boolean(n.followed_only)),null!=n.core_schools_only&&this.coreSchoolsOnly(Boolean(n.core_schools_only)),void 0!==n.qualified_only&&this.qualifiedOnly(n.qualified_only),_.each(this.external_params,function(e,t){if(null!=n[t])return e(n[t])}),this.cachedSearchParams=this.searchParams(),this.xhr=$.ajax({url:r,type:"GET",dataType:"json",success:(u=this,function(t){var i;return u.requestCount()!==s?console.log("Dropping search response as it is not latest"):(u.searchCallback(t),null!=t.results?u.currentResult(t.results):Array.isArray(t)?u.currentResult(t):"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&(bugsnagClient.notify({errorClass:"UnprocessableValueError",errorMessage:"Unknown result format from a search page",metaData:{results:t}}),u.currentResult([])),u.currentPage(t.current_page),u.totalPages(t.total_pages),u.totalResults(t.total),t.filter_views&&(u.filterView&&(i=t.filter_views.filter_views?t.filter_views.filter_views:[],u.filterView.setFilterViews(i,e.changingSearchCategoryForSavedSearch,e.safeFilterChange)),u.booleanView&&u.booleanView.setBooleans(t.filter_views.booleans?t.filter_views.booleans:[]),u.rangeView&&u.rangeView.setRanges(t.filter_views.range_views?t.filter_views.range_views:[]),u.locationView&&u.locationView.setLocation(t.filter_views.location_view?t.filter_views.location_view:{}),u.fulltextView&&u.fulltextView.setFulltextFilters(t.filter_views.fulltext_views?t.filter_views.fulltext_views:[]),u.filterView&&u.filterView.useValues(u.searchParams()),u.booleanView&&u.booleanView.useValues(u.searchParams()),u.rangeView&&u.rangeView.useValues(u.searchParams()),u.locationView&&u.locationView.useValues(u.searchParams()),u.fulltextView&&u.fulltextView.useValues(u.searchParams()),u.hiddenView&&u.hiddenView.initializeView(t,u.searchParams())),history.pushState&&a&&u.pushHistoryOnSearchPerformed()&&history.pushState({turbolinks:!0,url:r},document.title,r),u.setupFinished=!0,u.paginating?void 0:u.uncheck_all_pages())}),error:(l=this,function(e){var s;return s="An error occurred while performing this search. Please try again.",414===e.status&&"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify("URI Too Long for search on "+t),400===e.status&&(s=e.responseJSON.errors),Handshake.Helpers.notifyError(s),l.currentResult.markAsFinishedLoading()}),complete:(c=this,function(){return c.paginating=!1,c.conductingSearch(!1),c.performingSavedSearchSearch(!1),c.firstSearch(!1),c.ignoreInterfaceChanges(!1),Handshake.operations.remove_worker()})}),this.xhr;Handshake.Helpers.notifyError("Please enter a valid date range.")}},t.prototype.fetchFacetDetails=function(e,t){return!e&&this.searchParams()&&((e=this.searchParams()).category=this.category()),$.getJSON("/search/facet_details.json",e,(s=this,function(e){if(s.facetDetails(e),t)return t(e)}));var s},t.prototype.clear=function(){return this.searchParams({}),this.performSearch()},t.prototype.reset=function(){if(this.has_taggable_filters())return this.query(""),this.qualifiedOnly(null),this.filterView.uncheckAll(),this.booleanView&&this.booleanView.reset(),this.rangeView&&this.rangeView.reset(),this.locationView&&this.locationView.reset(),this.fulltextView&&this.fulltextView.reset(),this.performSearchFromInterface()},t.prototype.resetToDefaults=function(){return this.ignoreInterfaceChanges(!0),this.query(""),this.searchParams(this.defaultParams()),this.performSearch()},t.prototype.initialSetup=function(e,t){var s,i,n,o;return null==t&&(t=null),i={},n=this.getSearchParamsFromUrl(),e||(e=n.category),!e&&this.searchCategoriesView&&(e||(e=this.searchCategoriesView.categories()[0].id)),this.category(e),i.category||(i.category=this.category()),i.including_all_facets_in_searches||(i.including_all_facets_in_searches=this.including_all_facets_in_searches()),s=Handshake.passed.default_searches&&Handshake.passed.default_searches[this.controller]&&Handshake.Helpers.canUseDefaultSavedSearch()?new Handshake.SavedSearches.SavedSearch(Handshake.passed.default_searches[this.controller]):null,this.sortingInfo.setDefaultSort(),$.extend(i,this.sortingInfo.sortParams()),i.qualified_only=this.qualifiedOnly(),i.per_page=this.perPage(),this.perPage.subscribe((o=this,function(){if(!o.conductingSearch())return o.ignoreInterfaceChanges(!0),o.scrollToTop(),o.performSearchFromInterface()})),t?_.extend(i,this.getSearchParamsFromSavedSearch(t)):(_.extend(i,this.defaultParams()),s&&_.extend(i,this.getSearchParamsFromSavedSearch(s)),n&&_.extend(i,n)),_.each(this.external_params,function(e,t){return i[t]=e()}),this.searchParams(i),this.performSearch()},t.prototype.getCurrentSearch=function(){var e;return(e={}).query=this.query(),this.searchCategoriesView&&(e.category=this.category()),$.extend(e,this.sortingInfo.sortParams()),this.filterView&&(e.values=this.filterView.getValues()),this.booleanView&&(e.booleans=this.booleanView.getValues()),this.rangeView&&(e.ranges=this.rangeView.getValues()),this.locationView&&(e.locations_hstore=this.locationView.getValues()),this.fulltextView&&(e.fulltext_queries=this.fulltextView.getValues()),e.qualified_only=this.qualifiedOnly(),e},t.prototype.getSavedSearch=function(){var e;return(e=this.getCurrentSearch()).name=$(".new-name",this.domContext).val(),e.description=$(".new-description",this.domContext).val(),new Handshake.SavedSearches.SavedSearch(e)},t.prototype.saveCurrentSearch=function(){var e;if(""!==(e=this.getSavedSearch()).name())return this.savedSearchView.createSavedSearch(e)},t.prototype.toggleShowSavedSearches=function(){return this.show_saved_searches(!this.show_saved_searches())},t.prototype.bulkToggleChecks=function(){return this.all_pages_checked()?this.uncheck_all_pages():this.all_current_results_checked()?this.checked_ids(_.difference(this.checked_ids(),this.current_result_ids())):this.checked_ids(_.union(this.checked_ids(),this.current_result_ids())),!0},t.prototype.check_all_pages=function(){return this.all_pages_checked(!0),this.cached_checked_ids(this.checked_ids()),this.checked_ids([])},t.prototype.uncheck_all_pages=function(e){return null==e&&(e=[]),this.checked_ids(e),this.all_pages_checked(!1)},t.prototype.toggle_checking_all_pages=function(){return this.all_pages_checked()?this.uncheck_all_pages():this.check_all_pages()},t.prototype.item_checked=function(e){return this.all_pages_checked()||_.contains(this.checked_ids(),e)},t.prototype.toggle_checkbox=function(e){return this.all_pages_checked()&&this.uncheck_all_pages(this.cached_checked_ids()),_.contains(this.checked_ids(),e)?this.checked_ids.remove(function(t){return t===e}):this.checked_ids.push(e)},t.prototype.current_result_ids=function(){return _.map(this.currentResult(),function(e){return e.id})},t.prototype.unselectAll=function(){return this.checked_ids([])},t.prototype.selectBulkAction=function(e){if(this.selectedBulkAction(e),this.selectedBulkAction().confirmed=!1,!this.selectedBulkAction().select_action||this.selectedBulkAction().select_action())return this.performBulkAction()},t.prototype.itemCountConfirmed=function(){return null==this.confirmBulkActionData().confirmation_count||(this.itemCountConfirmation()?parseInt(this.itemCountConfirmation(),10)===this.confirmBulkActionData().confirmation_count||Handshake.Helpers.notifyError("The number you've entered does not match the number of items selected."):Handshake.Helpers.notifyError("Please confirm the number of items selected."))},t.prototype.confirmBulkAction=function(){if(this.itemCountConfirmed())return this.itemCountConfirmation(null),this.selectedBulkAction().confirmed=!0,!this.selectedBulkAction().confirm_action||this.selectedBulkAction().confirm_action()?this.performBulkAction():void 0},t.prototype.bulk_action_hide_confirm_modal=function(){return $("#confirm-bulk-action-modal",this.domContext).modal("hide")},t.prototype.cancelBulkAction=function(){if(this.bulk_action_hide_confirm_modal(),this.selectedBulkAction().cancel_action)return this.selectedBulkAction().cancel_action()},t.prototype.onEnter=function(e,t){return 13!==t.keyCode||(this.confirmBulkAction(e),!1)},t.prototype.performBulkAction=function(e,t){var s,i,n,o,r,a,c,l,u,h,d;return null==e&&(e={}),null==t&&(t=["ids"]),this.bulk_action_hide_confirm_modal(),this.checked_ids().length>0?(n={ids:this.checked_ids()},(this.booleanView||this.filterView||this.rangeView)&&(s=null!=(r=this.booleanView)?r.getValues():void 0,i=null!=(a=this.filterView)?a.getValues():void 0,o=null!=(c=this.rangeView)?c.getValues():void 0,l=new Handshake.SavedSearches.SavedSearch({booleans:s,values:i,ranges:o}),_.extend(n,l.toKeyBasedParams())),_(this.bulk_action_external_params).each((u=this,function(e){return n[e]=u.external_params[e]()}))):n=this.searchParams(),n.bulk_action=this.selectedBulkAction().bulk_action,n.confirmed=this.selectedBulkAction().confirmed,n.category=this.category(),n.context=window.location.pathname,n.extra_data=_.extend({},this.selectedBulkAction().extra_data,e),Handshake.operations.add_worker(),$.ajax({url:"/bulk_actions/perform?ajax=true&"+$.param(_.omit(n,t)),type:"POST",data:JSON.stringify(n),contentType:"application/json",dataType:"json",success:(d=this,function(e){return e.success?(_.isFunction(d.selectedBulkAction().hide_modal)&&d.selectedBulkAction().hide_modal(),d.selectedBulkAction().confirmed?d.selectedBulkAction().success(e):(d.confirmBulkActionData(e),$("#confirm-bulk-action-modal",d.domContext).modal("show"))):_.isFunction(d.selectedBulkAction().failure)?d.selectedBulkAction().failure(e):Handshake.Helpers.notifyError(e.error)}),error:(h=this,function(e){return 414===e.status&&"undefined"!=typeof bugsnagClient&&null!==bugsnagClient&&bugsnagClient.notify("URI Too Long for bulk action on "+h.selectedBulkAction().bulk_action),422===e.status?Handshake.Helpers.notifyError("You do not have permission to perform this bulk action."):Handshake.Helpers.notifyError("An error occurred while performing this bulk action. Please try again.")}),complete:function(){return Handshake.operations.remove_worker()}})},t.prototype.ajax_download_results=function(e,t,s){var i,n,o,r;return null==s&&(s={}),s.current_user_id=Handshake.passed.current_user_id,this.checked_ids().length>0?o="ids="+this.checked_ids().join(","):(i=this.searchParams(),this.query()&&(i.query=this.query()),o=$.param(i)),this.ajax_download_path?r=this.ajax_download_path+"?"+o:((n=document.createElement("a")).href=this.form.attr("action"),r=n.pathname+"/csv_download.json",n.search?r+=n.search+"&"+o:r+="?"+o),this.ajax_download_view.download_results(r,s)},t.prototype.getIdToLabelObject=function(){var e;return e={},this.filterView&&_.each(this.filterView.filterSections(),function(t){return e[t.type]=t.name}),this.booleanView&&_.each(this.booleanView.booleans(),function(t){return e[t.id]=t.name}),this.rangeView&&_.each(this.rangeView.ranges(),function(t){return e[t.start_id]=t.name,e[t.end_id]=t.name}),this.fulltextView&&_.each(this.fulltextView.filters(),function(t){return e[t.type]=t.name}),e},t.prototype.filter_view_typeahead_options=function(e){return{displayKey:"name",onChange:this.filterView.typeaheadOptionChosen,params:this.filterView.typeaheadQueryParams(e),path:this.filter_view_search_url()}},t}(),Handshake.Searchable.InfiniteScrollFeedback=function(){function e(e){var t,s;this.vm=e,this.vm.searching=ko.computed((t=this,function(){return t.vm.searchable.conductingSearch()})),this.vm.on_last_page=ko.computed((s=this,function(){return s.vm.searchable.currentPage()===s.vm.searchable.totalPages()}))}return e}(),Handshake.Searchable.SortingInfo=function(){function t(){this.setFromParams=e(this.setFromParams,this),this.sortParams=e(this.sortParams,this),this.primarySortDirection=e(this.primarySortDirection,this),this.primarySortColumn=e(this.primarySortColumn,this),this.isDefaultSort=e(this.isDefaultSort,this),this.isSortColumn=e(this.isSortColumn,this),this.currentSortOptionLabel=e(this.currentSortOptionLabel,this),this.sortColumnPresent=e(this.sortColumnPresent,this),this.setDefaultSort=e(this.setDefaultSort,this),this.stopSortingBy=e(this.stopSortingBy,this),this.sortBy=e(this.sortBy,this),this.columns=ko.observableArray([]),this.directions=ko.observableArray([]),this.sortOptions=ko.observableArray([]),this.show_sort_label=ko.observable(!1)}return t.prototype.sortBy=function(e,t){var s,i;return(s=this.columns.indexOf(e))>=0?i="asc"===this.directions()[s]?"desc":"asc":(e||(e="default"),i=t||"asc"),null==e||""===e?(this.columns([]),this.directions([])):"default"===e||"relevancy"===e?(this.columns([e]),this.directions([i])):(this.stopSortingBy("default"),this.stopSortingBy("relevancy"),this.stopSortingBy(e),this.columns.unshift(e),this.directions.unshift(i))},t.prototype.stopSortingBy=function(e){var t;if((t=this.columns.indexOf(e))>=0)return this.columns.splice(t,1),this.directions.splice(t,1)},t.prototype.setDefaultSort=function(){var e;return this.sortOptions().length>0&&!this.sortColumnPresent()?(e=this.sortOptions()[0],this.sortBy(e.field,e.sort_direction)):this.sortBy(null)},t.prototype.sortColumnPresent=function(){return this.columns().length>0},t.prototype.currentSortOptionLabel=function(){var e,t;return(e=_.find(this.sortOptions(),(t=this,function(e){return e.field===t.primarySortColumn()})))?e.label:""},t.prototype.isSortColumn=function(e,t){return _(this.columns()).some((s=this,function(i,n){return i===e&&s.directions()[n]===t}));var s},t.prototype.isDefaultSort=function(){var e;return 0===(e=this.columns()).length||1===e.length&&("default"===e[0]||"relevancy"===e[0])},t.prototype.primarySortColumn=function(){return this.columns()[0]},t.prototype.primarySortDirection=function(){return this.directions()[0]},t.prototype.sortParams=function(){return{sort_direction:this.directions().join(","),sort_column:this.columns().join(",")}},t.prototype.setFromParams=function(e){if(null!=e.sort_column&&(""===e.sort_column?this.columns([]):this.columns(e.sort_column.split(","))),null!=e.sort_direction)return""===e.sort_direction?this.directions([]):this.directions(e.sort_direction.split(","))},t}()}.call(this);